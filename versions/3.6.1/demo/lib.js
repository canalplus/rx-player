!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t():"function"==typeof define&&define.amd?define([],t):"object"==typeof exports?exports.RxPlayer=t():e.RxPlayer=t()}(window,function(){return function(e){var t={};function n(r){if(t[r])return t[r].exports;var i=t[r]={i:r,l:!1,exports:{}};return e[r].call(i.exports,i,i.exports,n),i.l=!0,i.exports}return n.m=e,n.c=t,n.d=function(e,t,r){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var i in e)n.d(r,i,function(t){return e[t]}.bind(null,i));return r},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=110)}([function(e,t,n){"use strict";var r=n(27),i="NONE",a=new(function(){function e(){this.error=r.a,this.warn=r.a,this.info=r.a,this.debug=r.a,this.LEVELS={NONE:0,ERROR:1,WARNING:2,INFO:3,DEBUG:4},this.currentLevel=i}var t=e.prototype;return t.setLevel=function(e){var t,n=this.LEVELS[e];n?(t=n,this.currentLevel=e):(t=0,this.currentLevel="NONE"),this.error=t>=this.LEVELS.ERROR?console.error.bind(console):r.a,this.warn=t>=this.LEVELS.WARNING?console.warn.bind(console):r.a,this.info=t>=this.LEVELS.INFO?console.info.bind(console):r.a,this.debug=t>=this.LEVELS.DEBUG?console.log.bind(console):r.a},t.getLevel=function(){return this.currentLevel},e}());t.a=a},function(e,t,n){"use strict";n.d(t,"p",function(){return i}),n.d(t,"f",function(){return a}),n.d(t,"g",function(){return o}),n.d(t,"j",function(){return u}),n.d(t,"e",function(){return s}),n.d(t,"h",function(){return c}),n.d(t,"a",function(){return l}),n.d(t,"b",function(){return f}),n.d(t,"c",function(){return d}),n.d(t,"d",function(){return p}),n.d(t,"n",function(){return b}),n.d(t,"o",function(){return g}),n.d(t,"k",function(){return h}),n.d(t,"l",function(){return v}),n.d(t,"m",function(){return m}),n.d(t,"i",function(){return y});var r=n(9);function i(e){for(var t=e.length,n=new Uint8Array(t),r=0;r<t;r++)n[r]=255&e.charCodeAt(r);return n}function a(e){return String.fromCharCode.apply(null,e)}function o(e){for(var t="",n=e.length,r=0;r<n;r+=2)t+=String.fromCharCode(e[r]);return t}function u(e){for(var t=e.length,n=new Uint8Array(t/2),r=0,i=0;r<t;r+=2,i++)n[i]=255&parseInt(e.substr(r,2),16);return n}function s(e,t){void 0===t&&(t="");for(var n="",r=0;r<e.byteLength;r++)n+=(e[r]>>>4).toString(16),n+=(15&e[r]).toString(16),t.length&&r<e.byteLength-1&&(n+=t);return n}function c(){for(var e,t=arguments.length,n=-1,r=0;++n<t;)r+="number"==typeof(e=n<0||arguments.length<=n?void 0:arguments[n])?e:e.length;var i=new Uint8Array(r),a=0;for(n=-1;++n<t;)"number"==typeof(e=n<0||arguments.length<=n?void 0:arguments[n])?a+=e:e.length>0&&(i.set(e,a),a+=e.length);return i}function l(e,t){return(e[t+0]<<8)+(e[t+1]<<0)}function f(e,t){return 65536*e[t+0]+256*e[t+1]+e[t+2]}function d(e,t){return 16777216*e[t+0]+65536*e[t+1]+256*e[t+2]+e[t+3]}function p(e,t){return 4294967296*(16777216*e[t+0]+65536*e[t+1]+256*e[t+2]+e[t+3])+16777216*e[t+4]+65536*e[t+5]+256*e[t+6]+e[t+7]}function h(e){return new Uint8Array([e>>>8&255,255&e])}function v(e){return new Uint8Array([e>>>24&255,e>>>16&255,e>>>8&255,255&e])}function m(e){var t=e%4294967296,n=(e-t)/4294967296;return new Uint8Array([n>>>24&255,n>>>16&255,n>>>8&255,255&n,t>>>24&255,t>>>16&255,t>>>8&255,255&t])}function b(e,t){return(e[t+0]<<0)+(e[t+1]<<8)}function g(e,t){return e[t+0]+256*e[t+1]+65536*e[t+2]+16777216*e[t+3]}function y(e){Object(r.b)(16===e.length,"UUID length should be 16");var t=i(e),n=t[0],a=t[1],o=t[2],u=t[3],c=t[4],l=t[5],f=t[6],d=t[7],p=t.subarray(8,10),h=t.subarray(10,16),v=new Uint8Array(16);return v[0]=u,v[1]=o,v[2]=a,v[3]=n,v[4]=l,v[5]=c,v[6]=d,v[7]=f,v.set(p,8),v.set(h,10),s(v)}},function(e,t,n){"use strict";t.a={DEFAULT_UNMUTED_VOLUME:.1,DEFAULT_REQUEST_TIMEOUT:3e4,DEFAULT_TEXT_TRACK_MODE:"native",DEFAULT_AUTO_PLAY:!1,DEFAULT_SHOW_NATIVE_SUBTITLE:!0,DEFAULT_WANTED_BUFFER_AHEAD:30,DEFAULT_MAX_BUFFER_AHEAD:1/0,DEFAULT_MAX_BUFFER_BEHIND:1/0,DEFAULT_INITIAL_BITRATES:{audio:0,video:0,other:0},DEFAULT_MAX_BITRATES:{audio:1/0,video:1/0,other:1/0},INACTIVITY_DELAY:6e4,DEFAULT_THROTTLE_WHEN_HIDDEN:!1,DEFAULT_LIMIT_VIDEO_WIDTH:!1,DEFAULT_LIVE_GAP:10,DEFAULT_SUGGESTED_PRESENTATION_DELAY:{SMOOTH:10,DASH:10},DISCONTINUITY_THRESHOLD:1,BITRATE_REBUFFERING_RATIO:1.5,BUFFER_GC_GAPS:{CALM:240,BEEFY:30},DEFAULT_MAX_MANIFEST_REQUEST_RETRY:4,DEFAULT_MAX_PIPELINES_RETRY_ON_ERROR:4,DEFAULT_MAX_PIPELINES_RETRY_ON_OFFLINE:1/0,INITIAL_BACKOFF_DELAY_BASE:200,MAX_BACKOFF_DELAY_BASE:3e3,SAMPLING_INTERVAL_MEDIASOURCE:1e3,SAMPLING_INTERVAL_NO_MEDIASOURCE:500,ABR_MINIMUM_TOTAL_BYTES:35e4,ABR_MINIMUM_CHUNK_SIZE:16e3,ABR_STARVATION_FACTOR:.72,ABR_REGULAR_FACTOR:.9,ABR_STARVATION_GAP:5,OUT_OF_STARVATION_GAP:7,ABR_FAST_EMA:2,ABR_SLOW_EMA:10,RESUME_GAP_AFTER_SEEKING:1.5,RESUME_GAP_AFTER_NOT_ENOUGH_DATA:.5,RESUME_GAP_AFTER_BUFFERING:5,STALL_GAP:.5,MAX_TIME_MISSING_FROM_COMPLETE_SEGMENT:.12,MAX_BUFFERED_DISTANCE:.1,MINIMUM_SEGMENT_SIZE:.2,MAXIMUM_HTML_TEXT_TRACK_UPDATE_INTERVAL:50,BUFFER_PADDING:{audio:{high:1,low:1},video:{high:8,low:2},other:{high:1,low:1}},SEGMENT_PRIORITIES_STEPS:[6,14],EME_DEFAULT_WIDEVINE_ROBUSTNESSES:["HW_SECURE_ALL","HW_SECURE_DECODE","HW_SECURE_CRYPTO","SW_SECURE_DECODE","SW_SECURE_CRYPTO"],EME_KEY_SYSTEMS:{clearkey:["webkit-org.w3.clearkey","org.w3.clearkey"],widevine:["com.widevine.alpha"],playready:["com.microsoft.playready","com.chromecast.playready","com.youtube.playready"]},EME_MAX_SIMULTANEOUS_MEDIA_KEY_SESSIONS:50,FORCED_ENDED_THRESHOLD:.001,ADAPTATION_SWITCH_BUFFER_PADDINGS:{video:{before:.5,after:1},audio:{before:.5,after:2},text:{before:0,after:0},image:{before:0,after:0}}}},function(e,t,n){"use strict";n.d(t,"a",function(){return i});
/*! *****************************************************************************
Copyright (c) Microsoft Corporation. All rights reserved.
Licensed under the Apache License, Version 2.0 (the "License"); you may not use
this file except in compliance with the License. You may obtain a copy of the
License at http://www.apache.org/licenses/LICENSE-2.0

THIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
KIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED
WARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,
MERCHANTABLITY OR NON-INFRINGEMENT.

See the Apache Version 2.0 License for specific language governing permissions
and limitations under the License.
***************************************************************************** */
var r=function(e,t){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)};function i(e,t){function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}},,,function(e,t,n){"use strict";t.a={transports:{},imageBuffer:null,imageParser:null,nativeTextTracksBuffer:null,nativeTextTracksParsers:{},htmlTextTracksBuffer:null,htmlTextTracksParsers:{},emeManager:null,directfile:null}},function(e,t,n){"use strict";
/*
object-assign
(c) Sindre Sorhus
@license MIT
*/var r=Object.getOwnPropertySymbols,i=Object.prototype.hasOwnProperty,a=Object.prototype.propertyIsEnumerable;e.exports=function(){try{if(!Object.assign)return!1;var e=new String("abc");if(e[5]="de","5"===Object.getOwnPropertyNames(e)[0])return!1;for(var t={},n=0;n<10;n++)t["_"+String.fromCharCode(n)]=n;if("0123456789"!==Object.getOwnPropertyNames(t).map(function(e){return t[e]}).join(""))return!1;var r={};return"abcdefghijklmnopqrst".split("").forEach(function(e){r[e]=e}),"abcdefghijklmnopqrst"===Object.keys(Object.assign({},r)).join("")}catch(e){return!1}}()?Object.assign:function(e,t){for(var n,o,u=function(e){if(null===e||void 0===e)throw new TypeError("Object.assign cannot be called with null or undefined");return Object(e)}(e),s=1;s<arguments.length;s++){for(var c in n=Object(arguments[s]))i.call(n,c)&&(u[c]=n[c]);if(r){o=r(n);for(var l=0;l<o.length;l++)a.call(n,o[l])&&(u[o[l]]=n[o[l]])}}return u}},function(e,t,n){"use strict";var r=n(136),i=n(13),a=n(35),o=new i.a(a.a);var u=n(135),s=n(140),c=n(64),l=n(137),f=n(138),d=n(3),p=n(10),h=n(38);function v(e,t){return void 0===t&&(t=h.a),function(n){return n.lift(new m(e,t))}}var m=function(){function e(e,t){this.dueTime=e,this.scheduler=t}return e.prototype.call=function(e,t){return t.subscribe(new b(e,this.dueTime,this.scheduler))},e}(),b=function(e){function t(t,n,r){var i=e.call(this,t)||this;return i.dueTime=n,i.scheduler=r,i.debouncedSubscription=null,i.lastValue=null,i.hasValue=!1,i}return d.a(t,e),t.prototype._next=function(e){this.clearDebounce(),this.lastValue=e,this.hasValue=!0,this.add(this.debouncedSubscription=this.scheduler.schedule(g,this.dueTime,this))},t.prototype._complete=function(){this.debouncedNext(),this.destination.complete()},t.prototype.debouncedNext=function(){if(this.clearDebounce(),this.hasValue){var e=this.lastValue;this.lastValue=null,this.hasValue=!1,this.destination.next(e)}},t.prototype.clearDebounce=function(){var e=this.debouncedSubscription;null!==e&&(this.remove(e),e.unsubscribe(),this.debouncedSubscription=null)},t}(p.a);function g(e){e.debouncedNext()}var y=n(139),_=n(141),O=n(2),E=n(24);n.d(t,"a",function(){return k}),n.d(t,"q",function(){return I}),n.d(t,"j",function(){return B}),n.d(t,"o",function(){return L}),n.d(t,"i",function(){return N}),n.d(t,"m",function(){return D}),n.d(t,"l",function(){return M}),n.d(t,"c",function(){return P}),n.d(t,"d",function(){return C}),n.d(t,"n",function(){return U}),n.d(t,"p",function(){return F}),n.d(t,"k",function(){return $}),n.d(t,"b",function(){return V}),n.d(t,"g",function(){return z}),n.d(t,"e",function(){return H}),n.d(t,"f",function(){return G}),n.d(t,"h",function(){return K});var w=O.a.INACTIVITY_DELAY,T=window.devicePixelRatio||1;function j(e,t){return t.filter(function(t){return function(e,t){var n=document.createElement(e.tagName),r="on"+t;return r in n||(n.setAttribute(r,"return;"),"function"==typeof n[r])}(e,t)})[0]}function S(e,t){var n,i=function(e,t){return e.reduce(function(e,n){return e.concat((t||E.a).map(function(e){return e+n}))},[])}(e,t);return function(e){return e instanceof E.b?(void 0===n&&(n=j(e,i)),n?Object(r.a)(e,n):o):u.a.apply(void 0,i.map(function(t){return Object(r.a)(e,t)}))}}function x(){var e;null!=document.hidden?e="":null!=document.mozHidden?e="moz":null!=document.msHidden?e="ms":null!=document.webkitHidden&&(e="webkit");var t=e?e+"Hidden":"hidden",n=e+"visibilitychange";return Object(r.a)(document,n).pipe(Object(c.a)(function(){return document[t]}))}var A=x().pipe(Object(f.a)(function(e){return!e})),R=x().pipe(v(w),Object(f.a)(function(e){return e}));function k(){return Object(u.a)(A,R).pipe(Object(y.a)(!1))}function I(e){return Object(u.a)(Object(s.a)(2e4).pipe(Object(l.a)(null)),Object(r.a)(window,"resize").pipe(Object(l.a)(null)).pipe(v(500))).pipe(Object(y.a)(null),Object(c.a)(function(){return e.clientWidth*T}),Object(_.a)())}var N=S(["loadedmetadata"]),D=S(["seeking"]),M=S(["seeked"]),P=S(["ended"]),C=(S(["timeupdate"]),S(["fullscreenchange","FullscreenChange"],E.a.concat("MS"))),B=function(e){return Object(u.a)(S(["play"])(e),S(["pause"])(e))},L=function(e){return Object(u.a)(S(["addtrack"])(e),S(["removetrack"])(e))},U=S(["sourceopen","webkitsourceopen"]),F=S(["update"]),$=S(["onremovesourcebuffer"]),V=S(["encrypted","needkey"]),z=S(["keymessage","message"]),H=S(["keyadded","ready"]),G=S(["keyerror","error"]),K=S(["keystatuseschange"])},function(e,t,n){"use strict";function r(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function i(e){var t="function"==typeof Map?new Map:void 0;return(i=function(e){if(null===e||!function(e){return-1!==Function.toString.call(e).indexOf("[native code]")}(e))return e;if("function"!=typeof e)throw new TypeError("Super expression must either be null or a function");if(void 0!==t){if(t.has(e))return t.get(e);t.set(e,n)}function n(){return a(e,arguments,u(this).constructor)}return n.prototype=Object.create(e.prototype,{constructor:{value:n,enumerable:!1,writable:!0,configurable:!0}}),o(n,e)})(e)}function a(e,t,n){return(a=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(e){return!1}}()?Reflect.construct:function(e,t,n){var r=[null];r.push.apply(r,t);var i=new(Function.bind.apply(e,r));return n&&o(i,n.prototype),i}).apply(null,arguments)}function o(e,t){return(o=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function u(e){return(u=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var s=function(e){function t(n){var i;return i=e.call(this)||this,Object.setPrototypeOf(r(r(i)),t.prototype),i.name="AssertionError",i.message=n,Error.captureStackTrace&&Error.captureStackTrace(r(r(i)),t),i}return function(e,t){e.prototype=Object.create(t.prototype),e.prototype.constructor=e,e.__proto__=t}(t,e),t}(i(Error));function c(e,t){if(!e)throw new s(t||"invalid assertion")}function l(e,t,n){for(var r in void 0===n&&(n="object"),c(null!=e,n+" should be an object"),t)t.hasOwnProperty(r)&&c(typeof e[r]===t[r],n+" should have property "+r+" as a "+t[r])}n.d(t,"b",function(){return c}),n.d(t,"a",function(){return l})},function(e,t,n){"use strict";n.d(t,"a",function(){return l});var r=n(3),i=n(48),a=n(57),o=n(15),u=n(51),s=n(32),c=n(50),l=function(e){function t(t,n,r){var i=e.call(this)||this;switch(i.syncErrorValue=null,i.syncErrorThrown=!1,i.syncErrorThrowable=!1,i.isStopped=!1,i._parentSubscription=null,arguments.length){case 0:i.destination=a.a;break;case 1:if(!t){i.destination=a.a;break}if("object"==typeof t){if(d(t)){var o=t[u.a]();i.syncErrorThrowable=o.syncErrorThrowable,i.destination=o,o._addParentTeardownLogic(i)}else i.syncErrorThrowable=!0,i.destination=new f(i,t);break}default:i.syncErrorThrowable=!0,i.destination=new f(i,t,n,r)}return i}return r.a(t,e),t.prototype[u.a]=function(){return this},t.create=function(e,n,r){var i=new t(e,n,r);return i.syncErrorThrowable=!1,i},t.prototype.next=function(e){this.isStopped||this._next(e)},t.prototype.error=function(e){this.isStopped||(this.isStopped=!0,this._error(e),this._unsubscribeParentSubscription())},t.prototype.complete=function(){this.isStopped||(this.isStopped=!0,this._complete(),this._unsubscribeParentSubscription())},t.prototype.unsubscribe=function(){this.closed||(this.isStopped=!0,e.prototype.unsubscribe.call(this))},t.prototype._next=function(e){this.destination.next(e)},t.prototype._error=function(e){this.destination.error(e),this.unsubscribe()},t.prototype._complete=function(){this.destination.complete(),this.unsubscribe()},t.prototype._addParentTeardownLogic=function(e){e!==this&&(this._parentSubscription=this.add(e))},t.prototype._unsubscribeParentSubscription=function(){null!==this._parentSubscription&&this._parentSubscription.unsubscribe()},t.prototype._unsubscribeAndRecycle=function(){var e=this._parent,t=this._parents;return this._parent=null,this._parents=null,this.unsubscribe(),this.closed=!1,this.isStopped=!1,this._parent=e,this._parents=t,this._parentSubscription=null,this},t}(o.a),f=function(e){function t(t,n,r,o){var u,s=e.call(this)||this;s._parentSubscriber=t;var c=s;return Object(i.a)(n)?u=n:n&&(u=n.next,r=n.error,o=n.complete,n!==a.a&&(c=Object.create(n),Object(i.a)(c.unsubscribe)&&s.add(c.unsubscribe.bind(c)),c.unsubscribe=s.unsubscribe.bind(s))),s._context=c,s._next=u,s._error=r,s._complete=o,s}return r.a(t,e),t.prototype.next=function(e){if(!this.isStopped&&this._next){var t=this._parentSubscriber;s.a.useDeprecatedSynchronousErrorHandling&&t.syncErrorThrowable?this.__tryOrSetError(t,this._next,e)&&this.unsubscribe():this.__tryOrUnsub(this._next,e)}},t.prototype.error=function(e){if(!this.isStopped){var t=this._parentSubscriber,n=s.a.useDeprecatedSynchronousErrorHandling;if(this._error)n&&t.syncErrorThrowable?(this.__tryOrSetError(t,this._error,e),this.unsubscribe()):(this.__tryOrUnsub(this._error,e),this.unsubscribe());else if(t.syncErrorThrowable)n?(t.syncErrorValue=e,t.syncErrorThrown=!0):Object(c.a)(e),this.unsubscribe();else{if(this.unsubscribe(),n)throw e;Object(c.a)(e)}}},t.prototype.complete=function(){var e=this;if(!this.isStopped){var t=this._parentSubscriber;if(this._complete){var n=function(){return e._complete.call(e._context)};s.a.useDeprecatedSynchronousErrorHandling&&t.syncErrorThrowable?(this.__tryOrSetError(t,n),this.unsubscribe()):(this.__tryOrUnsub(n),this.unsubscribe())}else this.unsubscribe()}},t.prototype.__tryOrUnsub=function(e,t){try{e.call(this._context,t)}catch(e){if(this.unsubscribe(),s.a.useDeprecatedSynchronousErrorHandling)throw e;Object(c.a)(e)}},t.prototype.__tryOrSetError=function(e,t,n){if(!s.a.useDeprecatedSynchronousErrorHandling)throw new Error("bad call");try{t.call(this._context,n)}catch(t){return s.a.useDeprecatedSynchronousErrorHandling?(e.syncErrorValue=t,e.syncErrorThrown=!0,!0):(Object(c.a)(t),!0)}return!1},t.prototype._unsubscribe=function(){var e=this._parentSubscriber;this._context=null,this._parentSubscriber=null,e.unsubscribe()},t}(l);function d(e){return e instanceof l||"syncErrorThrowable"in e&&e[u.a]}},function(e,t,n){"use strict";function r(e,t,n){if("function"==typeof Array.prototype.includes)return e.includes(t,n);var r=e.length>>>0;if(0===r)return!1;for(var i=0|n,a=Math.max(i>=0?i:r-Math.abs(i),0),o=function(e,t){return e===t||"number"==typeof e&&"number"==typeof t&&isNaN(e)&&isNaN(t)};a<r;){if(o(e[a],t))return!0;a++}return!1}n.d(t,"a",function(){return r})},function(e,t,n){"use strict";n.d(t,"j",function(){return k}),n.d(t,"a",function(){return T}),n.d(t,"b",function(){return O}),n.d(t,"e",function(){return _}),n.d(t,"c",function(){return S}),n.d(t,"d",function(){return b}),n.d(t,"f",function(){return m}),n.d(t,"g",function(){return A}),n.d(t,"h",function(){return j}),n.d(t,"i",function(){return R}),n.d(t,"k",function(){return x}),n.d(t,"l",function(){return g}),n.d(t,"m",function(){return y});var r=n(76),i=n(136),a=n(13),o=n(134),u=n(143),s=n(137),c=n(0),l=n(17),f=n(40),d=n(45),p=n(24),h=n(8),v=n(132);function m(e){return!!p.d&&("function"!=typeof p.d.isTypeSupported||p.d.isTypeSupported(e))}function b(){return"function"==typeof v.b}function g(){return p.h}function y(){return p.h}function _(e){return e.readyState>=p.e.HAVE_METADATA?Object(r.a)(void 0):h.i(e).pipe(Object(u.a)(1),Object(s.a)(void 0))}function O(e){return e.readyState>=p.e.HAVE_ENOUGH_DATA?Object(r.a)(void 0):Object(i.a)(e,"canplay").pipe(Object(u.a)(1),Object(s.a)(void 0))}if(window.WebKitSourceBuffer&&!window.WebKitSourceBuffer.prototype.addEventListener){var E=window.WebKitSourceBuffer.prototype;for(var w in f.a.prototype)f.a.prototype.hasOwnProperty(w)&&(E[w]=f.a.prototype[w]);E._listeners=[],E.__emitUpdate=function(e,t){var n=this;setTimeout(function(){n.trigger(e,t),n.updating=!1,n.trigger("updateend")},0)},E.appendBuffer=function(e){if(this.updating)throw new Error("updating");this.trigger("updatestart"),this.updating=!0;try{this.append(e)}catch(e){return void this.__emitUpdate("error",e)}this.__emitUpdate("update")}}function T(e,t){var n,r;if(p.h){var i=e.textTracks.length;(n=i>0?e.textTracks[i-1]:e.addTextTrack("subtitles")).mode=t?n.HIDDEN:n.SHOWING}else r=document.createElement("track"),e.appendChild(r),n=r.track,r.kind="subtitles",n.mode=t?"hidden":"showing";return{track:n,trackElement:r}}function j(e,t,n,r){return p.g&&r&&"timeupdate"===n&&!!t&&t.end-e>10}function S(e){e.src="",e.removeAttribute("src")}function x(e,t){return a.a.create(function(n){return c.a.info("Setting URL to Element",t,e),e.src=t,n.next(void 0),function(){S(e)}})}function A(){return!1===navigator.onLine}function R(e,t,n){if(!p.f)throw new Error("VTT cues not supported in your target");return e>=t?(c.a.warn("Invalid cue times: "+e+" - "+t),null):new p.f(e,t,n)}function k(e){return Object(o.a)(function(){return Object(d.a)(function(){return Object(l.a)(e.play()).pipe(Object(s.a)(void 0))})})}},function(e,t,n){"use strict";var r=n(10),i=n(51),a=n(57);var o=n(42),u=n(35);function s(e){return e?1===e.length?e[0]:function(t){return e.reduce(function(e,t){return t(e)},t)}:u.a}var c=n(32);n.d(t,"a",function(){return l});var l=function(){function e(e){this._isScalar=!1,e&&(this._subscribe=e)}return e.prototype.lift=function(t){var n=new e;return n.source=this,n.operator=t,n},e.prototype.subscribe=function(e,t,n){var o=this.operator,u=function(e,t,n){if(e){if(e instanceof r.a)return e;if(e[i.a])return e[i.a]()}return e||t||n?new r.a(e,t,n):new r.a(a.a)}(e,t,n);if(o?o.call(u,this.source):u._addParentTeardownLogic(this.source||c.a.useDeprecatedSynchronousErrorHandling&&!u.syncErrorThrowable?this._subscribe(u):this._trySubscribe(u)),c.a.useDeprecatedSynchronousErrorHandling&&u.syncErrorThrowable&&(u.syncErrorThrowable=!1,u.syncErrorThrown))throw u.syncErrorValue;return u},e.prototype._trySubscribe=function(e){try{return this._subscribe(e)}catch(t){c.a.useDeprecatedSynchronousErrorHandling&&(e.syncErrorThrown=!0,e.syncErrorValue=t),e.error(t)}},e.prototype.forEach=function(e,t){var n=this;return new(t=f(t))(function(t,r){var i;i=n.subscribe(function(t){try{e(t)}catch(e){r(e),i&&i.unsubscribe()}},r,t)})},e.prototype._subscribe=function(e){var t=this.source;return t&&t.subscribe(e)},e.prototype[o.a]=function(){return this},e.prototype.pipe=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return 0===e.length?this:s(e)(this)},e.prototype.toPromise=function(e){var t=this;return new(e=f(e))(function(e,n){var r;t.subscribe(function(e){return r=e},function(e){return n(e)},function(){return e(r)})})},e.create=function(t){return new e(t)},e}();function f(e){if(e||(e=c.a.Promise||Promise),!e)throw new Error("no Promise impl found");return e}},function(e,t,n){"use strict";e.exports=function(e,t,n){if("function"==typeof Array.prototype.find)return e.find(t,n);n=n||this;var r,i=e.length;if("function"!=typeof t)throw new TypeError(t+" is not a function");for(r=0;r<i;r++)if(t.call(n,e[r],r,e))return e[r]}},function(e,t,n){"use strict";var r=n(41),i=n(68),a=n(48),o=n(58),u=n(31);function s(e){return Error.call(this),this.message=e?e.length+" errors occurred during unsubscription:\n"+e.map(function(e,t){return t+1+") "+e.toString()}).join("\n  "):"",this.name="UnsubscriptionError",this.errors=e,this}s.prototype=Object.create(Error.prototype);var c=s;n.d(t,"a",function(){return l});var l=function(){function e(e){this.closed=!1,this._parent=null,this._parents=null,this._subscriptions=null,e&&(this._unsubscribe=e)}return e.prototype.unsubscribe=function(){var e,t=!1;if(!this.closed){var n=this._parent,s=this._parents,l=this._unsubscribe,d=this._subscriptions;this.closed=!0,this._parent=null,this._parents=null,this._subscriptions=null;for(var p=-1,h=s?s.length:0;n;)n.remove(this),n=++p<h&&s[p]||null;if(Object(a.a)(l))Object(o.a)(l).call(this)===u.a&&(t=!0,e=e||(u.a.e instanceof c?f(u.a.e.errors):[u.a.e]));if(Object(r.a)(d))for(p=-1,h=d.length;++p<h;){var v=d[p];if(Object(i.a)(v))if(Object(o.a)(v.unsubscribe).call(v)===u.a){t=!0,e=e||[];var m=u.a.e;m instanceof c?e=e.concat(f(m.errors)):e.push(m)}}if(t)throw new c(e)}},e.prototype.add=function(t){if(!t||t===e.EMPTY)return e.EMPTY;if(t===this)return this;var n=t;switch(typeof t){case"function":n=new e(t);case"object":if(n.closed||"function"!=typeof n.unsubscribe)return n;if(this.closed)return n.unsubscribe(),n;if("function"!=typeof n._addParent){var r=n;(n=new e)._subscriptions=[r]}break;default:throw new Error("unrecognized teardown "+t+" added to Subscription.")}return(this._subscriptions||(this._subscriptions=[])).push(n),n._addParent(this),n},e.prototype.remove=function(e){var t=this._subscriptions;if(t){var n=t.indexOf(e);-1!==n&&t.splice(n,1)}},e.prototype._addParent=function(e){var t=this._parent,n=this._parents;t&&t!==e?n?-1===n.indexOf(e)&&n.push(e):this._parents=[e]:this._parent=e},e.EMPTY=function(e){return e.closed=!0,e}(new e),e}();function f(e){return e.reduce(function(e,t){return e.concat(t instanceof c?t.errors:t)},[])}},function(e,t,n){"use strict";n.d(t,"a",function(){return l}),n.d(t,"b",function(){return p}),n.d(t,"c",function(){return m}),n.d(t,"d",function(){return d}),n.d(t,"e",function(){return v}),n.d(t,"f",function(){return f}),n.d(t,"g",function(){return h}),n.d(t,"h",function(){return b}),n.d(t,"i",function(){return u}),n.d(t,"j",function(){return y});var r=1/60;function i(e,t){return Math.abs(e-t)<r}function a(e,t){return{start:Math.min(e.start,t.start),end:Math.max(e.end,t.end)}}function o(e,t){return e.end<=t.start}function u(e,t){var n=e.start,r=e.end;return n<=t&&t<r}function s(e,t){return u(e,t.start)||e.start<t.end&&t.end<e.end||u(t,e.start)}function c(e,t){return i(t.start,e.end)||i(t.end,e.start)}function l(e){for(var t=[],n=0;n<e.length;n++)t.push({start:e.start(n),end:e.end(n)});return t}function f(e,t){for(var n=e.length-1;n>=0;n--){var r=e.start(n);if(t>=r){var i=e.end(n);if(t<i)return{start:r,end:i}}}return null}function d(e,t){for(var n=e.length,r=0;r<n;r++){var i=e.start(r);if(t<i)return i-t}return 1/0}function p(e,t){for(var n=null,r=[],i=0;i<e.length;i++){var a=e.start(i),o=e.end(i);t<a||t>=o?r.push({start:a,end:o}):n={start:a,end:o}}return{outerRanges:r,innerRange:n}}function h(e,t){var n=f(e,t);return n?n.end-n.start:0}function v(e,t){var n=f(e,t);return n?t-n.start:0}function m(e,t){var n=f(e,t);return n?n.end-t:1/0}function b(e,t){if(t.start===t.end)return e;for(var n=t,r=0;r<e.length;r++){var i=e[r],u=s(n,i),l=c(n,i);if(u||l)n=a(n,i),e.splice(r--,1);else if(0===r){if(o(n,e[0]))break}else if(o(e[r-1],n)&&o(n,i))break}return e.splice(r,0,n),function(e){for(var t=1;t<e.length;t++){var n=e[t-1],r=e[t];if(c(n,r)){var i=a(n,r);e.splice(--t,2,i)}}return e}(function(e){for(var t=0;t<e.length;t++){var n=e[t];n.start===n.end&&e.splice(t++,1)}return e}(e))}function g(e,t){for(var n=[],r=0;r<t.length;r++)s(e,t[r])&&n.push(t[r]);return n}function y(e,t){for(var n=[],r=0;r<e.length;r++){var i=e[r],a=g(i,t);if(a.length)for(var o=0;o<a.length;o++){var u=a[o];n.push({start:Math.max(i.start,u.start),end:Math.min(i.end,u.end)})}}return n}},function(e,t,n){"use strict";var r=n(13),i=n(44),a=n(76);t.a=function(e){if(e instanceof r.a)return e;if(e&&"function"==typeof e.subscribe){var t=e;return new r.a(function(e){var n=t.subscribe(function(t){e.next(t)},function(t){e.error(t)},function(){e.complete()});return function(){n&&n.dispose?n.dispose():n&&n.unsubscribe&&n.unsubscribe()}})}return e&&"function"==typeof e.then?Object(i.a)(e):Object(a.a)(e)}},function(e,t,n){"use strict";n.d(t,"a",function(){return i});var r=n(23);function i(e){return!!e&&!!e.type&&Object.keys(r.b).indexOf(e.type)>=0}},function(e,t,n){"use strict";n.d(t,"a",function(){return i});var r=0;function i(){var e=0;return r<Number.MAX_VALUE&&(e=r+1),r=e,""+e}},function(e,t,n){"use strict";n.d(t,"c",function(){return c}),n.d(t,"d",function(){return i}),n.d(t,"e",function(){return r}),n.d(t,"f",function(){return a}),n.d(t,"g",function(){return o}),n.d(t,"h",function(){return s}),n.d(t,"i",function(){return u}),n.d(t,"a",function(){return f}),n.d(t,"b",function(){return l});var r=/^(\d{2,}):(\d{2}):(\d{2}):(\d{2})\.?(\d+)?$/,i=/^(?:(\d{2,}):)?(\d{2}):(\d{2})$/,a=/^(?:(\d{2,}):)?(\d{2}):(\d{2}\.\d{2,})$/,o=/^(\d*\.?\d*)f$/,u=/^(\d*\.?\d*)t$/,s=/^(?:(\d*\.?\d*)h)?(?:(\d*\.?\d*)m)?(?:(\d*\.?\d*)s)?(?:(\d*\.?\d*)ms)?$/,c=/^(\d{1,2}|100)% (\d{1,2}|100)%$/,l=/^#([0-9A-f]{2})([0-9A-f]{2})([0-9A-f]{2})([0-9A-f]{2})$/,f=/^#([0-9A-f])([0-9A-f])([0-9A-f])([0-9A-f])$/},function(e,t,n){"use strict";n.d(t,"a",function(){return a});var r=n(36),i=n(69);function a(e,t,n,a,o){if(void 0===o&&(o=new r.a(e,n,a)),!o.closed)return Object(i.a)(t)(o)}},function(e,t,n){"use strict";n.d(t,"a",function(){return i});var r=n(3),i=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return r.a(t,e),t.prototype.notifyNext=function(e,t,n,r,i){this.destination.next(t)},t.prototype.notifyError=function(e,t){this.destination.error(e)},t.prototype.notifyComplete=function(e){this.destination.complete()},t}(n(10).a)},function(e,t,n){"use strict";n.d(t,"b",function(){return r}),n.d(t,"c",function(){return i}),n.d(t,"a",function(){return a});var r={NETWORK_ERROR:"NETWORK_ERROR",MEDIA_ERROR:"MEDIA_ERROR",ENCRYPTED_MEDIA_ERROR:"ENCRYPTED_MEDIA_ERROR",OTHER_ERROR:"OTHER_ERROR"},i={TIMEOUT:"TIMEOUT",ERROR_EVENT:"ERROR_EVENT",ERROR_HTTP_CODE:"ERROR_HTTP_CODE",PARSE_ERROR:"PARSE_ERROR"},a={PIPELINE_RESOLVE_ERROR:"PIPELINE_RESOLVE_ERROR",PIPELINE_LOAD_ERROR:"PIPELINE_LOAD_ERROR",PIPELINE_PARSING_ERROR:"PIPELINE_PARSING_ERROR",MANIFEST_PARSE_ERROR:"MANIFEST_PARSE_ERROR",MANIFEST_INCOMPATIBLE_CODECS_ERROR:"MANIFEST_INCOMPATIBLE_CODECS_ERROR",MANIFEST_UNSUPPORTED_ADAPTATION_TYPE:"MANIFEST_UNSUPPORTED_ADAPTATION_TYPE",MEDIA_STARTING_TIME_NOT_FOUND:"MEDIA_STARTING_TIME_NOT_FOUND",MEDIA_TIME_NOT_FOUND:"MEDIA_TIME_NOT_FOUND",MEDIA_IS_ENCRYPTED_ERROR:"MEDIA_IS_ENCRYPTED_ERROR",KEY_ERROR:"KEY_ERROR",KEY_STATUS_CHANGE_ERROR:"KEY_STATUS_CHANGE_ERROR",KEY_UPDATE_ERROR:"KEY_UPDATE_ERROR",KEY_LOAD_ERROR:"KEY_LOAD_ERROR",KEY_LOAD_TIMEOUT:"KEY_LOAD_TIMEOUT",KEY_GENERATE_REQUEST_ERROR:"KEY_GENERATE_REQUEST_ERROR",INCOMPATIBLE_KEYSYSTEMS:"INCOMPATIBLE_KEYSYSTEMS",LICENSE_SERVER_CERTIFICATE_ERROR:"LICENSE_SERVER_CERTIFICATE_ERROR",BUFFER_APPEND_ERROR:"BUFFER_APPEND_ERROR",BUFFER_FULL_ERROR:"BUFFER_FULL_ERROR",BUFFER_TYPE_UNKNOWN:"BUFFER_TYPE_UNKNOWN",MEDIA_ERR_BLOCKED_AUTOPLAY:"MEDIA_ERR_BLOCKED_AUTOPLAY",MEDIA_ERR_ABORTED:"MEDIA_ERR_ABORTED",MEDIA_ERR_NETWORK:"MEDIA_ERR_NETWORK",MEDIA_ERR_DECODE:"MEDIA_ERR_DECODE",MEDIA_ERR_SRC_NOT_SUPPORTED:"MEDIA_ERR_SRC_NOT_SUPPORTED",MEDIA_ERR_UNKNOWN:"MEDIA_ERR_UNKNOWN",MEDIA_SOURCE_NOT_SUPPORTED:"MEDIA_SOURCE_NOT_SUPPORTED",MEDIA_KEYS_NOT_SUPPORTED:"MEDIA_KEYS_NOT_SUPPORTED"}},function(e,t,n){"use strict";n.d(t,"a",function(){return i}),n.d(t,"b",function(){return a}),n.d(t,"d",function(){return u}),n.d(t,"c",function(){return s}),n.d(t,"h",function(){return l}),n.d(t,"g",function(){return f}),n.d(t,"e",function(){return d}),n.d(t,"f",function(){return o});var r=n(63),i=["","webkit","moz","ms"],a=window.HTMLElement,o=window.VTTCue||window.TextTrackCue,u=window.MediaSource||window.MozMediaSource||window.WebKitMediaSource||window.MSMediaSource,s=window.MediaKeys||window.MozMediaKeys||window.WebKitMediaKeys||window.MSMediaKeys;if(!s){var c=function(){throw new r.a("MEDIA_KEYS_NOT_SUPPORTED",null,!0)};s=function(){this.create=c,this.createSession=c,this.isTypeSupported=c,this.setServerCertificate=c}}var l="Microsoft Internet Explorer"===navigator.appName||"Netscape"===navigator.appName&&/(Trident|Edge)\//.test(navigator.userAgent),f=-1!==navigator.userAgent.toLowerCase().indexOf("firefox"),d={HAVE_NOTHING:0,HAVE_METADATA:1,HAVE_CURRENT_DATA:2,HAVE_FUTURE_DATA:3,HAVE_ENOUGH_DATA:4}},function(e,t,n){"use strict";n.d(t,"a",function(){return o});var r=n(13),i=n(15),a=n(72);function o(e,t){return t?new r.a(function(n){var r=new i.a,a=0;return r.add(t.schedule(function(){a!==e.length?(n.next(e[a++]),n.closed||r.add(this.schedule())):n.complete()})),r}):new r.a(Object(a.a)(e))}},function(e,t,n){"use strict";n.d(t,"a",function(){return i}),n.d(t,"b",function(){return a});var r=n(13),i=new r.a(function(e){return e.complete()});function a(e){return e?function(e){return new r.a(function(t){return e.schedule(function(){return t.complete()})})}(e):i}},function(e,t,n){"use strict";t.a=function(){}},function(e,t,n){"use strict";var r={loaded:function(){return{type:"loaded",value:!0}},manifestReady:function(e,t){return{type:"manifestReady",value:{abrManager:e,manifest:t}}},manifestUpdate:function(e){return{type:"manifestUpdate",value:{manifest:e}}},nullRepresentation:function(e,t){return{type:"representationChange",value:{type:e,representation:null,period:t}}},reloadingStream:function(){return{type:"reloading-stream",value:void 0}},speedChanged:function(e){return{type:"speedChanged",value:e}},stalled:function(e){return{type:"stalled",value:e}},warning:function(e){return{type:"warning",value:e}}};t.a=r},function(e,t,n){"use strict";var r=n(13),i=n(2),a=n(23),o=n(83),u=i.a.DEFAULT_REQUEST_TIMEOUT,s="json";t.a=function(e){var t={url:e.url,body:e.body,headers:e.headers,method:null==e.method?"GET":e.method,responseType:null==e.responseType?s:e.responseType,timeout:null==e.timeout?u:e.timeout};return r.a.create(function(n){var r=t.url,i=t.headers,u=t.method,s=t.responseType,c=t.timeout,l=t.body,f=new XMLHttpRequest;if(f.open(u,r,!0),c>=0&&(f.timeout=c),f.responseType=s,"document"===f.responseType&&f.overrideMimeType("text/xml"),i){var d=i;for(var p in d)d.hasOwnProperty(p)&&f.setRequestHeader(p,d[p])}var h=Date.now();return f.onerror=function(){var e=a.c.ERROR_EVENT;n.error(new o.a(f,r,e))},f.ontimeout=function(){var e=a.c.TIMEOUT;n.error(new o.a(f,r,e))},e.ignoreProgressEvents||(f.onprogress=function(e){var t=Date.now();n.next({type:"progress",value:{url:r,duration:t-h,sentTime:h,currentTime:t,size:e.loaded,totalSize:e.total}})}),f.onload=function(e){if(4===f.readyState)if(f.status>=200&&f.status<300){var t,i=Date.now(),u=e.total,s=f.status,c=f.responseType,l=f.responseURL||r;if(null==(t="json"===c?"string"!==f.response?f.response:function(e){try{return JSON.parse(e)}catch(e){return null}}(f.responseText):f.response)){var d=a.c.PARSE_ERROR;return void n.error(new o.a(f,l,d))}n.next({type:"response",value:{status:s,url:l,responseType:c,sentTime:h,receivedTime:i,duration:i-h,size:u,responseData:t}}),n.complete()}else{var p=a.c.ERROR_HTTP_CODE;n.error(new o.a(f,r,p))}},void 0!==l?f.send(l):f.send(),function(){f&&4!==f.readyState&&f.abort()}})}},function(e,t,n){"use strict";var r=n(14),i=n.n(r),a=n(11);function o(e,t,n){return"function"==typeof String.prototype.startsWith?e.startsWith(t,n):e.substr(n||0,t.length)===t}function u(e,t,n,r){for(var o={},u=e.slice(),s=0;s<=t.length-1;s++){var c=t[s];if(c){var l=function(){var e=void 0,t=void 0;if(c.nodeType===Node.ELEMENT_NODE)for(var s=c,l=0;l<=s.attributes.length-1;l++){var f=s.attributes[l],d=f.name;if("style"===d)e=f.value;else if("region"===d)t=f.value;else{var p=d.substr(4);if(Object(a.a)(u,p)&&(o[p]=f.value,u.splice(l,1),!u.length))return{v:o}}}if(e){var h=i()(n,function(t){return t.id===e});if(h)for(var v=0;v<=u.length-1;v++){var m=u[v];if(!o[m]&&h.style[m]){if(o[m]=h.style[m],u.splice(v,1),!u.length)return{v:o};v--}}}if(t){var b=i()(r,function(e){return e.id===t});if(b)for(var g=0;g<=u.length-1;g++){var y=u[g];if(!o[y]&&b.style[y]){if(o[y]=b.style[y],u.splice(g,1),!u.length)return{v:o};g--}}}}();if("object"==typeof l)return l.v}}return o}function s(e){if(e.nodeType!==Node.ELEMENT_NODE)return{};for(var t=e,n={},r=0;r<=t.attributes.length-1;r++){var i=t.attributes[r];if(o(i.name,"tts"))n[i.name.substr(4)]=i.value}return n}n.d(t,"a",function(){return u}),n.d(t,"b",function(){return s})},function(e,t,n){"use strict";n.d(t,"a",function(){return r});var r={e:{}}},function(e,t,n){"use strict";n.d(t,"a",function(){return i});var r=!1,i={Promise:void 0,set useDeprecatedSynchronousErrorHandling(e){e&&(new Error).stack;r=e},get useDeprecatedSynchronousErrorHandling(){return r}}},function(e,t,n){"use strict";function r(e){return e&&"function"==typeof e.schedule}n.d(t,"a",function(){return r})},function(e,t,n){"use strict";n.d(t,"b",function(){return l}),n.d(t,"d",function(){return s}),n.d(t,"a",function(){return c}),n.d(t,"c",function(){return u});var r=n(9),i=n(1),a=n(65);function o(e,t){for(var n,a=e.length,o=0,u=0;o+8<a&&(u=Object(i.c)(e,o),n=Object(i.c)(e,o+4),Object(r.b)(u>0,"out of range size"),n!==t);)o+=u;return o>=a?-1:(Object(r.b)(o+u<=a,"atom out of range"),o)}function u(e,t){var n=o(e,1936286840);if(-1===n)return null;var r=t,a=Object(i.c)(e,n),u=n+4+4,s=e[u];u+=8;var c,l=Object(i.c)(e,u);if(u+=4,0===s)c=Object(i.c)(e,u),u+=4,r+=Object(i.c)(e,u)+a,u+=4;else{if(1!==s)return null;c=Object(i.d)(e,u),u+=8,r+=Object(i.d)(e,u)+a,u+=8}var f=[];u+=2;var d=Object(i.a)(e,u);for(u+=2;--d>=0;){var p=Object(i.c)(e,u);u+=4;var h=2147483647&p;if(1===(2147483648&p)>>>31)throw new Error("not implemented");var v=Object(i.c)(e,u);u+=4,u+=4,f.push({time:c,duration:v,count:0,timescale:l,range:[r,r+h-1]}),c+=v,r+=h}return f}function s(e){var t=Object(a.c)(e);if(!t)return-1;var n=o(t,1952867444);if(-1===n)return-1;var r=n+4+4,u=t[r];return r+=4,u>1?-1:u?Object(i.d)(t,r):Object(i.c)(t,r)}function c(e){var t=Object(a.c)(e);if(!t)return-1;var n=o(t,1953658222);if(-1===n)return-1;var r=n+4+4,u=t[r];if(r+=1,u>1)return-1;var s=Object(i.b)(t,r);r+=3;var c=256&s,l=0;if(!c)return(l=function(e){var t=o(e,1952868452);if(-1===t)return-1;var n=t+4+4+1,r=Object(i.b)(e,n);return 8&r?(n+=4,1&r&&(n+=8),2&r&&(n+=4),Object(i.c)(e,n)):-1}(t))>=0?l:-1;var f=1&s,d=4&s,p=512&s,h=1024&s,v=2048&s,m=Object(i.c)(t,r);r+=4,f&&(r+=4),d&&(r+=4);for(var b=m,g=0;b--;)c?(g+=Object(i.c)(t,r),r+=4):g+=l,p&&(r+=4),h&&(r+=4),v&&(r+=4);return g}function l(e){var t=Object(a.b)(e);if(!t)return-1;var n=o(t,1835296868);if(-1===n)return-1;var r=n+4+4,u=t[r];return r+=4,1===u?(r+=16,Object(i.c)(t,r)):0===u?(r+=8,Object(i.c)(t,r)):-1}},function(e,t,n){"use strict";function r(){}n.d(t,"a",function(){return r})},function(e,t,n){"use strict";n.d(t,"a",function(){return i});var r=n(3),i=function(e){function t(t,n,r){var i=e.call(this)||this;return i.parent=t,i.outerValue=n,i.outerIndex=r,i.index=0,i}return r.a(t,e),t.prototype._next=function(e){this.parent.notifyNext(this.outerValue,e,this.outerIndex,this.index++,this)},t.prototype._error=function(e){this.parent.notifyError(e,this),this.unsubscribe()},t.prototype._complete=function(){this.parent.notifyComplete(this),this.unsubscribe()},t}(n(10).a)},function(e,t,n){"use strict";n.d(t,"b",function(){return a}),n.d(t,"a",function(){return o});var r=/^(?:[a-z]+:)?\/\//i,i=/\/\.{1,2}\//;function a(){var e=arguments.length;if(0===e)return"";for(var t="",n=0;n<e;n++){var a=n<0||arguments.length<=n?void 0:arguments[n];"string"==typeof a&&""!==a&&(r.test(a)?t=a:("/"===a[0]&&(a=a.substr(1)),"/"===t[t.length-1]&&(t=t.substr(0,t.length-1)),t=t+"/"+a))}return function(e){if(!i.test(e))return e;for(var t=[],n=e.split("/"),r=0,a=n.length;r<a;r++)if(".."===n[r])t.pop();else{if("."===n[r])continue;t.push(n[r])}return t.join("/")}(t)}function o(e){var t=e.lastIndexOf("/");return t>=0?e.substring(0,t+1):e}},function(e,t,n){"use strict";n.d(t,"a",function(){return i});var r=n(102),i=new(n(103).a)(r.a)},function(e,t,n){"use strict";var r={aa:"aar",ab:"abk",ae:"ave",af:"afr",ak:"aka",am:"amh",an:"arg",ar:"ara",as:"asm",av:"ava",ay:"aym",az:"aze",ba:"bak",be:"bel",bg:"bul",bi:"bis",bm:"bam",bn:"ben",bo:"bod",br:"bre",bs:"bos",ca:"cat",ce:"che",ch:"cha",co:"cos",cr:"cre",cs:"ces",cu:"chu",cv:"chv",cy:"cym",da:"dan",de:"deu",dv:"div",dz:"dzo",ee:"ewe",el:"ell",en:"eng",eo:"epo",es:"spa",et:"est",eu:"eus",fa:"fas",ff:"ful",fi:"fin",fj:"fij",fo:"fao",fr:"fra",fy:"fry",ga:"gle",gd:"gla",gl:"glg",gn:"grn",gu:"guj",gv:"glv",ha:"hau",he:"heb",hi:"hin",ho:"hmo",hr:"hrv",ht:"hat",hu:"hun",hy:"hye",hz:"her",ia:"ina",id:"ind",ie:"ile",ig:"ibo",ii:"iii",ik:"ipk",io:"ido",is:"isl",it:"ita",iu:"iku",ja:"jpn",jv:"jav",ka:"kat",kg:"kon",ki:"kik",kj:"kua",kk:"kaz",kl:"kal",km:"khm",kn:"kan",ko:"kor",kr:"kau",ks:"kas",ku:"kur",kv:"kom",kw:"cor",ky:"kir",la:"lat",lb:"ltz",lg:"lug",li:"lim",ln:"lin",lo:"lao",lt:"lit",lu:"lub",lv:"lav",mg:"mlg",mh:"mah",mi:"mri",mk:"mkd",ml:"mal",mn:"mon",mr:"mar",ms:"msa",mt:"mlt",my:"mya",na:"nau",nb:"nob",nd:"nde",ne:"nep",ng:"ndo",nl:"nld",nn:"nno",no:"nor",nr:"nbl",nv:"nav",ny:"nya",oc:"oci",oj:"oji",om:"orm",or:"ori",os:"oss",pa:"pan",pi:"pli",pl:"pol",ps:"pus",pt:"por",qu:"que",rm:"roh",rn:"run",ro:"ron",ru:"rus",rw:"kin",sa:"san",sc:"srd",sd:"snd",se:"sme",sg:"sag",si:"sin",sk:"slk",sl:"slv",sm:"smo",sn:"sna",so:"som",sq:"sqi",sr:"srp",ss:"ssw",st:"sot",su:"sun",sv:"swe",sw:"swa",ta:"tam",te:"tel",tg:"tgk",th:"tha",ti:"tir",tk:"tuk",tl:"tgl",tn:"tsn",to:"ton",tr:"tur",ts:"tso",tt:"tat",tw:"twi",ty:"tah",ug:"uig",uk:"ukr",ur:"urd",uz:"uzb",ve:"ven",vi:"vie",vo:"vol",wa:"wln",wo:"wol",xh:"xho",yi:"yid",yo:"yor",za:"zha",zh:"zho",zu:"zul"},i={alb:"sqi",arm:"hye",baq:"eus",bur:"mya",chi:"zho",cze:"ces",dut:"nld",fre:"fra",geo:"kat",ger:"deu",gre:"ell",ice:"isl",mac:"mkd",mao:"mri",may:"msa",per:"fas",slo:"slk",rum:"ron",tib:"bod",wel:"cym"};function a(e){if(null==e||""===e)return"";var t=(""+e).toLowerCase().split("-"),n=function(e){var t;switch(e.length){case 2:t=r[e];break;case 3:t=i[e]}return t||e}(t[0]);return n&&(t[0]=n),t.join("-")}function o(e){var t,n;return null!=e?("string"==typeof e?(t=e,n=!1):(t=e.language,n=!!e.closedCaption),{language:t,closedCaption:n,normalized:a(t)}):e}function u(e){var t,n;return null!=e?("string"==typeof e?(t=e,n=!1):(t=e.language,n=!!e.audioDescription),{language:t,audioDescription:n,normalized:a(t)}):e}n.d(t,"a",function(){return a}),n.d(t,"b",function(){return u}),n.d(t,"c",function(){return o})},function(e,t,n){"use strict";n.d(t,"a",function(){return i});var r=n(0),i=function(){function e(){this._listeners={}}var t=e.prototype;return t.addEventListener=function(e,t){var n=this._listeners[e];n?n.push(t):this._listeners[e]=[t]},t.removeEventListener=function(e,t){if(null!=e){var n=this._listeners[e];if(n)if(null!=t){var r=n.indexOf(t);~r&&n.splice(r,1),n.length||delete this._listeners[e]}else delete this._listeners[e]}else this._listeners={}},t.trigger=function(e,t){var n=this._listeners[e];n&&n.slice().forEach(function(e){try{e(t)}catch(e){r.a.error(e,e.stack)}})},e}()},function(e,t,n){"use strict";n.d(t,"a",function(){return r});var r=Array.isArray||function(e){return e&&"number"==typeof e.length}},function(e,t,n){"use strict";n.d(t,"a",function(){return r});var r="function"==typeof Symbol&&Symbol.observable||"@@observable"},function(e,t,n){"use strict";n.d(t,"b",function(){return l}),n.d(t,"a",function(){return f});var r=n(3),i=n(13),a=n(10),o=n(15),u=n(46),s=n(78),c=n(51),l=function(e){function t(t){var n=e.call(this,t)||this;return n.destination=t,n}return r.a(t,e),t}(a.a),f=function(e){function t(){var t=e.call(this)||this;return t.observers=[],t.closed=!1,t.isStopped=!1,t.hasError=!1,t.thrownError=null,t}return r.a(t,e),t.prototype[c.a]=function(){return new l(this)},t.prototype.lift=function(e){var t=new d(this,this);return t.operator=e,t},t.prototype.next=function(e){if(this.closed)throw new u.a;if(!this.isStopped)for(var t=this.observers,n=t.length,r=t.slice(),i=0;i<n;i++)r[i].next(e)},t.prototype.error=function(e){if(this.closed)throw new u.a;this.hasError=!0,this.thrownError=e,this.isStopped=!0;for(var t=this.observers,n=t.length,r=t.slice(),i=0;i<n;i++)r[i].error(e);this.observers.length=0},t.prototype.complete=function(){if(this.closed)throw new u.a;this.isStopped=!0;for(var e=this.observers,t=e.length,n=e.slice(),r=0;r<t;r++)n[r].complete();this.observers.length=0},t.prototype.unsubscribe=function(){this.isStopped=!0,this.closed=!0,this.observers=null},t.prototype._trySubscribe=function(t){if(this.closed)throw new u.a;return e.prototype._trySubscribe.call(this,t)},t.prototype._subscribe=function(e){if(this.closed)throw new u.a;return this.hasError?(e.error(this.thrownError),o.a.EMPTY):this.isStopped?(e.complete(),o.a.EMPTY):(this.observers.push(e),new s.a(this,e))},t.prototype.asObservable=function(){var e=new i.a;return e.source=this,e},t.create=function(e,t){return new d(e,t)},t}(i.a),d=function(e){function t(t,n){var r=e.call(this)||this;return r.destination=t,r.source=n,r}return r.a(t,e),t.prototype.next=function(e){var t=this.destination;t&&t.next&&t.next(e)},t.prototype.error=function(e){var t=this.destination;t&&t.error&&this.destination.error(e)},t.prototype.complete=function(){var e=this.destination;e&&e.complete&&this.destination.complete()},t.prototype._subscribe=function(e){return this.source?this.source.subscribe(e):o.a.EMPTY},t}(f)},function(e,t,n){"use strict";var r=n(13),i=n(73),a=n(71),o=n(42);var u=n(52);var s=n(25),c=n(15),l=n(74);var f=n(75);var d=n(70);var p=n(69);function h(e,t){if(!t)return e instanceof r.a?e:new r.a(Object(p.a)(e));if(null!=e){if(function(e){return e&&"function"==typeof e[o.a]}(e))return function(e,t){return t?new r.a(function(n){var r=new c.a;return r.add(t.schedule(function(){var i=e[o.a]();r.add(i.subscribe({next:function(e){r.add(t.schedule(function(){return n.next(e)}))},error:function(e){r.add(t.schedule(function(){return n.error(e)}))},complete:function(){r.add(t.schedule(function(){return n.complete()}))}}))})),r}):new r.a(Object(d.a)(e))}(e,t);if(Object(i.a)(e))return function(e,t){return t?new r.a(function(n){var r=new c.a;return r.add(t.schedule(function(){return e.then(function(e){r.add(t.schedule(function(){n.next(e),r.add(t.schedule(function(){return n.complete()}))}))},function(e){r.add(t.schedule(function(){return n.error(e)}))})})),r}):new r.a(Object(l.a)(e))}(e,t);if(Object(a.a)(e))return Object(s.a)(e,t);if(function(e){return e&&"function"==typeof e[u.a]}(e)||"string"==typeof e)return function(e,t){if(!e)throw new Error("Iterable cannot be null");return t?new r.a(function(n){var r,i=new c.a;return i.add(function(){r&&"function"==typeof r.return&&r.return()}),i.add(t.schedule(function(){r=e[u.a](),i.add(t.schedule(function(){if(!n.closed){var e,t;try{var i=r.next();e=i.value,t=i.done}catch(e){return void n.error(e)}t?n.complete():(n.next(e),this.schedule())}}))})),i}):new r.a(Object(f.a)(e))}(e,t)}throw new TypeError((null!==e&&typeof e||e)+" is not observable")}n.d(t,"a",function(){return h})},function(e,t,n){"use strict";n.d(t,"a",function(){return i});var r=n(79);function i(e,t){try{return e(t)}catch(e){return Object(r.a)(e)}}},function(e,t,n){"use strict";function r(){return Error.call(this),this.message="object unsubscribed",this.name="ObjectUnsubscribedError",this}n.d(t,"a",function(){return i}),r.prototype=Object.create(Error.prototype);var i=r},function(e,t,n){"use strict";function r(e){return e.getElementsByTagName("body")[0]}function i(e){return e.getElementsByTagName("style")}function a(e){return e.getElementsByTagName("region")}function o(e){return e.getElementsByTagName("p")}n.d(t,"a",function(){return r}),n.d(t,"c",function(){return i}),n.d(t,"b",function(){return a}),n.d(t,"d",function(){return o})},function(e,t,n){"use strict";function r(e){return"function"==typeof e}n.d(t,"a",function(){return r})},function(e,t,n){"use strict";function r(e){for(var t=0;t<e.length;){if(""===e[t])return t+1;t++}return t}function i(e,t){return!!e[t]&&/^STYLE( .*)?$/g.test(e[t])&&(!e[t+1]||e[t+1].indexOf("--\x3e")<0)}function a(e,t){var n=e[t];if(!n||i(e,t)||function(e,t){return!!e[t]&&/^REGION( .*)?$/g.test(e[t])&&(!e[t+1]||e[t+1].indexOf("--\x3e")<0)}(e,t)||function(e,t){return!!e[t]&&/^NOTE( .*)?$/g.test(e[t])&&(!e[t+1]||e[t+1].indexOf("--\x3e")<0)}(e,t))return!1;if(n.indexOf("--\x3e")>=0)return!0;var r=e[t+1];return!!r&&r.indexOf("--\x3e")>=0}function o(e,t){for(var n=t+1;e[n];)n++;return n}n.d(t,"b",function(){return r}),n.d(t,"c",function(){return a}),n.d(t,"d",function(){return i}),n.d(t,"a",function(){return o})},function(e,t,n){"use strict";function r(e){setTimeout(function(){throw e})}n.d(t,"a",function(){return r})},function(e,t,n){"use strict";n.d(t,"a",function(){return r});var r="function"==typeof Symbol&&"function"==typeof Symbol.for?Symbol.for("rxSubscriber"):"@@rxSubscriber"},function(e,t,n){"use strict";n.d(t,"a",function(){return r});var r=function(){return"function"==typeof Symbol&&Symbol.iterator?Symbol.iterator:"@@iterator"}()},function(e,t,n){"use strict";function r(e,t,n){return null==n?e+" ("+t+")":"string"==typeof n?e+" ("+t+") "+n:e+" ("+t+") "+(n instanceof Event?n.type:n.message)}n.d(t,"a",function(){return r})},function(e,t,n){"use strict";n.d(t,"a",function(){return r});var r=function(){function e(){this._hashes={}}var t=e.prototype;return t.add=function(e){this._hashes[e]=!0},t.remove=function(e){delete this._hashes[e]},t.test=function(e){return!!this._hashes[e]},t.isEmpty=function(){return!Object.keys(this._hashes).length},e}()},function(e,t,n){"use strict";function r(e,t){if(!(e.parentNode instanceof Element))return[];return function e(n){var r=[];n.tagName.toLowerCase()===t.toLowerCase()&&r.push(n);var i=n.parentNode;return i instanceof Element&&r.push.apply(r,e(i)),r}(e.parentNode)}n.d(t,"a",function(){return r})},function(e,t,n){"use strict";var r=n(76),i=n(9),a=n(40),o=n(45),u=n(16),s=function(){function e(){this._ranges=[],this.length=0}var t=e.prototype;return t.insert=function(e,t){Object(u.h)(this._ranges,{start:e,end:t}),this.length=this._ranges.length},t.remove=function(e,t){var n=[];e>0&&n.push({start:0,end:e}),t<1/0&&n.push({start:t,end:1/0}),this._ranges=Object(u.j)(this._ranges,n),this.length=this._ranges.length},t.start=function(e){if(e>=this._ranges.length)throw new Error("INDEX_SIZE_ERROR");return this._ranges[e].start},t.end=function(e){if(e>=this._ranges.length)throw new Error("INDEX_SIZE_ERROR");return this._ranges[e].end},e}();n.d(t,"a",function(){return c});var c=function(e){function t(){var t;return(t=e.call(this)||this).updating=!1,t.readyState="opened",t.buffered=new s,t.timestampOffset=0,t}!function(e,t){e.prototype=Object.create(t.prototype),e.prototype.constructor=e,e.__proto__=t}(t,e);var n=t.prototype;return n.appendBuffer=function(e){var t=this;this._lock(function(){return t._append(e)})},n.remove=function(e,t){var n=this;this._lock(function(){return n._remove(e,t)})},n.abort=function(){this.remove(0,1/0),this.updating=!1,this.readyState="closed",this._abort()},n._lock=function(e){var t=this;Object(i.b)(!this.updating,"updating"),this.updating=!0,this.trigger("updatestart",void 0),Object(o.a)(function(){return e(),Object(r.a)(void 0)}).subscribe(function(){return setTimeout(function(){t._unlock("update")},0)},function(e){return setTimeout(function(){t._unlock("error",e)},0)})},n._unlock=function(e,t){this.updating=!1,this.trigger(e,t),this.trigger("updateend",void 0)},t}(a.a)},function(e,t,n){"use strict";n.d(t,"a",function(){return a});var r=n(32),i=n(50),a={closed:!0,next:function(e){},error:function(e){if(r.a.useDeprecatedSynchronousErrorHandling)throw e;Object(i.a)(e)},complete:function(){}}},function(e,t,n){"use strict";n.d(t,"a",function(){return o});var r,i=n(31);function a(){try{return r.apply(this,arguments)}catch(e){return i.a.e=e,i.a}}function o(e){return r=e,a}},function(e,t,n){"use strict";n.d(t,"b",function(){return i}),n.d(t,"a",function(){return a});var r=.3;function i(e){return e*((2*Math.random()-1)*r+1)}function a(e,t){return void 0===t&&(t=1),i(e*Math.pow(2,t-1))}},function(e,t,n){"use strict";n.d(t,"a",function(){return i});var r=n(41);function i(e){return!Object(r.a)(e)&&e-parseFloat(e)+1>=0}},function(e,t,n){"use strict";n.r(t);var r=n(134),i=n(26),a=n(43),o=n(146),u=n(135),s=n(145),c=n(64),l=n(67),f=n(149),d=n(12),p=n(8),h=n(27),v=n(76),m=n(137),b=n(17),g=n(132);function y(e,t){return Object(r.a)(function(){return Object(b.a)(function(e,t){return t instanceof g.a?t._setVideo(e):e.setMediaKeys?e.setMediaKeys(t):null!==t?e.WebkitSetMediaKeys?e.WebkitSetMediaKeys(t):e.mozSetMediaKeys?e.mozSetMediaKeys(t):e.msSetMediaKeys?e.msSetMediaKeys(t):void 0:void 0}(e,t)).pipe(Object(m.a)(null))})}var _=n(0);var O=n(144);function E(e,t){return Object(r.a)(function(){var n=t.getState(e);if(!n)return Object(v.a)(null);var r=n.sessionsStore;return t.clearState(e),r.closeAllSessions().pipe(Object(O.a)(y(e,null)))})}var w=n(147),T=n(81);var j=n(13),S=n(2),x=n(11),A=S.a.EME_DEFAULT_WIDEVINE_ROBUSTNESSES,R=S.a.EME_KEY_SYSTEMS;function k(e,t,n){return Object(r.a)(function(){var r=n.getState(e);if(r){var i=function(e,t,n){var r=t.getConfiguration();if(Object(d.l)()||!r)return null;var i=e.filter(function(e){return!(e.type!==n.type||e.persistentLicense&&"required"!==r.persistentState||e.distinctiveIdentifierRequired&&"required"!==r.distinctiveIdentifier)})[0];return i?{keySystemOptions:i,keySystemAccess:t}:null}(t,r.mediaKeySystemAccess,r.keySystemOptions);if(i)return _.a.debug("eme: found cached compatible keySystem",i),Object(v.a)({type:"reuse-media-key-system-access",value:{mediaKeySystemAccess:i.keySystemAccess,options:i.keySystemOptions}})}var a=t.reduce(function(e,t){var n,r=R[t.type];null!=r?n=r.map(function(e){return{keyName:t.type,keyType:e,keySystemOptions:t}}):n=[{keyName:function(e){for(var t=Object.keys(R),n=0;n<t.length;n++){var r=t[n];if(Object(x.a)(R[r],e))return r}}(t.type)||"",keyType:t.type,keySystemOptions:t}];return e.concat(n)},[]);return j.a.create(function(e){var t,n=!1;return function r(i){if(!n)if(i>=a.length)e.error(new T.a("INCOMPATIBLE_KEYSYSTEMS",null,!0));else{var o=a[i],u=o.keyName,s=o.keyType,c=o.keySystemOptions,l=function(e,t){var n=["temporary"],r="optional",i="optional";t.persistentLicense&&(r="required",n.push("persistent-license")),t.persistentStateRequired&&(r="required"),t.distinctiveIdentifierRequired&&(i="required");var a=t.videoRobustnesses||("widevine"===e?A:[]),o=t.audioRobustnesses||("widevine"===e?A:[]);return a.length||a.push(void 0),o.length||o.push(void 0),[{initDataTypes:["cenc"],videoCapabilities:a.map(function(e){return{contentType:'video/mp4;codecs="avc1.4d401e"',robustness:e}}),audioCapabilities:o.map(function(e){return{contentType:'audio/mp4;codecs="mp4a.40.2"',robustness:e}}),distinctiveIdentifier:i,persistentState:r,sessionTypes:n}]}(u,c);if(_.a.debug("eme: request keysystem access "+s+","+(i+1)+" of "+a.length,l),null==g.b)throw new Error("requestMediaKeySystemAccess is not implemented in your browser.");t=Object(g.b)(s,l).subscribe(function(t){_.a.info("eme: found compatible keysystem",s,l),e.next({type:"create-media-key-system-access",value:{options:c,mediaKeySystemAccess:t}}),e.complete()},function(){_.a.debug("eme: rejected access to keysystem",s,l),t=null,r(i+1)})}}(0),function(){n=!0,t&&t.unsubscribe()}})})}function I(e,t,n){return"function"==typeof e.setServerCertificate?function(e,t){return Object(r.a)(function(){return Object(b.a)(e.setServerCertificate(t)).pipe(Object(w.a)(function(e){throw new T.a("LICENSE_SERVER_CERTIFICATE_ERROR",e,!0)}))}).pipe(Object(m.a)(null))}(e,t).pipe(Object(w.a)(function(e){return e.fatal=!1,n.next(e),Object(v.a)(null)})):Object(v.a)(null)}var N=n(14),D=n.n(N),M=n(106);function P(e){for(var t=0,n=0;n<e.length;n++)t=(t<<5)-t+e[n],t&=t;return t}var C=function(){function e(e){this._mediaKeys=e,this._entries=[]}var t=e.prototype;return t.getAll=function(){return this._entries.map(function(e){return{session:e.session,sessionType:e.sessionType}})},t.get=function(e,t){var n=P(e),r=D()(this._entries,function(e){return e.initData===n&&e.initDataType===t});return r?{session:r.session,sessionType:r.sessionType}:null},t.createSession=function(e,t,n){var r=this;if(this.get(e,t)){var i=new Error("This initialization data was already stored.");throw new T.a("MULTIPLE_SESSIONS_SAME_INIT_DATA",i,!0)}var a=this._mediaKeys.createSession(n),o={session:a,sessionType:n,initData:P(e),initDataType:t};return null!==a.closed&&a.closed.then(function(){r._delete(a)}).catch(function(e){_.a.warn("session.closed rejected: "+e)}),_.a.debug("eme-mem-store: add session",o),this._entries.push(o),a},t.deleteAndCloseSession=function(e){var t=this;return Object(r.a)(function(){return t._delete(e),_.a.debug("eme-mem-store: close session",e),Object(b.a)(e.close()).pipe(Object(m.a)(null),Object(w.a)(function(){return Object(v.a)(null)}))})},t.closeAllSessions=function(){var e=this;return Object(r.a)(function(){var t=e._entries;e._entries=[];var n=t.map(function(t){return e.deleteAndCloseSession(t.session)});return Object(M.a)(u.a.apply(void 0,n).pipe(Object(s.a)()),Object(v.a)(null))})},t._delete=function(e){var t=D()(this._entries,function(t){return t.session===e});if(!t)return-1;_.a.debug("eme-mem-store: delete session",t);var n=this._entries.indexOf(t);return this._entries.splice(n,1),n},e}(),B=n(9);var L=function(){function e(e){!function(e){Object(B.b)(null!=e,"no licenseStorage given for keySystem with persistentLicense"),Object(B.a)(e,{save:"function",load:"function"},"licenseStorage")}(e),this._entries=[],this._storage=e;try{this._entries=this._storage.load(),Object(B.b)(Array.isArray(this._entries))}catch(e){_.a.warn("eme-persitent-store: could not get entries from license storage",e),this.dispose()}}var t=e.prototype;return t.get=function(e,t){var n=P(e);return D()(this._entries,function(e){return e.initData===n&&e.initDataType===t})||null},t.add=function(e,t,n){var r=n&&n.sessionId;if(r){var i=this.get(e,t);i&&i.sessionId===r||(i&&this.delete(e,t),_.a.info("eme-persitent-store: add new session",r,n),this._entries.push({sessionId:r,initData:P(e),initDataType:t}),this._save())}},t.delete=function(e,t){var n=P(e),r=D()(this._entries,function(e){return e.initData===n&&e.initDataType===t});if(r){_.a.warn("eme-persitent-store: delete session from store",r);var i=this._entries.indexOf(r);this._entries.splice(i,1),this._save()}},t.dispose=function(){this._entries=[],this._save()},t._save=function(){try{this._storage.save(this._entries)}catch(e){_.a.warn("eme-persitent-store: could not save licenses in localStorage")}},e}();function U(e,t,n,r){return k(e,t,n).pipe(Object(l.a)(function(t){var i,a=t.value,o=a.options,u=a.mediaKeySystemAccess,s=n.getState(e);if(null!=s&&"reuse-media-key-system-access"===t.type){var f=s.mediaKeys,d=s.sessionsStore;i=Object(v.a)({mediaKeys:f,sessionsStore:d})}else i=Object(b.a)(u.createMediaKeys()).pipe(Object(c.a)(function(e){return{mediaKeys:e,sessionsStore:new C(e)}}));return i.pipe(Object(l.a)(function(e){var t=e.mediaKeys,n=e.sessionsStore,i=o.serverCertificate;return(null!=i?I(t,i,r):Object(v.a)(null)).pipe(Object(m.a)({mediaKeySystemAccess:u,keySystemOptions:o,mediaKeys:t,sessionsStore:n,sessionStorage:function(e){if(!e.persistentLicense)return null;var t=e.licenseStorage;if(!t){var n=new Error("no license storage found for persistent license.");throw new T.a("INVALID_KEY_SYSTEM",n,!0)}return _.a.info("set the given license storage"),new L(t)}(o)}))}))}))}var F=n(1),$=n(54),V=Object(F.c)(Object(F.p)("pssh"),0);function z(e){var t=e.initData;if(null==t){var n=new Error("no init data found on media encrypted event.");throw new T.a("INVALID_ENCRYPTED_EVENT",n,!0)}return{initData:function(e){for(var t=new Uint8Array,n=new $.a,r=0;r<e.length;){if(e.length<r+8||Object(F.c)(e,r+4)!==V)return _.a.warn("unrecognized initialization data. Use as is."),e;var i=Object(F.c)(new Uint8Array(e),r);if(r+i>e.length)return _.a.warn("unrecognized initialization data. Use as is."),e;var a=e.subarray(r,r+i),o=P(a);n.test(o)?_.a.warn("Duplicated PSSH found in initialization data, removing it."):(n.add(o),t=Object(F.h)(t,a)),r+=i}return r!==e.length?(_.a.warn("unrecognized initialization data. Use as is."),e):t}(new Uint8Array(t)),initDataType:e.initDataType}}function H(e){if(""===e.sessionId)return!1;var t=[];return e.keyStatuses.forEach(function(e){t.push(e)}),t.length>0&&!Object(x.a)(t,"expired")&&!Object(x.a)(t,"internal-error")&&(_.a.debug("eme: reuse loaded session",e.sessionId),!0)}function G(e,t,n){return Object(r.a)(function(){var i=n.keySystemOptions,a=n.mediaKeySystemAccess,o=n.sessionsStore,u=n.sessionStorage,s=a.getConfiguration().sessionTypes,f=s&&Object(x.a)(s,"persistent-license"),d=f&&u&&i.persistentLicense?"persistent-license":"temporary";_.a.debug("eme: create a new "+d+" session");var p=o.createSession(e,t,d);if(!f||!u||!i.persistentLicense)return Object(v.a)({type:"created-session",value:{mediaKeySession:p,sessionType:d}});var h=u.get(e,t);if(!h)return Object(v.a)({type:"created-session",value:{mediaKeySession:p,sessionType:d}});var m=function(){return _.a.info("eme: removing previous persistent session."),null!==u.get(e,t)&&u.delete(e,t),o.deleteAndCloseSession(p).pipe(Object(c.a)(function(){return{type:"created-session",value:{mediaKeySession:o.createSession(e,t,d),sessionType:d}}}))};return function(e,t){return Object(r.a)(function(){return _.a.debug("eme: load persisted session",e),Object(b.a)(t.load(e))})}(h.sessionId,p).pipe(Object(l.a)(function(n){return n?n&&H(p)?(u.add(e,t,p),_.a.info("eme: succeeded to load persistent session."),Object(v.a)({type:"loaded-persistent-session",value:{mediaKeySession:p,sessionType:d}})):(_.a.warn("eme: previous persistent session not usable anymore."),m()):(_.a.warn("eme: no data stored for the loaded session"),u.delete(e,t),Object(v.a)({type:"created-session",value:{mediaKeySession:p,sessionType:d}}))}),Object(w.a)(function(){return _.a.warn("eme: unable to load persistent session."),m()}))})}var K=S.a.EME_MAX_SIMULTANEOUS_MEDIA_KEY_SESSIONS;function q(){return Error.call(this),this.message="Timeout has occurred",this.name="TimeoutError",this}q.prototype=Object.create(Error.prototype);var Y=q,W=n(38),X=n(3);var Q=n(22),Z=n(21);function J(e,t,n){return void 0===n&&(n=W.a),function(r){var i=function(e){return e instanceof Date&&!isNaN(+e)}(e),a=i?+e-n.now():Math.abs(e);return r.lift(new ee(a,i,t,n))}}var ee=function(){function e(e,t,n,r){this.waitFor=e,this.absoluteTimeout=t,this.withObservable=n,this.scheduler=r}return e.prototype.call=function(e,t){return t.subscribe(new te(e,this.absoluteTimeout,this.waitFor,this.withObservable,this.scheduler))},e}(),te=function(e){function t(t,n,r,i,a){var o=e.call(this,t)||this;return o.absoluteTimeout=n,o.waitFor=r,o.withObservable=i,o.scheduler=a,o.action=null,o.scheduleTimeout(),o}return X.a(t,e),t.dispatchTimeout=function(e){var t=e.withObservable;e._unsubscribeAndRecycle(),e.add(Object(Z.a)(e,t))},t.prototype.scheduleTimeout=function(){var e=this.action;e?this.action=e.schedule(this,this.waitFor):this.add(this.action=this.scheduler.schedule(t.dispatchTimeout,this.waitFor,this))},t.prototype._next=function(t){this.absoluteTimeout||this.scheduleTimeout(),e.prototype._next.call(this,t)},t.prototype._unsubscribe=function(){this.action=null,this.scheduler=null,this.withObservable=null},t}(Q.a),ne=n(79);var re=n(108),ie=n(142),ae=n(18),oe=n(23),ue=n(148),se=n(59);function ce(e,t){var n=0;return function(){n&&clearTimeout(n),n=window.setTimeout(e,t)}}var le=n(45),fe={expired:!0,"internal-error":!0};function de(e,t,n){function a(e,t){return Object(ae.a)(e)&&e.type===oe.b.ENCRYPTED_MEDIA_ERROR?(e.fatal=t,e):new T.a("KEY_LOAD_ERROR",e,t)}_.a.debug("eme: handle message events",e);var o={totalRetry:2,retryDelay:200,errorSelector:function(e){return a(e,!0)},onRetry:function(e){return n.next(a(e,!1))}},s=Object(p.f)(e).pipe(Object(c.a)(function(e){throw new T.a("KEY_ERROR",e,!0)})),f=Object(p.h)(e).pipe(Object(l.a)(function(n){return _.a.debug("eme: keystatuseschange event",e,n),e.keyStatuses.forEach(function(e,t){if(fe[t])throw new T.a("KEY_STATUS_CHANGE_ERROR",t,!0);if(fe[e])throw new T.a("KEY_STATUS_CHANGE_ERROR",e,!0)}),Object(le.a)(function(){return t&&t.onKeyStatusesChange?Object(b.a)(t.onKeyStatusesChange(n,e)):i.a}).pipe().pipe(Object(w.a)(function(e){throw new T.a("KEY_STATUS_CHANGE_ERROR",e,!0)}),Object(c.a)(function(e){return{type:"key-status-change",value:{license:e}}}))})),d=Object(p.g)(e).pipe(Object(l.a)(function(n){var i=new Uint8Array(n.message),a=n.messageType||"license-request";return _.a.debug("eme: event message type "+a,e,n),function(e,t){var n,r=t.retryDelay,i=t.totalRetry,a=t.shouldRetry,o=t.resetDelay,u=t.errorSelector,s=t.onRetry,c=0;return null!=o&&o>0&&(n=ce(function(){c=0},o)),e.pipe(Object(w.a)(function(e,t){if(a&&!a(e)||c++>=i)throw u?u(e,c):e;s&&s(e,c);var o=Object(se.a)(r,c);return Object(ue.a)(o).pipe(Object(l.a)(function(){return n&&n(),t}))}))}(Object(r.a)(function(){var e=t.getLicense(i,a);return Object(b.a)(e).pipe(function(e,t){return void 0===t&&(t=W.a),J(e,Object(ne.a)(new Y),t)}(1e4),Object(w.a)(function(e){throw e instanceof Y?new T.a("KEY_LOAD_TIMEOUT",null,!1):e}))}),o).pipe(Object(c.a)(function(e){return{type:a,value:{license:e}}}))})),h=Object(u.a)(d,f).pipe(Object(re.a)(function(t){_.a.debug("eme: update session",t);var n=t.value.license;return Object(b.a)(e.update(n)).pipe(Object(w.a)(function(e){throw new T.a("KEY_UPDATE_ERROR",e,!0)}),Object(m.a)({type:t.type,value:{session:e,license:n}}))})),v=Object(u.a)(h,s);return e.closed?v.pipe(Object(ie.a)(Object(b.a)(e.closed))):v}var pe=function(){function e(){this._state=new WeakMap}var t=e.prototype;return t.setState=function(e,t){this._state.set(e,t)},t.getState=function(e){return this._state.get(e)||null},t.clearState=function(e){this._state.set(e,null)},e}(),he=function(){function e(){this._namedTypeData={},this._unnamedTypeData=new $.a}var t=e.prototype;return t.has=function(e,t){return t?!!this._namedTypeData[t]&&this._namedTypeData[t].test(P(e)):this._unnamedTypeData.test(P(e))},t.add=function(e,t){this.has(e,t)||(t?(this._namedTypeData[t]||(this._namedTypeData[t]=new $.a),this._namedTypeData[t].add(P(e))):this._unnamedTypeData.add(P(e)))},t.remove=function(e,t){if(t){if(!this._namedTypeData[t])return!1;var n=P(e),r=this._namedTypeData[t];return!!r.test(n)&&(r.remove(n),!0)}var i=P(e);return!!this._unnamedTypeData.test(i)&&(this._unnamedTypeData.remove(i),!0)},e}();n.d(t,"default",function(){return be}),n.d(t,"clearEMESession",function(){return me}),n.d(t,"disposeEME",function(){return ge}),n.d(t,"getCurrentKeySystem",function(){return ye});var ve=new pe;function me(e){return Object(r.a)(function(){if(Object(d.m)())return E(e,ve).pipe(Object(s.a)());var t=ve.getState(e);return t&&t.keySystemOptions.closeSessionsOnStop?t.sessionsStore.closeAllSessions().pipe(Object(s.a)()):i.a})}function be(e,t){var n=new a.a,d=n.pipe(Object(c.a)(function(e){return{type:"warning",value:e}})),h=new he,g=Object(o.a)(Object(p.b)(e),U(e,t,ve,n)).pipe(Object(l.a)(function(t,n){var a=t[0],o=t[1];return Object(u.a)(function(e,t,n){return Object(r.a)(function(){var r=z(e),a=r.initData,o=r.initDataType;if(t.has(a,o))return _.a.debug("init data already received. Skipping it."),i.a;t.add(a,o);var f=null,d=n.sessionsStore,p=d.get(a,o);if(null!=p){if(H(f=p.session))return _.a.debug("eme: reuse loaded session",f.sessionId),Object(v.a)({type:"loaded-open-session",value:{mediaKeySession:f,sessionType:p.sessionType,initData:a,initDataType:o}});n.sessionStorage&&n.sessionStorage.delete(new Uint8Array(a),o)}return(f?d.deleteAndCloseSession(f):Object(v.a)(null)).pipe(Object(l.a)(function(){var e=[],t=d.getAll().slice();if(K>0&&K<=t.length)for(var r=0;r<K-t.length+1;r++)e.push(d.deleteAndCloseSession(t[r].session));return Object(M.a)(u.a.apply(void 0,e).pipe(Object(s.a)()),G(a,o,n).pipe(Object(c.a)(function(e){return{type:e.type,value:{mediaKeySession:e.value.mediaKeySession,sessionType:e.value.sessionType,initData:a,initDataType:o}}})))}))})}(a,h,o).pipe(Object(c.a)(function(e){return{type:e.type,value:{initData:e.value.initData,initDataType:e.value.initDataType,mediaKeySession:e.value.mediaKeySession,sessionType:e.value.sessionType,keySystemOptions:o.keySystemOptions,sessionStorage:o.sessionStorage}}})),0===n?function(e,t,n){return Object(r.a)(function(){var r=n.getState(t),i=e.keySystemOptions,a=e.mediaKeySystemAccess,o=e.mediaKeys,u=e.sessionsStore;return n.setState(t,{keySystemOptions:i,mediaKeySystemAccess:a,mediaKeys:o,sessionsStore:u}),(r&&r.sessionsStore!==u?r.sessionsStore.closeAllSessions():Object(v.a)(null)).pipe(Object(l.a)(function(){return t.mediaKeys===o?Object(v.a)(null):(_.a.debug("eme: set mediakeys"),y(t,o))}))})}(o,e,ve).pipe(Object(s.a)()):i.a)}),Object(l.a)(function(e){var t=e.value,a=t.initData,o=t.initDataType,c=t.mediaKeySession,l=t.sessionType,d=t.keySystemOptions,p=t.sessionStorage;return Object(u.a)(de(c,d,n),"created-session"===e.type?function(e,t,n){return Object(r.a)(function(){return Object(b.a)(e.generateRequest(n||"",t)).pipe(Object(w.a)(function(e){throw new T.a("KEY_GENERATE_REQUEST_ERROR",e,!1)}),Object(m.a)(null))})}(c,a,o).pipe(Object(f.a)(function(){"persistent-license"===l&&null!=p&&p.add(a,o,c)})):i.a).pipe(Object(s.a)())}));return Object(u.a)(g,d)}function ge(e){E(e,ve).subscribe(h.a)}function ye(e){var t=ve.getState(e);return t&&t.keySystemOptions.type}},,function(e,t,n){"use strict";n.d(t,"a",function(){return l});var r=n(23),i=n(53);function a(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function o(e){var t="function"==typeof Map?new Map:void 0;return(o=function(e){if(null===e||!function(e){return-1!==Function.toString.call(e).indexOf("[native code]")}(e))return e;if("function"!=typeof e)throw new TypeError("Super expression must either be null or a function");if(void 0!==t){if(t.has(e))return t.get(e);t.set(e,n)}function n(){return u(e,arguments,c(this).constructor)}return n.prototype=Object.create(e.prototype,{constructor:{value:n,enumerable:!1,writable:!0,configurable:!0}}),s(n,e)})(e)}function u(e,t,n){return(u=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(e){return!1}}()?Reflect.construct:function(e,t,n){var r=[null];r.push.apply(r,t);var i=new(Function.bind.apply(e,r));return n&&s(i,n.prototype),i}).apply(null,arguments)}function s(e,t){return(s=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function c(e){return(c=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var l=function(e){function t(n,o,u){var s;return s=e.call(this)||this,Object.setPrototypeOf(a(a(s)),t.prototype),s.name="MediaError",s.type=r.b.MEDIA_ERROR,s.reason=o,s.code=r.a.hasOwnProperty(n)?r.a[n]:"",s.fatal=!!u,s.message=Object(i.a)(s.name,s.code,s.reason),s}return function(e,t){e.prototype=Object.create(t.prototype),e.prototype.constructor=e,e.__proto__=t}(t,e),t}(o(Error))},function(e,t,n){"use strict";n.d(t,"a",function(){return a});var r=n(3),i=n(10);function a(e,t){return function(n){if("function"!=typeof e)throw new TypeError("argument is not a function. Are you looking for `mapTo()`?");return n.lift(new o(e,t))}}var o=function(){function e(e,t){this.project=e,this.thisArg=t}return e.prototype.call=function(e,t){return t.subscribe(new u(e,this.project,this.thisArg))},e}(),u=function(e){function t(t,n,r){var i=e.call(this,t)||this;return i.project=n,i.count=0,i.thisArg=r||i,i}return r.a(t,e),t.prototype._next=function(e){var t;try{t=this.project.call(this.thisArg,e,this.count++)}catch(e){return void this.destination.error(e)}this.destination.next(t)},t}(i.a)},function(e,t,n){"use strict";n.d(t,"c",function(){return o}),n.d(t,"a",function(){return u}),n.d(t,"b",function(){return s});var r=n(9),i=n(1);function a(e,t){for(var n,a=e.length,o=0,u=0;o+8<a&&(u=Object(i.c)(e,o),n=Object(i.c)(e,o+4),Object(r.b)(u>0,"out of range size"),n!==t);)o+=u;return o<a?e.subarray(o+8,o+u):null}function o(e){var t=a(e,1836019558);return t?a(t,1953653094):null}function u(e){return a(e,1835295092)}function s(e){var t=a(e,1836019574);if(!t)return null;var n=a(t,1953653099);return n?a(n,1835297121):null}},function(e,t,n){"use strict";function r(e){a()||(e.requestFullscreen?e.requestFullscreen():e.msRequestFullscreen?e.msRequestFullscreen():e.mozRequestFullScreen?e.mozRequestFullScreen():e.webkitRequestFullscreen&&e.webkitRequestFullscreen(Element.ALLOW_KEYBOARD_INPUT))}function i(){a()&&(document.exitFullscreen?document.exitFullscreen():document.msExitFullscreen?document.msExitFullscreen():document.mozCancelFullScreen?document.mozCancelFullScreen():document.webkitExitFullscreen&&document.webkitExitFullscreen())}function a(){return!!(document.fullscreenElement||document.mozFullScreenElement||document.webkitFullscreenElement||document.msFullscreenElement)}n.d(t,"c",function(){return r}),n.d(t,"a",function(){return i}),n.d(t,"b",function(){return a})},function(e,t,n){"use strict";n.d(t,"a",function(){return c});var r=n(3),i=n(21),a=n(22),o=n(36),u=n(64),s=n(44);function c(e,t,n){return void 0===n&&(n=Number.POSITIVE_INFINITY),"function"==typeof t?function(r){return r.pipe(c(function(n,r){return Object(s.a)(e(n,r)).pipe(Object(u.a)(function(e,i){return t(n,e,r,i)}))},n))}:("number"==typeof t&&(n=t),function(t){return t.lift(new l(e,n))})}var l=function(){function e(e,t){void 0===t&&(t=Number.POSITIVE_INFINITY),this.project=e,this.concurrent=t}return e.prototype.call=function(e,t){return t.subscribe(new f(e,this.project,this.concurrent))},e}(),f=function(e){function t(t,n,r){void 0===r&&(r=Number.POSITIVE_INFINITY);var i=e.call(this,t)||this;return i.project=n,i.concurrent=r,i.hasCompleted=!1,i.buffer=[],i.active=0,i.index=0,i}return r.a(t,e),t.prototype._next=function(e){this.active<this.concurrent?this._tryNext(e):this.buffer.push(e)},t.prototype._tryNext=function(e){var t,n=this.index++;try{t=this.project(e,n)}catch(e){return void this.destination.error(e)}this.active++,this._innerSub(t,e,n)},t.prototype._innerSub=function(e,t,n){var r=new o.a(this,void 0,void 0);this.add(r),Object(i.a)(this,e,t,n,r)},t.prototype._complete=function(){this.hasCompleted=!0,0===this.active&&0===this.buffer.length&&this.destination.complete()},t.prototype.notifyNext=function(e,t,n,r,i){this.destination.next(t)},t.prototype.notifyComplete=function(e){var t=this.buffer;this.remove(e),this.active--,t.length>0?this._next(t.shift()):0===this.active&&this.hasCompleted&&this.destination.complete()},t}(a.a)},function(e,t,n){"use strict";function r(e){return null!=e&&"object"==typeof e}n.d(t,"a",function(){return r})},function(e,t,n){"use strict";n.d(t,"a",function(){return p});var r=n(13),i=n(72),a=n(74),o=n(75),u=n(70),s=n(71),c=n(73),l=n(68),f=n(52),d=n(42),p=function(e){if(e instanceof r.a)return function(t){return e._isScalar?(t.next(e.value),void t.complete()):e.subscribe(t)};if(e&&"function"==typeof e[d.a])return Object(u.a)(e);if(Object(s.a)(e))return Object(i.a)(e);if(Object(c.a)(e))return Object(a.a)(e);if(e&&"function"==typeof e[f.a])return Object(o.a)(e);var t=Object(l.a)(e)?"an invalid object":"'"+e+"'";throw new TypeError("You provided "+t+" where a stream was expected. You can provide an Observable, Promise, Array, or Iterable.")}},function(e,t,n){"use strict";n.d(t,"a",function(){return i});var r=n(42),i=function(e){return function(t){var n=e[r.a]();if("function"!=typeof n.subscribe)throw new TypeError("Provided object does not correctly implement Symbol.observable");return n.subscribe(t)}}},function(e,t,n){"use strict";n.d(t,"a",function(){return r});var r=function(e){return e&&"number"==typeof e.length&&"function"!=typeof e}},function(e,t,n){"use strict";n.d(t,"a",function(){return r});var r=function(e){return function(t){for(var n=0,r=e.length;n<r&&!t.closed;n++)t.next(e[n]);t.closed||t.complete()}}},function(e,t,n){"use strict";function r(e){return e&&"function"!=typeof e.subscribe&&"function"==typeof e.then}n.d(t,"a",function(){return r})},function(e,t,n){"use strict";n.d(t,"a",function(){return i});var r=n(50),i=function(e){return function(t){return e.then(function(e){t.closed||(t.next(e),t.complete())},function(e){return t.error(e)}).then(null,r.a),t}}},function(e,t,n){"use strict";n.d(t,"a",function(){return i});var r=n(52),i=function(e){return function(t){for(var n=e[r.a]();;){var i=n.next();if(i.done){t.complete();break}if(t.next(i.value),t.closed)break}return"function"==typeof n.return&&t.add(function(){n.return&&n.return()}),t}}},function(e,t,n){"use strict";n.d(t,"a",function(){return u});var r=n(33),i=n(25),a=n(26),o=n(77);function u(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var n=e[e.length-1];switch(Object(r.a)(n)?e.pop():n=void 0,e.length){case 0:return Object(a.b)(n);case 1:return n?Object(i.a)(e,n):Object(o.a)(e[0]);default:return Object(i.a)(e,n)}}},function(e,t,n){"use strict";n.d(t,"a",function(){return i});var r=n(13);function i(e){var t=new r.a(function(t){t.next(e),t.complete()});return t._isScalar=!0,t.value=e,t}},function(e,t,n){"use strict";n.d(t,"a",function(){return i});var r=n(3),i=function(e){function t(t,n){var r=e.call(this)||this;return r.subject=t,r.subscriber=n,r.closed=!1,r}return r.a(t,e),t.prototype.unsubscribe=function(){if(!this.closed){this.closed=!0;var e=this.subject,t=e.observers;if(this.subject=null,t&&0!==t.length&&!e.isStopped&&!e.closed){var n=t.indexOf(this.subscriber);-1!==n&&t.splice(n,1)}}},t}(n(15).a)},function(e,t,n){"use strict";n.d(t,"a",function(){return i});var r=n(13);function i(e,t){return t?new r.a(function(n){return t.schedule(a,0,{error:e,subscriber:n})}):new r.a(function(t){return t.error(e)})}function a(e){var t=e.error;e.subscriber.error(t)}},function(e,t,n){"use strict";function r(){return Error.call(this),this.message="argument out of range",this.name="ArgumentOutOfRangeError",this}n.d(t,"a",function(){return i}),r.prototype=Object.create(Error.prototype);var i=r},function(e,t,n){"use strict";n.d(t,"a",function(){return l});var r=n(23),i=n(53);function a(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function o(e){var t="function"==typeof Map?new Map:void 0;return(o=function(e){if(null===e||!function(e){return-1!==Function.toString.call(e).indexOf("[native code]")}(e))return e;if("function"!=typeof e)throw new TypeError("Super expression must either be null or a function");if(void 0!==t){if(t.has(e))return t.get(e);t.set(e,n)}function n(){return u(e,arguments,c(this).constructor)}return n.prototype=Object.create(e.prototype,{constructor:{value:n,enumerable:!1,writable:!0,configurable:!0}}),s(n,e)})(e)}function u(e,t,n){return(u=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(e){return!1}}()?Reflect.construct:function(e,t,n){var r=[null];r.push.apply(r,t);var i=new(Function.bind.apply(e,r));return n&&s(i,n.prototype),i}).apply(null,arguments)}function s(e,t){return(s=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function c(e){return(c=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var l=function(e){function t(n,o,u){var s;return s=e.call(this)||this,Object.setPrototypeOf(a(a(s)),t.prototype),s.name="EncryptedMediaError",s.type=r.b.ENCRYPTED_MEDIA_ERROR,s.reason=o,s.code=r.a.hasOwnProperty(n)?r.a[n]:"",s.fatal=!!u,s.message=Object(i.a)(s.name,s.code,s.reason),s}return function(e,t){e.prototype=Object.create(t.prototype),e.prototype.constructor=e,e.__proto__=t}(t,e),t}(o(Error))},function(e,t,n){"use strict";n.d(t,"a",function(){return a});var r=n(0),i=n(11);function a(e){e.periods.forEach(function(t){var n=t.adaptations,o=[];Object.keys(n).forEach(function(t){(n[t]||[]).forEach(function(t){var n=t.id;if(Object(i.a)(o,n)){r.a.warn("Two adaptations with the same ID found. Updating.",n);var u=n+"-dup";t.id=u,a(e),o.push(u)}else o.push(n);var s=[];t.representations.forEach(function(t){var n=t.id;if(Object(i.a)(s,n)){r.a.warn("Two representations with the same ID found. Updating.",n);var o=n+"-dup";t.id=o,a(e),s.push(o)}else s.push(n)})})})})}},function(e,t,n){"use strict";function r(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function i(e){var t="function"==typeof Map?new Map:void 0;return(i=function(e){if(null===e||!function(e){return-1!==Function.toString.call(e).indexOf("[native code]")}(e))return e;if("function"!=typeof e)throw new TypeError("Super expression must either be null or a function");if(void 0!==t){if(t.has(e))return t.get(e);t.set(e,n)}function n(){return a(e,arguments,u(this).constructor)}return n.prototype=Object.create(e.prototype,{constructor:{value:n,enumerable:!1,writable:!0,configurable:!0}}),o(n,e)})(e)}function a(e,t,n){return(a=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(e){return!1}}()?Reflect.construct:function(e,t,n){var r=[null];r.push.apply(r,t);var i=new(Function.bind.apply(e,r));return n&&o(i,n.prototype),i}).apply(null,arguments)}function o(e,t){return(o=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function u(e){return(u=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}n.d(t,"a",function(){return s});var s=function(e){function t(n,i,a){var o;return o=e.call(this)||this,Object.setPrototypeOf(r(r(o)),t.prototype),o.name="RequestError",o.url=i,o.xhr=n,o.status=n.status,o.type=a,o.message=a,o}return function(e,t){e.prototype=Object.create(t.prototype),e.prototype.constructor=e,e.__proto__=t}(t,e),t}(i(Error))},function(e,t,n){"use strict";var r=n(13),i=n(29);function a(e,t){return Object(i.a)({url:e,responseType:"document",ignoreProgressEvents:t})}t.a=function(e){return function(t){var n=e.customManifestLoader,i=e.ignoreProgressEvents;return n?r.a.create(function(e){var r=!1,i=!1,o=n(t,{reject:function(t){void 0===t&&(t={}),i||(r=!0,e.error(t))},resolve:function(t){i||(r=!0,e.next({type:"response",value:{responseData:t.data,size:t.size,duration:t.duration}}),e.complete())},fallback:function(){i=!0,a(t).subscribe(e)}});return function(){r||i||"function"!=typeof o||o()}}):a(t,i)}}},function(e,t,n){"use strict";function r(e){if(!e)return"";var t=new Uint8Array(e);239===t[0]&&187===t[1]&&191===t[2]&&(t=t.subarray(3));var n=function(e){for(var t="",n=0;n<e.length;n+=16e3){var r=e.subarray(n,n+16e3);t+=String.fromCharCode.apply(null,r)}return t}(t),r=escape(n);return decodeURIComponent(r)}n.d(t,"a",function(){return r})},function(e,t,n){"use strict";n.d(t,"a",function(){return i});var r=n(49);function i(e,t){for(var n=[],i=t;i<e.length;i++)if(Object(r.c)(e,i)){var a=Object(r.a)(e,i);n.push(e.slice(i,a)),i=a}else if(e[i])for(;e[i];)i++;return n}},function(e,t,n){"use strict";function r(e){var t=e.getAttribute("ttp:frameRate"),n=e.getAttribute("ttp:subFramRate"),r=e.getAttribute("ttp:tickRate"),i=e.getAttribute("ttp:frameRateMultiplier"),a=e.getAttribute("xml:space");if(a&&"default"!==a&&"preserve"!==a)throw new Error("Invalid spacing style");var o=Number(t)||30,u=Number(n)||1,s=Number(r)||0,c=s,l=o,f=null!=u?u:1,d=a||"default";if(0===s&&(c=t?o*u:1),i){var p=/^(\d+) (\d+)$/g.exec(i);if(p)l=o*(Number(p[1])/Number(p[2]))}return{tickRate:c,frameRate:l,subFrameRate:f,spaceStyle:d}}n.d(t,"a",function(){return r})},function(e,t,n){"use strict";n.d(t,"a",function(){return f});var r=n(76),i=n(149),a=n(151),o=n(67),u=n(137),s=n(147),c=n(12),l=n(0);function f(e,t,n){return{seek$:function(e,t){return Object(c.e)(e).pipe(Object(i.a)(function(){l.a.info("set initial time",t),e.playbackRate=1,e.currentTime="function"==typeof t?t():t}),Object(a.a)())}(e,t),load$:Object(c.b)(e).pipe(Object(i.a)(function(){return l.a.info("canplay event")}),Object(o.a)(function(){return n?Object(c.j)(e).pipe(Object(u.a)("autoplay"),Object(s.a)(function(e){if("NotAllowedError"===e.name)return l.a.warn("Media element can't play. It may be due to browser auto-play policies."),Object(r.a)("autoplay-blocked");throw e})):Object(r.a)("loaded")}),Object(a.a)())}}},function(e,t,n){"use strict";n.d(t,"a",function(){return c});var r=n(64),i=n(12),a=n(8),o=n(81),u=n(6),s=n(0);function c(e,t){return null==u.a.emeManager?Object(a.b)(e).pipe(Object(r.a)(function(){throw s.a.error("eme: encrypted event but EME feature not activated"),new o.a("MEDIA_IS_ENCRYPTED_ERROR",null,!0)})):t&&t.length?Object(i.d)()?u.a.emeManager(e,t):Object(a.b)(e).pipe(Object(r.a)(function(){throw s.a.error("eme: encrypted event but no EME API available"),new o.a("MEDIA_IS_ENCRYPTED_ERROR",null,!0)})):Object(a.b)(e).pipe(Object(r.a)(function(){throw s.a.error("eme: ciphered media and no keySystem passed"),new o.a("MEDIA_IS_ENCRYPTED_ERROR",null,!0)}))}},function(e,t,n){"use strict";n.d(t,"a",function(){return u});var r=n(136),i=n(67),a=n(63),o=n(0);function u(e){return Object(r.a)(e,"error").pipe(Object(i.a)(function(){var t;switch(e.error&&e.error.code){case 1:t="MEDIA_ERR_ABORTED";break;case 2:t="MEDIA_ERR_NETWORK";break;case 3:t="MEDIA_ERR_DECODE";break;case 4:t="MEDIA_ERR_SRC_NOT_SUPPORTED";break;default:t="MEDIA_ERR_UNKNOWN"}throw o.a.error("stream: media element MEDIA_ERR("+t+")"),new a.a(t,null,!0)}))}},function(e,t,n){"use strict";var r=n(149),i=n(152),a=n(64),o=n(141),u=n(12),s=n(2),c=n(0),l=n(16),f=s.a.DISCONTINUITY_THRESHOLD;t.a=function(e,t){return t.pipe(Object(r.a)(function(t){if(t.stalled){var n=t.buffered,r=t.currentTime,i=Object(l.d)(n,r);if(Object(u.h)(t.currentTime,t.currentRange,t.state,!!t.stalled))c.a.warn("after freeze seek",r,t.currentRange),e.currentTime=r;else if(i<f){var a=r+i+1/60;c.a.warn("discontinuity seek",r,i,a),e.currentTime=a}}}),Object(i.a)(),Object(a.a)(function(e){return e.stalled}),Object(o.a)(function(e,t){return!e&&!t||!!e&&!!t&&e.reason===t.reason}))}},function(e,t,n){"use strict";n.d(t,"a",function(){return a});var r=n(3),i=n(10);function a(){return function(e){return e.lift(new o(e))}}var o=function(){function e(e){this.connectable=e}return e.prototype.call=function(e,t){var n=this.connectable;n._refCount++;var r=new u(e,n),i=t.subscribe(r);return r.closed||(r.connection=n.connect()),i},e}(),u=function(e){function t(t,n){var r=e.call(this,t)||this;return r.connectable=n,r}return r.a(t,e),t.prototype._unsubscribe=function(){var e=this.connectable;if(e){this.connectable=null;var t=e._refCount;if(t<=0)this.connection=null;else if(e._refCount=t-1,t>1)this.connection=null;else{var n=this.connection,r=e._connection;this.connection=null,!r||n&&r!==n||r.unsubscribe()}}else this.connection=null},t}(i.a)},function(e,t,n){"use strict";n.d(t,"a",function(){return l});var r=n(23),i=n(53);function a(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function o(e){var t="function"==typeof Map?new Map:void 0;return(o=function(e){if(null===e||!function(e){return-1!==Function.toString.call(e).indexOf("[native code]")}(e))return e;if("function"!=typeof e)throw new TypeError("Super expression must either be null or a function");if(void 0!==t){if(t.has(e))return t.get(e);t.set(e,n)}function n(){return u(e,arguments,c(this).constructor)}return n.prototype=Object.create(e.prototype,{constructor:{value:n,enumerable:!1,writable:!0,configurable:!0}}),s(n,e)})(e)}function u(e,t,n){return(u=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(e){return!1}}()?Reflect.construct:function(e,t,n){var r=[null];r.push.apply(r,t);var i=new(Function.bind.apply(e,r));return n&&s(i,n.prototype),i}).apply(null,arguments)}function s(e,t){return(s=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function c(e){return(c=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var l=function(e){function t(n,o,u){var s;return s=e.call(this)||this,Object.setPrototypeOf(a(a(s)),t.prototype),s.name="NetworkError",s.type=r.b.NETWORK_ERROR,s.xhr=o.xhr,s.url=o.url,s.status=o.status,s.errorType=o.type,s.reason=o,s.code=r.a.hasOwnProperty(n)?r.a[n]:"",s.fatal=!!u,s.message=Object(i.a)(s.name,s.code,s.reason),s}return function(e,t){e.prototype=Object.create(t.prototype),e.prototype.constructor=e,e.__proto__=t}(t,e),t.prototype.isHttpError=function(e){return this.errorType===r.c.ERROR_HTTP_CODE&&this.status===e},t}(o(Error))},function(e,t,n){"use strict";n.d(t,"a",function(){return l});var r=n(23),i=n(53);function a(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function o(e){var t="function"==typeof Map?new Map:void 0;return(o=function(e){if(null===e||!function(e){return-1!==Function.toString.call(e).indexOf("[native code]")}(e))return e;if("function"!=typeof e)throw new TypeError("Super expression must either be null or a function");if(void 0!==t){if(t.has(e))return t.get(e);t.set(e,n)}function n(){return u(e,arguments,c(this).constructor)}return n.prototype=Object.create(e.prototype,{constructor:{value:n,enumerable:!1,writable:!0,configurable:!0}}),s(n,e)})(e)}function u(e,t,n){return(u=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(e){return!1}}()?Reflect.construct:function(e,t,n){var r=[null];r.push.apply(r,t);var i=new(Function.bind.apply(e,r));return n&&s(i,n.prototype),i}).apply(null,arguments)}function s(e,t){return(s=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function c(e){return(c=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var l=function(e){function t(n,o,u){var s;return s=e.call(this)||this,Object.setPrototypeOf(a(a(s)),t.prototype),s.name="OtherError",s.type=r.b.OTHER_ERROR,s.reason=o,s.code=r.a.hasOwnProperty(n)?r.a[n]:"",s.fatal=!!u,s.message=Object(i.a)(s.name,s.code,s.reason),s}return function(e,t){e.prototype=Object.create(t.prototype),e.prototype.constructor=e,e.__proto__=t}(t,e),t}(o(Error))},function(e,t,n){"use strict";e.exports=function(e,t,n){if("function"==typeof Array.prototype.findIndex)return e.findIndex(t,n);if("function"!=typeof t)throw new TypeError("predicate must be a function");var r=Object(e),i=r.length;if(0===i)return-1;for(var a=0;a<i;a++)if(t.call(n,r[a],a,r))return a;return-1}},function(e,t,n){"use strict";var r=n(3),i=n(43),a=n(13),o=n(10),u=n(15),s=n(92),c=function(e){function t(t,n){var r=e.call(this)||this;return r.source=t,r.subjectFactory=n,r._refCount=0,r._isComplete=!1,r}return r.a(t,e),t.prototype._subscribe=function(e){return this.getSubject().subscribe(e)},t.prototype.getSubject=function(){var e=this._subject;return e&&!e.isStopped||(this._subject=this.subjectFactory()),this._subject},t.prototype.connect=function(){var e=this._connection;return e||(this._isComplete=!1,(e=this._connection=new u.a).add(this.source.subscribe(new f(this.getSubject(),this))),e.closed?(this._connection=null,e=u.a.EMPTY):this._connection=e),e},t.prototype.refCount=function(){return Object(s.a)()(this)},t}(a.a).prototype,l={operator:{value:null},_refCount:{value:0,writable:!0},_subject:{value:null,writable:!0},_connection:{value:null,writable:!0},_subscribe:{value:c._subscribe},_isComplete:{value:c._isComplete,writable:!0},getSubject:{value:c.getSubject},connect:{value:c.connect},refCount:{value:c.refCount}},f=function(e){function t(t,n){var r=e.call(this,t)||this;return r.connectable=n,r}return r.a(t,e),t.prototype._error=function(t){this._unsubscribe(),e.prototype._error.call(this,t)},t.prototype._complete=function(){this.connectable._isComplete=!0,this._unsubscribe(),e.prototype._complete.call(this)},t.prototype._unsubscribe=function(){var e=this.connectable;if(e){this.connectable=null;var t=e._connection;e._refCount=0,e._subject=null,e._connection=null,t&&t.unsubscribe()}},t}(i.b);o.a;function d(e,t){return function(n){var r;if(r="function"==typeof e?e:function(){return e},"function"==typeof t)return n.lift(new p(r,t));var i=Object.create(n,l);return i.source=n,i.subjectFactory=r,i}}n.d(t,"a",function(){return d});var p=function(){function e(e,t){this.subjectFactory=e,this.selector=t}return e.prototype.call=function(e,t){var n=this.selector,r=this.subjectFactory(),i=n(r).subscribe(e);return i.add(t.subscribe(r)),i},e}()},function(e,t,n){"use strict";var r=n(67);function i(e){return e}function a(e){return void 0===e&&(e=Number.POSITIVE_INFINITY),Object(r.a)(i,e)}n.d(t,"a",function(){return a})},function(e,t,n){"use strict";function r(e){var t=e.split(":");if(t[2]){var n=parseInt(t[0],10),r=parseInt(t[1],10),i=parseFloat(t[2].replace(",","."));if(isNaN(n)||isNaN(r)||isNaN(i))return;return 60*n*60+60*r+i}}function i(e,t){if(0===e.length)return null;var n,i,a=[];if(e[1]&&e[1].indexOf("--\x3e")){var o=e[1].split("--\x3e").map(function(e){return e.trim()});n=o[0],i=o[1],a=e.slice(2,e.length)}if(!n||!i){var u=e[0].split("--\x3e").map(function(e){return e.trim()});n=u[0],i=u[1],a=e.slice(1,e.length)}if(!n||!i)return null;var s=r(n),c=r(i);return null==s||null==c?null:{start:s+t,end:c+t,payload:a}}n.d(t,"a",function(){return i})},function(e,t,n){"use strict";function r(e,t){for(var n=t+1;e[n];)n++;return n}function i(e){for(var t=[],n=0;n<e.length;n++)if(e[n]){var i=r(e,n),a=e.slice(n,i);a.length>0&&(1===a.length?a[0].indexOf("--\x3e")>=0&&t.push(a):(a[1].indexOf("--\x3e")>=0||a[0].indexOf("--\x3e")>=0)&&t.push(a)),n=i}return t}n.d(t,"a",function(){return i})},function(e,t,n){"use strict";var r=n(20);function i(e,t){var n=e.exec(t);if(null===n||""===n[0])return null;var r=Number(n[1])||0,i=Number(n[2])||0,a=Number(n[3])||0;return(Number(n[4])||0)/1e3+a+60*i+3600*r}var a=function(e,t){return r.e.test(e)?function(e,t){var n=r.e.exec(t),i=Number(n[1]),a=Number(n[2]),o=Number(n[3]),u=Number(n[4]),s=Number(n[5])||0;return u+=s/e.subFrameRate,(o+=u/e.frameRate)+60*a+3600*i}(t,e):r.d.test(e)?i(r.d,e):r.f.test(e)?i(r.f,e):r.g.test(e)?function(e,t){var n=r.g.exec(t);return Number(n[1])/e.frameRate}(t,e):r.i.test(e)?function(e,t){var n=r.i.exec(t);return Number(n[1])/e.tickRate}(t,e):r.h.test(e)?i(r.h,e):void 0};function o(e,t){var n=e.getAttribute("begin"),r=e.getAttribute("dur"),i=e.getAttribute("end"),o=n?a(n,t):null,u=r?a(r,t):null,s=i?a(i,t):null;if(null==o||null==s&&null==u)throw new Error("Invalid text cue");return{start:o,end:null==s?o+u:s}}n.d(t,"a",function(){return o})},function(e,t,n){"use strict";function r(e){var t=e.split(":").reverse();if(t[2]||t[1]){var n=t[2]?parseInt(t[2],10):0,r=parseInt(t[1],10),i=parseFloat(t[0].replace(",","."));if(isNaN(n)||isNaN(r)||isNaN(i))return;return 60*n*60+60*r+i}}function i(e,t){var n,i,a,o=/-->/;if(o.test(e[0]))n=e[0],i=e.slice(1,e.length);else{if(!o.test(e[1]))return null;a=e[0],n=e[1],i=e.slice(2,e.length)}if(!n)return null;var u=function(e){var t=e.match(/^([\d:.]+)[ |\t]+-->[ |\t]+([\d:.]+)[ |\t]*(.*)$/);if(!t)return null;var n=r(t[1]),i=r(t[2]);return null==n||null==i?null:{start:n,end:i,settings:function(e){return e.split(/ |\t/).reduce(function(e,t){var n=t.split(":");return 2===n.length&&(e[n[0]]=n[1]),e},{})}(t[3])}}(n);return u?{start:u.start+t,end:u.end+t,settings:u.settings,payload:i,header:a}:null}n.d(t,"a",function(){return i})},function(e,t,n){"use strict";var r=n(3),i=function(e){function t(t,n){return e.call(this)||this}return r.a(t,e),t.prototype.schedule=function(e,t){return void 0===t&&(t=0),this},t}(n(15).a);n.d(t,"a",function(){return a});var a=function(e){function t(t,n){var r=e.call(this,t,n)||this;return r.scheduler=t,r.work=n,r.pending=!1,r}return r.a(t,e),t.prototype.schedule=function(e,t){if(void 0===t&&(t=0),this.closed)return this;this.state=e;var n=this.id,r=this.scheduler;return null!=n&&(this.id=this.recycleAsyncId(r,n,t)),this.pending=!0,this.delay=t,this.id=this.id||this.requestAsyncId(r,this.id,t),this},t.prototype.requestAsyncId=function(e,t,n){return void 0===n&&(n=0),setInterval(e.flush.bind(e,this),n)},t.prototype.recycleAsyncId=function(e,t,n){if(void 0===n&&(n=0),null!==n&&this.delay===n&&!1===this.pending)return t;clearInterval(t)},t.prototype.execute=function(e,t){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;var n=this._execute(e,t);if(n)return n;!1===this.pending&&null!=this.id&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))},t.prototype._execute=function(e,t){var n=!1,r=void 0;try{this.work(e)}catch(e){n=!0,r=!!e&&e||new Error(e)}if(n)return this.unsubscribe(),r},t.prototype._unsubscribe=function(){var e=this.id,t=this.scheduler,n=t.actions,r=n.indexOf(this);this.work=null,this.state=null,this.pending=!1,this.scheduler=null,-1!==r&&n.splice(r,1),null!=e&&(this.id=this.recycleAsyncId(t,e,null)),this.delay=null},t}(i)},function(e,t,n){"use strict";var r=n(3),i=function(){function e(t,n){void 0===n&&(n=e.now),this.SchedulerAction=t,this.now=n}return e.prototype.schedule=function(e,t,n){return void 0===t&&(t=0),new this.SchedulerAction(this,e).schedule(n,t)},e.now=function(){return Date.now()},e}();n.d(t,"a",function(){return a});var a=function(e){function t(n,r){void 0===r&&(r=i.now);var a=e.call(this,n,function(){return t.delegate&&t.delegate!==a?t.delegate.now():r()})||this;return a.actions=[],a.active=!1,a.scheduled=void 0,a}return r.a(t,e),t.prototype.schedule=function(n,r,i){return void 0===r&&(r=0),t.delegate&&t.delegate!==this?t.delegate.schedule(n,r,i):e.prototype.schedule.call(this,n,r,i)},t.prototype.flush=function(e){var t=this.actions;if(this.active)t.push(e);else{var n;this.active=!0;do{if(n=e.execute(e.state,e.delay))break}while(e=t.shift());if(this.active=!1,n){for(;e=t.shift();)e.unsubscribe();throw n}}},t}(i)},function(e,t,n){"use strict";var r=n(76),i=n(134),a=n(3),o=n(10);var u=function(){function e(){}return e.prototype.call=function(e,t){return t.subscribe(new s(e))},e}(),s=function(e){function t(t){var n=e.call(this,t)||this;return n.hasPrev=!1,n}return a.a(t,e),t.prototype._next=function(e){this.hasPrev?this.destination.next([this.prev,e]):this.hasPrev=!0,this.prev=e},t}(o.a),c=n(64),l=n(138),f=n(139),d=n(118),p=n(149),h=n(0);t.a=function(e,t,n,a){var o,s=a.pauseWhenStalled;o=void 0===s||s?n.pipe(function(e){return e.lift(new u)}).pipe(Object(c.a)(function(e){var t=e[0],n=e[1].stalled,r=t.stalled;if(!r!=!n||r&&n&&r.reason!==n.reason)return!r}),Object(l.a)(function(e){return null!=e}),Object(f.a)(!1)):Object(r.a)(!1);return o.pipe(Object(d.a)(function(n){return n?Object(i.a)(function(){return h.a.info("pause playback to build buffer"),e.playbackRate=0,Object(r.a)(0)}):t.pipe(Object(p.a)(function(t){h.a.info("resume playback speed",t),e.playbackRate=t}))}))}},,function(e,t,n){"use strict";n.d(t,"a",function(){return u});var r=n(33),i=n(76),a=n(44),o=n(107);function u(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return 1===e.length||2===e.length&&Object(r.a)(e[1])?Object(a.a)(e[0]):Object(o.a)()(i.a.apply(void 0,e))}},function(e,t,n){"use strict";n.d(t,"a",function(){return i});var r=n(97);function i(){return Object(r.a)(1)}},function(e,t,n){"use strict";n.d(t,"a",function(){return i});var r=n(67);function i(e,t){return Object(r.a)(e,t,1)}},function(e,t,n){var r=Array.prototype.slice,i=n(122),a=n(123),o=e.exports=function(e,t,n){return n||(n={}),e===t||(e instanceof Date&&t instanceof Date?e.getTime()===t.getTime():!e||!t||"object"!=typeof e&&"object"!=typeof t?n.strict?e===t:e==t:function(e,t,n){var c,l;if(u(e)||u(t))return!1;if(e.prototype!==t.prototype)return!1;if(a(e))return!!a(t)&&(e=r.call(e),t=r.call(t),o(e,t,n));if(s(e)){if(!s(t))return!1;if(e.length!==t.length)return!1;for(c=0;c<e.length;c++)if(e[c]!==t[c])return!1;return!0}try{var f=i(e),d=i(t)}catch(e){return!1}if(f.length!=d.length)return!1;for(f.sort(),d.sort(),c=f.length-1;c>=0;c--)if(f[c]!=d[c])return!1;for(c=f.length-1;c>=0;c--)if(l=f[c],!o(e[l],t[l],n))return!1;return typeof e==typeof t}(e,t,n))};function u(e){return null===e||void 0===e}function s(e){return!(!e||"object"!=typeof e||"number"!=typeof e.length)&&("function"==typeof e.copy&&"function"==typeof e.slice&&!(e.length>0&&"number"!=typeof e[0]))}},function(e,t,n){"use strict";e.exports=n(124).default},,function(e,t,n){"use strict";n.r(t);var r=function(e){function t(){return e.apply(this,arguments)||this}!function(e,t){e.prototype=Object.create(t.prototype),e.prototype.constructor=e,e.__proto__=t}(t,e);var n=t.prototype;return n._append=function(e){var t=e.start,n=e.end,r=e.timescale;this.buffered.insert(t/r,null==n?Number.MAX_VALUE:n/r)},n._remove=function(){},n._abort=function(){},t}(n(56).a);t.default=r},function(e,t,n){"use strict";n.r(t);var r=n(1);t.default=function(e){var t=0,n=e.length,i=Object(r.f)(e.subarray(t,t+8)),a=e[t+=8],o=e[t+=1],u=e[t+=1],s=e[t+=1];t+=1;var c=[a,o,u,s].join("."),l=e[t]+Object(r.o)(e,t+1);t+=4;var f=Object(r.o)(e,t);t+=4;var d=Object(r.f)(e.subarray(t,t+4));t+=4;var p=Object(r.n)(e,t);t+=2;var h=Object(r.n)(e,t),v=[e[t+=2],e[t+1]].join(":"),m=1===e[t+=2];t+=1,t=64;var b,g=[],y=0;if(!l)throw new Error("bif: no images to parse");for(;t<n;){var _=Object(r.o)(e,t);t+=4;var O=Object(r.o)(e,t);if(t+=4,b){var E=b.index,w=f,T=y,j=e.subarray(b.offset,O);g.push({index:E,duration:w,ts:T,data:j}),y+=f}if(4294967295===_)break;b={index:_,offset:O}}return{fileFormat:i,version:c,imageCount:l,timescale:f,format:d,width:p,height:h,aspectRatio:v,isVod:m,thumbs:g}}},function(e,t,n){"use strict";n.r(t),n.d(t,"default",function(){return s});var r=n(12),i=n(11),a=n(86),o=n(101),u=n(49);function s(e,t){var n=e.split(/\r\n|\n|\r/);if(!/^WEBVTT($| |\t)/.test(n[0]))throw new Error("Can't parse WebVTT: Invalid file.");for(var r=Object(u.b)(n),i=Object(a.a)(n,r),s=[],f=0;f<i.length;f++){var d=Object(o.a)(i[f],t);if(null!=d){var p=c(d);null!=p&&(p instanceof VTTCue&&l(d.settings,p),s.push(p))}}return s}function c(e){var t=e.start,n=e.end,i=e.payload.join("\n");return Object(r.i)(t,n,i)}function l(e,t){if(!e.vertical||"rl"!==e.vertical&&"lr"!==e.vertical||(t.vertical=e.vertical),e.line){var n=e.line.match(/^(\d+(\.\d+)?)%(,([a-z]+))?/);if(n)t.line=Number(n[1]),t.snapToLines=!1,Object(i.a)(["start","center","end"],n[4])&&(t.lineAlign=n[4]);else{var r=e.line.match(/^(-?\d+)(,([a-z]+))?/);r&&(t.line=Number(r[1]),t.snapToLines=!0,Object(i.a)(["start","center","end"],r[3])&&(t.lineAlign=r[3]))}}if(e.position){var a=/^([\d\.]+)%(?:,(line-left|line-right|center))?$/.exec(e.position);if(a&&a.length>=2){var o=parseInt(a[1],10);isNaN(o)||(t.position=o,null!=a[2]&&(t.positionAlign=a[2]))}}e.size&&(t.size=e.size),e.align&&Object(i.a)(["start","center","end","left"],e.align)&&(t.align=e.align)}},function(e,t,n){"use strict";n.r(t);var r=n(14),i=n.n(r),a=n(7),o=n.n(a),u=n(12),s=n(87),c=n(55),l=n(100),f=n(47),d=n(20),p=n(30),h=["extent","writingMode","origin","align"],v={left:"start",center:"center",right:"end",start:"start",end:"end"},m={left:"line-left",center:"center",right:"line-right"};function b(e,t,n,r,i,a,o){if(!e.hasAttribute("begin")&&!e.hasAttribute("end")&&/^\s*$/.test(e.textContent||""))return null;var s=Object(l.a)(e,a),c=s.start,f=s.end,p=function(e,t){return function e(t,n){var r=t.childNodes;var i="";for(var a=0;a<r.length;a++){var o=r[a];if("#text"===o.nodeName){var u=o.textContent||"";if(n){var s=u.trim();s=s.replace(/\s+/g," "),u=s}var c=u.replace(/&|\u0026/g,"&amp;").replace(/<|\u003C/g,"&lt;").replace(/>|\u2265/g,"&gt;").replace(/\u200E/g,"&lrm;").replace(/\u200F/g,"&rlm;").replace(/\u00A0/g,"&nbsp;");i+=c}else if("br"===o.nodeName)i+="\n";else if("span"===o.nodeName&&o.nodeType===Node.ELEMENT_NODE&&o.childNodes.length>0){var l=o.getAttribute("xml:space"),f=l?"default"===l:n;i+=e(o,f)}}return i}(e,t)}(e,o),h=Object(u.i)(c+t,f+t,p);return h?(h instanceof VTTCue&&function(e,t){var n=t.extent;if(n){var r=d.c.exec(n);null!=r&&(e.size=Number(r[1]))}switch(t.writingMode){case"tb":case"tblr":e.vertical="lr";break;case"tbrl":e.vertical="rl"}var i=t.origin;if(i)d.c.exec(i);var a=t.align;a&&(e.align=a,"center"===a&&("center"!==e.align&&(e.align="middle"),e.position="auto"),e.positionAlign=m[a]||"",e.lineAlign=v[a]||"")}(h,i),h):null}t.default=function(e,t){var n=[],r=(new DOMParser).parseFromString(e,"text/xml");if(r){var a=r.getElementsByTagName("tt")[0];if(!a)throw new Error("invalid XML");for(var u=Object(f.a)(a),l=Object(f.c)(a),d=Object(f.b)(a),v=Object(f.d)(a),m=Object(s.a)(a),g=[],y=0;y<=l.length-1;y++){var _=l[y];if(_ instanceof Element){var O=_.getAttribute("xml:id");null!=O&&g.push({id:O,style:Object(p.b)(_)})}}for(var E=[],w=0;w<=d.length-1;w++){var T=d[w];if(T instanceof Element){var j=T.getAttribute("xml:id");null!=j&&function(){var e=Object(p.b)(T),t=T.getAttribute("style");if(t){var n=i()(g,function(e){return e.id===t});n&&(e=o()({},n.style,e))}E.push({id:j,style:e})}()}}for(var S=u?Object(p.a)(h,[u],g,E):Object(p.a)(h,[],g,E),x="default"===(u?u.getAttribute("xml:space"):void 0)||"default"===m.spaceStyle,A=0;A<v.length;A++){var R=v[A];if(R instanceof Element){var k=Object(c.a)(R,"div"),I=o()({},S,Object(p.a)(h,[R].concat(k),g,E)),N=R.getAttribute("xml:space"),D=b(R,t,0,0,I,m,N?"default"===N:x);D&&n.push(D)}}}return n}},function(e,t,n){"use strict";n.r(t);var r=n(12),i=n(9),a=/&#([0-9]+);/g,o=/<br>/gi,u=/<style[^>]*>([\s\S]*?)<\/style[^>]*>/i,s=/\s*<p class=([^>]+)>(.*)/i,c=/<sync[^>]+?start="?([0-9]*)"?[^0-9]/i;function l(e,t){var n=e.match(new RegExp("\\s*"+t+":\\s*(\\S+);","i"));return n?n[1]:null}function f(e){return e.replace(o,"\n").replace(a,function(e,t){return String.fromCharCode(t)})}t.default=function(e,t,n){var a,o,d=/<sync[ >]/gi,p=/<sync[ >]|<\/body>/gi,h=[],v=e.match(u),m=v?v[1]:"";p.exec(e);var b=function(e){for(var t,n=/\.(\S+)\s*{([^}]*)}/gi,r={};t=n.exec(e);){var i=t[1],a=l(t[2],"lang");null!=i&&null!=a&&(r[a]=i)}return r}(m),g=n&&b[n];for(Object(i.b)(!!g,"sami: could not find lang "+n+" in CSS");a=d.exec(e),o=p.exec(e),a||o;){if(!a||!o||a.index>=o.index)throw new Error("parse error");var y=e.slice(a.index,o.index),_=y.match(c);if(!_)throw new Error("parse error (sync time attribute)");var O=+_[1];if(isNaN(O))throw new Error("parse error (sync time attribute NaN)");E(y.split("\n"),O/1e3)}return function(e){for(var t=[],n=0;n<e.length;n++){var i=e[n],a=i.start,o=i.end,u=i.text;if(u&&null!=o){var s=Object(r.i)(a,o,u);null!=s&&t.push(s)}}return t}(h);function E(e,n){for(var r,i=e.length;--i>=0;)if(r=e[i].match(s)){var a=r,o=a[1],u=a[2];g===o&&("&nbsp;"===u?h[h.length-1].end=n:h.push({text:f(u),start:n+t}))}}}},function(e,t,n){"use strict";n.r(t),n.d(t,"default",function(){return o});var r=n(12),i=n(99),a=n(98);function o(e,t){for(var n=e.split(/\r\n|\n|\r/),r=Object(i.a)(n),o=[],s=0;s<r.length;s++){var c=Object(a.a)(r[s],t);if(c){var l=u(c);l&&o.push(l)}}return o}function u(e){var t=e.start,n=e.end,i=e.payload.join("\n");return Object(r.i)(t,n,i)}},function(e,t,n){"use strict";n.d(t,"a",function(){return c});var r=n(3),i=n(22),a=n(36),o=n(21),u=n(64),s=n(44);function c(e,t){return"function"==typeof t?function(n){return n.pipe(c(function(n,r){return Object(s.a)(e(n,r)).pipe(Object(u.a)(function(e,i){return t(n,e,r,i)}))}))}:function(t){return t.lift(new l(e))}}var l=function(){function e(e){this.project=e}return e.prototype.call=function(e,t){return t.subscribe(new f(e,this.project))},e}(),f=function(e){function t(t,n){var r=e.call(this,t)||this;return r.project=n,r.index=0,r}return r.a(t,e),t.prototype._next=function(e){var t,n=this.index++;try{t=this.project(e,n)}catch(e){return void this.destination.error(e)}this._innerSub(t,e,n)},t.prototype._innerSub=function(e,t,n){var r=this.innerSubscription;r&&r.unsubscribe();var i=new a.a(this,void 0,void 0);this.add(i),this.innerSubscription=Object(o.a)(this,e,t,n,i)},t.prototype._complete=function(){var t=this.innerSubscription;t&&!t.closed||e.prototype._complete.call(this)},t.prototype._unsubscribe=function(){this.innerSubscription=null},t.prototype.notifyComplete=function(t){this.remove(t),this.innerSubscription=null,this.isStopped&&e.prototype._complete.call(this)},t.prototype.notifyNext=function(e,t,n,r,i){this.destination.next(t)},t}(i.a)},function(e,t,n){"use strict";n.r(t);var r=n(9),i=/&#([0-9]+);/g,a=/<br>/gi,o=/<style[^>]*>([\s\S]*?)<\/style[^>]*>/i,u=/\s*<p class=([^>]+)>(.*)/i,s=/<sync[^>]+?start="?([0-9]*)"?[^0-9]/i;function c(e,t){var n=e.match(new RegExp("\\s*"+t+":\\s*(\\S+);","i"));return n?n[1]:null}function l(e){return e.replace(i,function(e,t){return String.fromCharCode(t)})}t.default=function(e,t,n){var i,f,d=/<sync[ >]/gi,p=/<sync[ >]|<\/body>/gi,h=[],v=e.match(o),m=v?v[1]:"";p.exec(e);var b=function(e){for(var t,n=/\.(\S+)\s*{([^}]*)}/gi,r={};t=n.exec(e);){var i=t[1],a=c(t[2],"lang");null!=i&&null!=a&&(r[a]=i)}return r}(m),g=function(e){var t=/p\s*{([^}]*)}/gi.exec(e);return t?t[1]:""}(m),y=n&&b[n];for(Object(r.b)(!!y,"sami: could not find lang "+n+" in CSS");i=d.exec(e),f=p.exec(e),i||f;){if(!i||!f||i.index>=f.index)throw new Error("parse error");var _=e.slice(i.index,f.index),O=_.match(s);if(!O)throw new Error("parse error (sync time attribute)");var E=+O[1];if(isNaN(E))throw new Error("parse error (sync time attribute NaN)");w(_.split("\n"),E/1e3)}return h;function w(e,n){for(var r=e.length;--r>=0;){var i=e[r].match(u);if(i){var o=i[1],s=i[2];if(y===o)if("&nbsp;"===s)h[h.length-1].end=n;else{var c=document.createElement("DIV");c.className="rxp-texttrack-region";var f=document.createElement("DIV");f.className="rxp-texttrack-div",f.style.position="absolute",f.style.bottom="0",f.style.width="100%",f.style.color="#fff",f.style.textShadow="-1px -1px 0 #000,1px -1px 0 #000,-1px 1px 0 #000,1px 1px 0 #000";var d=document.createElement("div");d.className="rxp-texttrack-p",g&&(d.style.cssText=g);for(var p=s.split(a),v=0;v<p.length;v++){v&&d.appendChild(document.createElement("BR"));var m=document.createElement("SPAN");m.className="rxp-texttrack-span",m.textContent=l(p[v]),d.appendChild(m)}f.appendChild(d),c.appendChild(f),h.push({element:c,start:n+t,end:-1})}}}}}},function(e,t,n){"use strict";n.r(t),n.d(t,"default",function(){return a});var r=n(99),i=n(98);function a(e,t){for(var n=e.split(/\r\n|\n|\r/),a=Object(r.a)(n),u=[],s=0;s<a.length;s++){var c=Object(i.a)(a[s],t);if(null!=c){var l=o(c);null!=l&&u.push(l)}}return u}function o(e){var t=e.start,n=e.end,r=e.payload,i=document.createElement("div");i.className="rxp-texttrack-p",i.style.fontSize="28px",i.style.position="absolute",i.style.bottom="5%",i.style.width="100%",i.style.textAlign="center",i.style.color="#fff",i.style.textShadow="-1px -1px 2px #000,1px -1px 2px #000,-1px 1px 2px #000,1px 1px 2px #000";for(var a=0;a<r.length;a++){a&&i.appendChild(document.createElement("br"));var o=u(r[a]);i.appendChild(o)}return{start:t,end:n,element:i}}function u(e){var t=document.createElement("div");t.innerHTML=e;return function e(t){var n=t.childNodes,r=document.createElement("span");r.className="rxp-texttrack-span";for(var i=0;i<n.length;i++){var a=n[i];if("#text"===a.nodeName){for(var o=a.wholeText.split("\n"),u=0;u<o.length;u++)if(u&&r.appendChild(document.createElement("br")),o[u].length>0){var s=document.createTextNode(o[u]);r.appendChild(s)}}else if("B"===a.nodeName){var c=e(a);c.style.fontWeight="bold",r.appendChild(c)}else if("I"===a.nodeName){var l=e(a);l.style.fontStyle="italic",r.appendChild(l)}else if("U"===a.nodeName){var f=e(a);f.style.textDecoration="underline",r.appendChild(f)}else if("FONT"===a.nodeName&&null!=a.color){var d=e(a);d.style.color=a.color,r.appendChild(d)}else{var p=e(a);r.appendChild(p)}}return r}(t)}},function(e,t,n){"use strict";n.r(t),n.d(t,"default",function(){return b});var r=n(76),i=n(135),a=n(64),o=n(67),u=n(145),s=n(12),c=n(63),l=n(0),f=n(89),d=n(28),p=n(88),h=n(90),v=n(104),m=n(91);function b(e){var t=e.autoPlay,n=e.clock$,b=e.keySystems,g=e.mediaElement,y=e.speed$,_=e.startAt,O=e.url;Object(s.c)(g),l.a.debug("calculating initial time");var E=function(){return function(e,t){if(!t)return 0;if(null!=t.position)return t.position;if(null!=t.wallClockTime)return t.wallClockTime;if(null!=t.fromFirstPosition)return t.fromFirstPosition;var n=e.duration;if(!n||!isFinite(n))return l.a.warn("startAt.fromLastPosition set but no known duration, beginning at 0."),0;if(t.fromLastPosition)return Math.max(0,n+t.fromLastPosition);if(null!=t.percentage){var r=t.percentage;return r>=100?n:r<=0?0:n*(+r/100)}return 0}(g,_)};l.a.debug("initial time calculated:",E);var w=Object(p.a)(g,E,t),T=w.seek$,j=w.load$,S=Object(f.a)(g,b),x=Object(h.a)(g),A=Object(v.a)(g,y,n,{pauseWhenStalled:!0}).pipe(Object(a.a)(d.a.speedChanged)),R=Object(m.a)(g,n).pipe(Object(a.a)(d.a.stalled)),k=j.pipe(Object(o.a)(function(e){if("autoplay-blocked"===e){var t=new c.a("MEDIA_ERR_BLOCKED_AUTOPLAY",null,!1);return Object(r.a)(d.a.warning(t),d.a.loaded())}return Object(r.a)(d.a.loaded())})),I=Object(s.k)(g,O).pipe(Object(u.a)()),N=T.pipe(Object(u.a)());return Object(i.a)(k,N,S,x,A,R,I)}},function(e,t){function n(e){var t=[];for(var n in e)t.push(n);return t}(e.exports="function"==typeof Object.keys?Object.keys:n).shim=n},function(e,t){var n="[object Arguments]"==function(){return Object.prototype.toString.call(arguments)}();function r(e){return"[object Arguments]"==Object.prototype.toString.call(e)}function i(e){return e&&"object"==typeof e&&"number"==typeof e.length&&Object.prototype.hasOwnProperty.call(e,"callee")&&!Object.prototype.propertyIsEnumerable.call(e,"callee")||!1}(t=e.exports=n?r:i).supported=r,t.unsupported=i},function(e,t,n){"use strict";n.r(t);var r=n(109),i=n.n(r),a=n(43),o=n(127),u=n(3),s=n(46),c=function(e){function t(t){var n=e.call(this)||this;return n._value=t,n}return u.a(t,e),Object.defineProperty(t.prototype,"value",{get:function(){return this.getValue()},enumerable:!0,configurable:!0}),t.prototype._subscribe=function(t){var n=e.prototype._subscribe.call(this,t);return n&&!n.closed&&t.next(this._value),n},t.prototype.getValue=function(){if(this.hasError)throw this.thrownError;if(this.closed)throw new s.a;return this._value},t.prototype.next=function(t){e.prototype.next.call(this,this._value=t)},t}(a.a),l=n(135),f=n(26),d=n(146),p=n(106),h=n(76),v=n(142),m=n(64),b=n(141),g=n(143),y=n(96);function _(e){return e?Object(y.a)(function(){return new a.a},e):Object(y.a)(new a.a)}var O=n(138),E=n(152),w=n(137),T=n(139),j=n(22),S=n(36),x=n(21);var A=function(){function e(e){this.notifier=e}return e.prototype.call=function(e,t){return t.subscribe(new R(e,this.notifier))},e}(),R=function(e){function t(t,n){var r=e.call(this,t)||this;r.hasValue=!1;var i=new S.a(r,void 0,void 0);return r.add(i),r.innerSubscription=i,Object(x.a)(r,n,void 0,void 0,i),r}return u.a(t,e),t.prototype._next=function(t){this.hasValue&&e.prototype._next.call(this,t)},t.prototype.notifyNext=function(e,t,n,r,i){this.hasValue=!0,this.innerSubscription&&this.innerSubscription.unsubscribe()},t.prototype.notifyComplete=function(){},t}(j.a),k=n(150),I=n(144),N=n(147),D=n(2),M=n(0),P=n(40),C=n(27),B=n(16),L=n(11),U=[];function F(e){Object(L.a)(U,e)||(console.warn(e),U.push(e))}var $=n(66),V=n(8),z=n(23),H=n(6),G=n(61),K=n(7),q=n.n(K),Y=n(67),W=n(118),X=n(149);var Q=n(151),Z=function(){function e(e){this._alpha=Math.exp(Math.log(.5)/e),this._lastEstimate=0,this._totalWeight=0}var t=e.prototype;return t.addSample=function(e,t){var n=Math.pow(this._alpha,e),r=t*(1-n)+n*this._lastEstimate;isNaN(r)||(this._lastEstimate=r,this._totalWeight+=e)},t.getEstimate=function(){var e=1-Math.pow(this._alpha,this._totalWeight);return this._lastEstimate/e},e}(),J=D.a.ABR_MINIMUM_TOTAL_BYTES,ee=D.a.ABR_MINIMUM_CHUNK_SIZE,te=D.a.ABR_FAST_EMA,ne=D.a.ABR_SLOW_EMA,re=function(){function e(){this._fast=new Z(te),this._slow=new Z(ne),this._bytesSampled=0}var t=e.prototype;return t.addSample=function(e,t){if(!(t<ee)){var n=8e3*t/e,r=e/1e3;this._bytesSampled+=t,this._fast.addSample(r,n),this._slow.addSample(r,n)}},t.getEstimate=function(){if(!(this._bytesSampled<J))return Math.min(this._fast.getEstimate(),this._slow.getEstimate())},t.reset=function(){this._fast=new Z(te),this._slow=new Z(ne),this._bytesSampled=0},e}(),ie=n(95),ae=n.n(ie);var oe=n(14),ue=n.n(oe);function se(e,t){var n=ae()(e,function(e){return e.bitrate>t});return-1===n?e[e.length-1]:e[n-1]}var ce=D.a.ABR_REGULAR_FACTOR,le=D.a.ABR_STARVATION_FACTOR,fe=D.a.ABR_STARVATION_GAP,de=D.a.OUT_OF_STARVATION_GAP;function pe(e,t){var n=e;return null!=t.bitrate&&(n=function(e,t){var n=ae()(e,function(e){return e.bitrate>t});return-1===n?e:e.slice(0,n)}(n,t.bitrate)),null!=t.width&&(n=function(e,t){var n=e.slice().sort(function(e,t){return(e.width||0)-(t.width||0)}),r=ue()(n,function(e){return(e.width||0)>=t});if(r){var i=r.width||0;return e.filter(function(e){return(e.width||0)<=i})}return e}(n,t.width)),n}function he(e,t,n){var r=function(e,t){for(var n=Object.keys(e),r=n.length,i=0;i<r;i++){var a=e[n[i]];if(null!=a&&Math.abs(a.time-t)<.3*a.duration)return a}}(e,t.currentTime+t.bufferGap);if(r){var i=t.bitrate,a=r.duration,o=Date.now(),u=(o-r.requestTimestamp)/1e3,s=r.progress?r.progress[r.progress.length-1]:null,c=function(e){if(!(e.progress.length<2)){for(var t=new Z(2),n=e.progress,r=1;r<n.length;r++){var i=n[r].size-n[r-1].size,a=n[r].timestamp-n[r-1].timestamp,o=8*i/(a/1e3);t.addSample(a/1e3,o)}return t.getEstimate()}}(r);if(null!=s&&null!=c){var l=1.2*function(e,t){var n=8*(e.totalSize-e.size);return Math.max(n/t,0)}(s,c);if((o-s.timestamp)/1e3<=l&&l>t.bufferGap/t.speed)return c}if(!(null==i||u<=(1.5*a+1)/t.speed)){var f=.7*i;return null==n||f<n?f:void 0}}}var ve=function(){function e(e){this._dispose$=new a.a,this.manualBitrate$=new c(null!=e.manualBitrate?e.manualBitrate:-1),this.maxAutoBitrate$=new c(null!=e.maxAutoBitrate?e.maxAutoBitrate:1/0),this.estimator=new re,this._currentRequests={},this._initialBitrate=e.initialBitrate||0,this._limitWidth$=e.limitWidth$,this._throttle$=e.throttle$}var t=e.prototype;return t.get$=function(e,t){var n=this;if(t.length<2)return Object(h.a)({bitrate:void 0,representation:t.length?t[0]:null}).pipe(Object(v.a)(this._dispose$));var r=this.manualBitrate$,i=this.maxAutoBitrate$,a=this._initialBitrate,o=[];this._limitWidth$&&o.push(this._limitWidth$.pipe(Object(m.a)(function(e){return{width:e}}))),this._throttle$&&o.push(this._throttle$.pipe(Object(m.a)(function(e){return{bitrate:e}})));var u,s=o.length?d.a.apply(void 0,o).pipe(Object(m.a)(function(e){return q.a.apply(void 0,[{}].concat(e))})):Object(h.a)({});return r.pipe(Object(W.a)(function(r){if(r>=0)return function(e,t){var n=se(e,t)||e[0];return Object(h.a)({bitrate:void 0,representation:n})}(t,r);var o=!1;return Object(d.a)(e,i,s).pipe(Object(m.a)(function(e){var r,i,s,c=e[0],l=e[1],f=e[2],d=c.bufferGap;if(!o&&d<=fe?(M.a.info("ABR - enter starvation mode."),o=!0):o&&d>=de&&(M.a.info("ABR - exit starvation mode."),o=!1),o&&null!=(i=he(n._currentRequests,c,u))){M.a.info("ABR - starvation mode emergency estimate:",i),n.resetEstimate();var p=c.bitrate;r=null==p?Math.min(i,l):Math.min(i,l,p)}null==r&&(s=null!=(i=n.estimator.getEstimate())?o?i*le:i*ce:null!=u?o?u*le:u*ce:a,r=Math.min(s,l));return c.speed>1&&(r/=c.speed),{bitrate:i,representation:se(pe(t,f),r)||t[0]}}),Object(X.a)(function(e){var t=e.bitrate;null!=t&&(M.a.debug("ABR - calculated bitrate:",t),u=t)}),Object(Q.a)())}))},t.addEstimate=function(e,t){null!=e&&null!=t&&this.estimator.addSample(e,t)},t.resetEstimate=function(){this.estimator.reset()},t.addPendingRequest=function(e,t){if(this._currentRequests[e])M.a.warn("ABR: request already added.");else{var n=t.value,r=n.time,i=n.duration,a=n.requestTimestamp;this._currentRequests[e]={time:r,duration:i,requestTimestamp:a,progress:[]}}},t.addRequestProgress=function(e,t){var n=this._currentRequests[e];n?n.progress.push(t.value):M.a.warn("ABR: progress for a request not added")},t.removePendingRequest=function(e){this._currentRequests[e]||M.a.warn("ABR: can't remove unknown request"),delete this._currentRequests[e]},t.resetRequests=function(){this._currentRequests={}},t.dispose=function(){this._dispose$.next(),this.manualBitrate$.complete(),this.maxAutoBitrate$.complete()},e}(),me={limitWidth:{},throttle:{},initialBitrates:{},manualBitrates:{},maxAutoBitrates:{}},be=function(){function e(e,t,n){var r=this;void 0===n&&(n=me),this._dispose$=new a.a,this._choosers={},this._chooserInstanceOptions={initialBitrates:n.initialBitrates||{},manualBitrates:n.manualBitrates||{},maxAutoBitrates:n.maxAutoBitrates||{},throttle:n.throttle||{},limitWidth:n.limitWidth||{}},t.pipe(Object(v.a)(this._dispose$)).subscribe(function(e){var t=e.type,n=e.value,i=r._lazilyCreateChooser(t),a=n.duration,o=n.size;i.addEstimate(a,o)}),e.pipe(Object(Y.a)(function(e){return e}),Object(v.a)(this._dispose$)).subscribe(function(e){var t=e.type,n=e.value,i=r._lazilyCreateChooser(t);switch(e.event){case"requestBegin":i.addPendingRequest(n.id,e);break;case"requestEnd":i.removePendingRequest(n.id);break;case"progress":i.addRequestProgress(n.id,e)}})}var t=e.prototype;return t.get$=function(e,t,n){return void 0===n&&(n=[]),this._lazilyCreateChooser(e).get$(t,n)},t.setManualBitrate=function(e,t){var n=this._choosers[e];n?n.manualBitrate$.next(t):this._chooserInstanceOptions.initialBitrates[e]=t},t.setMaxAutoBitrate=function(e,t){var n=this._choosers[e];n?n.maxAutoBitrate$.next(t):this._chooserInstanceOptions.maxAutoBitrates[e]=t},t.getManualBitrate=function(e){var t=this._choosers[e];return t?t.manualBitrate$.getValue():this._chooserInstanceOptions.manualBitrates[e]},t.getMaxAutoBitrate=function(e){var t=this._choosers[e];return t?t.maxAutoBitrate$.getValue():this._chooserInstanceOptions.maxAutoBitrates[e]},t.dispose=function(){var e=this;Object.keys(this._choosers).forEach(function(t){e._choosers[t].dispose()}),this._chooserInstanceOptions=me,this._choosers={},this._dispose$.next(),this._dispose$.complete()},t._lazilyCreateChooser=function(e){return this._choosers[e]||(this._choosers[e]=function(e,t){return new ve({limitWidth$:t.limitWidth[e],throttle$:t.throttle[e],initialBitrate:t.initialBitrates[e],manualBitrate:t.manualBitrates[e],maxAutoBitrate:t.maxAutoBitrates[e]})}(e,this._chooserInstanceOptions)),this._choosers[e]},e}(),ge=n(12),ye=n(63),_e=n(19),Oe=function(){function e(e){var t=Object(_e.a)();this.id=null==e.id?t:e.id,this.bitrate=e.bitrate,this.codec=e.codecs,null!=e.height&&(this.height=e.height),null!=e.width&&(this.width=e.width),null!=e.mimeType&&(this.mimeType=e.mimeType),e.contentProtections&&(this.contentProtections=e.contentProtections),e.frameRate&&(this.frameRate=e.frameRate),this.index=e.index}return e.prototype.getMimeTypeString=function(){return this.mimeType+';codecs="'+this.codec+'"'},e}(),Ee=["audio","video","text","image"],we=function(){function e(e){var t=this,n=Object(_e.a)();this.id=null==e.id?n:""+e.id,this.type=e.type,this.representations=Array.isArray(e.representations)?e.representations.map(function(e){return new Oe(q()({rootId:t.id},e))}).sort(function(e,t){return e.bitrate-t.bitrate}):[],null!=e.language&&(this.language=e.language),null!=e.normalizedLanguage&&(this.normalizedLanguage=e.normalizedLanguage),null!=e.closedCaption&&(this.isClosedCaption=e.closedCaption),null!=e.audioDescription&&(this.isAudioDescription=e.audioDescription),this.manuallyAdded=!!e.manuallyAdded}var t=e.prototype;return t.getAvailableBitrates=function(){return this.representations.map(function(e){return e.bitrate})},t.getRepresentation=function(e){return ue()(this.representations,function(t){var n=t.id;return e===n})},t.getRepresentationsForBitrate=function(e){return this.representations.filter(function(t){return t.bitrate===e})||null},e}(),Te=n(39),je=function(){function e(e){this._media=e.media}var t=e.prototype;return t.getInitSegment=function(){return null},t.getSegments=function(){return[{id:"0",isInit:!1,number:0,time:0,duration:Number.MAX_VALUE,timescale:1,mediaURL:this._media}]},t.getFirstPosition=function(){},t.getLastPosition=function(){},t.shouldRefresh=function(){return!1},t.checkDiscontinuity=function(){return-1},t._addSegments=function(){0},t._update=function(){M.a.warn("Tried to update a static RepresentationIndex")},e}(),Se=function(){function e(e){this.id=e.id,this.adaptations=Object.keys(e.adaptations).reduce(function(t,n){if(e.adaptations[n]){var r=e.adaptations[n];r&&(t[n]=r.map(function(e){return new we(e)}))}return t},{}),this.duration=e.duration,this.start=e.start,null!=this.duration&&null!=this.start&&(this.end=this.start+this.duration)}var t=e.prototype;return t.addSupplementaryImageAdaptations=function(e){var t=(Array.isArray(e)?e:[e]).map(function(e){var t=e.mimeType,n=e.url,r="gen-image-ada-"+Object(_e.a)(),i="gen-image-rep-"+Object(_e.a)();return new we({id:r,type:"image",manuallyAdded:!0,representations:[{bitrate:0,id:i,mimeType:t,index:new je({media:n})}]})});t.length&&(this.adaptations.image=this.adaptations.image?this.adaptations.image.concat(t):t)},t.addSupplementaryTextAdaptations=function(e){var t=(Array.isArray(e)?e:[e]).reduce(function(e,t){var n=t.mimeType,r=t.codecs,i=t.url,a=t.language,o=t.languages,u=t.closedCaption,s=a?[a]:o||[];return e.concat(s.map(function(e){var t="gen-text-ada-"+Object(_e.a)(),a="gen-text-rep-"+Object(_e.a)();return new we({id:t,type:"text",language:e,normalizedLanguage:Object(Te.a)(e),closedCaption:u,manuallyAdded:!0,representations:[{bitrate:0,id:a,mimeType:n,codecs:r,index:new je({media:i})}]})}))},[]);t.length&&(this.adaptations.text=this.adaptations.text?this.adaptations.text.concat(t):t)},t.getAdaptations=function(){var e=this.adaptations;if(!e)return[];var t=[];for(var n in e)if(e.hasOwnProperty(n)){var r=e[n];t.push.apply(t,r)}return t},t.getAdaptationsForType=function(e){return this.adaptations[e]||[]},t.getAdaptation=function(e){return ue()(this.getAdaptations(),function(t){var n=t.id;return e===n})},e}(),xe=function(){function e(e){var t=Object(_e.a)();this.id=null==e.id?t:""+e.id,this.transport=e.transportType||"",this.periods=e.periods.map(function(e){return new Se(e)}),this.adaptations=this.periods[0]&&this.periods[0].adaptations||[],this.minimumTime=e.minimumTime,this.isLive=e.isLive,this.uris=e.uris,this.suggestedPresentationDelay=e.suggestedPresentationDelay,this.availabilityStartTime=e.availabilityStartTime,this.presentationLiveGap=e.presentationLiveGap,this.timeShiftBufferDepth=e.timeShiftBufferDepth,this._duration=e.duration}var t=e.prototype;return t.addSupplementaryImageAdaptations=function(e){var t=(Array.isArray(e)?e:[e]).map(function(e){var t=e.mimeType,n=e.url,r="gen-image-ada-"+Object(_e.a)(),i="gen-image-rep-"+Object(_e.a)();return new we({id:r,type:"image",manuallyAdded:!0,representations:[{bitrate:0,id:i,mimeType:t,index:new je({media:n})}]})});t.length&&(this.adaptations.image=this.adaptations.image?this.adaptations.image.concat(t):t)},t.addSupplementaryTextAdaptations=function(e){var t=(Array.isArray(e)?e:[e]).reduce(function(e,t){var n=t.mimeType,r=t.codecs,i=t.url,a=t.language,o=t.languages,u=t.closedCaption,s=a?[a]:o||[];return e.concat(s.map(function(e){var t="gen-text-ada-"+Object(_e.a)(),a="gen-text-rep-"+Object(_e.a)();return new we({id:t,type:"text",language:e,normalizedLanguage:Object(Te.a)(e),closedCaption:u,manuallyAdded:!0,representations:[{bitrate:0,id:a,mimeType:n,codecs:r,index:new je({media:i})}]})}))},[]);t.length&&(this.adaptations.text=this.adaptations.text?this.adaptations.text.concat(t):t)},t.getPeriodForTime=function(e){return ue()(this.periods,function(t){return e>=t.start&&(null==t.end||t.end>e)})},t.getPeriodAfter=function(e){var t=e.end;return null==t?null:ue()(this.periods,function(e){return null==e.end||t<e.end})||null},t.getDuration=function(){return this._duration},t.getUrl=function(){return this.uris[0]},t.getAdaptations=function(){F("manifest.getAdaptations() is deprecated. Please use manifest.period[].getAdaptations() instead");var e=this.periods[0];if(!e)return[];var t=e.adaptations,n=[];for(var r in t)if(t.hasOwnProperty(r)){var i=t[r];n.push.apply(n,i)}return n},t.getAdaptationsForType=function(e){F("manifest.getAdaptationsForType(type) is deprecated. Please use manifest.period[].getAdaptationsForType(type) instead");var t=this.periods[0];return t&&t.adaptations[e]||[]},t.getAdaptation=function(e){return F("manifest.getAdaptation(id) is deprecated. Please use manifest.period[].getAdaptation(id) instead"),ue()(this.getAdaptations(),function(t){var n=t.id;return e===n})},t.updateLiveGap=function(e){this.isLive&&(this.presentationLiveGap?this.presentationLiveGap+=e:this.presentationLiveGap=e)},t.update=function(e){this._duration=e.getDuration(),this.timeShiftBufferDepth=e.timeShiftBufferDepth,this.availabilityStartTime=e.availabilityStartTime,this.suggestedPresentationDelay=e.suggestedPresentationDelay,this.uris=e.uris;for(var t=this.periods,n=e.periods,r=function(e){var r=t[e],a=ue()(n,function(e){return e.id===r.id});if(a){r.start=a.start,r.end=a.end,r.duration=a.duration;for(var o=r.getAdaptations(),u=a.getAdaptations(),s=function(e){var t=o[e],n=ue()(u,function(e){return e.id===t.id});if(n)for(var r=o[e].representations,i=n.representations,a=function(e){var t=r[e],n=ue()(i,function(e){return e.id===t.id});n?r[e].index._update(n.index):M.a.warn('manifest: representation "'+r[e].id+'" not found when merging.')},s=0;s<r.length;s++)a(s);else M.a.warn('manifest: adaptation "'+o[e].id+'" not found when merging.')},c=0;c<o.length;c++)s(c)}else M.a.info("Period "+r.id+" not found after update. Removing."),t.splice(e,1),e--;i=e},i=0;i<t.length;i++)r(i);if(n.length>t.length){var a=t[t.length-1];if(a)for(var o=0;o<n.length-1;o++){var u=n[o];u.start>a.start&&(M.a.info("Adding new period "+u.id),this.periods.push(u))}else for(var s=0;s<n.length-1;s++){var c=n[s];M.a.info("Adding new period "+c.id),this.periods.push(c)}}},t.getMinimumPosition=function(){return this.getCurrentPositionLimits()[0]},t.getMaximumPosition=function(){if(!this.isLive)return this.getDuration();var e=this.availabilityStartTime||0,t=this.presentationLiveGap||0;return Date.now()/1e3-e-t},t.getCurrentPositionLimits=function(){if(!this.isLive)return[this.minimumTime||0,this.getDuration()];var e=this.availabilityStartTime||0,t=this.presentationLiveGap||0,n=this.timeShiftBufferDepth||0,r=Date.now()/1e3-e-t;return[Math.min(r,Math.max(null!=this.minimumTime?this.minimumTime:0,r-n+5)),r]},e}();function Ae(e,t,n,r){e.periods=e.periods.map(function(e){if(Object.keys(e.adaptations).forEach(function(t){var n=e.adaptations[t];if(n){var i=function(e,t){return e.filter(function(e){return!!Object(L.a)(Ee,e.type)||(M.a.info("not supported adaptation type",e.type),t.next(new ye.a("MANIFEST_UNSUPPORTED_ADAPTATION_TYPE",null,!1)),!1)}).map(function(e){if(e.representations.length&&(e.representations=function(e,t){if("audio"===e||"video"===e)return t.filter(function(e){return Object(ge.f)(function(e){var t=e.codecs,n=void 0===t?"":t,r=e.mimeType;return(void 0===r?"":r)+';codecs="'+n+'"'}(e))});return t}(e.type,e.representations),0===e.representations.length)){M.a.warn("Incompatible codecs for adaptation",e);var n=new ye.a("MANIFEST_INCOMPATIBLE_CODECS_ERROR",null,!1);t.next(n)}return e}).filter(function(e){var t=e.representations;return t.length})}(n,r);i.length?e.adaptations[t]=i:delete e.adaptations[t]}else delete e.adaptations[t]}),!e.adaptations.video&&!e.adaptations.audio)throw new ye.a("MANIFEST_PARSE_ERROR",null,!0);return e});var i=new xe(e);return i.addSupplementaryTextAdaptations(t),i.addSupplementaryImageAdaptations(n),i}var Re=n(13),ke=n(10),Ie=n(15);function Ne(e){return function(t){return t.lift(new De(e))}}var De=function(){function e(e){this.callback=e}return e.prototype.call=function(e,t){return t.subscribe(new Me(e,this.callback))},e}(),Me=function(e){function t(t,n){var r=e.call(this,t)||this;return r.add(new Ie.a(n)),r}return u.a(t,e),t}(ke.a),Pe=n(18),Ce=n(83),Be=n(93),Le=n(94),Ue=n(17),Fe=n(45),$e=n(148),Ve=n(59);var ze=function(e,t){var n=t.baseDelay,r=t.maxDelay,i=t.maxRetryRegular,a=t.maxRetryOffline,o=t.onRetry,u=0,s=1,c=2,l=0;return e.pipe(Object(N.a)(function(e,t){if(!function(e){return e instanceof Ce.a&&(e.type===z.c.ERROR_HTTP_CODE?e.status>=500||404===e.status:e.type===z.c.TIMEOUT||e.type===z.c.ERROR_EVENT)}(e))throw e;var f=e instanceof Ce.a&&function(e){return e.type===z.c.ERROR_EVENT&&Object(ge.g)()}(e)?c:s;if(f!==l&&(u=0,l=f),++u>(f===c?a:i))throw e;o&&o(e,u);var d=Math.min(n*Math.pow(2,u-1),r),p=Object(Ve.b)(d);return Object($e.a)(p).pipe(Object(Y.a)(function(){return t}))}))},He=D.a.MAX_BACKOFF_DELAY_BASE,Ge=D.a.INITIAL_BACKOFF_DELAY_BASE;function Ke(e,t,n){return void 0===n&&(n=!0),Object(Pe.a)(t)?t:t instanceof Ce.a?new Be.a(e,t,n):new Le.a(e,t,n)}function qe(e,t){var n=t.cache,r=t.maxRetry,i=t.maxRetryOffline,o=e.loader,u=e.parser,s=null!=e.resolver?e.resolver:h.a.bind(Re.a),c=new a.a,d={baseDelay:Ge,maxDelay:He,maxRetryRegular:r,maxRetryOffline:i,onRetry:function(e){c.next(Ke("PIPELINE_LOAD_ERROR",e,!1))}};return function(e){var t=function(e){return Object(Fe.a)(s,e).pipe().pipe(Object(N.a)(function(e){throw Ke("PIPELINE_RESOLVE_ERROR",e)}))}(e).pipe(Object(Y.a)(function(e){return function(e){function t(){var t=ze(Object(Fe.a)(o,e),d).pipe(Object(N.a)(function(e){throw Ke("PIPELINE_LOAD_ERROR",e)}),Object(X.a)(function(t){"response"===t.type&&n&&n.add(e,t.value)}));return Object(p.a)(Object(h.a)({type:"request",value:e}),t)}var r=n?n.get(e):null;return null!=r?Object(Ue.a)(r).pipe(Object(m.a)(function(e){return{type:"cache",value:e}}),Object(N.a)(t)):t()}(e).pipe(Object(Y.a)(function(t){switch(t.type){case"cache":case"data":case"response":var n=t.value,r=q()({response:n},e),i="response"===t.type?Object(h.a)({type:"metrics",value:{size:t.value.size,duration:t.value.duration}}):f.a;return Object(p.a)(i,function(e){return Object(Fe.a)(u,e).pipe().pipe(Object(N.a)(function(e){throw Ke("PIPELINE_PARSING_ERROR",e)}))}(r).pipe(Object(m.a)(function(e){return{type:"data",value:q()({parsed:e},r)}})));default:return Object(h.a)(t)}}))}),Ne(function(){c.complete()})),r=c.pipe(Object(m.a)(function(e){return{type:"error",value:e}}));return Object(l.a)(t,r)}}var Ye=n(134),We=function(){function e(){this._pendingPriority=null,this._numberOfPendingObservables=0,this._queue=[]}var t=e.prototype;return t.create=function(e,t){var n=this;return Object(Ye.a)(function(){if(null==n._pendingPriority||n._pendingPriority>=t)return n._pendingPriority=t,n._startObservable(e);var r=new a.a;return n._queue.push({observable:e,priority:t,trigger:r}),r.pipe(Object(Y.a)(function(){return n._startObservable(e)}))})},t.updatePriority=function(e,t){var n=ue()(this._queue,function(t){return t.observable===e});n&&(n.priority=t)},t._startObservable=function(e){var t=this;return this._numberOfPendingObservables++,e.pipe(Ne(function(){if(t._numberOfPendingObservables--,!(t._numberOfPendingObservables>0)&&(t._pendingPriority=null,0!==t._queue.length)){t._pendingPriority=t._queue.reduce(function(e,t){return null==e||e>t.priority?t.priority:e},null);for(var e=0;e<t._queue.length;e++){var n=t._queue[e];n.priority===t._pendingPriority&&(t._queue.splice(e,1),e--,n.trigger.next(),n.trigger.complete())}}}))},e}();var Xe=function(){function e(e,t,n,r){this._transport=e,this._metrics$=n,this._requestsInfos$=t,this._warning$=r,this._prioritizer=new We}return e.prototype.createPipeline=function(e,t){var n=function(e,t,n,r,i,o){var u,s,c=qe(t[e],o);return function(t){return c(t).pipe(Object(X.a)(function(t){switch(t.type){case"error":i.next(q()(t.value,{pipelineType:e}));break;case"metrics":var o=t.value,c=o.size,l=o.duration;null!=c&&null!=l&&n.next({type:e,value:{size:c,duration:l}});break;case"request":var f=t.value,d=f&&f.segment;if(null!=d&&null!=d.duration){u=new a.a,r.next(u);var p=d.duration/d.timescale,h=d.time/d.timescale;s=Object(_e.a)(),u.next({type:e,event:"requestBegin",value:{duration:p,time:h,requestTimestamp:Date.now(),id:s}})}break;case"progress":var v=t.value;null!=v.totalSize&&v.size<v.totalSize&&null!=s&&null!=u&&u.next({type:e,event:"progress",value:{duration:v.duration,size:v.size,totalSize:v.totalSize,timestamp:Date.now(),id:s}})}}),Object(O.a)(function(e){return"data"===e.type||"cache"===e.type}),Object(m.a)(function(e){return e.value}),Ne(function(){null!=u&&(null!=s&&u.next({type:e,event:"requestEnd",value:{id:s}}),u.complete())}),Object(E.a)())}}(e,this._transport,this._metrics$,this._requestsInfos$,this._warning$,t);return function(e,t){return{createRequest:function(n,r){return void 0===r&&(r=0),e.create(t(n),r)},updatePriority:function(t,n){e.updatePriority(t,n)}}}(this._prioritizer,n)},e}(),Qe=n(89),Ze=n(24);function Je(e,t,n){if(t&&"closed"!==t.readyState){for(var r=t.readyState,i=t.sourceBuffers,a=i.length-1;a>=0;a--){var o=i[a];try{"open"===r&&(M.a.info("removing SourceBuffer from mediaSource",o),o.abort()),t.removeSourceBuffer(o)}catch(e){M.a.warn("error while disposing SourceBuffer",e)}}i.length&&M.a.warn("not all SourceBuffers could have been removed.")}if(Object(ge.c)(e),n)try{M.a.debug("revoking previous URL"),URL.revokeObjectURL(n)}catch(e){M.a.warn("error while revoking the media source URL",e)}}function et(e){return function(e){return Re.a.create(function(t){if(!Ze.d)throw new ye.a("MEDIA_SOURCE_NOT_SUPPORTED",null,!0);Je(e,null,e.src||null),M.a.info("creating MediaSource");var n=new Ze.d,r=URL.createObjectURL(n);return M.a.info("attaching MediaSource URL to the media element",r),e.src=r,t.next(n),function(){Je(e,n,r)}})}(e).pipe(Object(Y.a)(function(e){return Object(V.n)(e).pipe(Object(g.a)(1),Object(w.a)(e))}))}var tt=n(28),nt=D.a.DEFAULT_LIVE_GAP;var rt=n(90),it=n(145),at=n(44);var ot,ut=function(){function e(e){this.project=e}return e.prototype.call=function(e,t){return t.subscribe(new st(e,this.project))},e}(),st=function(e){function t(t,n){var r=e.call(this,t)||this;return r.project=n,r.hasSubscription=!1,r.hasCompleted=!1,r.index=0,r}return u.a(t,e),t.prototype._next=function(e){this.hasSubscription||this.tryNext(e)},t.prototype.tryNext=function(e){var t,n=this.index++;try{t=this.project(e,n)}catch(e){return void this.destination.error(e)}this.hasSubscription=!0,this._innerSub(t,e,n)},t.prototype._innerSub=function(e,t,n){var r=new S.a(this,void 0,void 0);this.add(r),Object(x.a)(this,e,t,n,r)},t.prototype._complete=function(){this.hasCompleted=!0,this.hasSubscription||this.destination.complete()},t.prototype.notifyNext=function(e,t,n,r,i){this.destination.next(t)},t.prototype.notifyError=function(e){this.destination.error(e)},t.prototype.notifyComplete=function(e){this.remove(e),this.hasSubscription=!1,this.hasCompleted&&this.destination.complete()},t}(j.a),ct=function(){function e(){this._cache=new WeakMap}var t=e.prototype;return t.add=function(e,t){var n=e.representation;e.segment.isInit&&this._cache.set(n,t)},t.get=function(e){var t=e.representation;if(e.segment.isInit){var n=this._cache.get(t);if(null!=n)return n}return null},e}(),lt=function(){function e(e){this._array=[],this._sortingFn=e}var t=e.prototype;return t.get=function(e){if(e<0||e>=this._array.length)throw new Error("Invalid index.");return this._array[e]},t.find=function(e){return ue()(this._array,e)},t.indexOf=function(e){return this._array.indexOf(e)},t.has=function(e){return Object(L.a)(this._array,e)},t.length=function(){return this._array.length},t.add=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];t.sort(this._sortingFn);for(var r=0,i=0;i<t.length;i++){for(var a=t[i],o=!1;!o&&r<this._array.length;)this._sortingFn(a,this._array[r])<0?(this._array.splice(r,0,a),o=!0):r++;o||this._array.push(a)}},t.removeElement=function(e){var t=this._array.indexOf(e);if(t>=0)return this._array.splice(t,1),t},t.head=function(){return this._array[0]},t.last=function(){return this._array[this._array.length-1]},t.shift=function(){return this._array.shift()},t.pop=function(){return this._array.pop()},t.checkSort=function(){for(var e=0;e<this._array.length-1;e++)if(this._sortingFn(this._array[e],this._array[e+1])>0)return!1;return!0},t.forceSort=function(){this._array.sort(this._sortingFn)},e}(),ft=function(){function e(e){this._weakMap=new WeakMap,this._fn=e}var t=e.prototype;return t.get=function(e){var t=this._weakMap.get(e);if(t)return t;var n=this._fn(e);return this._weakMap.set(e,n),n},t.destroy=function(e){this._weakMap.delete(e)},e}(),dt=n(107);function pt(e){var t=e.queuedSourceBuffer,n=e.clock$,r=e.maxBufferBehind$,i=e.maxBufferAhead$;return Object(d.a)(n,r,i).pipe(Object(Y.a)(function(e){var n=e[0],r=e[1],i=e[2];return function(e,t,n,r){if(!isFinite(n)&&!isFinite(r))return f.a;var i=[],a=Object(B.b)(e.getBuffered(),t),o=a.innerRange,u=a.outerRanges;return function(){if(isFinite(n)){for(var e=0;e<u.length;e++){var r=u[e];t-n>=r.end?i.push(r):t>=r.end&&t-n>r.start&&t-n<r.end&&i.push({start:r.start,end:t-n})}o&&t-n>o.start&&i.push({start:o.start,end:t-n})}}(),function(){if(isFinite(r)){for(var e=0;e<u.length;e++){var n=u[e];t+r<=n.start?i.push(n):t<=n.start&&t+r<n.end&&t+r>n.start&&i.push({start:t+r,end:n.end})}o&&t+r<o.end&&i.push({start:t+r,end:o.end})}}(),Object(at.a)(i.map(function(t){return M.a.debug("cleaning range from source buffer",t),e.removeBuffer(t.start,t.end)})).pipe(Object(dt.a)(),Object(it.a)())}(t,n,r,i)}))}!function(e){e[e.Append=0]="Append",e[e.Remove=1]="Remove"}(ot||(ot={}));var ht=function(){function e(e){this._buffer=e,this._queue=[],this._flushing=null,this._lastInitSegment=null,this.__onUpdate=this._onUpdate.bind(this),this.__onError=this._onError.bind(this),this.__flush=this._flush.bind(this),this._buffer.addEventListener("update",this.__onUpdate),this._buffer.addEventListener("error",this.__onError),this._buffer.addEventListener("updateend",this.__flush)}var t=e.prototype;return t.appendBuffer=function(e,t,n){var r=this;return Object(Ye.a)(function(){return r._addToQueue({type:ot.Append,segment:t,initSegment:e,timestampOffset:n})})},t.removeBuffer=function(e,t){var n=this;return Object(Ye.a)(function(){return n._addToQueue({type:ot.Remove,start:e,end:t})})},t.abort=function(){this.dispose(),this._buffer.abort()},t.getBuffered=function(){return this._buffer.buffered},t.dispose=function(){this._buffer.removeEventListener("update",this.__onUpdate),this._buffer.removeEventListener("error",this.__onError),this._buffer.removeEventListener("updateend",this.__flush),this._queue.length=0,this._flushing=null},t._onUpdate=function(){this._flushing&&(this._flushing.next(void 0),this._flushing&&(this._flushing.complete(),this._flushing=null))},t._onError=function(e){this._flushing&&(this._flushing.error(e),this._flushing=null)},t._addToQueue=function(e){var t=!this._queue.length,n=new a.a;if(e.type===ot.Append){var r=e.segment,i=e.initSegment,o=e.timestampOffset;if(null===i&&null===r)return M.a.warn("QueuedSourceBuffer: no segment appended."),Object(h.a)(void 0);if(null===i)this._queue.unshift({type:ot.Append,args:{segment:r,timestampOffset:o},subject:n});else if(null===r){if(this._lastInitSegment===i)return Object(h.a)(void 0);this._queue.unshift({type:ot.Append,args:{segment:i,timestampOffset:o},subject:n})}else this._lastInitSegment!==i&&this._queue.unshift({type:ot.Append,args:{segment:i,timestampOffset:o},subject:null}),this._queue.unshift({type:ot.Append,args:{segment:r,timestampOffset:o},subject:n});this._lastInitSegment=i}else{if(e.type!==ot.Remove)throw new Error("QueuedSourceBuffer: unrecognized action");this._queue.unshift({type:ot.Remove,args:{start:e.start,end:e.end},subject:n})}return t&&this._flush(),n.pipe(Object(w.a)(void 0))},t._flush=function(){if(!this._flushing&&0!==this._queue.length&&!this._buffer.updating){var e=this._queue.pop();this._flushing=e.subject;try{switch(e.type){case ot.Append:var t=e.args,n=t.segment,r=t.timestampOffset,i=void 0===r?0:r;if(this._buffer.timestampOffset!==i){var a=i||0;M.a.debug("updating timestampOffset",this._buffer.timestampOffset,a),this._buffer.timestampOffset=a}M.a.debug("pushing data to source buffer",e.args),this._buffer.appendBuffer(n);break;case ot.Remove:var o=e.args,u=o.start,s=o.end;M.a.debug("removing data from source buffer",u,s),this._buffer.remove(u,s)}}catch(e){this._onError(e)}}},e}(),vt=["audio","video","text","image"];var mt=function(){function e(e,t){this._mediaElement=e,this._mediaSource=t,this._initializedNativeSourceBuffers={},this._initializedCustomSourceBuffers={}}e.isNative=function(e){return bt(e)};var t=e.prototype;return t.has=function(e){return bt(e)?!!this._initializedNativeSourceBuffers[e]:!!this._initializedCustomSourceBuffers[e]},t.get=function(e){if(bt(e)){var t=this._initializedNativeSourceBuffers[e];if(!t)throw new Error("SourceBufferManager: no "+e+" initialized yet");return t.sourceBuffer}var n=this._initializedCustomSourceBuffers[e];if(!n)throw new Error("SourceBufferManager: no "+e+" initialized yet");return n.sourceBuffer},t.createSourceBuffer=function(e,t,n){if(void 0===n&&(n={}),bt(e)){var r=this._initializedNativeSourceBuffers[e];if(r)return r.codec!==t?M.a.warn("reusing native SourceBuffer with codec",r.codec,"for codec",t):M.a.info("reusing native SourceBuffer with codec",t),r.sourceBuffer;M.a.info("adding native SourceBuffer with codec",t);var i=function(e,t){var n=e.addSourceBuffer(t);return new ht(n)}(this._mediaSource,t);return this._initializedNativeSourceBuffers[e]={codec:t,sourceBuffer:i},i}var a=this._initializedCustomSourceBuffers[e];if(a)return M.a.info("reusing a previous custom SourceBuffer for the type",e),a.sourceBuffer;if("text"===e){var o;if(M.a.info("creating a new text SourceBuffer with codec",t),"html"===n.textTrackMode){if(null==H.a.htmlTextTracksBuffer)throw new Error("HTML Text track feature not activated");o=new H.a.htmlTextTracksBuffer(this._mediaElement,n.textTrackElement)}else{if(null==H.a.nativeTextTracksBuffer)throw new Error("Native Text track feature not activated");o=new H.a.nativeTextTracksBuffer(this._mediaElement,!!n.hideNativeSubtitle)}var u=new ht(o);return this._initializedCustomSourceBuffers.text={codec:t,sourceBuffer:u},u}if("image"===e){if(null==H.a.imageBuffer)throw new Error("Image buffer feature not activated");M.a.info("creating a new image SourceBuffer with codec",t);var s=new H.a.imageBuffer,c=new ht(s);return this._initializedCustomSourceBuffers.image={codec:t,sourceBuffer:c},c}throw M.a.error("unknown buffer type:",e),new ye.a("BUFFER_TYPE_UNKNOWN",null,!0)},t.disposeSourceBuffer=function(e){if(bt(e)){var t=this._initializedNativeSourceBuffers[e];if(null==t)return;if(M.a.info("aborting native source buffer",e),"open"===this._mediaSource.readyState)try{t.sourceBuffer.abort()}catch(e){M.a.warn("failed to abort a SourceBuffer:",e)}delete this._initializedNativeSourceBuffers[e]}else if("text"!==e&&"image"!==e)M.a.error("cannot dispose an unknown buffer type",e);else{var n=this._initializedCustomSourceBuffers[e];if(null==n)return;M.a.info("aborting custom source buffer",e);try{n.sourceBuffer.abort()}catch(e){M.a.warn("failed to abort a SourceBuffer:",e)}delete this._initializedCustomSourceBuffers[e]}},t.disposeAll=function(){var e=this;vt.forEach(function(t){e.has(t)&&e.disposeSourceBuffer(t)})},e}();function bt(e){return"audio"===e||"video"===e}var gt={activeBuffer:function(e){return{type:"active-buffer",value:{bufferType:e}}},activePeriodChanged:function(e){return{type:"activePeriodChanged",value:{period:e}}},adaptationChange:function(e,t,n){return{type:"adaptationChange",value:{type:e,adaptation:t,period:n}}},addedSegment:function(e,t,n){return{type:"added-segment",value:{bufferType:e,segment:t,segmentData:n}}},bitrateEstimationChange:function(e,t){return{type:"bitrateEstimationChange",value:{type:e,bitrate:t}}},bufferComplete:function(e){return{type:"complete-buffer",value:{type:e}}},discontinuityEncountered:function(e,t){return{type:"discontinuity-encountered",value:{bufferType:e,nextTime:t}}},endOfStream:function(){return{type:"end-of-stream",value:void 0}},fullBuffer:function(e){return{type:"full-buffer",value:{bufferType:e}}},needsManifestRefresh:function(e){return{type:"needs-manifest-refresh",value:{bufferType:e}}},needsStreamReload:function(){return{type:"needs-stream-reload",value:void 0}},periodBufferReady:function(e,t,n){return{type:"periodBufferReady",value:{type:e,period:t,adaptation$:n}}},periodBufferCleared:function(e,t){return{type:"periodBufferCleared",value:{type:e,period:t}}},representationChange:function(e,t,n){return{type:"representationChange",value:{type:e,period:t,representation:n}}},resumeStream:function(){return{type:"resume-stream",value:void 0}},warning:function(e){return{type:"warning",value:e}}},yt=n(54),_t=D.a.BUFFER_GC_GAPS.CALM,Ot=D.a.BUFFER_GC_GAPS.BEEFY;function Et(e,t,n){for(var r=Object(B.b)(t,e),i=r.innerRange,a=r.outerRanges,o=[],u=0;u<a.length;u++){var s=a[u];e-n<s.end?o.push(s):e+n>s.start&&o.push(s)}return i&&(M.a.debug("buffer: gc removing part of inner range",o),e-n>i.start&&o.push({start:i.start,end:e-n}),e+n<i.end&&o.push({start:e+n,end:i.end})),o}function wt(e,t,n){var r=function(e,t){var n=t.segment,r=t.initSegmentData,i=t.segmentData,a=t.segmentOffset;return n.isInit?null==r?Object(h.a)(void 0):e.appendBuffer(r,null,a):null==i?Object(h.a)(void 0):e.appendBuffer(r,i,a)}(t,n);return r.pipe(Object(N.a)(function(n){if(!n||"QuotaExceededError"!==n.name)throw new ye.a("BUFFER_APPEND_ERROR",n,!0);return function(e,t){return e.pipe(Object(g.a)(1),Object(Y.a)(function(e){M.a.warn("buffer: running garbage collector");var n=t.getBuffered(),r=Et(e.currentTime,n,_t);return 0===r.length&&(r=Et(e.currentTime,n,Ot)),M.a.debug("buffer: gc cleaning",r),Object(at.a)(r.map(function(e){var n=e.start,r=e.end;return t.removeBuffer(n,r)})).pipe(Object(dt.a)())}))}(e,t).pipe(Object(I.a)(r),Object(N.a)(function(e){throw new ye.a("BUFFER_FULL_ERROR",e,!0)}))}))}var Tt=D.a.BUFFER_PADDING;var jt=D.a.SEGMENT_PRIORITIES_STEPS;function St(e,t){for(var n=t.currentTime+t.wantedTimeOffset,r=e.time/e.timescale-n,i=0;i<jt.length;i++)if(r<jt[i])return i;return jt.length}var xt=D.a.BITRATE_REBUFFERING_RATIO,At=D.a.MINIMUM_SEGMENT_SIZE;function Rt(e){var t=e.clock$,n=e.content,r=e.queuedSourceBuffer,i=e.segmentBookkeeper,a=e.segmentFetcher,u=e.wantedBufferAhead$,s=n.manifest,c=n.period,v=n.adaptation,b=n.representation,g=v.type,y=b.index.getInitSegment(),_=function(e){switch(e.type){case"audio":case"video":return Tt[e.type];default:return Tt.other}}(v),O=null==y?{segmentData:null,segmentInfos:null,segmentOffset:0}:null,T=new o.a(1),j=[],S=null,x=new yt.a;var A=Object(d.a)(t,u).pipe(Object(m.a)(function(e){var t=e[0],a=e[1],o=r.getBuffered(),u=function(e,t,n,r,i){var a=n.currentTime+n.wantedTimeOffset,o=null==n.liveGap?e.end:Math.min(e.end||1/0,n.currentTime+n.liveGap),u={start:Math.max(e.start||0,a),end:o},s=i.low,c=i.high,l=Object(B.c)(t,a),f=l>s&&l<1/0?Math.min(l,c):0;return{start:Math.min(Math.max(a+f,u.start),u.end||1/0),end:Math.min(Math.max(a+r,u.start),u.end||1/0)}}(c,o,t,a,_),s=function(e,t){var n=e.manifest,r=e.representation;return t.stalled&&n.isLive?r.index.checkDiscontinuity(t.currentTime):-1}(n,t),l=function(e,t){var n=e.representation,r=t.start,i=t.end;return n.index.shouldRefresh(r,i)}(n,u);i.synchronizeBuffered(o);var f=function(e,t){var n=t.start,r=t.end-n;return e.index.getSegments(n,r)}(b,u).filter(function(e){return function(e,t,n,r,i){var a=t.period,o=t.adaptation,u=t.representation;if(i.test(e.id))return!1;if(e.isInit||e.time<0)return!0;var s=e.time,c=e.duration,l=e.timescale;if(!c)return!0;if(c/l<At)return!1;var f=n.hasPlayableSegment(r,{time:s,duration:c,timescale:l});if(!f)return!0;if(f.infos.period.id!==a.id||f.infos.adaptation.id!==o.id)return!0;var d=f.infos.representation.bitrate*xt;return u.bitrate>d}(e,n,i,u,x)}).map(function(e){return{priority:St(e,t),segment:e}});return null!=y&&null==O&&(f=[{segment:y,priority:St(y,t)}].concat(f)),{discontinuity:s,shouldRefreshManifest:l,state:f.length?{type:"need-segments",value:{neededSegments:f}}:null!=c.end&&u.end>=c.end?{type:"full-buffer",value:void 0}:{type:"idle-buffer",value:void 0}}}),Object(Y.a)(function(e){var t=e.discontinuity,n=e.shouldRefreshManifest,r=e.state,i=function(e,t,n){var r=[];return t>1&&r.push(gt.discontinuityEncountered(e,t+1)),n&&r.push(gt.needsManifestRefresh(e)),r}(g,t,n),o=function(e){if("need-segments"!==e.type||!e.value.neededSegments.length)return S&&M.a.debug("interrupting segment request."),j=[],T.next(),"full-buffer"===e.type?gt.fullBuffer(g):{type:"idle-buffer",value:{bufferType:g}};var t=e.value.neededSegments,n=t[0];if(S)if(S.segment.id!==n.segment.id)M.a.debug("canceling old downloading queue and starting a new one",v.type),j=t,T.next();else if(S.priority!==n.priority)M.a.debug("updating pending request priority",v.type),a.updatePriority(S.request$,n.priority);else{M.a.debug("updating downloading queue",v.type);var r=t.slice().splice(1,t.length);j=r}else M.a.debug("starting downloading queue",v.type),j=t,T.next();return gt.activeBuffer(g)}(r);return"idle-buffer"===o.type?h.a.apply(void 0,i):Object(p.a)(h.a.apply(void 0,i),Object(h.a)(o))})),R=T.pipe(Object(W.a)(function(){var e=Object(Ye.a)(function(){var t=j.shift();if(null==t)return f.a;var n=O&&O.segmentInfos||void 0,r=t.segment,i=t.priority,o=a.createRequest({adaptation:v,init:n,manifest:s,period:c,representation:b,segment:r},i);S={segment:r,priority:i,request$:o};var u=o.pipe(Object(m.a)(function(e){return{segment:r,value:e.parsed}}));return Object(p.a)(u,e)});return e.pipe(Ne(function(){S=null}))}),Object(Y.a)(function(e){return Object(Ye.a)(function(){var n=e.segment,a=e.value,o=a.segmentInfos,u=a.segmentData,s=a.segmentOffset;if(n.isInit&&(O=e.value),null==u)return f.a;var l=O&&O.segmentData,d=wt(t,r,{initSegmentData:l,segmentData:u,segment:n,segmentOffset:s});return x.add(n.id),d.pipe(Object(w.a)(gt.addedSegment(g,n,u)),Object(X.a)(function(){if(!n.isInit){var e=o||n,t=e.time,r=e.duration,a=e.timescale;i.insert(c,v,b,n,t/a,null!=r?(t+r)/a:void 0)}}),Ne(function(){x.remove(n.id)}))})}));return Object(l.a)(A,R).pipe(Object(E.a)())}function kt(e,t,n,r,i,a,o){var u=a.manifest,s=a.period,c=a.adaptation,f=function(e,t,n){var r=e.representations,i=null,a=n.pipe(Object(m.a)(function(e){var t=i?i.bitrate:void 0;return q()({bitrate:t},e)}));return t.get$(e.type,a,r).pipe(Object(X.a)(function(e){var t=e.representation;i=t}))}(c,o,e).pipe(Object(Q.a)()),d=f.pipe(Object(O.a)(function(e){return null!=e.bitrate}),Object(m.a)(function(e){var t=e.bitrate;return gt.bitrateEstimationChange(c.type,t)})),v=f.pipe(Object(m.a)(function(e){return e.representation})).pipe(Object(b.a)(function(e,t){return!e||!t||e.bitrate===t.bitrate&&e.id===t.id})).pipe(Object(b.a)(function(e,t){return e.id===t.id})).pipe(Object(W.a)(function(a){return Object(p.a)(Object(h.a)(gt.representationChange(c.type,s,a)),function a(o){M.a.info("changing representation",c.type,o);return Rt({clock$:e,content:{representation:o,adaptation:c,period:s,manifest:u},queuedSourceBuffer:t,segmentBookkeeper:n,segmentFetcher:r,wantedBufferAhead$:i}).pipe(Object(N.a)(function(e){if(!u.isLive||e.type!==z.b.NETWORK_ERROR||!e.isHttpError(412))throw e;return u.updateLiveGap(1),M.a.warn("precondition failed",u.presentationLiveGap),Object($e.a)(2e3).pipe(Object(Y.a)(function(){return a(o)}))}))}(a))}));return Object(l.a)(v,d)}function It(e,t,n,r){var i=r.period;return Object(d.a)(e,t).pipe(Object(O.a)(function(e){var t=e[0],n=e[1];return null!=i.end&&t.currentTime+n>=i.end}),Object(m.a)(function(){return{type:"full-buffer",value:{bufferType:n}}}))}var Nt=D.a.ADAPTATION_SWITCH_BUFFER_PADDINGS;function Dt(){for(var e=0,t=arguments.length;e<t;){if(null!=(e<0||arguments.length<=e?void 0:arguments[e]))return e<0||arguments.length<=e?void 0:arguments[e];e++}}var Mt=D.a.MAX_TIME_MISSING_FROM_COMPLETE_SEGMENT,Pt=D.a.MAX_BUFFERED_DISTANCE,Ct=D.a.MINIMUM_SEGMENT_SIZE,Bt=function(){function e(){this.inventory=[]}var t=e.prototype;return t.synchronizeBuffered=function(e){for(var t=this.inventory,n=Object(B.a)(e),r=0,i=t[0],a=n.length,o=0;o<a;o++){if(null==i)return;var u=n[o],s=u.start,c=u.end;if(!(c-s<Ct)){for(var l=r;i&&Dt(i.bufferedEnd,i.end)-s<Ct;)i=t[++r];var f=-1,d=r-l;if(d>0){var p=t[l+d-1];f=Dt(p.bufferedEnd,p.end),t.splice(l,d),r=l}if(null==i)return;if(c-Dt(i.bufferedStart,i.start)>=Ct)for(null!=i.bufferedStart&&i.bufferedStart<s?i.bufferedStart=s:null==i.bufferedStart&&(-1!==f&&f>s&&i.start-f<=Pt?i.bufferedStart=f:i.start-s<=Pt?i.bufferedStart=s:i.bufferedStart=i.start),i=t[++r];i&&c-Dt(i.bufferedStart,i.start)>=Ct;){var h=t[r-1];null==h.bufferedEnd&&(h.bufferedEnd=h.end),i.bufferedStart=h.bufferedEnd,i=t[++r]}var v=t[r-1];v&&(null!=v.bufferedEnd&&v.bufferedEnd>c?v.bufferedEnd=c:null==v.bufferedEnd&&(v.bufferedEnd=c-v.end<=Pt?c:v.end))}}i&&t.splice(r,t.length-r)},t.insert=function(e,t,n,r,i,a){if(null!=a){for(var o=this.inventory,u={start:i,end:a,bufferedStart:void 0,bufferedEnd:void 0,infos:{segment:r,period:e,adaptation:t,representation:n}},s=o.length-1;s>=0;s--){var c=o[s];if(c.start<=i)return c.end<=i?void this.inventory.splice(s+1,0,u):c.start>=i?void this.inventory.splice(s,1,u):(null!=c.end&&(c.end=i),void this.inventory.splice(s+1,0,u))}var l=this.inventory[0];l?null!=a?l.start>=a?this.inventory.splice(0,0,u):l.end<=a?this.inventory.splice(0,1,u):(l.start=a,this.inventory.splice(0,0,u)):l.start===i?this.inventory.splice(0,1,u):this.inventory.splice(0,0,u):this.inventory.push(u)}else M.a.warn("SegmentBookkeeper: ending time of the segment not defined")},t.hasPlayableSegment=function(e,t){for(var n=t.time,r=t.duration,i=t.timescale,a=this.inventory,o=a.length-1;o>=0;o--){var u=a[o],s=a[o-1],c=a[o+1],l=u.infos.segment,f=n,d=r;if(l.timescale!==i&&(f=n*l.timescale/i,d=r*l.timescale/i),l.time===f&&l.duration===d&&p(u,s,c)&&h(e,u,s,c))return u}return null;function p(e,t,n){return!(t&&null==t.bufferedEnd||null==e.bufferedStart)&&!(n&&null==n.bufferedStart||null==e.bufferedEnd)}function h(e,t,n,r){if(!n||null==n.bufferedEnd||null==t.bufferedStart||n.bufferedEnd<t.bufferedStart){if(null==t.bufferedStart)return!1;var i=t.bufferedStart-t.start;if(e.start>t.start){if(t.bufferedStart-e.start>0&&i>Mt)return M.a.debug("The wanted segment has been garbage collected",t),!1}else if(i>Mt)return M.a.debug("The wanted segment has been garbage collected",t),!1}if(null===t.end)return!1;if(!r||null==r.bufferedStart||null==t.bufferedEnd||r.bufferedStart>t.bufferedEnd){if(null==t.bufferedEnd)return!1;var a=t.end-t.bufferedEnd;if(e.end<t.end){if(e.end-t.bufferedEnd>0&&a>Mt)return M.a.debug("The wanted segment has been garbage collected",t),!1}else if(a>Mt)return M.a.debug("The wanted segment has been garbage collected",t),!1}return!0}},t.reset=function(){this.inventory=[]},e}(),Lt=D.a.DEFAULT_MAX_PIPELINES_RETRY_ON_ERROR,Ut=D.a.DEFAULT_MAX_PIPELINES_RETRY_ON_OFFLINE;var Ft=function(e,t,n,r,i,u){var s=e.manifest,c=e.initialPeriod,y=u.wantedBufferAhead$,_=u.maxBufferAhead$,j=u.maxBufferBehind$,S=new ft(function(e){return pt({queuedSourceBuffer:e,clock$:t.pipe(Object(m.a)(function(e){return e.currentTime})),maxBufferBehind$:j,maxBufferAhead$:_})}),x=new ft(function(){return new Bt}),A=new a.a,R=new a.a,k=function(){var e=["audio","video"];return null==H.a.nativeTextTracksBuffer&&null==H.a.htmlTextTracksBuffer||e.push("text"),null!=H.a.imageBuffer&&e.push("image"),e}(),I=k.map(function(e){return function e(c,d){var b=new lt(function(e,t){return e.start-t.start}),_=new a.a,T=t.pipe(Object(O.a)(function(e){var t=e.currentTime,n=e.wantedTimeOffset;return!!s.getPeriodForTime(n+t)&&function(e){var t=b.head(),n=b.last();return null==t||null==n||(t.start>e||(n.end||1/0)<e)}(n+t)}),Object(g.a)(1),Object(X.a)(function(e){var t=e.currentTime,n=e.wantedTimeOffset;M.a.info("Current position out of the bounds of the active periods,re-creating buffers.",c,t+n),_.next()}),Object(Y.a)(function(t){var n=t.currentTime,r=t.wantedTimeOffset,i=s.getPeriodForTime(n+r);if(null==i)throw new ye.a("MEDIA_TIME_NOT_FOUND",null,!0);return e(c,i)})),j=function e(c,d,b){M.a.info("creating new Buffer for",c,d);var _=new o.a(1),T=new a.a,j=new a.a,A=t.pipe(Object(O.a)(function(e){var t=e.currentTime,n=e.wantedTimeOffset;return!!d.end&&t+n>=d.end})),R=T.pipe(function e(t,n){return n?function(r){return r.pipe(e(function(e,r){return Object(at.a)(t(e,r)).pipe(Object(m.a)(function(t,i){return n(e,t,r,i)}))}))}:function(e){return e.lift(new ut(t))}}(function(t){return e(c,t,j)})),k=b.pipe(Object(g.a)(1),Object(X.a)(function(){T.complete(),j.next(),j.complete()}),Object(E.a)()),I=Object(l.a)(A,k),D=function(e,a,o){return o.pipe(Object(W.a)(function(o){if(null==o){var c;if(M.a.info("set no "+e+" Adaptation",a),r.has(e)){M.a.info("clearing previous "+e+" SourceBuffer");var d=r.get(e);c=d.removeBuffer(a.start,a.end||1/0).pipe(Object(w.a)(null))}else c=Object(h.a)(null);return Object(p.a)(c.pipe(Object(w.a)(gt.adaptationChange(e,null,a))),It(t,y,e,{manifest:s,period:a}))}M.a.info("updating "+e+" adaptation",o,a);var v=t.pipe(Object(g.a)(1),Object(Y.a)(function(c){var d=function(e,t){if(r.has(e))return M.a.info("reusing a previous SourceBuffer for the type",e),r.get(e);var n=function(e){var t=e.representations;return t[0]&&t[0].getMimeTypeString()||""}(t),i="text"===e?u.textTrackOptions:void 0;return r.createSourceBuffer(e,n,i)}(e,o),v=function(e,t,n,r){if(!e.length)return{type:"continue",value:void 0};var i=Object(B.a)(e),a=t.start,o=t.end||1/0;if(!Object(B.j)(i,[{start:a,end:o}]).length)return{type:"continue",value:void 0};var u=r.currentTime;if("video"===n&&r.readyState>1&&Object(B.i)({start:a,end:o},u))return{type:"reload-stream",value:void 0};var s=Nt[n].before||0,c=Nt[n].after||0;return!c&&!s||u-s>=o||u+c<=a?{type:"clean-buffer",value:[{start:a,end:o}]}:u-s<=a?{type:"clean-buffer",value:[{start:u+c,end:o}]}:u+c>=o?{type:"clean-buffer",value:[{start:a,end:u-s}]}:{type:"clean-buffer",value:[{start:a,end:u-s},{start:u+c,end:o}]}}(d.getBuffered(),a,e,c);if("reload-stream"===v.type)return Object(h.a)(gt.needsStreamReload());var m="clean-buffer"===v.type?p.a.apply(void 0,v.value.map(function(e){var t=e.start,n=e.end;return d.removeBuffer(t,n)})).pipe(Object(it.a)()):f.a,b=S.get(d),g=function(e,a,o,c){var l=x.get(c),f=function(e,t,n){var r=Object(L.a)(["audio","video"],e)?new ct:void 0;return{cache:r,maxRetry:"image"===e?0:null!=t?t:Lt,maxRetryOffline:null!=n?n:Ut}}(e,u.segmentRetry,u.offlineRetry),d=i.createPipeline(e,f);return kt(t,c,l,d,y,{manifest:s,period:a,adaptation:o},n).pipe(Object(N.a)(function(n){if(!mt.isNative(e))return M.a.error("custom buffer: ",e,"has crashed. Aborting it.",n),r.disposeSourceBuffer(e),Object(p.a)(Object(h.a)(gt.warning(n)),It(t,y,e,{manifest:s,period:a}));throw M.a.error("native "+e+" buffer has crashed. Stopping playback.",n),n}))}(e,a,o,d);return Object(p.a)(m,Object(l.a)(g,b))}));return Object(p.a)(Object(h.a)(gt.adaptationChange(e,o,a)),v)}))}(c,d,_).pipe(Object(Y.a)(function(e){var t=e.type;if("full-buffer"===t){var n=s.getPeriodAfter(d);if(null==n)return Object(h.a)(gt.bufferComplete(c));T.next(n)}else"active-buffer"===t&&j.next();return Object(h.a)(e)}),Object(E.a)()),P=Object(p.a)(Object(h.a)(gt.periodBufferReady(c,d,_)),D.pipe(Object(v.a)(I)),Object(h.a)(gt.periodBufferCleared(c,d)).pipe(Object(X.a)(function(){M.a.info("destroying buffer for",c,d)})));return Object(l.a)(P,R,k.pipe(Object(it.a)()))}(c,d,_).pipe(Object(X.a)(function(e){"periodBufferReady"===e.type?b.add(e.value.period):"periodBufferCleared"===e.type&&b.removeElement(e.value.period)}),Object(E.a)());return Object(l.a)(j,T)}(e,c).pipe(Object(X.a)(function(e){"periodBufferReady"===e.type?A.next(e.value):"periodBufferCleared"===e.type&&R.next(e.value)}),Object(E.a)())}),D=function(e,t,n){var r=new lt(function(e,t){return e.period.start-t.period.start}),i=t.pipe(Object(X.a)(function(e){var t=e.period,n=e.type,i=r.find(function(e){return e.period===t});i||(i={period:t,buffers:new Set},r.add(i)),i.buffers.has(n)&&M.a.warn("Buffer type "+n+" already added to the period"),i.buffers.add(n)})),a=n.pipe(Object(X.a)(function(e){var t=e.period,n=e.type;if(r&&0!==r.length()){var i=r.find(function(e){return e.period===t});i?(i.buffers.delete(n),i.buffers.size||r.removeElement(i)):M.a.error("ActivePeriodStore: cannot remove, unknown period.")}else M.a.error("ActivePeriodStore: cannot remove, no period is active.")}));return Object(l.a)(i,a).pipe(Object(m.a)(function(){if(!r.head())return null;var t=r.find(function(t){return function(e,t){return t.size>=e.length}(e,t.buffers)});return null!=t?t.period:null}),Object(b.a)())}(k,A,R).pipe(Object(O.a)(function(e){return!!e})).pipe(Object(X.a)(function(e){M.a.info("new active period",e)}),Object(m.a)(function(e){return gt.activePeriodChanged(e)})),P=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];var r=t.map(function(e){return e.pipe(Object(O.a)(function(e){return"complete-buffer"===e.type||"active-buffer"===e.type}),Object(m.a)(function(e){return"complete-buffer"===e.type}),Object(T.a)(!1),Object(b.a)())});return d.a.apply(void 0,r).pipe(Object(m.a)(function(e){return e.every(function(e){return e})}),Object(b.a)())}.apply(void 0,I).pipe(Object(m.a)(function(e){return e?gt.endOfStream():gt.resumeStream()}));return l.a.apply(void 0,[D].concat(I,[P]))};var $t=n(41),Vt=n(25);var zt=function(){function e(){}return e.prototype.call=function(e,t){return t.subscribe(new Ht(e))},e}(),Ht=function(e){function t(t){var n=e.call(this,t)||this;return n.hasFirst=!1,n.observables=[],n.subscriptions=[],n}return u.a(t,e),t.prototype._next=function(e){this.observables.push(e)},t.prototype._complete=function(){var e=this.observables,t=e.length;if(0===t)this.destination.complete();else{for(var n=0;n<t&&!this.hasFirst;n++){var r=e[n],i=Object(x.a)(this,r,r,n);this.subscriptions&&this.subscriptions.push(i),this.add(i)}this.observables=null}},t.prototype.notifyNext=function(e,t,n,r,i){if(!this.hasFirst){this.hasFirst=!0;for(var a=0;a<this.subscriptions.length;a++)if(a!==n){var o=this.subscriptions[a];o.unsubscribe(),this.remove(o)}this.subscriptions=null}this.destination.next(t)},t}(j.a),Gt=n(80);var Kt=function(){function e(e){if(this.total=e,this.total<0)throw new Gt.a}return e.prototype.call=function(e,t){return t.subscribe(new qt(e,this.total))},e}(),qt=function(e){function t(t,n){var r=e.call(this,t)||this;return r.total=n,r.ring=new Array,r.count=0,r}return u.a(t,e),t.prototype._next=function(e){var t=this.ring,n=this.total,r=this.count++;t.length<n?t.push(e):t[r%n]=e},t.prototype._complete=function(){var e=this.destination,t=this.count;if(t>0)for(var n=this.count>=this.total?this.total:this.count,r=this.ring,i=0;i<n;i++){var a=t++%n;e.next(r[a])}e.complete()},t}(ke.a),Yt=n(108);function Wt(e){return Object(Ye.a)(function(){if("open"!==e.readyState)return Object(h.a)(null);var t=e.sourceBuffers,n=function(e){for(var t=[],n=0;n<e.length;n++){var r=e[n];r.updating&&t.push(r)}return t}(t);if(!n.length)return M.a.info("triggering end of stream"),e.endOfStream(),Object(h.a)(null);var r=n.map(V.p);return function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];if(1===e.length){if(!Object($t.a)(e[0]))return e[0];e=e[0]}return Object(Vt.a)(e,void 0).lift(new zt)}(l.a.apply(void 0,r).pipe(function(e){return function(t){return 0===e?Object(f.b)():t.lift(new Kt(e))}}(1)),Object(V.k)(t).pipe(Object(g.a)(1))).pipe(Object(Y.a)(function(){return Wt(e)}))})}function Xt(e){return Object(p.a)(Wt(e),Object(V.n)(e).pipe(function(e,t){return Object(Yt.a)(function(){return e},t)}(Wt(e))))}var Qt=n(88);function Zt(e,t,n){return function(r){switch(r.type){case"discontinuity-encountered":mt.isNative(r.value.bufferType)&&(M.a.warn("explicit discontinuity seek",r.value.nextTime),e.currentTime=r.value.nextTime);break;case"needs-manifest-refresh":return M.a.debug("needs manifest to be refreshed"),function(e,t){var n=t.getUrl();return n?e(n).pipe(Object(X.a)(function(e){t.update(e)}),Object(E.a)(),Object(w.a)(tt.a.manifestUpdate(t))):(M.a.warn("Cannot refresh the manifest: no url"),f.a)}(n,t)}return Object(h.a)(r)}}var Jt=n(104),en=n(91);function tn(e){var t=e.mediaElement,n=e.manifest,r=e.clock$,i=e.speed$,o=e.bufferOptions,u=e.abrManager,s=e.segmentPipelinesManager,c=e.refreshManifest;return function(e,p,b){!function(e,t){var n=t===1/0?Number.MAX_VALUE:t;e.duration!==n&&(M.a.info("set duration",e.duration),e.duration=n)}(e,n.getDuration());var y=n.getPeriodForTime(p);if(null==y)throw new ye.a("MEDIA_STARTING_TIME_NOT_FOUND",null,!0);var _=new mt(t,e);!function(e,t){Object.keys(t.adaptations).forEach(function(n){if(mt.isNative(n)){var r=t.adaptations[n]||[],i=r?r[0].representations:[];if(i.length){var a=i[0].getMimeTypeString();e.createSourceBuffer(n,a)}}})}(_,y);var O=Object(Qt.a)(t,p,b),E=O.seek$,w=O.load$,T=function(e,t,n,r,i){var a=i,o=n.pipe(Object(g.a)(1),Object(X.a)(function(){a=0}),Object(it.a)()),u=Object(d.a)(t,r).pipe(Object(m.a)(function(t){var n=t[0],r=t[1];return q()({isLive:e.isLive,liveGap:e.isLive?e.getMaximumPosition()-n.currentTime:1/0,wantedTimeOffset:a,speed:r},n)}));return Object(l.a)(u,o)}(n,r,E,i,p),j=new a.a,S=n.isLive?Zt(t,n,c):function(e){return Object(h.a)(e)},x=Ft({manifest:n,initialPeriod:y},T,u,_,s,o).pipe(Object(Y.a)(function(t){switch(t.type){case"end-of-stream":return Xt(e).pipe(Object(it.a)(),Object(v.a)(j));case"resume-stream":return j.next(null),f.a;default:return S(t)}})),A=Object(Jt.a)(t,i,r,{pauseWhenStalled:!0}).pipe(Object(m.a)(tt.a.speedChanged)),R=Object(en.a)(t,r).pipe(Object(m.a)(tt.a.stalled)),k=w.pipe(Object(Y.a)(function(e){if("autoplay-blocked"===e){var t=new ye.a("MEDIA_ERR_BLOCKED_AUTOPLAY",null,!1);return Object(h.a)(tt.a.warning(t),tt.a.loaded())}return Object(h.a)(tt.a.loaded())}));return Object(l.a)(k,x,A,R).pipe(Ne(function(){_.disposeAll()}))}}function nn(e){var t=e.adaptiveOptions,n=e.autoPlay,r=e.bufferOptions,i=e.clock$,o=e.keySystems,u=e.networkConfig,s=e.speed$,c=e.startAt,b=e.supplementaryImageTracks,g=e.supplementaryTextTracks,y=e.textTrackOptions,_=e.transport,w=e.url,j=e.mediaElement,S=new a.a,x=function(e){var t=!1;return function(){return t?f.a:(t=!0,e.apply(void 0,arguments).pipe(Object(X.a)(C.a,function(){return t=!1},function(){return t=!1})))}}(function(e,t,n,r,i){return void 0===r&&(r=[]),void 0===i&&(i=[]),function(a){return qe(e.manifest,t)({url:a}).pipe(Object(X.a)(function(e){"error"===e.type&&n.next(e.value)}),Object(O.a)(function(e){return"data"===e.type||"cache"===e.type}),Object(m.a)(function(e){return Ae(e.value.parsed.manifest,r,i,n)}),Object(E.a)())}}(_,function(e){return{maxRetry:null!=e.manifestRetry?e.manifestRetry:D.a.DEFAULT_MAX_MANIFEST_REQUEST_RETRY,maxRetryOffline:null!=e.offlineRetry?e.offlineRetry:D.a.DEFAULT_MAX_PIPELINES_RETRY_ON_ERROR}}(u),S,g,b)),A=new a.a,R=new a.a,k=new Xe(_,R,A,S),I=new be(R,A,t),N=Object(Qe.a)(j,o),P=Object(rt.a)(j),B=Object(d.a)(et(j),x(w)).pipe(Object(Y.a)(function(e){var t=e[0],o=e[1],f=tn({mediaElement:j,manifest:o,clock$:i,speed$:s,abrManager:I,segmentPipelinesManager:k,refreshManifest:x,bufferOptions:q()({textTrackOptions:y,offlineRetry:u.offlineRetry,segmentRetry:u.segmentRetry},r)});M.a.debug("calculating initial time");var d=function(e,t){if(t){var n=e.getCurrentPositionLimits(),r=n[0],i=n[1];if(null!=t.position)return Math.max(Math.min(t.position,i),r);if(null!=t.wallClockTime){var a=e.isLive?t.wallClockTime-(e.availabilityStartTime||0):t.wallClockTime;return Math.max(Math.min(a,i),r)}if(null!=t.fromFirstPosition){var o=t.fromFirstPosition;return o<=0?r:Math.min(r+o,i)}if(null!=t.fromLastPosition){var u=t.fromLastPosition;return u>=0?i:Math.max(r,i+u)}if(null!=t.percentage){var s=t.percentage;return s>100?i:s<0?r:r+ +s/100*(i-r)}}if(e.isLive){var c=e.suggestedPresentationDelay;return e.getMaximumPosition()-(null==c?nt:c)}return e.getMinimumPosition()}(o,c);M.a.debug("initial time calculated:",d);var b=new a.a,g=function(e){return function(t){return"needs-stream-reload"===t.type&&e.next(),t}}(b),_=b.pipe(Object(W.a)(function(){var e=j.currentTime,t=j.paused;return et(j).pipe(Object(Y.a)(function(n){return f(n,e,!t)}),Object(m.a)(g),Object(T.a)(tt.a.reloadingStream()))})),O=Object(p.a)(Object(h.a)(tt.a.manifestReady(I,o)),f(t,d,n).pipe(Object(v.a)(b),Object(m.a)(g)));return Object(l.a)(O,_)}));return Object(l.a)(B,P,N,S.pipe(Object(m.a)(tt.a.warning)))}var rn=n(92),an=D.a.SAMPLING_INTERVAL_MEDIASOURCE,on=D.a.SAMPLING_INTERVAL_NO_MEDIASOURCE,un=D.a.RESUME_GAP_AFTER_SEEKING,sn=D.a.RESUME_GAP_AFTER_NOT_ENOUGH_DATA,cn=D.a.RESUME_GAP_AFTER_BUFFERING,ln=D.a.STALL_GAP,fn=["canplay","play","progress","seeking","seeked","loadedmetadata","canplay","ratechange"];function dn(e){if(!e)return 0;switch(e.reason){case"seeking":return un;case"not-ready":return sn;default:return cn}}function pn(e,t){var n=e.buffered,r=e.currentTime,i=e.duration,a=e.ended,o=e.paused,u=e.playbackRate,s=e.readyState,c=e.seeking;return{bufferGap:Object(B.c)(n,r),buffered:n,currentRange:Object(B.f)(n,r),currentTime:r,duration:i,ended:a,paused:o,playbackRate:u,readyState:s,seeking:c,state:t}}function hn(e,t,n){var r,i,a=t.state,o=t.currentTime,u=t.bufferGap,s=t.currentRange,c=t.duration,l=t.paused,f=t.readyState,d=t.ended,p=e.stalled,h=e.state,v=e.currentTime,m=function(e,t){return null!=e&&t-e.end<=ln}(s,c),b=f>=1&&"loadedmetadata"!==a&&!p&&!(m||d);return n?b&&(u<=ln||u===1/0||1===f)?r=!0:p&&f>1&&u<1/0&&(u>dn(p)||m||d)&&(i=!0):b&&(!l&&"timeupdate"===a&&"timeupdate"===h&&o===v||"seeking"===a&&u===1/0)?r=!0:p&&("seeking"!==a&&o!==v||"canplay"===a||u<1/0&&(u>dn(p)||m||d))&&(i=!0),r?{reason:"seeking"===a||t.seeking?"seeking":1===f?"not-ready":"buffering",timestamp:Date.now()}:i?null:p}var vn=function(e,t){var n=t.withMediaSource;return Re.a.create(function(t){var r=q()(pn(e,"init"),{stalled:null});function i(i){var a=i&&i.type||"timeupdate",o=pn(e,a),u=hn(r,o,n);r=q()(o,{stalled:u}),t.next(r)}var a=setInterval(i,n?an:on);return fn.forEach(function(t){return e.addEventListener(t,i)}),t.next(r),function(){clearInterval(a),fn.forEach(function(t){return e.removeEventListener(t,i)})}}).pipe(Object(y.a)(function(){return new o.a(1)}),Object(rn.a)())},mn={STOPPED:"STOPPED",LOADED:"LOADED",LOADING:"LOADING",PLAYING:"PLAYING",PAUSED:"PAUSED",ENDED:"ENDED",BUFFERING:"BUFFERING",SEEKING:"SEEKING",RELOADING:"RELOADING"};function bn(e,t){return function(e,t){if(!t.isLive)return+e;var n=t.suggestedPresentationDelay||0,r=t.presentationLiveGap||0,i=t.timeShiftBufferDepth||0,a="number"==typeof e?e:+e,o=Date.now(),u=o-1e3*(r+n),s=o-1e3*i;return Math.max(Math.min(a,u),s)}(e,t)/1e3-(t.availabilityStartTime||0)}var gn=D.a.FORCED_ENDED_THRESHOLD;var yn=D.a.DEFAULT_AUTO_PLAY,_n=D.a.DEFAULT_INITIAL_BITRATES,On=D.a.DEFAULT_LIMIT_VIDEO_WIDTH,En=D.a.DEFAULT_MAX_BITRATES,wn=D.a.DEFAULT_MAX_BUFFER_AHEAD,Tn=D.a.DEFAULT_MAX_BUFFER_BEHIND,jn=D.a.DEFAULT_SHOW_NATIVE_SUBTITLE,Sn=D.a.DEFAULT_TEXT_TRACK_MODE,xn=D.a.DEFAULT_THROTTLE_WHEN_HIDDEN,An=D.a.DEFAULT_WANTED_BUFFER_AHEAD;var Rn=function(){function e(e){void 0===e&&(e={});var t=e,n=t.preferredAudioTracks,r=t.preferredTextTracks;this._periods=new lt(function(e,t){return e.period.start-t.period.start}),this._audioChoiceMemory=new WeakMap,this._textChoiceMemory=new WeakMap,this._videoChoiceMemory=new WeakMap,this._preferredAudioTracks=n||[],this._preferredTextTracks=r||[]}var t=e.prototype;return t.addPeriod=function(e,t,n){var r=Nn(this._periods,t);if(null!=r){if(null!=r[e])return void M.a.warn("TrackManager: "+e+" already added for period",t);r[e]={adaptations:t.adaptations[e]||[],adaptation$:n}}else{var i;this._periods.add(((i={period:t})[e]={adaptations:t.adaptations[e]||[],adaptation$:n},i))}},t.removePeriod=function(e,t){var n=function(e,t){for(var n=0;n<e.length();n++){var r=e.get(n);if(r.period.id===t.id)return n}}(this._periods,t);if(null!=n){var r=this._periods.get(n);null!=r[e]?(delete r[e],null==r.audio&&null==r.text&&this._periods.removeElement(r)):M.a.warn("TrackManager: "+e+" already removed for period",t)}else M.a.warn("TrackManager: "+e+" not found for period",t)},t.resetPeriods=function(){for(;this._periods.length()>0;)this._periods.pop()},t.update=function(){this._updateAudioTrackChoices(),this._updateTextTrackChoices(),this._updateVideoTrackChoices()},t.setInitialAudioTrack=function(e){var t=Nn(this._periods,e),n=t&&t.audio;if(!n||!t)throw new Error("TrackManager: Given Period not found.");var r=this._preferredAudioTracks,i=e.adaptations.audio||[],a=this._audioChoiceMemory.get(e);if(void 0!==a&&Object(L.a)(i,a))n.adaptation$.next(a);else{var o=kn(i,r);this._audioChoiceMemory.set(e,o),n.adaptation$.next(o)}},t.setInitialTextTrack=function(e){var t=Nn(this._periods,e),n=t&&t.text;if(!n||!t)throw new Error("TrackManager: Given Period not found.");var r=this._preferredTextTracks,i=e.adaptations.text||[],a=this._textChoiceMemory.get(e);if(void 0!==a&&Object(L.a)(i,a))n.adaptation$.next(a);else{var o=In(i,r);this._textChoiceMemory.set(e,o),n.adaptation$.next(o)}},t.setInitialVideoTrack=function(e){var t=Nn(this._periods,e),n=t&&t.video;if(!n||!t)throw new Error("TrackManager: Given Period not found.");var r=e.adaptations.video||[],i=this._videoChoiceMemory.get(e);if(void 0!==i&&Object(L.a)(r,i))n.adaptation$.next(i);else{var a=r[0];this._videoChoiceMemory.set(e,a),n.adaptation$.next(a)}},t.setAudioTrackByID=function(e,t){var n=Nn(this._periods,e),r=n&&n.audio;if(!r)throw new Error("TrackManager: Given Period not found.");var i=ue()(r.adaptations,function(e){return e.id===t});if(void 0===i)throw new Error("Audio Track not found.");this._audioChoiceMemory.get(e)!==i&&(this._audioChoiceMemory.set(e,i),r.adaptation$.next(i))},t.setTextTrackByID=function(e,t){var n=Nn(this._periods,e),r=n&&n.text;if(!r)throw new Error("TrackManager: Given Period not found.");var i=ue()(r.adaptations,function(e){return e.id===t});if(void 0===i)throw new Error("Text Track not found.");this._textChoiceMemory.get(e)!==i&&(this._textChoiceMemory.set(e,i),r.adaptation$.next(i))},t.setVideoTrackByID=function(e,t){var n=Nn(this._periods,e),r=n&&n.video;if(!r)throw new Error("LanguageManager: Given Period not found.");var i=ue()(r.adaptations,function(e){return e.id===t});if(void 0===i)throw new Error("Video Track not found.");this._videoChoiceMemory.get(e)!==i&&(this._videoChoiceMemory.set(e,i),r.adaptation$.next(i))},t.disableAudioTrack=function(e){var t=Nn(this._periods,e),n=t&&t.audio;if(!n)throw new Error("TrackManager: Given Period not found.");null!==this._audioChoiceMemory.get(e)&&(this._audioChoiceMemory.set(e,null),n.adaptation$.next(null))},t.disableTextTrack=function(e){var t=Nn(this._periods,e),n=t&&t.text;if(!n)throw new Error("TrackManager: Given Period not found.");null!==this._textChoiceMemory.get(e)&&(this._textChoiceMemory.set(e,null),n.adaptation$.next(null))},t.getChosenAudioTrack=function(e){var t=Nn(this._periods,e);if(null==(t&&t.audio))return null;var n=this._audioChoiceMemory.get(e);return n?{language:n.language||"",normalized:n.normalizedLanguage||"",audioDescription:!!n.isAudioDescription,id:n.id}:null},t.getChosenTextTrack=function(e){var t=Nn(this._periods,e);if(null==(t&&t.text))return null;var n=this._textChoiceMemory.get(e);return n?{language:n.language||"",normalized:n.normalizedLanguage||"",closedCaption:!!n.isClosedCaption,id:n.id}:null},t.getChosenVideoTrack=function(e){var t=Nn(this._periods,e);if(null==(t&&t.video))return null;var n=this._videoChoiceMemory.get(e);return n?{id:n.id,representations:n.representations.map(Dn)}:null},t.getAvailableAudioTracks=function(e){var t=Nn(this._periods,e),n=t&&t.audio;if(null==n)return[];var r=this._audioChoiceMemory.get(e),i=r&&r.id;return n.adaptations.map(function(e){return{language:e.language||"",normalized:e.normalizedLanguage||"",audioDescription:!!e.isAudioDescription,id:e.id,active:null!=i&&i===e.id}})},t.getAvailableTextTracks=function(e){var t=Nn(this._periods,e),n=t&&t.text;if(null==n)return[];var r=this._textChoiceMemory.get(e),i=r&&r.id;return n.adaptations.map(function(e){return{language:e.language||"",normalized:e.normalizedLanguage||"",closedCaption:!!e.isClosedCaption,id:e.id,active:null!=i&&i===e.id}})},t.getAvailableVideoTracks=function(e){var t=Nn(this._periods,e),n=t&&t.video;if(null==n)return[];var r=this._videoChoiceMemory.get(e),i=r&&r.id;return n.adaptations.map(function(e){return{id:e.id,active:null!=i&&i===e.id,representations:e.representations.map(Dn)}})},t._updateAudioTrackChoices=function(){var e=this,t=this._preferredAudioTracks;!function n(r){if(!(r>=e._periods.length())){var i=e._periods.get(r);if(null!=i.audio){var a=i.period,o=i.audio,u=a.adaptations.audio||[],s=e._audioChoiceMemory.get(a);if(null===s||void 0!==s&&Object(L.a)(u,s))n(r+1);else{var c=kn(u,t);e._audioChoiceMemory.set(a,c),o.adaptation$.next(c),n(0)}}else n(r+1)}}(0)},t._updateTextTrackChoices=function(){var e=this,t=this._preferredTextTracks;!function n(r){if(!(r>=e._periods.length())){var i=e._periods.get(r);if(null!=i.text){var a=i.period,o=i.text,u=a.adaptations.text||[],s=e._textChoiceMemory.get(a);if(null===s||void 0!==s&&Object(L.a)(u,s))n(r+1);else{var c=In(u,t);e._textChoiceMemory.set(a,c),o.adaptation$.next(c),n(0)}}else n(r+1)}}(0)},t._updateVideoTrackChoices=function(){var e=this;!function t(n){if(!(n>=e._periods.length())){var r=e._periods.get(n);if(null!=r.video){var i=r.period,a=r.video,o=i.adaptations.video||[],u=e._videoChoiceMemory.get(i);if(null===u||void 0!==u&&Object(L.a)(o,u))t(n+1);else{var s=o[0];e._videoChoiceMemory.set(i,s),a.adaptation$.next(s),t(0)}}else t(n+1)}}(0)},e}();function kn(e,t){if(!e.length)return null;for(var n=function(n){var r=t[n];if(null===r)return{v:null};var i=ue()(e,function(e){return(e.normalizedLanguage||"")===r.normalized&&!!e.isAudioDescription===r.audioDescription});return void 0!==i?{v:i}:void 0},r=0;r<t.length;r++){var i=n(r);if("object"==typeof i)return i.v}return e[0]}function In(e,t){if(!e.length)return null;for(var n=function(n){var r=t[n];if(null===r)return{v:null};var i=ue()(e,function(e){return(e.normalizedLanguage||"")===r.normalized&&!!e.isClosedCaption===r.closedCaption});return void 0!==i?{v:i}:void 0},r=0;r<t.length;r++){var i=n(r);if("object"==typeof i)return i.v}return null}function Nn(e,t){for(var n=0;n<e.length();n++){var r=e.get(n);if(r.period.id===t.id)return r}}function Dn(e){return{id:e.id,bitrate:e.bitrate,frameRate:e.frameRate,width:e.width,height:e.height,codec:e.codec}}function Mn(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var Pn=D.a.DEFAULT_UNMUTED_VOLUME,Cn=function(e){function t(t){var n;void 0===t&&(t={}),n=e.call(this)||this;var r=function(e){var t,n,r,i,a,o,u,s,c,l,f;if(null==e.maxBufferAhead)t=wn;else if(t=Number(e.maxBufferAhead),isNaN(t))throw new Error("Invalid maxBufferAhead parameter. Should be a number.");if(null==e.maxBufferBehind)n=Tn;else if(n=Number(e.maxBufferBehind),isNaN(n))throw new Error("Invalid maxBufferBehind parameter. Should be a number.");if(null==e.wantedBufferAhead)r=An;else if(r=Number(e.wantedBufferAhead),isNaN(r))throw new Error("Invalid wantedBufferAhead parameter. Should be a number.");if(i=null==e.limitVideoWidth?On:!!e.limitVideoWidth,a=null==e.throttleWhenHidden?xn:!!e.throttleWhenHidden,null==e.videoElement)o=document.createElement("video");else{if(!(e.videoElement instanceof HTMLMediaElement))throw new Error("Invalid videoElement parameter. Should be a HTMLMediaElement.");o=e.videoElement}if(null==e.initialVideoBitrate)u=_n.video;else if(u=Number(e.initialVideoBitrate),isNaN(u))throw new Error("Invalid initialVideoBitrate parameter. Should be a number.");if(null==e.initialAudioBitrate)s=_n.audio;else if(s=Number(e.initialAudioBitrate),isNaN(s))throw new Error("Invalid initialAudioBitrate parameter. Should be a number.");if(null==e.maxVideoBitrate)l=En.video;else if(l=Number(e.maxVideoBitrate),isNaN(l))throw new Error("Invalid maxVideoBitrate parameter. Should be a number.");if(null==e.maxAudioBitrate)c=En.audio;else if(c=Number(e.maxAudioBitrate),isNaN(c))throw new Error("Invalid maxAudioBitrate parameter. Should be a number.");if(null==e.stopAtEnd)f=!0;else{if("boolean"!=typeof e.stopAtEnd)throw new Error("Invalid stopAtEnd parameter. Should be a boolean.");f=e.stopAtEnd}return{maxBufferAhead:t,maxBufferBehind:n,limitVideoWidth:i,videoElement:o,wantedBufferAhead:r,throttleWhenHidden:a,initialAudioBitrate:s,initialVideoBitrate:u,maxAudioBitrate:c,maxVideoBitrate:l,stopAtEnd:f}}(t),i=r.initialAudioBitrate,u=r.initialVideoBitrate,s=r.limitVideoWidth,l=r.maxAudioBitrate,f=r.maxBufferAhead,d=r.maxBufferBehind,p=r.maxVideoBitrate,h=r.throttleWhenHidden,g=r.videoElement,y=r.wantedBufferAhead,_=r.stopAtEnd;return g.preload="auto",n.version="3.6.1",n.log=M.a,n.state="STOPPED",n.videoElement=g,n._priv_destroy$=new a.a,Object(V.d)(g).pipe(Object(v.a)(n._priv_destroy$)).subscribe(function(){return n.trigger("fullscreenChange",n.isFullscreen())}),Object(V.o)(g.textTracks).pipe(Object(v.a)(n._priv_destroy$),Object(m.a)(function(e){for(var t=e.target,n=[],r=0;r<t.length;r++){var i=t[r];n.push(i)}return n}),Object(b.a)(function(e,t){if(e.length!==t.length)return!1;for(var n=0;n<e.length;n++)if(e[n]!==t[n])return!1;return!0})).subscribe(function(e){return n._priv_onNativeTextTracksNext(e)}),n._priv_playing$=new o.a(1),n._priv_speed$=new c(g.playbackRate),n._priv_stopCurrentContent$=new a.a,n._priv_streamLock$=new c(!1),n._priv_bufferOptions={wantedBufferAhead$:new c(y),maxBufferAhead$:new c(f),maxBufferBehind$:new c(d)},n._priv_bitrateInfos={lastBitrates:{audio:i,video:u},initialMaxAutoBitrates:{audio:l,video:p},manualBitrates:{audio:-1,video:-1}},n._priv_throttleWhenHidden=h,n._priv_limitVideoWidth=s,n._priv_mutedMemory=Pn,n._priv_trackManager=null,n._priv_abrManager=null,n._priv_currentError=null,n._priv_contentInfos=null,n._priv_contentEventsMemory={period:null,videoTrack:null,audioTrack:null,textTrack:null,videoBitrate:null,audioBitrate:null,bitrateEstimation:void 0},n._priv_stopAtEnd=_,n._priv_setPlayerState(mn.STOPPED),n}!function(e,t){e.prototype=Object.create(t.prototype),e.prototype.constructor=e,e.__proto__=t}(t,e);var n=t.prototype;return n.stop=function(){this.state!==mn.STOPPED&&(this._priv_stopCurrentContent$.next(),this._priv_cleanUpCurrentContentState(),this._priv_setPlayerState(mn.STOPPED))},n.dispose=function(){this.stop(),this.videoElement&&Object(G.disposeEME)(this.videoElement),this._priv_destroy$.next(),this._priv_destroy$.complete(),this._priv_stopCurrentContent$.complete(),this._priv_playing$.complete(),this._priv_speed$.complete(),this._priv_streamLock$.complete(),this._priv_bufferOptions.wantedBufferAhead$.complete(),this._priv_bufferOptions.maxBufferAhead$.complete(),this._priv_bufferOptions.maxBufferBehind$.complete(),this.videoElement=null},n.loadVideo=function(e){var t=this,n=function(e){var t,n,r,i,a,o,u,s,c,l,f,d,p;if(!e||null==e.url)throw new Error("No url set on loadVideo");if(t=String(e.url),null==e.transport)throw new Error("No transport set on loadVideo");if(n=String(e.transport),r=null==e.autoPlay?yn:!!e.autoPlay,null==e.keySystems)i=[];else{var h=i=Array.isArray(e.keySystems)?e.keySystems:[e.keySystems],v=Array.isArray(h),m=0;for(h=v?h:h[Symbol.iterator]();;){var b;if(v){if(m>=h.length)break;b=h[m++]}else{if((m=h.next()).done)break;b=m.value}var g=b;if("string"!=typeof g.type||"function"!=typeof g.getLicense)throw new Error("Invalid key system given: Missing type string or getLicense callback")}}if(a=e.transportOptions,null==e.supplementaryTextTracks)o=[];else{var y=o=Array.isArray(e.supplementaryTextTracks)?e.supplementaryTextTracks:[e.supplementaryTextTracks],_=Array.isArray(y),O=0;for(y=_?y:y[Symbol.iterator]();;){var E;if(_){if(O>=y.length)break;E=y[O++]}else{if((O=y.next()).done)break;E=O.value}var w=E;if("boolean"!=typeof w.closedCaption&&(w.closedCaption=!!w.closedCaption),"string"!=typeof w.language||"string"!=typeof w.mimeType||"string"!=typeof w.url)throw new Error("Invalid supplementary text track given. Missing either language, mimetype or url")}}if(null==e.supplementaryImageTracks)u=[];else{var T=u=Array.isArray(e.supplementaryImageTracks)?e.supplementaryImageTracks:[e.supplementaryImageTracks],j=Array.isArray(T),S=0;for(T=j?T:T[Symbol.iterator]();;){var x;if(j){if(S>=T.length)break;x=T[S++]}else{if((S=T.next()).done)break;x=S.value}var A=x;if("string"!=typeof A.mimeType||"string"!=typeof A.url)throw new Error("Invalid supplementary image track given. Missing either mimetype or url")}}if(null==e.textTrackMode)s=Sn;else{if("native"!==e.textTrackMode&&"html"!==e.textTrackMode)throw new Error("Invalid textTrackMode.");s=e.textTrackMode}if(l=Object(Te.b)(e.defaultAudioTrack),f=Object(Te.c)(e.defaultTextTrack),d=null==e.hideNativeSubtitle?!jn:!!e.hideNativeSubtitle,"html"===s){if(null==e.textTrackElement)throw new Error('You have to provide a textTrackElement in "html" textTrackMode.');if(!(e.textTrackElement instanceof HTMLElement))throw new Error("textTrackElement should be an HTMLElement.");c=e.textTrackElement}else null!=e.textTrackElement&&M.a.warn('You have set a textTrackElement without being in an "html" textTrackMode. It will be ignored.');if(null!=e.startAt)if(e.startAt.wallClockTime instanceof Date){var R=e.startAt.wallClockTime.getTime()/1e3;p=q()({},e.startAt,{wallClockTime:R})}else p=e.startAt;return{autoPlay:r,defaultAudioTrack:l,defaultTextTrack:f,hideNativeSubtitle:d,keySystems:i,networkConfig:null==e.networkConfig?{}:{manifestRetry:e.networkConfig.manifestRetry,offlineRetry:e.networkConfig.offlineRetry,segmentRetry:e.networkConfig.segmentRetry},startAt:p,supplementaryImageTracks:u,supplementaryTextTracks:o,textTrackElement:c,textTrackMode:s,transport:n,transportOptions:a,url:t}}(e);M.a.info("loadvideo",n);var r=n.autoPlay,i=n.defaultAudioTrack,a=n.defaultTextTrack,o=n.keySystems,u=n.networkConfig,s=n.startAt,c=n.supplementaryImageTracks,y=n.supplementaryTextTracks,j=n.transport,S=n.transportOptions,x=n.url;if(!this.videoElement)throw new Error("the attached video element is disposed");this.stop();var R="directfile"===j;this._priv_currentError=null,this._priv_contentInfos={url:x,isDirectFile:R,thumbnails:null,manifest:null,currentPeriod:null,activeAdaptations:null,activeRepresentations:null,initialAudioTrack:i,initialTextTrack:a},this._priv_playing$.next(!1);var N,D=this.videoElement,P=vn(D,{withMediaSource:!R}),B=Object(l.a)(this._priv_stopCurrentContent$,this._priv_stopAtEnd?Object(V.c)(D):f.a).pipe(Object(g.a)(1));if(R){if(null==H.a.directfile)throw new Error("DirectFile feature not activated in your build.");N=H.a.directfile({autoPlay:r,clock$:P,keySystems:o,mediaElement:D,speed$:this._priv_speed$,startAt:s,url:x}).pipe(Object(v.a)(B)).pipe(_())}else{var L=H.a.transports[j];if(!L)throw new Error('transport "'+j+'" not supported');var U=L(S),F={initialBitrates:this._priv_bitrateInfos.lastBitrates,manualBitrates:this._priv_bitrateInfos.manualBitrates,maxAutoBitrates:this._priv_bitrateInfos.initialMaxAutoBitrates,throttle:this._priv_throttleWhenHidden?{video:Object(V.a)().pipe(Object(m.a)(function(e){return e?0:1/0}),Object(v.a)(this._priv_stopCurrentContent$))}:{},limitWidth:this._priv_limitVideoWidth?{video:Object(V.q)(D).pipe(Object(v.a)(this._priv_stopCurrentContent$))}:{}},$="native"===n.textTrackMode?{textTrackMode:"native",hideNativeSubtitle:n.hideNativeSubtitle}:{textTrackMode:"html",textTrackElement:n.textTrackElement};N=nn({adaptiveOptions:F,autoPlay:r,bufferOptions:this._priv_bufferOptions,clock$:P,keySystems:o,mediaElement:D,networkConfig:u,speed$:this._priv_speed$,startAt:s,supplementaryImageTracks:c,supplementaryTextTracks:y,textTrackOptions:$,transport:U,url:x}).pipe(Object(v.a)(B)).pipe(_())}var z,G=N.pipe(Object(O.a)(function(e){return"stalled"===e.type}),Object(m.a)(function(e){return e.value})),K=N.pipe(Object(O.a)(function(e){return"loaded"===e.type}),Object(E.a)()),Y=N.pipe(Object(O.a)(function(e){return"reloading-stream"===e.type}),Object(E.a)()),W=Object(V.c)(D).pipe(Object(w.a)(null)),X=Object(V.m)(D).pipe(Object(w.a)(null)),Q=Object(d.a)(this._priv_playing$,G.pipe(Object(T.a)(null)),W.pipe(Object(T.a)(null)),X.pipe(Object(T.a)(null))).pipe(Object(v.a)(this._priv_stopCurrentContent$),Object(m.a)(function(e){var t=e[0],n=e[1];return function(e,t,n){if(e.ended)return mn.ENDED;if(n){var r=Math.abs(e.duration-e.currentTime);return null!=gn&&r<gn?mn.ENDED:"seeking"===n.reason?mn.SEEKING:mn.BUFFERING}return t?mn.PLAYING:mn.PAUSED}(D,t,n)})),Z=Object(p.a)(Object(h.a)(mn.LOADING),K.pipe(Object(g.a)(1),Object(w.a)(mn.LOADED)),Object(l.a)(Q.pipe(Object(v.a)(Y),function(e){return function(t){return t.lift(new A(e))}}(this._priv_playing$.pipe(Object(O.a)(function(e){return e})))),Y.pipe(Object(k.a)(K.pipe(Object(g.a)(1),Object(I.a)(Q),Object(T.a)(mn.RELOADING)))))).pipe(Object(b.a)()),J=Object(V.j)(D).pipe(Object(m.a)(function(e){return"play"===e.type}));this._priv_stopCurrentContent$.pipe(Object(g.a)(1)).subscribe(function(){z&&z.unsubscribe()}),J.pipe(Object(v.a)(this._priv_stopCurrentContent$)).subscribe(function(e){return t._priv_onPlayPauseNext(e)},C.a),P.pipe(Object(v.a)(this._priv_stopCurrentContent$)).subscribe(function(e){return t._priv_triggerTimeChange(e)},C.a),Z.pipe(Object(v.a)(this._priv_stopCurrentContent$)).subscribe(function(e){return t._priv_setPlayerState(e)},C.a),N.subscribe(function(e){return t._priv_onStreamNext(e)},function(e){return t._priv_onStreamError(e)},function(){return t._priv_onStreamComplete()}),this._priv_streamLock$.pipe(Object(O.a)(function(e){return!e}),Object(g.a)(1),Object(v.a)(this._priv_stopCurrentContent$)).subscribe(function(){z=N.connect()})},n.getError=function(){return this._priv_currentError},n.getManifest=function(){return this._priv_contentInfos&&this._priv_contentInfos.manifest},n.getCurrentAdaptations=function(){if(!this._priv_contentInfos)return null;var e=this._priv_contentInfos,t=e.currentPeriod,n=e.activeAdaptations;return t&&n&&n.get(t)||null},n.getCurrentRepresentations=function(){if(!this._priv_contentInfos)return null;var e=this._priv_contentInfos,t=e.currentPeriod,n=e.activeRepresentations;return t&&n&&n.get(t)||null},n.getVideoElement=function(){return this.videoElement},n.getNativeTextTrack=function(){if(F("getNativeTextTrack is deprecated. Please open an issue if you used this API."),!this.videoElement)throw new Error("Disposed player");var e=this.videoElement;return e.textTracks.length>0?e.textTracks[0]:null},n.getPlayerState=function(){return this.state},n.isLive=function(){if(!this._priv_contentInfos)return!1;var e=this._priv_contentInfos,t=e.isDirectFile,n=e.manifest;return!(t||!n)&&n.isLive},n.getUrl=function(){if(this._priv_contentInfos){var e=this._priv_contentInfos,t=e.isDirectFile,n=e.manifest,r=e.url;return t?r:n?n.getUrl():void 0}},n.getVideoDuration=function(){if(!this.videoElement)throw new Error("Disposed player");return this.videoElement.duration},n.getVideoBufferGap=function(){if(!this.videoElement)throw new Error("Disposed player");var e=this.videoElement;return Object(B.c)(e.buffered,e.currentTime)},n.getVideoLoadedTime=function(){if(!this.videoElement)throw new Error("Disposed player");var e=this.videoElement;return Object(B.g)(e.buffered,e.currentTime)},n.getVideoPlayedTime=function(){if(!this.videoElement)throw new Error("Disposed player");var e=this.videoElement;return Object(B.e)(e.buffered,e.currentTime)},n.getWallClockTime=function(){if(!this.videoElement)throw new Error("Disposed player");if(!this._priv_contentInfos)return this.videoElement.currentTime;var e=this._priv_contentInfos,t=e.isDirectFile,n=e.manifest;if(t)return this.videoElement.currentTime;if(n){var r=this.videoElement.currentTime;return this.isLive()?r+(n.availabilityStartTime||0):r}return 0},n.getPosition=function(){if(!this.videoElement)throw new Error("Disposed player");return this.videoElement.currentTime},n.getPlaybackRate=function(){return this._priv_speed$.getValue()},n.setPlaybackRate=function(e){this._priv_speed$.next(e)},n.getAvailableVideoBitrates=function(){if(!this._priv_contentInfos)return[];var e=this._priv_contentInfos,t=e.currentPeriod,n=e.activeAdaptations;if(!t||!n)return[];var r=n.get(t),i=r&&r.video;return i?i.representations.map(function(e){return e.bitrate}):[]},n.getAvailableAudioBitrates=function(){if(!this._priv_contentInfos)return[];var e=this._priv_contentInfos,t=e.currentPeriod,n=e.activeAdaptations;if(!t||!n)return[];var r=n.get(t),i=r&&r.audio;return i?i.representations.map(function(e){return e.bitrate}):[]},n.getManualAudioBitrate=function(){return this._priv_bitrateInfos.manualBitrates.audio},n.getManualVideoBitrate=function(){return this._priv_bitrateInfos.manualBitrates.video},n.getVideoBitrate=function(){var e=this.getCurrentRepresentations();if(e&&e.video)return e.video.bitrate},n.getAudioBitrate=function(){var e=this.getCurrentRepresentations();if(e&&e.audio)return e.audio.bitrate},n.getMaxVideoBitrate=function(){return this._priv_abrManager?this._priv_abrManager.getMaxAutoBitrate("video"):this._priv_bitrateInfos.initialMaxAutoBitrates.video},n.getMaxAudioBitrate=function(){return this._priv_abrManager?this._priv_abrManager.getMaxAutoBitrate("audio"):this._priv_bitrateInfos.initialMaxAutoBitrates.audio},n.play=function(){if(!this.videoElement)throw new Error("Disposed player");this.videoElement.play()},n.pause=function(){if(!this.videoElement)throw new Error("Disposed player");this.videoElement.pause()},n.seekTo=function(e){if(!this.videoElement)throw new Error("Disposed player");if(!this._priv_contentInfos)throw new Error("player: no content loaded");var t,n=this._priv_contentInfos,r=n.isDirectFile,i=n.manifest;if(!r&&!i)throw new Error("player: the content did not load yet");var a=typeof e;if("number"===a)t=e;else if("object"===a){var o=this.videoElement.currentTime;if(null!=e.relative)t=o+e.relative;else if(null!=e.position)t=e.position;else{if(null==e.wallClockTime)throw new Error('invalid time object. You must set one of the following properties: "relative", "position" or "wallClockTime"');t=r?e.wallClockTime:bn(1e3*e.wallClockTime,i)}}if(void 0===t)throw new Error("invalid time given");return this.videoElement.currentTime=t,t},n.isFullscreen=function(){return F("isFullscreen is deprecated. Fullscreen management should now be managed by the application"),Object($.b)()},n.setFullscreen=function(e){if(void 0===e&&(e=!0),F("setFullscreen is deprecated. Fullscreen management should now be managed by the application"),!this.videoElement)throw new Error("Disposed player");e?Object($.c)(this.videoElement):Object($.a)()},n.exitFullscreen=function(){F("exitFullscreen is deprecated. Fullscreen management should now be managed by the application"),Object($.a)()},n.getVolume=function(){if(!this.videoElement)throw new Error("Disposed player");return this.videoElement.volume},n.setVolume=function(e){if(!this.videoElement)throw new Error("Disposed player");var t=this.videoElement;e!==t.volume&&(t.volume=e,this.trigger("volumeChange",e))},n.isMute=function(){return!this.getVolume()},n.mute=function(){this._priv_mutedMemory=this.getVolume(),this.setVolume(0)},n.unMute=function(){0===this.getVolume()&&this.setVolume(this._priv_mutedMemory||Pn)},n.setVideoBitrate=function(e){this._priv_bitrateInfos.manualBitrates.video=e,this._priv_abrManager&&this._priv_abrManager.setManualBitrate("video",e)},n.setAudioBitrate=function(e){this._priv_bitrateInfos.manualBitrates.audio=e,this._priv_abrManager&&this._priv_abrManager.setManualBitrate("audio",e)},n.setMaxVideoBitrate=function(e){this._priv_bitrateInfos.initialMaxAutoBitrates.video=e,this._priv_abrManager&&this._priv_abrManager.setMaxAutoBitrate("video",e)},n.setMaxAudioBitrate=function(e){this._priv_bitrateInfos.initialMaxAutoBitrates.audio=e,this._priv_abrManager&&this._priv_abrManager.setMaxAutoBitrate("audio",e)},n.setMaxBufferBehind=function(e){this._priv_bufferOptions.maxBufferBehind$.next(e)},n.setMaxBufferAhead=function(e){this._priv_bufferOptions.maxBufferAhead$.next(e)},n.setWantedBufferAhead=function(e){this._priv_bufferOptions.wantedBufferAhead$.next(e)},n.getMaxBufferBehind=function(){return this._priv_bufferOptions.maxBufferBehind$.getValue()},n.getMaxBufferAhead=function(){return this._priv_bufferOptions.maxBufferAhead$.getValue()},n.getWantedBufferAhead=function(){return this._priv_bufferOptions.wantedBufferAhead$.getValue()},n.getCurrentKeySystem=function(){if(!this.videoElement)throw new Error("Disposed player");return Object(G.getCurrentKeySystem)(this.videoElement)},n.getAvailableAudioTracks=function(){if(!this._priv_contentInfos)return[];var e=this._priv_contentInfos.currentPeriod;return this._priv_trackManager&&e?this._priv_trackManager.getAvailableAudioTracks(e):[]},n.getAvailableTextTracks=function(){if(!this._priv_contentInfos)return[];var e=this._priv_contentInfos.currentPeriod;return this._priv_trackManager&&e?this._priv_trackManager.getAvailableTextTracks(e):[]},n.getAvailableVideoTracks=function(){if(!this._priv_contentInfos)return[];var e=this._priv_contentInfos.currentPeriod;return this._priv_trackManager&&e?this._priv_trackManager.getAvailableVideoTracks(e):[]},n.getAudioTrack=function(){if(this._priv_contentInfos){var e=this._priv_contentInfos.currentPeriod;if(this._priv_trackManager&&e)return this._priv_trackManager.getChosenAudioTrack(e)}},n.getTextTrack=function(){if(this._priv_contentInfos){var e=this._priv_contentInfos.currentPeriod;if(this._priv_trackManager&&e)return this._priv_trackManager.getChosenTextTrack(e)}},n.getVideoTrack=function(){if(this._priv_contentInfos){var e=this._priv_contentInfos.currentPeriod;if(this._priv_trackManager&&e)return this._priv_trackManager.getChosenVideoTrack(e)}},n.setAudioTrack=function(e){if(!this._priv_contentInfos)throw new Error("No content loaded");var t=this._priv_contentInfos.currentPeriod;if(!this._priv_trackManager||!t)throw new Error("No compatible content launched.");try{this._priv_trackManager.setAudioTrackByID(t,e)}catch(e){throw new Error("player: unknown audio track")}},n.setTextTrack=function(e){if(!this._priv_contentInfos)throw new Error("No content loaded");var t=this._priv_contentInfos.currentPeriod;if(!this._priv_trackManager||!t)throw new Error("No compatible content launched.");try{this._priv_trackManager.setTextTrackByID(t,e)}catch(e){throw new Error("player: unknown text track")}},n.disableTextTrack=function(){if(this._priv_contentInfos){var e=this._priv_contentInfos.currentPeriod;if(this._priv_trackManager&&e)return this._priv_trackManager.disableTextTrack(e)}},n.setVideoTrack=function(e){if(!this._priv_contentInfos)throw new Error("No content loaded");var t=this._priv_contentInfos.currentPeriod;if(!this._priv_trackManager||!t)throw new Error("No compatible content launched.");try{this._priv_trackManager.setVideoTrackByID(t,e)}catch(e){throw new Error("player: unknown video track")}},n.getImageTrackData=function(){return this._priv_contentInfos&&this._priv_contentInfos.thumbnails},n.getMinimumPosition=function(){if(!this._priv_contentInfos)return null;if(this._priv_contentInfos.isDirectFile)return 0;var e=this._priv_contentInfos.manifest;return e?e.getMinimumPosition():null},n.getMaximumPosition=function(){if(!this._priv_contentInfos)return null;var e=this._priv_contentInfos,t=e.isDirectFile,n=e.manifest;if(t){if(!this.videoElement)throw new Error("Disposed player");return this.videoElement.duration}return n?n.getMaximumPosition():null},n._priv_cleanUpCurrentContentState=function(){var e=this;this._priv_streamLock$.next(!0),this._priv_contentInfos=null,this._priv_trackManager=null,this._priv_abrManager&&(this._priv_abrManager.dispose(),this._priv_abrManager=null),this._priv_contentEventsMemory={period:null,videoTrack:null,audioTrack:null,textTrack:null,videoBitrate:null,audioBitrate:null,bitrateEstimation:void 0};var t=function(){e._priv_streamLock$.next(!1)};this.videoElement?Object(G.clearEMESession)(this.videoElement).pipe(Object(N.a)(function(){return f.a})).subscribe(C.a,t,t):t()},n._priv_triggerContentEvent=function(e,t){var n=this._priv_contentEventsMemory[e];i()(n,t)||(this._priv_contentEventsMemory[e]=t,this.trigger(e+"Change",t))},n._priv_onStreamNext=function(e){switch(e.type){case"activePeriodChanged":this._priv_onActivePeriodChanged(e.value);break;case"periodBufferReady":this._priv_onPeriodBufferReady(e.value);break;case"periodBufferCleared":this._priv_onPeriodBufferCleared(e.value);break;case"reloading-stream":this._priv_onStreamReload();break;case"representationChange":this._priv_onRepresentationChange(e.value);break;case"adaptationChange":this._priv_onAdaptationChange(e.value);break;case"manifestUpdate":this._priv_onManifestUpdate(e.value);break;case"bitrateEstimationChange":this._priv_onBitrateEstimationChange(e.value);break;case"manifestReady":this._priv_onManifestReady(e.value);break;case"warning":this._priv_onStreamWarning(e.value);break;case"added-segment":if(!this._priv_contentInfos)return void M.a.error("Added segment while no content is loaded");var t=e.value,n=t.bufferType,r=t.segmentData;if("image"===n&&null!=r&&"bif"===r.type){var i=r.data;this._priv_contentInfos.thumbnails=i,this.trigger("imageTrackUpdate",{data:this._priv_contentInfos.thumbnails})}}},n._priv_onStreamError=function(e){this._priv_stopCurrentContent$.next(),this._priv_cleanUpCurrentContentState(),this._priv_currentError=e,M.a.error("the player stopped because of an error:",e),this._priv_setPlayerState(mn.STOPPED),this._priv_currentError===e&&this.trigger("error",e)},n._priv_onStreamComplete=function(){this._priv_stopCurrentContent$.next(),this._priv_cleanUpCurrentContentState(),this._priv_setPlayerState(mn.ENDED)},n._priv_onStreamWarning=function(e){this.trigger("warning",e)},n._priv_onManifestReady=function(e){if(this._priv_contentInfos){var t=e.manifest,n=e.abrManager;this._priv_contentInfos.manifest=t,this._priv_abrManager=n;var r=this._priv_contentInfos,i=r.initialAudioTrack,a=r.initialTextTrack;this._priv_trackManager=new Rn({preferredAudioTracks:void 0===i?void 0:[i],preferredTextTracks:void 0===a?void 0:[a]}),this.trigger("manifestChange",t)}else M.a.error("The manifest is loaded but no content is.")},n._priv_onActivePeriodChanged=function(e){var t=e.period;if(this._priv_contentInfos){if(this._priv_contentInfos.currentPeriod=t,this._priv_triggerContentEvent("period",t),this._priv_trackManager){var n=this._priv_trackManager.getChosenAudioTrack(t),r=this._priv_trackManager.getChosenTextTrack(t),i=this._priv_trackManager.getChosenVideoTrack(t);this._priv_triggerContentEvent("audioTrack",n),this._priv_triggerContentEvent("textTrack",r),this._priv_triggerContentEvent("videoTrack",i)}else this._priv_triggerContentEvent("audioTrack",null),this._priv_triggerContentEvent("textTrack",null),this._priv_triggerContentEvent("videoTrack",null);var a=this.getCurrentRepresentations();if(a&&null!=a.audio){var o=a.audio.bitrate;this._priv_triggerContentEvent("audioBitrate",null!=o?o:-1)}else this._priv_triggerContentEvent("audioBitrate",null);var u=this.getCurrentRepresentations();if(u&&null!=u.video){var s=u.video.bitrate;this._priv_triggerContentEvent("videoBitrate",null!=s?s:-1)}else this._priv_triggerContentEvent("videoBitrate",null)}else M.a.error("The active period changed but no content is loaded")},n._priv_onPeriodBufferReady=function(e){var t=e.type,n=e.period,r=e.adaptation$;switch(t){case"video":this._priv_trackManager?(this._priv_trackManager.addPeriod(t,n,r),this._priv_trackManager.setInitialVideoTrack(n)):(M.a.error("TrackManager not instanciated for a new video period"),r.next(null));break;case"audio":this._priv_trackManager?(this._priv_trackManager.addPeriod(t,n,r),this._priv_trackManager.setInitialAudioTrack(n)):(M.a.error("TrackManager not instanciated for a new "+t+" period"),r.next(null));break;case"text":this._priv_trackManager?(this._priv_trackManager.addPeriod(t,n,r),this._priv_trackManager.setInitialTextTrack(n)):(M.a.error("TrackManager not instanciated for a new "+t+" period"),r.next(null));break;default:var i=n.adaptations[t];i&&i.length?r.next(i[0]):r.next(null)}},n._priv_onPeriodBufferCleared=function(e){var t=e.type,n=e.period;switch(t){case"audio":case"text":case"video":this._priv_trackManager&&this._priv_trackManager.removePeriod(t,n)}},n._priv_onStreamReload=function(){this._priv_trackManager&&this._priv_trackManager.resetPeriods()},n._priv_onManifestUpdate=function(e){if(this._priv_contentInfos){var t=e.manifest;this._priv_contentInfos.manifest=t,this._priv_trackManager&&this._priv_trackManager.update(),this.trigger("manifestUpdate",t)}else M.a.error("The manifest is updated but no content is loaded.")},n._priv_onAdaptationChange=function(e){var t=e.type,n=e.adaptation,r=e.period;if(this._priv_contentInfos){this._priv_contentInfos.activeAdaptations||(this._priv_contentInfos.activeAdaptations=new Map);var i,a=this._priv_contentInfos,o=a.activeAdaptations,u=a.currentPeriod,s=o.get(r);if(s)s[t]=n;else o.set(r,((i={})[t]=n,i));if(this._priv_trackManager&&null!=r&&r===u)switch(t){case"audio":var c=this._priv_trackManager.getChosenAudioTrack(u);this._priv_triggerContentEvent("audioTrack",c);break;case"text":var l=this._priv_trackManager.getChosenTextTrack(u);this._priv_triggerContentEvent("textTrack",l);break;case"video":var f=this._priv_trackManager.getChosenVideoTrack(u);this._priv_triggerContentEvent("videoTrack",f)}}else M.a.error("The adaptations changed but no content is loaded")},n._priv_onRepresentationChange=function(e){var t=e.type,n=e.period,r=e.representation;if(this._priv_contentInfos){this._priv_contentInfos.activeRepresentations||(this._priv_contentInfos.activeRepresentations=new Map);var i,a=this._priv_contentInfos,o=a.activeRepresentations,u=a.currentPeriod,s=o.get(n);if(s)s[t]=r;else o.set(n,((i={})[t]=r,i));var c=r&&r.bitrate;null!=c&&(this._priv_bitrateInfos.lastBitrates[t]=c),null!=n&&u===n&&("video"===t?this._priv_triggerContentEvent("videoBitrate",null!=c?c:-1):"audio"===t&&this._priv_triggerContentEvent("audioBitrate",null!=c?c:-1))}else M.a.error("The representations changed but no content is loaded")},n._priv_onBitrateEstimationChange=function(e){var t=e.type,n=e.bitrate;this._priv_triggerContentEvent("bitrateEstimation",{type:t,bitrate:n})},n._priv_onPlayPauseNext=function(e){if(!this.videoElement)throw new Error("Disposed player");this._priv_playing$.next(e)},n._priv_onNativeTextTracksNext=function(e){this.trigger("nativeTextTracksChange",e)},n._priv_setPlayerState=function(e){this.state!==e&&(this.state=e,M.a.info("playerStateChange",e),this.trigger("playerStateChange",e))},n._priv_triggerTimeChange=function(e){if(this._priv_contentInfos){if(this.state!==mn.RELOADING){var t=this._priv_contentInfos,n=t.isDirectFile,r=t.manifest;if((n||r)&&e){var i={position:e.currentTime,duration:e.duration,playbackRate:e.playbackRate,bufferGap:isFinite(e.bufferGap)?e.bufferGap:0};r&&r.isLive&&e.currentTime>0&&(i.wallClockTime=e.currentTime+(r.availabilityStartTime||0),i.liveGap=r.getMaximumPosition()-e.currentTime),this.trigger("positionUpdate",i)}}}else M.a.warn("Cannot perform time update: no content loaded.")},function(e,t,n){t&&Mn(e.prototype,t),n&&Mn(e,n)}(t,null,[{key:"ErrorTypes",get:function(){return z.b}},{key:"ErrorCodes",get:function(){return z.a}},{key:"LogLevel",get:function(){return M.a.getLevel()},set:function(e){M.a.setLevel(e)}}]),t}(P.a);Cn.version="3.6.1";var Bn=Cn;H.a.emeManager=n(61).default,H.a.imageBuffer=n(112).default,H.a.imageParser=n(113).default,H.a.transports.smooth=n(126).default,H.a.transports.dash=n(125).default,H.a.nativeTextTracksBuffer=n(131).default,H.a.nativeTextTracksParsers.vtt=n(114).default,H.a.nativeTextTracksParsers.ttml=n(115).default,H.a.nativeTextTracksParsers.sami=n(116).default,H.a.nativeTextTracksParsers.srt=n(117).default,H.a.htmlTextTracksBuffer=n(130).default,H.a.htmlTextTracksParsers.sami=n(119).default,H.a.htmlTextTracksParsers.ttml=n(128).default,H.a.htmlTextTracksParsers.srt=n(120).default,H.a.htmlTextTracksParsers.vtt=n(129).default,H.a.directfile=n(121).default;t.default=Bn},function(e,t,n){"use strict";n.r(t);var r=n(76),i=n(6),a=n(34),o=n(0);function u(e,t){for(var n=1;n<=8;n++)if(e[t]>=Math.pow(2,8-n))return n}function s(e,t){var n=u(e,t);if(null==n)return o.a.warn("webm: unrepresentable length"),null;if(t+n>e.length)return o.a.warn("webm: impossible length"),null;for(var r=0,i=0;i<n;i++)r=e[t+i]*Math.pow(2,8*(n-i-1))+r;return{length:n,value:r}}function c(e,t){var n=u(e,t);if(null==n)return o.a.warn("webm: unrepresentable length"),null;if(t+n>e.length)return o.a.warn("webm: impossible length"),null;for(var r=(e[t]&(1<<8-n)-1)*Math.pow(2,8*(n-1)),i=1;i<n;i++)r=e[t+i]*Math.pow(2,8*(n-i-1))+r;return{length:n,value:r}}function l(e,t,n){for(var r=0,i=0;i<n;i++)r=e[t+i]*Math.pow(2,8*(n-i-1))+r;return r}var f=408125543,d=357149030,p=2807729,h=17545,v=475249515,m=187,b=179,g=183,y=241;function _(e,t,n,r){for(var i=r[0],a=r[1],o=i;o<a;){var u=s(n,o);if(null==u)return null;var l=u.value,f=o+u.length,d=c(n,f);if(null==d)return null;var p=f+d.length,h=p+d.value;if(l===e)return[p,h];if(t.length)for(var v=0;v<t.length;v++){if(l===t[v])return _(e,t.slice(v+1,t.length),n,[p,h])}o=h}return null}function O(e,t){var n=_(p,[f,d],e,[t,e.length]);if(null==n)return null;var r=n[1]-n[0];return 1e9/l(e,n[0],r)}function E(e,t){var n=_(h,[f,d],e,[t,e.length]);if(null==n)return null;var r=n[1]-n[0];return 4===r?function(e,t){return new DataView(e.buffer).getFloat32(t)}(e,n[0]):8===r?function(e,t){return new DataView(e.buffer).getFloat64(t)}(e,n[0]):null}var w=n(2),T=n(11),j=n(19),S=n(39),x=n(37),A=n(82),R=n(9),k=/^P(([\d.]*)Y)?(([\d.]*)M)?(([\d.]*)D)?T?(([\d.]*)H)?(([\d.]*)M)?(([\d.]*)S)?/,I=/([0-9]+)-([0-9]+)/;function N(e){return"true"===e}function D(e){return"true"===e||"false"!==e&&parseInt(e,10)}function M(e){return new Date(Date.parse(e)).getTime()/1e3}function P(e){if(!e)return 0;var t=k.exec(e);return Object(R.b)(!!t,e+" is not a valid ISO8601 duration"),365*parseFloat(t[2]||"0")*24*60*60+30*parseFloat(t[4]||"0")*24*60*60+24*parseFloat(t[6]||"0")*60*60+60*parseFloat(t[8]||"0")*60+60*parseFloat(t[10]||"0")+parseFloat(t[12]||"0")}function C(e){return e}function B(e){var t=I.exec(e);return t?[+t[1],+t[2]]:null}function L(e){for(var t,n,r=0;r<e.attributes.length;r++){var i=e.attributes[r];switch(i.name){case"schemeIdUri":t=i.value;break;case"value":n=i.value}}return{schemeIdUri:t,value:n}}function U(e){return function(t,n,r){var i=r?parseInt(r,10):1;return function(e,t){var n=e.toString();return n.length>=t?n:(new Array(t+1).join("0")+n).slice(-t)}(""+e,i)}}function F(e,t,n,r){return function(e,t,n){return-1===e.indexOf("$")?e:e.replace(/\$\$/g,"$").replace(/\$RepresentationID\$/g,String(t)).replace(/\$Bandwidth(|\%0(\d+)d)\$/g,U(n||0))}(Object(x.b)(e,t),n,r)}function $(e,t,n){return-1===e.indexOf("$")?e:e.replace(/\$\$/g,"$").replace(/\$Number(|\%0(\d+)d)\$/g,function(e,t,r){if(null==n)throw new Error("Segment number not defined in a $Number$ scheme");return U(n)(e,t,r)}).replace(/\$Time(|\%0(\d+)d)\$/g,function(e,n,r){if(null==t)throw new Error("Segment time not defined in a $Time$ scheme");return U(t)(e,n,r)})}function V(e,t){var n=e.repeatCount||0;if(n<0){var r=t?t.start:1/0;n=Math.ceil((r-e.start)/e.duration)-1}return n}function z(e,t){return t*e.timescale+e.indexTimeOffset}function H(e,t){return(t-e.indexTimeOffset)/e.timescale}function G(e,t,n){var r=e.timescale||1;return{up:t*r,to:(t+n)*r}}function K(e){var t=e.start,n=e.duration,r=e.repeatCount;return-1===n?t:t+(r+1)*n}function q(e){var t=e.initialization;return{id:"init",isInit:!0,time:0,range:t&&t.range||void 0,indexRange:e.indexRange||void 0,mediaURL:t?t.mediaURL:null,timescale:e.timescale,timestampOffset:-e.indexTimeOffset/e.timescale}}function Y(e,t,n){var r=n-e;return r>0?Math.floor(r/t):0}function W(e,t,n){for(var r=z(e,t),i=z(e,t+n),a=e.timeline,o=e.timescale,u=e.mediaURL,s=e.startNumber,c=null!=s?s:void 0,l=[],f=a.length,d=a.length&&a[0].duration||0,p=0;p<f;p++){var h=a[p],v=h.duration,m=h.start,b=h.range;if(d=Math.max(d,v),v<0){if(m+d<i){var g=null!=c?c:void 0,y={id:""+m,time:m-e.indexTimeOffset,isInit:!1,range:b,duration:void 0,timescale:o,mediaURL:$(u,m,g),number:g,timestampOffset:-e.indexTimeOffset/o};l.push(y)}return l}for(var _=V(h,a[p+1]),O=Y(m,v,r),E=m+O*v;E<i&&O<=_;){var w=null!=c?c+O:void 0,T={id:""+E,time:E-e.indexTimeOffset,isInit:!1,range:b,duration:v,timescale:o,mediaURL:$(u,E,w),number:w,timestampOffset:-e.indexTimeOffset/o};l.push(T),E=m+ ++O*v}if(E>=i)return l;null!=c&&(c+=_+1)}return l}function X(e,t){if(t.timescale!==e.timescale){var n=e.timescale;e.timeline.push({start:t.time/t.timescale*n,duration:t.duration/t.timescale*n,repeatCount:t.count||0,range:t.range})}else e.timeline.push({start:t.time,duration:t.duration,repeatCount:t.count||0,range:t.range});return!0}var Q=function(){function e(e,t){var n=t.periodStart,r=t.representationURL,i=t.representationId,a=t.representationBitrate,o=(null!=e.presentationTimeOffset?e.presentationTimeOffset:0)-n*e.timescale;this._index={mediaURL:F(r,e.media,i,a),timeline:e.timeline,timescale:e.timescale,duration:e.duration,indexTimeOffset:o,indexRange:e.indexRange,startNumber:e.startNumber,initialization:e.initialization&&{mediaURL:F(r,e.initialization.media,i,a),range:e.initialization.range}}}var t=e.prototype;return t.getInitSegment=function(){return q(this._index)},t.getSegments=function(e,t){return W(this._index,e,t)},t.shouldRefresh=function(){return!1},t.getFirstPosition=function(){var e=this._index;if(e.timeline.length)return H(e,e.timeline[0].start)},t.getLastPosition=function(){var e=this._index;if(e.timeline.length)return H(e,function(e){var t=e.start,n=e.duration,r=e.repeatCount;return-1===n?t:t+r*n}(e.timeline[e.timeline.length-1]))},t.checkDiscontinuity=function(){return-1},t._addSegments=function(e){for(var t=0;t<e.length;t++)X(this._index,e[t])},t._update=function(e){this._index=e._index},e}(),Z=function(){function e(e,t){var n=t.periodStart,r=t.representationURL,i=t.representationId,a=t.representationBitrate;this._periodStart=n;var o=(null!=e.presentationTimeOffset?e.presentationTimeOffset:0)-n*e.timescale;this._index={list:e.list.map(function(e){return{mediaURL:F(r,e.media,i,a),mediaRange:e.mediaRange}}),timescale:e.timescale,duration:e.duration,indexTimeOffset:o,indexRange:e.indexRange,initialization:e.initialization&&{mediaURL:F(r,e.initialization.media,i,a),range:e.initialization.range}}}var t=e.prototype;return t.getInitSegment=function(){return q(this._index)},t.getSegments=function(e,t){for(var n=this._index,r=G(n,e+this._periodStart,t),i=r.up,a=r.to,o=n.duration,u=n.list,s=n.timescale,c=Math.min(u.length-1,Math.floor(a/o)),l=[],f=Math.floor(i/o);f<=c;){var d={id:""+f,time:f*o,isInit:!1,range:u[f].mediaRange,duration:o,timescale:s,mediaURL:u[f].mediaURL,timestampOffset:-n.indexTimeOffset/s};l.push(d),f++}return l},t.shouldRefresh=function(e,t){var n=this._index,r=n.timescale,i=n.duration,a=n.list,o=t*r,u=Math.floor(o/i);return!(u>=0&&u<a.length)},t.getFirstPosition=function(){return this._periodStart},t.getLastPosition=function(){var e=this._index,t=e.duration;return e.list.length*t/e.timescale+this._periodStart},t.checkDiscontinuity=function(){return-1},t._update=function(e){this._index=e._index},t._addSegments=function(){0},e}(),J=function(){function e(e,t){var n=t.periodStart,r=t.representationURL,i=t.representationId,a=t.representationBitrate;this._periodStart=n;var o=null!=e.presentationTimeOffset?e.presentationTimeOffset:0,u=o-n*e.timescale;this._index={duration:e.duration,timescale:e.timescale,indexRange:e.indexRange,indexTimeOffset:u,initialization:e.initialization&&{mediaURL:F(r,e.initialization.media,i,a),range:e.initialization.range},mediaURL:F(r,e.media,i,a),presentationTimeOffset:o,startNumber:e.startNumber}}var t=e.prototype;return t.getInitSegment=function(){return q(this._index)},t.getSegments=function(e,t){var n=this._index,r=G(n,e,t),i=r.up,a=r.to;if(a<=i)return[];for(var o=n.duration,u=n.startNumber,s=n.timescale,c=n.mediaURL,l=[],f=i;f<=a;f+=o){var d=f-this._periodStart*s,p=Math.floor(d/o),h=p+(null==u?1:u),v=p*o+(this._index.presentationTimeOffset||0),m={id:""+h,number:h,time:p*o+this._periodStart*this._index.timescale,isInit:!1,duration:o,timescale:s,mediaURL:$(c,v,h),timestampOffset:-n.indexTimeOffset/s};l.push(m)}return l},t.getFirstPosition=function(){},t.getLastPosition=function(){},t.shouldRefresh=function(){return!1},t.checkDiscontinuity=function(){return-1},t._addSegments=function(){0},t._update=function(e){this._index=e._index},e}();function ee(e,t,n){var r,i=e.timeline,a=e.timescale,o=i.length,u=i[o-1],s=t.timescale===a?{time:t.time,duration:t.duration}:{time:t.time/t.timescale*a,duration:t.duration/t.timescale*a};if(n&&n.timescale&&(r=(n.timescale===a?n.time:n.time/n.timescale*a)+e.indexTimeOffset),null!=r&&s.time===r){var c=s.time+s.duration,l=c-(u.start+u.duration*u.repeatCount);if(l<=0)return!1;if(-1===u.duration){var f=i[o-2];f&&f.duration===l?(f.repeatCount++,i.pop()):u.duration=l}return e.timeline.push({duration:-1,start:c,repeatCount:0}),!0}return s.time>=K(u)&&(u.duration===s.duration?u.repeatCount++:e.timeline.push({duration:s.duration,start:s.time,repeatCount:0}),!0)}var te=function(){function e(e,t){var n=t.representationURL,r=t.representationId,i=t.representationBitrate,a=t.periodStart,o=(null!=e.presentationTimeOffset?e.presentationTimeOffset:0)-a*e.timescale;this._index={duration:e.duration,indexTimeOffset:o,indexRange:e.indexRange,initialization:e.initialization&&{mediaURL:F(n,e.initialization.media,r,i),range:e.initialization.range},mediaURL:F(n,e.media,r,i),startNumber:e.startNumber,timeline:e.timeline,timescale:e.timescale}}var t=e.prototype;return t.getInitSegment=function(){return q(this._index)},t.getSegments=function(e,t){return W(this._index,e,t)},t.shouldRefresh=function(e,t){var n=this._index.timeline,r=z(this._index,t),i=n[n.length-1];return!!i&&(i.duration<0&&(i={start:i.start,duration:0,repeatCount:i.repeatCount}),r>K(i))},t.getFirstPosition=function(){var e=this._index;if(e.timeline.length)return H(e,e.timeline[0].start)},t.getLastPosition=function(){var e=this._index;if(e.timeline.length)return H(e,K(e.timeline[e.timeline.length-1]))},t.checkDiscontinuity=function(e){var t=this._index,n=t.timeline,r=t.timescale,i=z(this._index,e);if(i<=0)return-1;var a=function(e,t){for(var n=e.timeline,r=0,i=n.length;r<i;){var a=r+i>>>1;n[a].start<t?r=a+1:i=a}return r>0?r-1:r}(this._index,i);if(a<0||a>=n.length-1)return-1;var o=n[a];if(-1===o.duration)return-1;var u=n[a+1];if(null==u)return-1;var s=o.start,c=K(o);return c!==u.start&&i>=s&&i<=c&&c-i<r?H(this._index,u.start):-1},t._update=function(e){this._index=e._index},t._addSegments=function(e,t){for(var n=0;n<e.length;n++)ee(this._index,e[n],t)},e}();function ne(e){for(var t={},n=0;n<e.attributes.length;n++){var r=e.attributes[n];switch(r.name){case"id":t.id=r.value;break;case"lang":t.language=r.value;break;case"contentType":t.contentType=r.value;break;case"par":t.par=C(r.value)}}return t}function re(e){for(var t,n,r,i=0;i<e.attributes.length;i++){var a=e.attributes[i];switch(a.name){case"schemeIdUri":t=a.value;break;case"value":n=a.value;break;case"cenc:default_KID":r=a.value.toString().split("-").join("").toUpperCase()}}return{schemeIdUri:t,value:n,keyId:r}}var ie=n(7),ae=n.n(ie);function oe(e){for(var t={},n=0;n<e.attributes.length;n++){var r=e.attributes[n];switch(r.name){case"range":var i=B(r.value)||void 0;i?t.range=i:o.a.warn('DASH: invalid range ("'+r.value+'")');break;case"sourceURL":t.media=r.value}}return t}function ue(e){for(var t={},n=e.childNodes,r=0;r<n.length;r++)if(n[r].nodeType===Node.ELEMENT_NODE){var i=n[r];"Initialization"===i.nodeName&&(t.initialization=oe(i))}for(var a=0;a<e.attributes.length;a++){var u=e.attributes[a];switch(u.name){case"timescale":var s=parseInt(u.value,10);isNaN(s)?o.a.warn('DASH: invalid timescale ("'+u.value+'")'):t.timescale=s;break;case"timeShiftBufferDepth":var c=P(u.value);isNaN(c)?o.a.warn('DASH: invalid timeShiftBufferDepth ("'+u.value+'")'):t.timeShiftBufferDepth=c;break;case"presentationTimeOffset":var l=parseFloat(u.value);isNaN(l)?o.a.warn('DASH: invalid presentationTimeOffset ("'+u.value+'")'):t.presentationTimeOffset=l;break;case"indexRange":t.indexRange=B(u.value)||void 0;break;case"indexRangeExact":t.indexRangeExact=N(u.value);break;case"availabilityTimeOffset":var f=parseFloat(u.value);isNaN(f)?o.a.warn('DASH: invalid availabilityTimeOffset ("'+u.value+'")'):t.availabilityTimeOffset=f;break;case"availabilityTimeComplete":t.availabilityTimeComplete=N(u.value);break;case"duration":var d=parseInt(u.value,10);isNaN(d)?o.a.warn('DASH: invalid duration ("'+u.value+'")'):t.duration=d;break;case"startNumber":var p=parseInt(u.value,10);isNaN(p)?o.a.warn('DASH: invalid startNumber ("'+u.value+'")'):t.startNumber=p}}var h=null==t.timescale?1:t.timescale,v=!!t.indexRangeExact,m=null==t.availabilityTimeComplete||t.availabilityTimeComplete;return ae()(t,{availabilityTimeComplete:m,indexRangeExact:v,timeline:[],timescale:h})}function se(e){for(var t={},n=0;n<e.attributes.length;n++){var r=e.attributes[n];switch(r.name){case"media":t.media=r.value;break;case"indexRange":var i=B(r.value)||void 0;i?t.indexRange=i:o.a.warn('DASH: invalid indexRange ("'+r.value+'")');break;case"index":t.index=r.value;break;case"mediaRange":var a=B(r.value)||void 0;a?t.mediaRange=a:o.a.warn('DASH: invalid mediaRange ("'+r.value+'")')}}return t}function ce(e){for(var t=ue(e),n=[],r=e.childNodes,i=0;i<r.length;i++)if(r[i].nodeType===Node.ELEMENT_NODE){var a=r[i];if("SegmentURL"===a.nodeName){var o=se(a);n.push(o)}}var u=t.duration;if(null==u)throw new Error("Invalid SegmentList: no duration");return ae()(t,{list:n,duration:u})}function le(e){for(var t,n,r,i=0;i<e.attributes.length;i++){var a=e.attributes[i];switch(a.name){case"t":t=parseInt(a.value,10);break;case"d":n=parseInt(a.value,10);break;case"r":r=parseInt(a.value,10)}}return{start:t,duration:n,repeatCount:r}}function fe(e,t,n){var r=e.start,i=e.duration,a=e.repeatCount;return null==r&&t&&null!=t.duration&&(r=t.start+t.duration*(t.repeatCount+1)),null!=i&&!isNaN(i)||!n||null==n.start||isNaN(n.start)||null==r||isNaN(r)||(i=n.start-r),null==r||isNaN(r)||null==i||isNaN(i)||null!=a&&isNaN(a)?(o.a.warn('DASH: A "S" Element could not have been parsed.'),null):{start:r,duration:i,repeatCount:a||0}}function de(e){for(var t=[],n=[],r=e.childNodes,i=0;i<r.length;i++)if(r[i].nodeType===Node.ELEMENT_NODE){var a=r[i];if("S"===a.nodeName){var o=le(a);o&&n.push(o)}}for(var u=0;u<n.length;u++){var s=fe(n[u],t[t.length-1]||null,n[u+1]||null);s&&t.push(s)}return t}function pe(e){return{media:e}}function he(e){for(var t,n,r,i,a,o=ue(e),u=0;u<e.childNodes.length;u++)if(e.childNodes[u].nodeType===Node.ELEMENT_NODE){var s=e.childNodes[u];"SegmentTimeline"===s.nodeName&&(a=de(s))}for(var c=0;c<e.attributes.length;c++){var l=e.attributes[c];switch(l.nodeName){case"initialization":null==o.initialization&&(o.initialization=pe(l.value));break;case"index":n=l.value;break;case"media":r=l.value;break;case"bitstreamSwitching":i=N(l.value)}}if(null!=a)t=ae()({},o,{indexType:"timeline",timeline:a});else{var f=o.duration;if(null==f)throw new Error("Invalid SegmentTemplate: no duration");t=ae()({},o,{indexType:"template",duration:f})}return null!=n&&(t.index=n),null!=r&&(t.media=r),null!=i&&(t.bitstreamSwitching=i),t}function ve(e){return{children:function(e){for(var t={baseURL:""},n=0;n<e.length;n++)if(e[n].nodeType===Node.ELEMENT_NODE){var r=e[n];switch(r.nodeName){case"BaseURL":t.baseURL=r.textContent||"";break;case"SegmentBase":t.segmentBase=ue(r);break;case"SegmentList":t.segmentList=ce(r);break;case"SegmentTemplate":t.segmentTemplate=he(r)}}return t}(e.childNodes),attributes:function(e){for(var t={},n=0;n<e.attributes.length;n++){var r=e.attributes[n];switch(r.name){case"audioSamplingRate":t.audioSamplingRate=r.value;break;case"bandwidth":var i=parseInt(r.value,10);isNaN(i)?o.a.warn('DASH: invalid bandwidth ("'+r.value+'")'):t.bitrate=i;break;case"codecs":t.codecs=r.value;break;case"codingDependency":t.codingDependency=N(r.value);break;case"frameRate":t.frameRate=r.value;break;case"height":var a=parseInt(r.value,10);isNaN(a)?o.a.warn('DASH: invalid height ("'+r.value+'")'):t.height=a;break;case"id":t.id=r.value;break;case"maxPlayoutRate":var u=parseFloat(r.value);isNaN(u)?o.a.warn('DASH: invalid maxPlayoutRate ("'+r.value+'")'):t.maxPlayoutRate=u;break;case"maximumSAPPeriod":var s=parseFloat(r.value);isNaN(s)?o.a.warn('DASH: invalid maximumSAPPeriod ("'+r.value+'")'):t.maximumSAPPeriod=s;break;case"mimeType":t.mimeType=r.value;break;case"profiles":t.profiles=r.value;break;case"qualityRanking":var c=parseInt(r.value,10);isNaN(c)?o.a.warn('DASH: invalid qualityRanking ("'+r.value+'")'):t.qualityRanking=c;break;case"segmentProfiles":t.segmentProfiles=r.value;break;case"width":var l=parseInt(r.value,10);isNaN(l)?o.a.warn('DASH: invalid width ("'+r.value+'")'):t.width=l}}return t}(e)}}function me(e){return{children:function(e){for(var t={baseURL:"",representations:[]},n=[],r=0;r<e.length;r++)if(e[r].nodeType===Node.ELEMENT_NODE){var i=e[r];switch(i.nodeName){case"Accessibility":t.accessibility=L(i);break;case"BaseURL":t.baseURL=i.textContent||"";break;case"ContentComponent":t.contentComponent=ne(i);break;case"Representation":var a=ve(i);t.representations.push(a);break;case"Role":t.role=L(i);break;case"SegmentBase":t.segmentBase=ue(i);break;case"SegmentList":t.segmentList=ce(i);break;case"SegmentTemplate":t.segmentTemplate=he(i);break;case"ContentProtection":var o=re(i);o&&n.push(o)}}return n.length&&(t.contentProtections=n),t}(e.childNodes),attributes:function(e){for(var t={},n=0;n<e.attributes.length;n++){var r=e.attributes[n];switch(r.name){case"id":t.id=r.value;break;case"group":var i=parseInt(r.value,10);isNaN(i)?o.a.warn('DASH: invalid group ("'+r.value+'")'):t.group=i;break;case"lang":t.language=r.value;break;case"contentType":t.contentType=r.value;break;case"par":t.par=r.value;break;case"minBandwidth":var a=parseInt(r.value,10);isNaN(a)?o.a.warn('DASH: invalid minBandwidth ("'+r.value+'")'):t.minBitrate=a;break;case"maxBandwidth":var u=parseInt(r.value,10);isNaN(u)?o.a.warn('DASH: invalid maxBandwidth ("'+r.value+'")'):t.maxBitrate=u;break;case"minWidth":var s=parseInt(r.value,10);isNaN(s)?o.a.warn('DASH: invalid minWidth ("'+r.value+'")'):t.minWidth=s;break;case"maxWidth":var c=parseInt(r.value,10);isNaN(c)?o.a.warn('DASH: invalid maxWidth ("'+r.value+'")'):t.maxWidth=c;break;case"minHeight":var l=parseInt(r.value,10);isNaN(l)?o.a.warn('DASH: invalid minHeight ("'+r.value+'")'):t.minHeight=l;break;case"maxHeight":var f=parseInt(r.value,10);isNaN(f)?o.a.warn('DASH: invalid maxHeight ("'+r.value+'")'):t.maxHeight=f;break;case"minFrameRate":t.minFrameRate=r.value;break;case"maxFrameRate":t.maxFrameRate=r.value;break;case"segmentAlignment":var d=D(r.value);"number"==typeof d&&isNaN(d)?o.a.warn('DASH: invalid segmentAlignment ("'+r.value+'")'):t.segmentAlignment=d;break;case"subsegmentAlignment":var p=D(r.value);"number"==typeof p&&isNaN(p)?o.a.warn('DASH: invalid subsegmentAlignment ("'+r.value+'")'):t.subsegmentAlignment=p;break;case"bitstreamSwitching":t.bitstreamSwitching=N(r.value);break;case"audioSamplingRate":t.audioSamplingRate=r.value;break;case"codecs":t.codecs=r.value;break;case"codingDependency":t.codingDependency=N(r.value);break;case"frameRate":t.frameRate=r.value;break;case"height":var h=parseInt(r.value,10);isNaN(h)?o.a.warn('DASH: invalid height ("'+r.value+'")'):t.height=h;break;case"maxPlayoutRate":var v=parseFloat(r.value);isNaN(v)?o.a.warn('DASH: invalid maxPlayoutRate ("'+r.value+'")'):t.maxPlayoutRate=v;break;case"maximumSAPPeriod":var m=parseFloat(r.value);isNaN(m)?o.a.warn('DASH: invalid maximumSAPPeriod ("'+r.value+'")'):t.maximumSAPPeriod=m;break;case"mimeType":t.mimeType=r.value;break;case"profiles":t.profiles=r.value;break;case"segmentProfiles":t.segmentProfiles=r.value;break;case"width":var b=parseInt(r.value,10);isNaN(b)?o.a.warn('DASH: invalid width ("'+r.value+'")'):t.width=b}}return t}(e)}}function be(e){return{children:function(e){for(var t="",n=[],r=0;r<e.length;r++)if(e[r].nodeType===Node.ELEMENT_NODE){var i=e[r];switch(i.nodeName){case"BaseURL":t=i.textContent||"";break;case"AdaptationSet":var a=me(i);n.push(a)}}return{baseURL:t,adaptations:n}}(e.childNodes),attributes:function(e){for(var t={},n=0;n<e.attributes.length;n++){var r=e.attributes[n];switch(r.name){case"id":t.id=r.value;break;case"start":var i=P(r.value);isNaN(i)?o.a.warn("DASH: Unrecognized start in the mpd:",r.value):t.start=i;break;case"duration":var a=P(r.value);isNaN(a)?o.a.warn("DASH: Unrecognized duration in the mpd:",r.value):t.duration=a;break;case"bitstreamSwitching":t.bitstreamSwitching=N(r.value)}}return t}(e)}}function ge(e){return{children:function(e){for(var t="",n=[],r=[],i=0;i<e.length;i++)if(e[i].nodeType===Node.ELEMENT_NODE){var a=e[i];switch(a.nodeName){case"BaseURL":t=a.textContent||"";break;case"Location":n.push(a.textContent||"");break;case"Period":var o=be(a);r.push(o)}}return{baseURL:t,locations:n,periods:r}}(e.childNodes),attributes:function(e){for(var t={},n=0;n<e.attributes.length;n++){var r=e.attributes[n];switch(r.name){case"id":t.id=r.value;break;case"profiles":t.profiles=r.value;break;case"type":t.type=r.value;break;case"availabilityStartTime":t.availabilityStartTime=+M(r.value);break;case"availabilityEndTime":t.availabilityEndTime=+M(r.value);break;case"publishTime":t.publishTime=+M(r.value);break;case"mediaPresentationDuration":t.duration=P(r.value);break;case"minimumUpdatePeriod":t.minimumUpdatePeriod=P(r.value);break;case"minBufferTime":t.minBufferTime=P(r.value);break;case"timeShiftBufferDepth":t.timeShiftBufferDepth=P(r.value);break;case"suggestedPresentationDelay":t.suggestedPresentationDelay=P(r.value);break;case"maxSegmentDuration":t.maxSegmentDuration=P(r.value);break;case"maxSubsegmentDuration":t.maxSubsegmentDuration=P(r.value)}}return t}(e)}}var ye=["audio","video","text","image"],_e=["subtitle","caption"];var Oe=function(e){if(e){var t=(e.representations||[]).map(function(e){var t=e.index.getLastPosition();return null!=t?t-10:void 0});if(!t.some(function(e){return null==e})){var n=Math.min.apply(Math,t);if(!isNaN(n))return n}}};function Ee(e,t){for(var n=ge(e),r=n.children,i=n.attributes,a=Object(x.b)(Object(x.a)(t),r.baseURL),u=[],s=function(e){var t=r.periods[e],n=Object(x.b)(a,t.children.baseURL),s=void 0;null==t.attributes.id?(o.a.warn("DASH: No usable id found in the Period. Generating one."),s="gen-dash-period-"+Object(j.a)()):s=t.attributes.id;var c=void 0;if(null!=t.attributes.start)c=t.attributes.start;else if(0===e)c="static"===i.type||null==i.availabilityStartTime?0:i.availabilityStartTime;else{var l=u[e-1];if(null==l.duration)throw new Error("Not enough informations on the periods: cannot find start.");c=l.start+l.duration}var f=void 0;if(null!=t.attributes.duration)f=t.attributes.duration;else{var d=u[e+1];d&&null!=d.start?f=d.start-c:0===e&&i.duration&&!d&&(f=i.duration)}var p=t.children.adaptations.reduce(function(e,t){var r=e.adaptations,i=Object(x.b)(n,t.children.baseURL),a=t.children;var u=t.children.representations.map(function(e){var n,r,u=e.attributes.id||"",s=e.attributes.bitrate,l=e.children.baseURL,f=Object(x.b)(i,l);if(null==e.attributes.bitrate?(o.a.warn("DASH: No usable bitrate found in the Representation."),n=0):n=e.attributes.bitrate,null!=e.children.segmentBase){var d=e.children.segmentBase;r=new Q(d,{periodStart:c,representationURL:f,representationId:u,representationBitrate:s})}else if(null!=e.children.segmentList){var p=e.children.segmentList;r=new Z(p,{periodStart:c,representationURL:f,representationId:u,representationBitrate:s})}else if(null!=e.children.segmentTemplate){var h=e.children.segmentTemplate;r="timeline"===h.indexType?new te(h,{periodStart:c,representationURL:f,representationId:u,representationBitrate:s}):new J(h,{periodStart:c,representationURL:f,representationId:u,representationBitrate:s})}else r=function(e){var t,n=e.attributes.id||"",r=e.attributes.bitrate,o=e.children.baseURL,u=Object(x.b)(i,o);if(null!=a.segmentBase){var s=a.segmentBase;t=new Q(s,{periodStart:c,representationURL:u,representationId:n,representationBitrate:r})}else if(null!=a.segmentList){var l=a.segmentList;t=new Z(l,{periodStart:c,representationURL:u,representationId:n,representationBitrate:r})}else if(null!=a.segmentTemplate){var f=a.segmentTemplate;t="timeline"===f.indexType?new te(f,{periodStart:c,representationURL:u,representationId:n,representationBitrate:r}):new J(f,{periodStart:c,representationURL:u,representationId:n,representationBitrate:r})}else t=new J({duration:Number.MAX_VALUE,timescale:1,startNumber:0,initialization:{media:""},media:""},{periodStart:c,representationURL:u,representationId:n,representationBitrate:r});return t}(e);var v,m={bitrate:n,index:r,id:null!=e.attributes.id?e.attributes.id:e.attributes.bitrate+(null!=e.attributes.height?"-"+e.attributes.height:"")+(null!=e.attributes.width?"-"+e.attributes.width:"")+(null!=e.attributes.mimeType?"-"+e.attributes.mimeType:"")+(null!=e.attributes.codecs?"-"+e.attributes.codecs:"")};if(null!=e.attributes.codecs?v=e.attributes.codecs:null!=t.attributes.codecs&&(v=t.attributes.codecs),null!=v&&(v="mp4a.40.02"===v?"mp4a.40.2":v,m.codecs=v),null!=e.attributes.audioSamplingRate?m.audioSamplingRate=e.attributes.audioSamplingRate:null!=t.attributes.audioSamplingRate&&(m.audioSamplingRate=t.attributes.audioSamplingRate),null!=e.attributes.codingDependency?m.codingDependency=e.attributes.codingDependency:null!=t.attributes.codingDependency&&(m.codingDependency=t.attributes.codingDependency),null!=e.attributes.frameRate?m.frameRate=e.attributes.frameRate:null!=t.attributes.frameRate&&(m.frameRate=t.attributes.frameRate),null!=e.attributes.height?m.height=e.attributes.height:null!=t.attributes.height&&(m.height=t.attributes.height),null!=e.attributes.maxPlayoutRate?m.maxPlayoutRate=e.attributes.maxPlayoutRate:null!=t.attributes.maxPlayoutRate&&(m.maxPlayoutRate=t.attributes.maxPlayoutRate),null!=e.attributes.maximumSAPPeriod?m.maximumSAPPeriod=e.attributes.maximumSAPPeriod:null!=t.attributes.maximumSAPPeriod&&(m.maximumSAPPeriod=t.attributes.maximumSAPPeriod),null!=e.attributes.mimeType?m.mimeType=e.attributes.mimeType:null!=t.attributes.mimeType&&(m.mimeType=t.attributes.mimeType),null!=e.attributes.profiles?m.profiles=e.attributes.profiles:null!=t.attributes.profiles&&(m.profiles=t.attributes.profiles),null!=e.attributes.qualityRanking&&(m.qualityRanking=e.attributes.qualityRanking),null!=e.attributes.segmentProfiles?m.segmentProfiles=e.attributes.segmentProfiles:null!=t.attributes.segmentProfiles&&(m.segmentProfiles=t.attributes.segmentProfiles),null!=e.attributes.width?m.width=e.attributes.width:null!=t.attributes.width&&(m.width=t.attributes.width),t.children.contentProtections){for(var b=[],g=0;g<t.children.contentProtections.length;g++){var y=t.children.contentProtections[g];null!=y.keyId&&b.push({keyId:y.keyId})}b.length&&(m.contentProtections=b)}return m}),s=t.attributes.mimeType,l=t.attributes.codecs,f=u.map(function(e){return e.mimeType}).filter(function(e){return null!=e}),d=u.map(function(e){return e.codecs}).filter(function(e){return null!=e}),p=function(e,t,n,r,i){function a(e,t){var n=e.split("/")[0];return Object(T.a)(ye,n)?n:"application/bif"===e?"image":"application/ttml+xml"===e?"text":"application/mp4"===e?t&&"urn:mpeg:dash:role:2011"===t.schemeIdUri&&Object(T.a)(_e,t.value)?"text":"metadata":void 0}function o(e){switch(e.substr(0,3)){case"avc":case"hev":case"hvc":case"vp8":case"vp9":case"av1":return"video";case"vtt":return"text";case"bif":return"image"}switch(e.substr(0,4)){case"mp4a":return"audio";case"wvtt":case"stpp":return"text"}}if(null!=e){var u=a(e,i);if(null!=u)return u}if(null!=n){var s=o(n);if(null!=s)return s}for(var c=0;c<t.length;c++){var l=t[c];if(null!=l){var f=a(l,i);if(null!=f)return f}}for(var d=0;d<r.length;d++){var p=r[d];if(null!=p){var h=o(p);if(null!=h)return h}}return"unknown"}(s||null,f,l||null,d,a.role||null),h=!!t.children.role&&"main"===t.children.role.value&&"urn:mpeg:dash:role:2011"===t.children.role.schemeIdUri,v=e.videoMainAdaptation;if("video"===p&&null!==v&&h){var m;(m=v.representations).push.apply(m,u)}else{var b,g,y;if("text"===p&&a.accessibility&&function(e){return!!e&&"urn:tva:metadata:cs:AudioPurposeCS:2007"===e.schemeIdUri&&"2"===e.value}(a.accessibility)&&(b=!0),"audio"===p&&a.accessibility&&function(e){return!!e&&"urn:tva:metadata:cs:AudioPurposeCS:2007"===e.schemeIdUri&&"1"===e.value}(a.accessibility)&&(g=!0),null!=t.attributes.id)y=t.attributes.id;else{var _=p;t.attributes.language&&(_+="-"+t.attributes.language),b&&(_+="-cc"),g&&(_+="-ad"),t.attributes.contentType&&(_+="-"+t.attributes.contentType),t.attributes.codecs&&(_+="-"+t.attributes.codecs),t.attributes.mimeType&&(_+="-"+t.attributes.mimeType),t.attributes.frameRate&&(_+="-"+t.attributes.frameRate),_.length===p.length&&(_+=u.length?"-"+u[0].id:"-empty"),y="adaptation-"+_}var O={id:y,representations:u,type:p};null!=t.attributes.language&&(O.language=t.attributes.language,O.normalizedLanguage=Object(S.a)(t.attributes.language)),null!=b&&(O.closedCaption=b),null!=g&&(O.audioDescription=g);var E=r[p];E?h&&"video"===p?(E.unshift(O),e.videoMainAdaptation=O):E.push(O):(r[p]=[O],h&&"video"===p&&(e.videoMainAdaptation=O))}return{adaptations:r,videoMainAdaptation:e.videoMainAdaptation}},{videoMainAdaptation:null,adaptations:{}}).adaptations,h={id:s,start:c,duration:f,adaptations:p};null!=t.attributes.bitstreamSwitching&&(h.bitstreamSwitching=t.attributes.bitstreamSwitching),u.push(h)},c=0;c<r.periods.length;c++)s(c);var l={availabilityStartTime:"static"===i.type||null==i.availabilityStartTime?0:i.availabilityStartTime,duration:null==i.duration?1/0:i.duration,id:null!=i.id?i.id:"gen-dash-manifest-"+Object(j.a)(),periods:u,transportType:"dash",isLive:"dynamic"===i.type,uris:[t].concat(r.locations),suggestedPresentationDelay:null!=i.suggestedPresentationDelay?i.suggestedPresentationDelay:w.a.DEFAULT_SUGGESTED_PRESENTATION_DELAY.DASH};if(null!=i.profiles&&(l.profiles=i.profiles),"static"!==i.type&&null!=i.availabilityEndTime&&(l.availabilityEndTime=i.availabilityEndTime),null!=i.publishTime&&(l.publishTime=i.publishTime),null!=i.duration&&(l.duration=i.duration),null!=i.minimumUpdatePeriod&&(l.minimumUpdatePeriod=i.minimumUpdatePeriod),null!=i.minBufferTime&&(l.minBufferTime=i.minBufferTime),null!=i.timeShiftBufferDepth&&(l.timeShiftBufferDepth=i.timeShiftBufferDepth),null!=i.maxSegmentDuration&&(l.maxSegmentDuration=i.maxSegmentDuration),null!=i.maxSubsegmentDuration&&(l.maxSubsegmentDuration=i.maxSubsegmentDuration),l.isLive){var f=l.periods[l.periods.length-1].adaptations,d=f.video||f.audio;if(!d||!d.length)throw new Error("Can't find first adaptation from last period");var p=d[0],h=Oe(p);l.presentationLiveGap=null!=h?Date.now()/1e3-(h+l.availabilityStartTime):10}return Object(A.a)(l),l}var we=n(29),Te=n(84);var je=function(e,t,n,r){var i,o,u,s,c,l=n||[],f=Object(a.d)(t),d=Object(a.a)(t),p=r&&r.timescale?r.timescale:e.timescale;if(p===e.timescale?(u=Math.min(.9*p,null!=e.duration?e.duration/4:.25),c=e.time,s=e.duration):(u=Math.min(.9*p,null!=e.duration?e.duration/e.timescale*p/4:.25),c=(e.time||0)/e.timescale*p,s=null!=e.duration?e.duration/e.timescale*p:void 0),f>=0&&(i=null!=e.timestampOffset?f+e.timestampOffset*p:f),d>=0&&(null==s||Math.abs(d-s)<=u)&&(o=d),null==i)if(0===l.length)i=c;else{var h=l[0].time;if(h>=0){var v=l[0].timescale,m=null!=v&&v!==p?h/v*p:h;i=null!=e.timestampOffset?m+e.timestampOffset*p:m}else i=c}if(null==o)if(l.length){var b=l.reduce(function(e,t){return e+(t.duration||0)},0);o=b>=0?b:s}else o=s;return{timescale:p,time:i||0,duration:o||0}},Se=n(13);function xe(e,t,n){e.index._addSegments(t,n)}function Ae(e){return"application/mp4"===e.mimeType}function Re(e){var t=e[0],n=e[1];return n===1/0?"bytes="+ +t+"-":"bytes="+ +t+"-"+ +n}function ke(e){var t=e.url,n=e.segment,r=n.range,i=n.indexRange;return null!=r&&null!=i?Object(we.a)({url:t,responseType:"arraybuffer",headers:{Range:Re([Math.min(r[0],i[0]),Math.max(r[1],i[1])])}}):Object(we.a)({url:t,responseType:"arraybuffer",headers:r?{Range:Re(r)}:null})}var Ie=function(e){return function(t){var n=t.adaptation,i=t.manifest,a=t.period,o=t.representation,u=t.segment,s=u.mediaURL;if(null==s)return Object(r.a)({type:"data",value:{responseData:null}});var c={adaptation:n,manifest:i,period:a,representation:o,segment:u,transport:"dash",url:s};return e?Se.a.create(function(t){var n=!1,r=!1,i=e(c,{reject:function(e){void 0===e&&(e={}),r||(n=!0,t.error(e))},resolve:function(e){r||(n=!0,t.next({type:"response",value:{responseData:e.data,size:e.size,duration:e.duration}}),t.complete())},fallback:function(){r=!0,ke(c).subscribe(t)}});return function(){n||r||"function"!=typeof i||i()}}):ke(c)}},Ne=n(85),De=n(65);function Me(e){var t=e.segment,n=e.representation,i=t.mediaURL,a=t.range,o=t.indexRange,u=Ae(n)?"arraybuffer":"text";return null==i?Object(r.a)({type:"data",value:{responseData:null}}):null!=a&&null!=o?Object(we.a)({url:i,responseType:u,headers:{Range:Re([Math.min(a[0],o[0]),Math.max(a[1],o[1])])}}):Object(we.a)({url:i,responseType:u,headers:a?{Range:Re(a)}:null})}function Pe(e){var t,n,i,o,u=e.response,s=e.segment,c=e.adaptation,l=e.representation,f=e.init,d=c.language,p=s.isInit,h=s.indexRange;if(null==u.responseData)return Object(r.a)({segmentData:null,segmentInfos:s.timescale>0?{duration:s.isInit?0:s.duration,time:s.isInit?-1:s.time,timescale:s.timescale}:null,segmentOffset:s.timestampOffset||0});var v=Ae(l);if(v){Object(R.b)(u.responseData instanceof ArrayBuffer),t=new Uint8Array(u.responseData);var m=Object(a.c)(t,h?h[0]:0);m&&(n=m),i=p?{time:-1,duration:0,timescale:s.timescale}:je(s,t,m,f)}else Object(R.b)("string"==typeof u.responseData),t=u.responseData,i=p?{time:-1,duration:0,timescale:s.timescale}:{time:s.time,duration:s.duration,timescale:s.timescale};if(p){if(v){var b=Object(a.b)(t);b>0&&(i={time:-1,duration:0,timescale:b})}o=null}else{Object(R.b)(null!=i);var g={start:i.time,end:i.time+(i.duration||0),language:d,timescale:i.timescale};if(v){var y,_=l.codec;switch((void 0===_?"":_).toLowerCase()){case"stpp":y="ttml";break;case"wvtt":y="vtt"}if(!y)throw new Error("The codec used for the subtitle is not managed yet.");o=ae()({data:Object(Ne.a)(Object(De.a)(t)),type:y},{timescale:1},g)}else{var O,E=l.mimeType,w=void 0===E?"":E;switch(l.mimeType){case"application/ttml+xml":O="ttml";break;case"application/x-sami":case"application/smil":O="sami";break;case"text/vtt":O="vtt"}if(!O){var T=l.codec;if("srt"!==(void 0===T?"":T).toLowerCase())throw new Error("could not find a text-track parser for the type "+w);O="srt"}o=ae()({data:t,type:O},{timescale:1},g)}}return n&&xe(l,n,i),Object(r.a)({segmentData:o,segmentInfos:i,segmentOffset:s.timestampOffset||0})}t.default=function(e){void 0===e&&(e={});var t=Object(Te.a)({customManifestLoader:e.manifestLoader}),n=Ie(e.segmentLoader),o={loader:function(e){var t=e.adaptation,r=e.init,i=e.manifest,a=e.period,o=e.representation,u=e.segment;return n({adaptation:t,init:r,manifest:i,period:a,representation:o,segment:u})},parser:function(e){var t=e.segment,n=e.representation,i=e.response,o=e.init,u=i.responseData;if(null==u)return Object(r.a)({segmentData:null,segmentInfos:null,segmentOffset:0});var s=u instanceof Uint8Array?u:new Uint8Array(u),c=t.indexRange,d="video/webm"===n.mimeType||"audio/webm"===n.mimeType,p=d?function(e,t){var n=_(f,[],e,[t,e.length]);if(null==n)return null;var r=n[0],i=n[1],a=O(e,r);if(null==a)return null;var o=E(e,r);if(null==o)return null;var u=_(v,[],e,[r,i]);if(null==u)return null;for(var s=[],c=u[0];c<u[1];){var d=_(m,[],e,[c,u[1]]);if(null==d)break;var p=_(b,[],e,[d[0],d[1]]);if(null==p)return null;var h=l(e,p[0],p[1]-p[0]),w=_(y,[g],e,[d[0],d[1]]);if(null==w)return null;var T=l(e,w[0],w[1]-w[0])+r;s.push({time:h,rangeStart:T}),c=d[1]}for(var j=[],S=0;S<s.length;S++){var x=s[S];S===s.length-1?j.push({time:x.time,count:0,timescale:a,duration:0===S?o:o-x.time,range:[x.rangeStart,1/0]}):j.push({time:x.time,count:0,timescale:a,duration:s[S+1].time-x.time,range:[x.rangeStart,s[S+1].rangeStart-1]})}return j}(s,0):Object(a.c)(s,c?c[0]:0);if(!t.isInit){var h=d?{time:t.time,duration:t.duration,timescale:t.timescale}:je(t,s,p,o),w=t.timestampOffset||0;return Object(r.a)({segmentData:s,segmentInfos:h,segmentOffset:w})}p&&xe(n,p);var T=d?O(s,0):Object(a.b)(s);return Object(r.a)({segmentData:s,segmentInfos:T&&T>0?{time:-1,duration:0,timescale:T}:null,segmentOffset:t.timestampOffset||0})}};return{manifest:{loader:function(e){var n=e.url;return t(n)},parser:function(e){var t=e.response,n=e.url,i=null==t.url?n:t.url,a="string"==typeof t.responseData?(new DOMParser).parseFromString(t.responseData,"text/xml"):t.responseData;return Object(r.a)({manifest:function(e,t){var n=e.documentElement;if(!n||"MPD"!==n.nodeName)throw new Error("document root should be MPD");return Ee(n,t)}(a,i),url:i})}},audio:o,video:o,text:{loader:Me,parser:Pe},image:{loader:function(e){var t=e.segment;if(t.isInit||null==t.mediaURL)return Object(r.a)({type:"data",value:{responseData:null}});var n=t.mediaURL;return Object(we.a)({url:n,responseType:"arraybuffer"})},parser:function(e){var t=e.response,n=e.segment,a=t.responseData;if(null===a||null==i.a.imageParser)return Object(r.a)({segmentData:null,segmentInfos:n.timescale>0?{duration:n.isInit?0:n.duration,time:n.isInit?-1:n.time,timescale:n.timescale}:null,segmentOffset:n.timestampOffset||0});var o=i.a.imageParser(new Uint8Array(a)),u=o.thumbs;return Object(r.a)({segmentData:{data:u,start:0,end:Number.MAX_VALUE,timescale:1,type:"bif"},segmentInfos:{time:0,duration:Number.MAX_VALUE,timescale:o.timescale},segmentOffset:n.timestampOffset||0})}}}}},function(e,t,n){"use strict";n.r(t);var r=n(76),i=n(64),a=n(6),o=n(7),u=n.n(o),s=n(2),c=n(9),l=n(19),f=n(39),d=n(37),p=n(82);var h=n(1);function v(e){return[{systemId:"edef8ba9-79d6-4ace-a3c8-27dcd51d21ed",privateData:Object(h.h)([8,1,18,16],e)}]}function m(e,t){if(void 0===t&&(t=v),!e.firstElementChild||"ProtectionHeader"!==e.firstElementChild.nodeName)throw new Error("Protection should have ProtectionHeader child");var n=e.firstElementChild,r=Object(h.p)(atob(n.textContent||"")),i=function(e){var t=Object(h.n)(e,8),n=Object(h.g)(e.subarray(10,t+10)),r=(new DOMParser).parseFromString(n,"application/xml").querySelector("KID");if(!r)throw new Error("Cannot parse PlayReady private data: invalid XML");var i=r.textContent||"";return Object(h.i)(atob(i)).toLowerCase()}(r),a=Object(h.j)(i);return{keyId:i,keySystems:[{systemId:(n.getAttribute("SystemID")||"").toLowerCase().replace(/\{|\}/g,""),privateData:r}].concat(t(a))}}function b(e,t){return e.replace(/\{start time\}/g,String(t))}function g(e,t,n){var r,i=e.timeline,a=e.timescale,o=i.length,u=i[o-1],s=t.timescale===a?{time:t.time,duration:t.duration}:{time:t.time/t.timescale*a,duration:t.duration/t.timescale*a};if(n&&n.timescale&&(r=n.timescale===a?n.time:n.time/n.timescale*a),null!=r&&s.time===r){var c=s.time+s.duration,l=c-(u.start+(u.duration||0)*u.repeatCount);if(l<=0)return!1;if(-1===u.duration){var f=i[o-2];f&&f.duration===l?(f.repeatCount++,i.pop()):u.duration=l}return e.timeline.push({duration:-1,start:c,repeatCount:0}),!0}return s.time>=_(u)&&(u.duration===s.duration?u.repeatCount++:e.timeline.push({duration:s.duration,start:s.time,repeatCount:0}),!0)}function y(e,t,n){if(!n)return 0;var r=t-e;return r>0?Math.floor(r/n):0}function _(e){var t=e.start,n=e.duration,r=e.repeatCount;return null==n||-1===n?t:t+(r+1)*n}function O(e,t){var n=e.repeatCount||0;if(null!=e.duration&&n<0){var r=t?t.start:1/0;n=Math.ceil((r-e.start)/e.duration)-1}return n}var E=function(){function e(e,t){this._index=e,this._bitsPerSample=t.bitsPerSample,this._channels=t.channels,this._codecPrivateData=t.codecPrivateData,this._packetSize=t.packetSize,this._samplingRate=t.samplingRate,this._protection=t.protection}var t=e.prototype;return t.getInitSegment=function(){return{id:"init",isInit:!0,time:0,timescale:this._index.timescale,privateInfos:{smoothInit:{bitsPerSample:this._bitsPerSample,channels:this._channels,codecPrivateData:this._codecPrivateData,packetSize:this._packetSize,samplingRate:this._samplingRate,protection:this._protection}},mediaURL:null}},t.getSegments=function(e,t){for(var n,r=this._index,i=function(e,t,n){var r=e.timescale||1;return{up:t*r,to:(t+n)*r}}(r,e,t),a=i.up,o=i.to,u=r.timeline,s=r.timescale,c=r.media,l=[],f=u.length,d=u.length&&u[0].duration||0,p=0;p<f;p++){var h=u[p],v=h.duration,m=h.start;if(d=Math.max(d,v||0),null!=v&&v<0){if(m+d<o){var g={id:""+m,time:m,isInit:!1,timescale:s,number:null!=n?n:void 0,mediaURL:b(c,m)};l.push(g)}return l}for(var _=O(h,u[p+1]),E=y(m,a,v),w=m+E*(null==v?0:v);w<o&&E<=_;){var T={id:""+w,time:w,isInit:!1,duration:v,timescale:s,number:null!=n?n+E:void 0,mediaURL:b(c,w)};l.push(T),w=m+ ++E*v}if(w>=o)return l;null!=n&&(n+=_+1)}return l},t.shouldRefresh=function(e,t){var n=this._index,r=n.timeline,i=n.timescale,a=r[r.length-1];if(!a)return!1;var o=a.repeatCount||0,u=a.start+(o+1)*a.duration;return!(t*i<u)&&(e*i>=u||e>a.start+o*a.duration)},t.getFirstPosition=function(){var e=this._index;if(e.timeline.length)return e.timeline[0].start/e.timescale},t.getLastPosition=function(){var e=this._index;if(e.timeline.length)return _(e.timeline[e.timeline.length-1])/e.timescale},t.checkDiscontinuity=function(e){var t=this._index,n=t.timeline,r=t.timescale,i=void 0===r?1:r,a=e*i;if(a<=0)return-1;var o=function(e,t){for(var n=e.timeline,r=0,i=n.length;r<i;){var a=r+i>>>1;n[a].start<t?r=a+1:i=a}return r>0?r-1:r}(t,a);if(o<0||o>=n.length-1)return-1;var u=n[o];if(-1===u.duration)return-1;var s=u.start,c=_(u),l=n[o+1];return c!==l.start&&a>=s&&a<=c&&c-a<i?l.start/i:-1},t._update=function(e){this._index=e._index},t._addSegments=function(e,t){for(var n=0;n<e.length;n++)g(this._index,e[n],t)},e}();function w(e,t,n){for(var r=e.firstElementChild,i=n;r;)i=t(i,r.nodeName,r),r=r.nextElementSibling;return i}var T={audio:"audio/mp4",video:"video/mp4",text:"application/ttml+xml"},j={audio:"mp4a.40.2",video:"avc1.4D401E"},S={AACL:"audio/mp4",AVC1:"video/mp4",H264:"video/mp4",TTML:"application/ttml+xml+mp4"};var x=function(e){void 0===e&&(e={});var t=null==e.suggestedPresentationDelay?s.a.DEFAULT_SUGGESTED_PRESENTATION_DELAY.SMOOTH:e.suggestedPresentationDelay,n=e.referenceDateTime||Date.UTC(1970,0,1,0,0,0,0)/1e3,r=e.minRepresentationBitrate||0;function i(e,t,n,i){var a=e.hasAttribute("Timescale")?+(e.getAttribute("Timescale")||0):n,o=e.getAttribute("Type");if(null==o)throw new Error("StreamIndex without type.");var s=e.getAttribute("Subtype"),l=e.getAttribute("Name"),p=e.getAttribute("Language"),h=null==p?p:Object(f.a)(p),v=e.getAttribute("Url")||"",m=w(e,function(e,t,n){switch(t){case"QualityLevel":var i=function(e,t){function n(t){var n=e.getAttribute(t);return null==n?void 0:n}switch(t){case"audio":var r=n("AudioTag"),i=n("Bitrate"),a=n("BitsPerSample"),o=n("Channels"),u=n("CodecPrivateData"),s=n("FourCC"),c=n("PacketSize"),l=n("SamplingRate");return{audiotag:void 0!==r?parseInt(r,10):r,bitrate:i&&parseInt(i,10)||0,bitsPerSample:void 0!==a?parseInt(a,10):a,channels:void 0!==o?parseInt(o,10):o,codecPrivateData:u||"",mimeType:void 0!==s?S[s]:s,packetSize:void 0!==c?parseInt(c,10):c,samplingRate:void 0!==l?parseInt(l,10):l};case"video":var f=n("Bitrate"),d=n("CodecPrivateData"),p=n("FourCC"),h=n("MaxWidth"),v=n("MaxHeight");return{bitrate:f&&parseInt(f,10)||0,mimeType:void 0!==p?S[p]:p,codecPrivateData:d||"",codecs:function(e){var t=(/00000001\d7([0-9a-fA-F]{6})/.exec(e)||[])[1],n=void 0===t?"":t;return n&&"avc1."+n}(d||""),width:void 0!==h?parseInt(h,10):void 0,height:void 0!==v?parseInt(v,10):void 0};case"text":var m=n("Bitrate"),b=n("CodecPrivateData"),g=n("FourCC");return{bitrate:m&&parseInt(m,10)||0,mimeType:void 0!==g?S[g]:g,codecPrivateData:b||""};default:throw new Error("Unrecognized StreamIndex type: "+t)}}(n,o);if("audio"===o){var a=n.getAttribute("FourCC")||"";i.codecs=function(e,t){var n;return(n="AACH"===e?5:t?(248&parseInt(t.substr(0,2),16))>>3:2)?"mp4a.40."+n:""}(a,i.codecPrivateData)}("video"!==o||i.bitrate>r)&&e.qualityLevels.push(i);break;case"c":e.cNodes.push(n)}return e},{qualityLevels:[],cNodes:[]}),b=m.qualityLevels,g={timeline:function(e){return e.reduce(function(t,n,r){var i=n.getAttribute("d"),a=n.getAttribute("t"),o=n.getAttribute("r"),u=o?+o-1:0,s=a?+a:void 0,c=i?+i:void 0;if(0===r)s=s||0;else{var l=t[r-1];if(null==s||isNaN(s)){if(null==l.duration||isNaN(l.duration))throw new Error("Smooth: Invalid CNodes. Missing timestamp.");s=l.start+l.duration*(l.repeatCount+1)}}if(null==c||isNaN(c)){var f=e[r+1];if(!f)return t;var d=f.getAttribute("t"),p=d?+d:null;if(null===p)throw new Error("Can't build index timeline from Smooth Manifest.");c=p-s}return t.push({duration:c,start:s,repeatCount:u}),t},[])}(m.cNodes),timescale:a};Object(c.b)(0!==b.length,"adaptation should have at least one representation");var y=o+(p?"_"+p:""),_=b.map(function(e){var n,r=Object(d.b)(t,v),a={timeline:g.timeline,timescale:g.timescale,media:function(e,t){return e.replace(/\{bitrate\}/g,String(t))}(r,e.bitrate)},s=e.mimeType||T[o],c=e.codecs||j[o],l=y+"_"+o+"-"+s+"-"+c+"-"+e.bitrate,f=[];i.length&&(n=i[0],i.forEach(function(e){var t=e.keyId;e.keySystems.forEach(function(e){f.push({keyId:t,systemId:e.systemId})})}));var p={bitsPerSample:e.bitsPerSample,channels:e.channels,codecPrivateData:e.codecPrivateData||"",packetSize:e.packetSize,samplingRate:e.samplingRate,protection:null!=n?{keyId:n.keyId,keySystems:n.keySystems}:void 0},h=u()({},e,{index:new E(a,p),mimeType:s,codecs:c,id:l});return f.length&&(h.contentProtections=f),h});if("ADVT"===s)return null;var O={id:y,type:o,representations:_,name:null==l?void 0:l,language:null==p?void 0:p,normalizedLanguage:null==h?void 0:h};return"text"===o&&"DESC"===s&&(O.closedCaption=!0),O}return function(r,a){var o=Object(d.a)(a),u=r.documentElement;Object(c.b)("SmoothStreamingMedia"===u.nodeName,"document root should be SmoothStreamingMedia"),Object(c.b)(/^[2]-[0-2]$/.test(u.getAttribute("MajorVersion")+"-"+u.getAttribute("MinorVersion")),"Version should be 2.0, 2.1 or 2.2");var s,f,h,v,b,g,y,_=+(u.getAttribute("Timescale")||1e7),O=w(u,function(t,n,r){switch(n){case"Protection":t.protections.push(m(r,e.keySystems));break;case"StreamIndex":t.adaptationNodes.push(r)}return t},{adaptationNodes:[],protections:[]}),E=O.protections,T=O.adaptationNodes.map(function(e){return i(e,o,_,E)}).filter(function(e){return null!=e}).reduce(function(e,t){var n=t.type;return void 0===e[n]?e[n]=[t]:(e[n]||[]).push(t),e},{}),j=T.video?T.video[0]:void 0,S=T.audio?T.audio[0]:void 0;if(j||S){var x=[],A=[];if(j){var R=j.representations[0];if(R){var k=R.index.getFirstPosition(),I=R.index.getLastPosition();null!=k&&x.push(k),null!=I&&A.push(I)}}if(S){var N=S.representations[0];if(N){var D=N.index.getFirstPosition(),M=N.index.getLastPosition();null!=D&&x.push(D),null!=M&&A.push(M)}}x.length&&(g=Math.max.apply(Math,x)),A.length&&(y=Math.max.apply(Math,A))}var P=function(e){return"boolean"==typeof e?e:"string"==typeof e&&"TRUE"===e.toUpperCase()}(u.getAttribute("IsLive"));if(P){s=t,h=+(u.getAttribute("DVRWindowLength")||0)/_,v=n,f=Date.now()/1e3-(null!=y?y+v:10);var C=u.getAttribute("Duration");b=null!=C&&0!=+C?+C/_:1/0}else{var B=u.getAttribute("Duration");b=null!=B&&0!=+B?null==y?(+B+(g||0))/_:y:1/0}var L=null!=g?g/_:void 0,U={id:"gen-smooth-manifest-"+Object(l.a)(),availabilityStartTime:v||0,duration:b,presentationLiveGap:f,suggestedPresentationDelay:s,timeShiftBufferDepth:h,transportType:"smooth",isLive:P,uris:[a],minimumTime:L,periods:[{id:"gen-smooth-period-0",duration:b,adaptations:T,start:0}]};return Object(p.a)(U),U}},A=n(29),R=n(85),k=n(84),I=n(0),N=n(34),D=n(24),M=n(65),P=[96e3,88200,64e3,48e3,44100,32e3,24e3,22050,16e3,12e3,11025,8e3,7350],C={};function B(e,t){var n=t.length+8;return Object(h.h)(Object(h.l)(n),function(e){if(C[e])return C[e];var t=Object(h.p)(e);return C[e]=t,t}(e),t)}function L(e,t,n,r,i){for(var a,o=e.length,u=0;u<o;){if(a=Object(h.c)(e,u),1970628964===Object(h.c)(e,u+4)&&Object(h.c)(e,u+8)===t&&Object(h.c)(e,u+12)===n&&Object(h.c)(e,u+16)===r&&Object(h.c)(e,u+20)===i)return e.subarray(u+24,u+a);u+=a}}var U={mult:function(e,t){return B(e,h.h.apply(null,t))},avc1encv:function(e,t,n,r,i,a,o,u,s,c){return B(e,Object(h.h)(6,Object(h.k)(t),16,Object(h.k)(n),Object(h.k)(r),Object(h.k)(i),2,Object(h.k)(a),6,[0,1,o.length],Object(h.p)(o),31-o.length,Object(h.k)(u),[255,255],s,"encv"===e&&c||[]))},avcc:function(e,t,n){var r=2===n?1:4===n?3:0,i=e[1],a=e[2],o=e[3];return B("avcC",Object(h.h)([1,i,a,o,252|r,225],Object(h.k)(e.length),e,[1],Object(h.k)(t.length),t))},dref:function(e){return B("dref",Object(h.h)(7,[1],e))},esds:function(e,t){return B("esds",Object(h.h)(4,[3,25],Object(h.k)(e),[0,4,17,64,21],11,[5,2],Object(h.j)(t),[6,1,2]))},frma:function(e){return B("frma",Object(h.p)(e))},free:function(e){return B("free",new Uint8Array(e-8))},ftyp:function(e,t){return B("ftyp",h.h.apply(null,[Object(h.p)(e),[0,0,0,1]].concat(t.map(h.p))))},hdlr:function(e){var t,n;switch(e){case"video":t="vide",n="VideoHandler";break;case"audio":t="soun",n="SoundHandler";break;default:t="hint",n=""}return B("hdlr",Object(h.h)(8,Object(h.p)(t),12,Object(h.p)(n),1))},mdhd:function(e){return B("mdhd",Object(h.h)(12,Object(h.l)(e),8))},moof:function(e,t){return U.mult("moof",[e,t])},mp4aenca:function(e,t,n,r,i,a,o,u){return B(e,Object(h.h)(6,Object(h.k)(t),8,Object(h.k)(n),Object(h.k)(r),2,Object(h.k)(i),Object(h.k)(a),2,o,"enca"===e&&u||[]))},mvhd:function(e,t){return B("mvhd",Object(h.h)(12,Object(h.l)(e),4,[0,1],2,[1,0],10,[0,1],14,[0,1],14,[64,0,0,0],26,Object(h.k)(t+1)))},pssh:function(e,t,n){void 0===t&&(t=new Uint8Array(0)),void 0===n&&(n=new Uint8Array(0));var r,i,a=e.replace(/-/g,"");Object(c.b)(32===a.length,"wrong system id length");var o=n.length;return o>0?(r=1,i=h.h.apply(void 0,[Object(h.l)(o)].concat(n))):(r=0,i=[]),B("pssh",Object(h.h)([r,0,0,0],Object(h.j)(a),i,Object(h.l)(t.length),t))},saio:function(e,t,n,r){return B("saio",Object(h.h)(4,[0,0,0,1],Object(h.l)(e.length+t.length+n.length+r.length+8+8+8+8)))},saiz:function(e){if(0===e.length)return B("saiz",new Uint8Array(0));var t=Object(h.c)(e,0),n=Object(h.c)(e,4),r=new Uint8Array(n+9);r.set(Object(h.l)(n),5);for(var i,a,o=9,u=8;u<e.length;)u+=8,2==(2&t)?(a=2,u+=6*(i=Object(h.a)(e,u))+2):(i=0,a=0),r[o]=6*i+8+a,o++;return B("saiz",r)},schm:function(e,t){return B("schm",Object(h.h)(4,Object(h.p)(e),Object(h.l)(t)))},senc:function(e){return B("senc",e)},smhd:function(){return B("smhd",new Uint8Array(8))},stsd:function(e){var t=[7,[e.length]];return B("stsd",h.h.apply(void 0,t.concat(e)))},tkhd:function(e,t,n){return B("tkhd",Object(h.h)(Object(h.l)(7),8,Object(h.l)(n),20,[1,0,0,0],[0,1,0,0],12,[0,1,0,0],12,[64,0,0,0],Object(h.k)(e),2,Object(h.k)(t),2))},trex:function(e){return B("trex",Object(h.h)(4,Object(h.l)(e),[0,0,0,1],12))},tfdt:function(e){return B("tfdt",Object(h.h)([1,0,0,0],Object(h.m)(e)))},tenc:function(e,t,n){return B("tenc",Object(h.h)(6,[e,t],Object(h.j)(n)))},traf:function(e,t,n,r,i){var a=[e,t,n];return i&&a.push(U.senc(i),U.saiz(i),U.saio(r,e,t,n)),U.mult("traf",a)},trun:function(e){if(1&e[11])return e;var t=new Uint8Array(e.length+4);return t.set(Object(h.l)(e.length+4),0),t.set(e.subarray(4,16),4),t[11]=1|t[11],t.set([0,0,0,0],16),t.set(e.subarray(16,e.length),20),t},vmhd:function(){var e=new Uint8Array(12);return e[3]=1,B("vmhd",e)}},F=function(e){return L(e,2721664850,1520127764,2722393154,2086964724)},$=function(e){return L(e,1830656773,1121273062,2162299933,2952222642)},V=function(e){return L(e,3565190898,3392751253,2387879627,2655430559)};function z(e,t,n){e.set(Object(h.l)(n),t+16)}function H(e,t,n,r){var i=e.length,a=t.length,o=n.length,u=e.subarray(o,i),s=new Uint8Array(a+(i-o));return s.set(t,0),s.set(u,a),z(s,r,t.length+8),s}function G(e,t,n,r,i,a,o){var u=U.mult("stbl",[n,B("stts",new Uint8Array(8)),B("stsc",new Uint8Array(8)),B("stsz",new Uint8Array(12)),B("stco",new Uint8Array(8))]),s=B("url ",new Uint8Array([0,0,0,1])),c=U.dref(s),l=U.mult("dinf",[c]),f=U.mult("minf",[r,l,u]),d=U.hdlr(t),p=U.mdhd(e),v=U.mult("mdia",[p,d,f]),m=U.tkhd(i,a,1),b=U.mult("trak",[m,v]),g=U.trex(1),y=U.mult("mvex",[g]),_=U.mvhd(e,1),O=U.mult("moov",function(e,t,n,r){var i=[e,t,n];return r.forEach(function(e){var t=U.pssh(e.systemId,e.privateData,e.keyIds);i.push(t)}),i}(_,y,b,o)),E=U.ftyp("isom",["isom","iso2","iso6","avc1","dash"]);return Object(h.h)(E,O)}var K={getMdat:M.a,getTraf:M.c,parseTfrf:function(e){var t=V(e);if(!t)return[];for(var n=[],r=t[0],i=t[4],a=0;a<i;a++){var o=void 0,u=void 0;1===r?(u=Object(h.d)(t,16*a+5),o=Object(h.d)(t,16*a+5+8)):(u=Object(h.c)(t,8*a+5),o=Object(h.c)(t,8*a+5+4)),n.push({time:u,duration:o})}return n},parseTfxd:function(e){var t=$(e);if(t)return{duration:Object(h.d)(t,12),time:Object(h.d)(t,4)}},createVideoInitSegment:function(e,t,n,r,i,a,o,u,s){var c,l=s||[],f=o.split("00000001"),d=f[1],p=f[2],v=Object(h.j)(d),m=Object(h.j)(p),b=U.avcc(v,m,a);if(l.length&&null!=u){var g=U.tenc(1,8,u),y=U.mult("schi",[g]),_=U.schm("cenc",65536),O=U.frma("avc1"),E=U.mult("sinf",[O,_,y]),w=U.avc1encv("encv",1,t,n,r,i,"AVC Coding",24,b,E);c=U.stsd([w])}else{var T=U.avc1encv("avc1",1,t,n,r,i,"AVC Coding",24,b);c=U.stsd([T])}return G(e,"video",c,U.vmhd(),t,n,l)},createAudioInitSegment:function(e,t,n,r,i,a,o,u){var s,c=u||[],l=a||function(e,t,n){var r;return r=((r=((r=(63&e)<<4)|31&P.indexOf(t))<<4)|31&n)<<3,Object(h.e)(Object(h.k)(r))}(2,i,t),f=U.esds(1,l);if(c.length&&null!=o){var d=U.tenc(1,8,o),p=U.mult("schi",[d]),v=U.schm("cenc",65536),m=U.frma("mp4a"),b=U.mult("sinf",[m,v,p]),g=U.mp4aenca("enca",1,t,n,r,i,f,b);s=U.stsd([g])}else{var y=U.mp4aenca("mp4a",1,t,n,r,i,f);s=U.stsd([y])}return G(e,"audio",s,U.smhd(),0,0,c)},patchSegment:function(e,t){var n=e.subarray(0,Object(h.c)(e,0)),r=U.tfdt(t),i=r.length,a=Object(h.c)(n,8),o=Object(h.c)(n,a+8),u=Object(h.c)(n,a+8+8),s=Object(h.c)(n,a+8+8+u),c=n.subarray(8,a+8),l=n.subarray(a+8+8,a+8+8+o-8),f=l.subarray(0,u),d=l.subarray(u,u+s);f.set([0,0,0,1],12);var p=F(l),v=U.trun(d),m=U.traf(f,r,v,c,p),b=U.moof(c,m),g=a+8+8+u+i;return D.h?H(e,b,n,g):n.length-b.length>=8?function(e,t,n,r){var i=n.length-t.length;return e.set(t,0),e.set(U.free(i),t.length),z(e,r,t.length+8+i),e}(e,b,n,g):H(e,b,n,g)}},q=K.getTraf,Y=K.parseTfrf,W=K.parseTfxd;var X=function(e,t,n){var r,i,a,o=[];if(n){var u=q(e);u?(a=Y(u),i=W(u)):I.a.warn("smooth: could not find traf atom")}if(i)r={time:i.time,duration:i.duration,timescale:t.timescale};else{var s=Math.min(.9*t.timescale,null!=t.duration?t.duration/4:.25),c=Object(N.a)(e);r=c>=0&&(null==t.duration||Math.abs(c-t.duration)<=s)?{time:t.time,duration:c,timescale:t.timescale}:{time:t.time,duration:t.duration,timescale:t.timescale}}if(a)for(var l=0;l<a.length;l++)o.push({time:a[l].time,duration:a[l].duration,timescale:t.timescale});return{nextSegments:o,segmentInfos:r}},Q=n(13),Z=/\.(isml?)(\?token=\S+)?$/,J=/\?token=(\S+)/;function ee(e,t){return t?e.replace(J,"?token="+t):e.replace(J,"")}var te=K.createVideoInitSegment,ne=K.createAudioInitSegment;function re(e){var t,n=e.url,r=e.segment.range;return r&&(t={Range:function(e){var t=e[0],n=e[1];return n&&n!==1/0?"bytes="+ +t+"-"+ +n:"bytes="+ +t+"-"}(r)}),Object(A.a)({url:n,responseType:"arraybuffer",headers:t})}var ie=function(e){return function(t){var n=t.segment,i=t.representation,a=t.adaptation,o=t.period,u=t.manifest,s=t.init;if(n.isInit){if(!n.privateInfos||null==n.privateInfos.smoothInit)throw new Error("Smooth: Invalid segment format");var c,l=n.privateInfos.smoothInit,f=l.protection;switch(a.type){case"video":c=te(n.timescale,i.width||0,i.height||0,72,72,4,l.codecPrivateData||"",f&&f.keyId,f&&f.keySystems);break;case"audio":c=ne(n.timescale,l.channels||0,l.bitsPerSample||0,l.packetSize||0,l.samplingRate||0,l.codecPrivateData||"",f&&f.keyId,f&&f.keySystems);break;default:c=new Uint8Array(0)}return Object(r.a)({type:"data",value:{responseData:c}})}if(null==n.mediaURL)return Object(r.a)({type:"data",value:{responseData:null}});var d={adaptation:a,init:s,manifest:u,period:o,representation:i,segment:n,transport:"smooth",url:n.mediaURL};return e?Q.a.create(function(t){var n=!1,r=!1,i=e(d,{reject:function(e){void 0===e&&(e={}),r||(n=!0,t.error(e))},resolve:function(e){r||(n=!0,t.next({type:"response",value:{responseData:e.data,size:e.size,duration:e.duration}}),t.complete())},fallback:function(){r=!0,re(d).subscribe(t)}});return function(){n||r||"function"!=typeof i||i()}}):re(d)}},ae=K.patchSegment,oe=K.getMdat,ue=/\.wsx?(\?token=\S+)?/;function se(e,t,n){for(var r=e.representations,i=0;i<r.length;i++){r[i].index._addSegments(t,n)}}t.default=function(e){void 0===e&&(e={});var t=x(e),n=ie(e.segmentLoader),o={customManifestLoader:e.manifestLoader,ignoreProgressEvents:!0},u=Object(k.a)(o),s={loader:function(e){var t=e.adaptation,r=e.init,i=e.manifest,a=e.period,o=e.representation,u=e.segment;return n({adaptation:t,init:r,manifest:i,period:a,representation:o,segment:u})},parser:function(e){var t=e.segment,n=e.response,i=e.adaptation,a=e.manifest,o=n.responseData;if(null==o)return Object(r.a)({segmentData:null,segmentInfos:null,segmentOffset:0});if(t.isInit){var u={timescale:t.timescale,time:-1,duration:0};return Object(r.a)({segmentData:o,segmentInfos:u,segmentOffset:0})}var s=o instanceof Uint8Array?o:new Uint8Array(o),c=X(s,t,a.isLive),l=c.nextSegments,f=c.segmentInfos,d=ae(s,f.time);return l&&se(i,l,f),Object(r.a)({segmentData:d,segmentInfos:f,segmentOffset:0})}};return{manifest:{resolver:function(e){var t=e.url,n=function(e){var t=e.match(J);return t&&t[1]||""}(t);return(ue.test(t)?Object(A.a)({url:ee(t,""),responseType:"document",ignoreProgressEvents:!0}).pipe(Object(i.a)(function(e){var t=function(e){return e.getElementsByTagName("media")[0].getAttribute("src")}(e.value.responseData);if(!t)throw new Error("Invalid ISML");return t})):Object(r.a)(t)).pipe(Object(i.a)(function(e){return{url:ee(function(e){var t=e.match(Z);return t?e.replace(t[1],t[1]+"/manifest"):e}(e),n)}}))},loader:function(e){var t=e.url;return u(t)},parser:function(e){var n=e.response,i=e.url,a=null==n.url?i:n.url,o="string"==typeof n.responseData?(new DOMParser).parseFromString(n.responseData,"text/xml"):n.responseData,u=t(o,a);return Object(r.a)({manifest:u,url:a})}},audio:s,video:s,text:{loader:function(e){var t=e.segment,n=e.representation;if(t.isInit||null==t.mediaURL)return Object(r.a)({type:"data",value:{responseData:null}});var i=function(e){return!!e.mimeType&&e.mimeType.indexOf("mp4")>=0}(n)?"arraybuffer":"text";return Object(A.a)({url:t.mediaURL,responseType:i})},parser:function(e){var t=e.response,n=e.segment,i=e.representation,a=e.adaptation,o=e.manifest,u=a.language,s=i.mimeType,c=void 0===s?"":s,l=i.codec,f=void 0===l?"":l;var d,p,h=t.responseData;if(null===h)return Object(r.a)({segmentData:null,segmentInfos:n.timescale>0?{duration:n.isInit?0:n.duration,time:n.isInit?-1:n.time,timescale:n.timescale}:null,segmentOffset:0});var v,m,b,g,y,_=null,O=c.indexOf("mp4")>=0;if(O){0,d=new Uint8Array(h);var E=X(d,n,o.isLive);p=E.nextSegments,v=(_=E.segmentInfos).time,m=null!=_.duration?_.time+_.duration:void 0,b=_.timescale}else{0,d=h;var w=n.time||0;v=w,m=null!=n.duration?w+n.duration:void 0,b=n.timescale}if(O){var T=f.toLowerCase();if("application/ttml+xml+mp4"===c||"stpp"===T)y="ttml";else{if("wvtt"!==T)throw new Error("could not find a text-track parser for the type "+c);y="vtt"}var j=oe(d);g=Object(R.a)(j)}else{switch(c){case"application/x-sami":case"application/smil":y="sami";break;case"application/ttml+xml":y="ttml";break;case"text/vtt":y="vtt"}if(!y){if("srt"!==f.toLowerCase())throw new Error("could not find a text-track parser for the type "+c);y="srt"}g=h}return null!=_&&p&&se(a,p,_),Object(r.a)({segmentData:{type:y,data:g,language:u,timescale:b,start:v,end:m},segmentInfos:_,segmentOffset:v/b})}},image:{loader:function(e){var t=e.segment;return t.isInit||null==t.mediaURL?Object(r.a)({type:"data",value:{responseData:null}}):Object(A.a)({url:t.mediaURL,responseType:"arraybuffer"})},parser:function(e){var t=e.response,n=e.segment,i=t.responseData;if(null===i||null==a.a.imageParser)return Object(r.a)({segmentData:null,segmentInfos:n.timescale>0?{duration:n.isInit?0:n.duration,time:n.isInit?-1:n.time,timescale:n.timescale}:null,segmentOffset:0});var o=a.a.imageParser(new Uint8Array(i)),u=o.thumbs;return Object(r.a)({segmentData:{data:u,start:0,end:Number.MAX_VALUE,timescale:1,type:"bif"},segmentInfos:{time:0,duration:Number.MAX_VALUE,timescale:o.timescale},segmentOffset:0})}}}}},function(e,t,n){"use strict";var r=n(3),i=n(43),a=function(e){function t(t,n){var r=e.call(this,t,n)||this;return r.scheduler=t,r.work=n,r}return r.a(t,e),t.prototype.schedule=function(t,n){return void 0===n&&(n=0),n>0?e.prototype.schedule.call(this,t,n):(this.delay=n,this.state=t,this.scheduler.flush(this),this)},t.prototype.execute=function(t,n){return n>0||this.closed?e.prototype.execute.call(this,t,n):this._execute(t,n)},t.prototype.requestAsyncId=function(t,n,r){return void 0===r&&(r=0),null!==r&&r>0||null===r&&this.delay>0?e.prototype.requestAsyncId.call(this,t,n,r):t.flush(this)},t}(n(102).a),o=new(function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return r.a(t,e),t}(n(103).a))(a),u=n(15),s=n(10),c=n(26),l=n(76),f=n(79),d=function(){function e(e,t,n){this.kind=e,this.value=t,this.error=n,this.hasValue="N"===e}return e.prototype.observe=function(e){switch(this.kind){case"N":return e.next&&e.next(this.value);case"E":return e.error&&e.error(this.error);case"C":return e.complete&&e.complete()}},e.prototype.do=function(e,t,n){switch(this.kind){case"N":return e&&e(this.value);case"E":return t&&t(this.error);case"C":return n&&n()}},e.prototype.accept=function(e,t,n){return e&&"function"==typeof e.next?this.observe(e):this.do(e,t,n)},e.prototype.toObservable=function(){switch(this.kind){case"N":return Object(l.a)(this.value);case"E":return Object(f.a)(this.error);case"C":return Object(c.b)()}throw new Error("unexpected notification kind value")},e.createNext=function(t){return void 0!==t?new e("N",t):e.undefinedValueNotification},e.createError=function(t){return new e("E",void 0,t)},e.createComplete=function(){return e.completeNotification},e.completeNotification=new e("C"),e.undefinedValueNotification=new e("N",void 0),e}();var p=function(e){function t(t,n,r){void 0===r&&(r=0);var i=e.call(this,t)||this;return i.scheduler=n,i.delay=r,i}return r.a(t,e),t.dispatch=function(e){var t=e.notification,n=e.destination;t.observe(n),this.unsubscribe()},t.prototype.scheduleMessage=function(e){this.add(this.scheduler.schedule(t.dispatch,this.delay,new h(e,this.destination)))},t.prototype._next=function(e){this.scheduleMessage(d.createNext(e))},t.prototype._error=function(e){this.scheduleMessage(d.createError(e))},t.prototype._complete=function(){this.scheduleMessage(d.createComplete())},t}(s.a),h=function(){return function(e,t){this.notification=e,this.destination=t}}(),v=n(46),m=n(78);n.d(t,"a",function(){return b});var b=function(e){function t(t,n,r){void 0===t&&(t=Number.POSITIVE_INFINITY),void 0===n&&(n=Number.POSITIVE_INFINITY);var i=e.call(this)||this;return i.scheduler=r,i._events=[],i._infiniteTimeWindow=!1,i._bufferSize=t<1?1:t,i._windowTime=n<1?1:n,n===Number.POSITIVE_INFINITY?(i._infiniteTimeWindow=!0,i.next=i.nextInfiniteTimeWindow):i.next=i.nextTimeWindow,i}return r.a(t,e),t.prototype.nextInfiniteTimeWindow=function(t){var n=this._events;n.push(t),n.length>this._bufferSize&&n.shift(),e.prototype.next.call(this,t)},t.prototype.nextTimeWindow=function(t){this._events.push(new g(this._getNow(),t)),this._trimBufferThenGetEvents(),e.prototype.next.call(this,t)},t.prototype._subscribe=function(e){var t,n=this._infiniteTimeWindow,r=n?this._events:this._trimBufferThenGetEvents(),i=this.scheduler,a=r.length;if(this.closed)throw new v.a;if(this.isStopped||this.hasError?t=u.a.EMPTY:(this.observers.push(e),t=new m.a(this,e)),i&&e.add(e=new p(e,i)),n)for(var o=0;o<a&&!e.closed;o++)e.next(r[o]);else for(o=0;o<a&&!e.closed;o++)e.next(r[o].value);return this.hasError?e.error(this.thrownError):this.isStopped&&e.complete(),t},t.prototype._getNow=function(){return(this.scheduler||o).now()},t.prototype._trimBufferThenGetEvents=function(){for(var e=this._getNow(),t=this._bufferSize,n=this._windowTime,r=this._events,i=r.length,a=0;a<i&&!(e-r[a].time<n);)a++;return i>t&&(a=Math.max(a,i-t)),a>0&&r.splice(0,a),r},t}(i.a),g=function(){return function(e,t){this.time=e,this.value=t}}()},function(e,t,n){"use strict";n.r(t);var r=n(14),i=n.n(r),a=n(7),o=n.n(a),u=n(87),s=n(55),c=n(47),l=n(30),f=["backgroundColor","color","direction","display","displayAlign","extent","fontFamily","fontSize","fontStyle","fontWeight","lineHeight","opacity","origin","overflow","padding","textAlign","textDecoration","textOutline","unicodeBidi","visibility","wrapOption","writingMode"],d=n(100),p=n(20),h=["color","direction","display","fontFamily","fontSize","fontStyle","fontWeight","textDecoration","textOutline","unicodeBidi","visibility","wrapOption"];function v(e){var t;return null!=(t=p.b.exec(e))?"rgba("+parseInt(t[1],16)+","+parseInt(t[2],16)+","+parseInt(t[3],16)+","+parseInt(t[4],16)/255+")":null!=(t=p.a.exec(e))?"rgba("+parseInt(t[1]+t[1],16)+","+parseInt(t[2]+t[2],16)+","+parseInt(t[3]+t[3],16)+","+parseInt(t[4]+t[4],16)/255+")":e}function m(e,t){return"-1px -1px "+t+" "+e+",1px -1px "+t+" "+e+",-1px 1px "+t+" "+e+",1px 1px "+t+" "+e}function b(e,t,n){var r=document.createElement("span"),i=e.textContent||"";if(n){var a=i.trim();i=a=a.replace(/\s+/g," ")}return r.innerHTML=i,r.className="rxp-texttrack-span",function(e,t,n){var r=t.color;r&&(e.style.color=v(r));var i=t.backgroundColor;i&&(e.style.backgroundColor=v(i));var a=t.textOutline;if(a){var o=a.trim().replace(/\s+/g," ").split(" "),u=o.length;if(3===u){var s=v(o[0]),c=o[1];e.style.textShadow=m(s,c)}else if(r&&1===u){var l=o[0];e.style.textShadow=m(r,l)}else if(2===u){var f=/^[#A-Z]/i.test(o[0]);if(f!==/^[0-9]/.test(o[0]))if(f){var d=v(o[0]),p=o[1];e.style.textShadow=m(d,p)}else if(r){var h=o[0];e.style.textShadow=m(r,h)}}}var b=t.textDecoration;if(b)switch(b){case"noUnderline":case"noLineThrough":case"noOverline":e.style.textDecoration="none";break;case"lineThrough":e.style.textDecoration="line-through";break;default:e.style.textDecoration=b}var g=t.fontFamily;if(g)switch(g){case"proportionalSansSerif":e.style.fontFamily="Arial, Helvetica, Liberation Sans, sans-serif";break;case"monospaceSansSerif":case"sansSerif":e.style.fontFamily="sans-serif";break;case"monospaceSerif":case"default":e.style.fontFamily="Courier New, Liberation Mono, monospace";break;case"proportionalSerif":e.style.fontFamily="serif";break;default:e.style.fontFamily=g}var y=t.fontStyle;y&&(e.style.fontStyle=y);var _=t.fontWeight;_&&(e.style.fontWeight=_);var O=t.fontSize;O&&(e.style.fontSize=O);var E=t.direction;E&&(e.style.direction=E);var w=t.unicodeBidi;if(w)switch(w){case"bidiOverride":e.style.unicodeBidi="bidi-override";break;case"embed":e.style.unicodeBidi="embed";break;default:e.style.unicodeBidi="normal"}var T=t.visibility;T&&(e.style.visibility=T),"none"===t.display&&(e.style.display="none");var j=t.wrapOption;e.style.whiteSpace="noWrap"===j?n?"nowrap":"pre":n?"normal":"pre-wrap"}(r,t,n),r}function g(e,t,n,r,i,a){var u=Object(s.a)(e,"div"),c=document.createElement("DIV");if(c.className="rxp-texttrack-region",function(e,t){var n=t.extent;if(n){var r=p.c.exec(n);null!=r&&(e.style.width=r[1]+"%",e.style.height=r[2]+"%")}t.writingMode;var i=t.overflow;e.style.overflow=i||"hidden";var a=t.padding;a&&(e.style.padding=a);var o=t.origin;if(o){var u=p.c.exec(o);null!=u&&(e.style.position="relative",e.style.left=u[1]+"%",e.style.top=u[2]+"%")}var s=t.displayAlign;if(e.style.display="flex",e.style.flexDirection="column",s)switch(s){case"before":e.style.justifyContent="flex-start";break;case"center":e.style.justifyContent="center";break;case"after":e.style.justifyContent="flex-end"}var c=t.opacity;c&&(e.style.opacity=c);var l=t.visibility;l&&(e.style.visibility=l),"none"===t.display&&(e.style.display="none")}(c,i),t){var f=Object(l.a)(["backgroundColor"],u.concat([t]),r,n).bodyBackgroundColor;f&&(c.style.backgroundColor=v(f))}var d=document.createElement("p");d.className="rxp-texttrack-p",function(e,t){var n=t.backgroundColor;n&&(e.style.backgroundColor=v(n));var r=t.lineHeight;r&&(e.style.lineHeight=r);var i=t.textAlign;if(i)switch(i){case"center":e.style.textAlign="center";break;case"left":case"start":e.style.textAlign="left";break;case"right":case"end":e.style.textAlign="right"}}(d,i);for(var m=function(e,t,n,r,i){return function e(r,i,a,u){for(var s=r.childNodes,c=[],f=0;f<s.length;f++){var d=s[f];if("#text"===d.nodeName){var p=Object(l.a)(["backgroundColor"],a,n,t).backgroundColor;p?i.backgroundColor=p:delete i.backgroundColor;var v=b(d,i,u);c.push(v)}else if("br"===d.nodeName){var m=document.createElement("BR");c.push(m)}else if("span"===d.nodeName&&d.nodeType===Node.ELEMENT_NODE&&d.childNodes.length>0){var g=d.getAttribute("xml:space"),y=g?"default"===g:u,_=o()({},i,Object(l.a)(h,[d],n,t));c.push.apply(c,e(d,_,[d].concat(a),y))}}return c}(e,o()({},r),[],i)}(e,n,r,i,a),g=0;g<m.length;g++)d.appendChild(m[g]);return c.appendChild(d),c}function y(e,t,n,r,i,a,o,u){if(!e.hasAttribute("begin")&&!e.hasAttribute("end")&&/^\s*$/.test(e.textContent||""))return null;var s=Object(d.a)(e,o);return{start:s.start+t,end:s.end+t,element:g(e,i,r,n,a,u)}}function _(e,t){var n=[],r=(new DOMParser).parseFromString(e,"text/xml");if(r){var a=r.getElementsByTagName("tt")[0];if(!a)throw new Error("invalid XML");for(var d=Object(c.a)(a),p=Object(c.c)(a),h=Object(c.b)(a),v=Object(c.d)(a),m=Object(u.a)(a),b=[],g=0;g<=p.length-1;g++){var _=p[g];if(_ instanceof Element){var O=_.getAttribute("xml:id");null!==O&&b.push({id:O,style:Object(l.b)(_)})}}for(var E=[],w=0;w<=h.length-1;w++){var T=h[w];if(T instanceof Element){var j=T.getAttribute("xml:id");null!==j&&function(){var e=Object(l.b)(T),t=T.getAttribute("style");if(t){var n=i()(b,function(e){return e.id===t});n&&(e=o()({},n.style,e))}E.push({id:j,style:e})}()}}for(var S=null!==d?Object(l.a)(f,[d],b,E):Object(l.a)(f,[],b,E),x="default"===(d?d.getAttribute("xml:space"):void 0)||"default"===m.spaceStyle,A=0;A<v.length;A++){var R=v[A];if(R instanceof Element){var k=Object(s.a)(R,"div"),I=o()({},S,Object(l.a)(f,[R].concat(k),b,E)),N=R.getAttribute("xml:space"),D=y(R,t,b,E,d,I,m,N?"default"===N:x);D&&n.push(D)}}}return n}n.d(t,"default",function(){return _})},function(e,t,n){"use strict";n.r(t);var r=n(86),i=n(49);var a=n(101),o=n(11);function u(e,t,n){var r,i=["u","i","b"],a=e.nodeName.toLowerCase().split(".")[0];if(Object(o.a)(["u","i","b","c","#text"],a))if("#text"===a){var s=e.wholeText.split("\n");r=document.createElement("span");for(var c=0;c<s.length;c++)if(c&&r.appendChild(document.createElement("br")),s[c].length>0){var l=document.createTextNode(s[c]);r.appendChild(l)}}else{var f=[];if(e.nodeName.toLowerCase().split(".").forEach(function(e){-1!==n.indexOf(e)&&f.push(n.indexOf(e))}),0!==f.length){var d=document.createAttribute("style");f.forEach(function(e){t[e]&&(d.value+=t[e].styleContent)});var p=Object(o.a)(i,a)?a:"span";(r=document.createElement(p)).setAttributeNode(d)}else{var h=Object(o.a)(i,a)?a:"span";r=document.createElement(h)}for(var v=0;v<e.childNodes.length;v++){var m=u(e.childNodes[v],t,n);r.appendChild(m)}}else{r=document.createElement("span");for(var b=0;b<e.childNodes.length;b++){var g=u(e.childNodes[b],t,n);r.appendChild(g)}}return r}function s(e){var t=[],n=1,r=[];if(e.length<2)return[];if(e[1].match(/::cue {/))r.push({isGlobalStyle:!0}),n++;else for(var i;e[n]&&(i=e[n].match(/::cue\(\.?(.*?)\)(?:,| {)/));)r.push({className:i[1],isGlobalStyle:!1}),n++;for(var a="";e[n]&&!e[n].match(/}/)&&0!==e[n].length;)a+=e[n],n++;return r.forEach(function(e){t.push({className:e.className,isGlobalStyle:e.isGlobalStyle,styleContent:a.replace(/\s/g,"")})}),t}function c(e,t){var n=e.split(/\r\n|\n|\r/g);if(!n.length)return[];var o=[],u=[];if(!n[0].match(/^WEBVTT( |\t|\n|\r|$)/))throw new Error("Can't parse WebVTT: Invalid File.");for(var c=Object(i.b)(n),f=function(e,t){for(var n=[],r=t;r<e.length;r++)if(Object(i.d)(e,r)){var a=r;for(r++;e[r];)r++;var o=e.slice(a,r);n.push(o)}else if(e[r])for(;e[r];)r++;return n}(n,c),d=Object(r.a)(n,c),p=0;p<f.length;p++){var h=s(f[p]);u.push.apply(u,h)}for(var v=0;v<d.length;v++){var m=Object(a.a)(d[v],t);if(null!=m){var b=l(m,u);b&&o.push(b)}}return o}function l(e,t){var n=e.start,r=e.end,i=e.header,a=e.payload,o=document.createElement("div"),s=document.createAttribute("style");s.value="width:100%;height:100%;display:flex;flex-direction:column;justify-content:flex-end;align-items:center;",o.setAttributeNode(s);var c=document.createElement("p"),l=document.createAttribute("style");l.value="text-align:center",c.setAttributeNode(l);var f=document.createElement("span"),d=document.createAttribute("style");d.value="background-color:rgba(0,0,0,0.8);color:white;",f.setAttributeNode(d);var p=t.filter(function(e){return e.className===i&&!e.isGlobalStyle||e.isGlobalStyle}).map(function(e){return e.styleContent});return d.value+=p.join(),f.setAttributeNode(d),function(e,t){for(var n=t.map(function(e){return e.className}).filter(function(e){return null!=e}),r=e.replace(/<[0-9]{2}:[0-9]{2}.[0-9]{3}>/,"").replace(/<([u,i,b,c])(\..*?)?(?: .*?)?>(.*?)<\/\1>/g,"<$1$2>$3</$1$2>"),i=(new DOMParser).parseFromString(r,"text/html").body.childNodes,a=[],o=0;o<i.length;o++)a.push(u(i[o],t,n));return a}(a.join("\n"),t).forEach(function(e){f.appendChild(e)}),o.appendChild(c),c.appendChild(f),{start:n,end:r,element:o}}n.d(t,"default",function(){return c})},function(e,t,n){"use strict";n.r(t);var r=n(135),i=n(140),a=n(106),o=n(76),u=n(43),s=n(137),c=n(139),l=n(150),f=n(142),d=n(8),p=n(2),h=n(0),v=n(56),m=.2;function b(e,t){return Math.abs(e-t)<=m}function g(e,t){for(var n=0;n<e.length;n++){var r=e[n];if(t<r.end)return t>=r.start?e.slice(0,n):e.slice(0,n+1)}return e.slice()}function y(e,t){for(var n=0;n<e.length;n++){var r=e[n];if(t<r.end)return t>=r.start?e.slice(n+1,e.length):e.slice(n,e.length)}return[]}function _(e,t,n){var r=Math.max(e.start,t);return[{start:e.start,end:r,cues:g(e.cues,t)},{start:Math.min(n,e.end),end:e.end,cues:y(e.cues,n)}]}var O=function(){function e(){this._cuesBuffer=[]}var t=e.prototype;return t.get=function(e){for(var t=this._cuesBuffer,n=t.length-1;n>=0;n--)for(var r=t[n].cues,i=r.length-1;i>=0;i--){var a=r[i];if(e>=a.start)return e<a.end?a:void 0}},t.remove=function(e,t){for(var n=Math.max(e,t),r=this._cuesBuffer,i=r.length,a=0;a<i;a++)if(r[a].end>e){var o=r[a];if(o.start>=n)return;if(o.end>=n){var u=_(o,e,n),s=u[0],c=u[1];return this._cuesBuffer[a]=s,void r.splice(a+1,0,c)}o.cues=g(o.cues,e),o.end=Math.max(e,o.start);for(var l=a+1;l<i;l++){var f=r[a];if(n<=f.end)return r.splice(a+1,l-(a+1)),void(n>f.start&&(f.cues=y(f.cues,n),f.start=n))}return void r.splice(a+1,r.length-(a+1))}},t.insert=function(e,t,n){for(var r=this._cuesBuffer,i={start:t,end:n,cues:e},a=0;a<r.length;a++){var o=r[a];if(t<o.end){if(b(t,o.start)){if(b(n,o.end))return void(r[a]=i);if(n<o.end)return o.cues=y(o.cues,n),o.start=n,void r.splice(a,0,i);do{r.splice(a,1),o=r[a]}while(o&&n>o.end);return!o||b(n,o.end)?void(r[a]=i):(o.cues=y(o.cues,n),o.start=n,void r.splice(a,0,i))}if(t<o.start)return n<o.start?void r.splice(a,0,i):b(n,o.start)?(o.start=n,void r.splice(a,0,i)):(o.cues=y(o.cues,n),o.start=n,void r.splice(a,0,i));if(n>o.end||b(n,o.end))return o.cues=g(o.cues,t),o.end=t,void r.splice(a+1,0,i);var u=_(o,t,n),s=u[0],c=u[1];return this._cuesBuffer[a]=s,r.splice(a+1,0,i),void r.splice(a+2,0,c)}}r.push(i)},e}(),E=n(6);n.d(t,"default",function(){return j});var w=p.a.MAXIMUM_HTML_TEXT_TRACK_UPDATE_INTERVAL;function T(e,t){if(t)try{e.removeChild(t)}catch(e){h.a.warn("Can't remove text track: not in the element.")}}var j=function(e){function t(t,n){var p;return h.a.debug("creating html text track source buffer"),(p=e.call(this)||this)._videoElement=t,p._textTrackElement=n,p._destroy$=new u.a,p._buffer=new O,p._currentElement=null,function(e){var t=Object(d.m)(e).pipe(Object(s.a)(null)),n=Object(d.l)(e).pipe(Object(s.a)(null)),u=Object(d.c)(e).pipe(Object(s.a)(null)),p=Object(r.a)(n,u),h=Object(i.a)(w).pipe(Object(s.a)(null),Object(c.a)(null));return p.pipe(Object(c.a)(null),Object(l.a)(Object(a.a)(h.pipe(Object(s.a)(!0),Object(f.a)(t)),Object(o.a)(!1))))}(p._videoElement).pipe(Object(f.a)(p._destroy$)).subscribe(function(e){if(!e)return T(n,p._currentElement),void(p._currentElement=null);var t=Math.max(p._videoElement.currentTime-w/2e3,0),r=p._buffer.get(t);if(!r)return T(n,p._currentElement),void(p._currentElement=null);p._currentElement!==r.element&&(T(n,p._currentElement),p._currentElement=r.element,n.appendChild(p._currentElement))}),p}!function(e,t){e.prototype=Object.create(t.prototype),e.prototype.constructor=e,e.__proto__=t}(t,e);var n=t.prototype;return n._append=function(e){h.a.debug("appending new html text tracks",e);var t=e.timescale,n=e.start,r=e.end,i=e.data,a=e.type,o=e.language;if(r&&r-n<=0)h.a.warn("Invalid text track appended: the start time is inferior or equal to the end time.");else{var u=n/t,s=null!=r?r/t:void 0,c=function(e,t,n,r){h.a.debug("finding parser for html text tracks:",e);var i=E.a.htmlTextTracksParsers[e];if(!i)throw new Error("no parser found for the given text track");h.a.debug("parser found, parsing...");var a=i(t,n,r);return h.a.debug("parsed successfully!",a),a}(a,i,this.timestampOffset,o),l=u,f=null!=s?s:c[c.length-1].end;this._buffer.insert(c,l,f),this.buffered.insert(l,f)}},n._remove=function(e,t){h.a.debug("removing html text track data",e,t),this._buffer.remove(e,t),this.buffered.remove(e,t)},n._abort=function(){h.a.debug("aborting html text track source buffer"),this._destroy$.next(),this._destroy$.complete(),T(this._textTrackElement,this._currentElement)},t}(v.a)},function(e,t,n){"use strict";n.r(t);var r=n(12),i=n(0),a=n(56),o=n(6);n.d(t,"default",function(){return u});var u=function(e){function t(t,n){var a;i.a.debug("creating native text track source buffer"),a=e.call(this)||this;var o=Object(r.a)(t,n),u=o.track,s=o.trackElement;return a._videoElement=t,a._track=u,a._trackElement=s,a}!function(e,t){e.prototype=Object.create(t.prototype),e.prototype.constructor=e,e.__proto__=t}(t,e);var n=t.prototype;return n._append=function(e){i.a.debug("appending new native text tracks",e);var t=e.timescale,n=e.start,r=e.end,a=e.data,u=e.type,s=e.language;if(null!=r&&r-n<=0)i.a.warn("Invalid subtitles appended");else{var c=n/t,l=null!=r?r/t:void 0,f=function(e,t,n,r){i.a.debug("finding parser for native text tracks:",e);var a=o.a.nativeTextTracksParsers[e];if(!a)throw new Error("no parser found for the given text track");i.a.debug("parser found, parsing...");var u=a(t,n,r);return i.a.debug("parsed successfully!",u),u}(u,a,this.timestampOffset,s);if(f.length>0){var d=f[0],p=this._track.cues;p.length>0&&d.startTime<p[p.length-1].startTime&&this._remove(d.startTime,1/0);for(var h=0;h<f.length;h++)this._track.addCue(f[h]);this.buffered.insert(c,null!=l?l:f[f.length-1].endTime)}else null!=l&&this.buffered.insert(c,l)}},n._remove=function(e,t){i.a.debug("removing native text track data",e,t);for(var n=this._track,r=n.cues,a=r.length-1;a>=0;a--){var o=r[a],u=o.startTime,s=o.endTime;u>=e&&u<=t&&s<=t&&n.removeCue(o)}this.buffered.remove(e,t)},n._abort=function(){i.a.debug("aborting native text track source buffer");var e=this._trackElement,t=this._videoElement;if(e&&t&&t.hasChildNodes())try{t.removeChild(e)}catch(e){i.a.warn("Can't remove track element from the video")}this._track&&(this._track.mode="disabled"),this._trackElement&&(this._trackElement.innerHTML="")},t}(a.a)},function(e,t,n){"use strict";var r=n(43),i=n(135),a=n(79),o=n(76),u=n(142),s=n(1),c=n(17),l=n(40),f=n(24),d=n(8);function p(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var h,v=function(){function e(e,t,n){this._keyType=e,this._mediaKeys=t,this._configuration=n}var t=e.prototype;return t.createMediaKeys=function(){var e=this;return new Promise(function(t){return t(e._mediaKeys)})},t.getConfiguration=function(){return this._configuration},function(e,t,n){t&&p(e.prototype,t),n&&p(e,n)}(e,[{key:"keySystem",get:function(){return this._keyType}}]),e}();function m(e,t){e.prototype=Object.create(t.prototype),e.prototype.constructor=e,e.__proto__=t}n.d(t,"a",function(){return b}),n.d(t,"b",function(){return h});var b=function(){function e(){}var t=e.prototype;return t._setVideo=function(){throw new Error("MediaKeys is not implemented in your browser")},t.createSession=function(){throw new Error("MediaKeys is not implemented in your browser")},t.setServerCertificate=function(){throw new Error("MediaKeys is not implemented in your browser")},e}();if(navigator.requestMediaKeySystemAccess)h=function(e,t){return Object(c.a)(navigator.requestMediaKeySystemAccess(e,t))};else{var g=function(e){return function(t,n){var r=this;return new Promise(function(i,a){try{e.call(r,t,n),i()}catch(e){a(e)}})}};if(HTMLVideoElement.prototype.webkitGenerateKeyRequest){var y=function(e){function t(t,n){var a;return(a=e.call(this)||this)._closeSession$=new r.a,a._vid=t,a._key=n,a.sessionId="",a.closed=new Promise(function(e){a._closeSession$.subscribe(e)}),a.keyStatuses=new Map,a.expiration=NaN,Object(i.a)(d.g(t),d.e(t),d.f(t)).pipe(Object(u.a)(a._closeSession$)).subscribe(function(e){return a.trigger(e.type,e)}),a.update=g(function(e,t){if(a._key.indexOf("clearkey")>=0){var n=JSON.parse(Object(s.f)(e)),r=Object(s.p)(atob(n.keys[0].k)),i=Object(s.p)(atob(n.keys[0].kid));a._vid.webkitAddKey(a._key,r,i,t)}else a._vid.webkitAddKey(a._key,e,null,t);a.sessionId=t}),a}m(t,e);var n=t.prototype;return n.generateRequest=function(e,t){var n=this;return new Promise(function(e){if("function"!=typeof n._vid.webkitGenerateKeyRequest)throw new Error("impossible to generate a key request");n._vid.webkitGenerateKeyRequest(n._key,t),e()})},n.close=function(){var e=this;return new Promise(function(t){e._closeSession$.next(),e._closeSession$.complete(),t()})},n.load=function(){return Promise.resolve(!1)},n.remove=function(){return Promise.resolve()},t}(l.a);b=function(){function e(e){this.ks_=e}var t=e.prototype;return t._setVideo=function(e){this._vid=e},t.createSession=function(){if(!this._vid)throw new Error("Video not attached to the MediaKeys");return new y(this._vid,this.ks_)},t.setServerCertificate=function(){throw new Error("Server certificate is not implemented in your browser")},e}();h=function(e,t){if(!function(e){var t=document.querySelector("video")||document.createElement("video");return!(!t||!t.canPlayType||!t.canPlayType("video/mp4",e))}(e))return Object(a.a)(void 0);for(var n=0;n<t.length;n++){var r=t[n],i=r.videoCapabilities,u=r.audioCapabilities,s=r.initDataTypes,c=r.sessionTypes,l=r.distinctiveIdentifier,f=r.persistentState,d=!0;if(d=(d=(d=(d=d&&(!s||!!s.filter(function(e){return"cenc"===e})[0]))&&(!c||c.filter(function(e){return"temporary"===e}).length===c.length))&&"required"!==l)&&"required"!==f){var p={videoCapabilities:i,audioCapabilities:u,initDataTypes:["cenc"],sessionTypes:["temporary"],distinctiveIdentifier:"not-allowed",persistentState:"not-allowed"};return Object(o.a)(new v(e,new b(e),p))}}return Object(a.a)(void 0)}}else if(f.c&&f.c.prototype&&"function"==typeof f.c.prototype.createSession&&"function"==typeof f.c.isTypeSupported){var _=function(e){function t(t){var n;return(n=e.call(this)||this).sessionId="",n.expiration=NaN,n.keyStatuses=new Map,n._mk=t,n._closeSession$=new r.a,n.closed=new Promise(function(e){n._closeSession$.subscribe(e)}),n.update=g(function(e,t){if(!n._ss)throw new Error("MediaKeySession not set");n._ss.update(e,t),n.sessionId=t}),n}m(t,e);var n=t.prototype;return n.generateRequest=function(e,t){var n=this;return new Promise(function(e){n._ss=n._mk.memCreateSession("video/mp4",t),Object(i.a)(d.g(n._ss),d.e(n._ss),d.f(n._ss)).pipe(Object(u.a)(n._closeSession$)).subscribe(function(e){return n.trigger(e.type,e)}),e()})},n.close=function(){var e=this;return new Promise(function(t){e._ss&&(e._ss.close(),e._ss=void 0),e._closeSession$.next(),e._closeSession$.complete(),t()})},n.load=function(){return Promise.resolve(!1)},n.remove=function(){return Promise.resolve()},t}(l.a);f.c.prototype.alwaysRenew=!0,f.c.prototype.memCreateSession=f.c.prototype.createSession,f.c.prototype.createSession=function(){return new _(this)},h=function(e,t){if(!f.c.isTypeSupported(e))return Object(a.a)(void 0);for(var n=0;n<t.length;n++){var r=t[n],i=r.videoCapabilities,u=r.audioCapabilities,s=r.initDataTypes,c=r.distinctiveIdentifier,l=!0;if(l=(l=l&&(!s||!!s.filter(function(e){return"cenc"===e})[0]))&&"required"!==c){var d={videoCapabilities:i,audioCapabilities:u,initDataTypes:["cenc"],distinctiveIdentifier:"not-allowed",persistentState:"required",sessionTypes:["temporary","persistent-license"]};return Object(o.a)(new v(e,new f.c(e),d))}}return Object(a.a)(void 0)}}else h=null}},,function(e,t,n){"use strict";n.d(t,"a",function(){return o});var r=n(13),i=n(44),a=n(26);function o(e){return new r.a(function(t){var n;try{n=e()}catch(e){return void t.error(e)}return(n?Object(i.a)(n):Object(a.b)()).subscribe(t)})}},function(e,t,n){"use strict";n.d(t,"a",function(){return u});var r=n(13),i=n(33),a=n(97),o=n(25);function u(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var n=Number.POSITIVE_INFINITY,u=null,s=e[e.length-1];return Object(i.a)(s)?(u=e.pop(),e.length>1&&"number"==typeof e[e.length-1]&&(n=e.pop())):"number"==typeof s&&(n=e.pop()),null===u&&1===e.length&&e[0]instanceof r.a?e[0]:Object(a.a)(n)(Object(o.a)(e,u))}},function(e,t,n){"use strict";n.d(t,"a",function(){return u});var r=n(13),i=n(41),a=n(48),o=n(64);Object.prototype.toString;function u(e,t,n,s){return Object(a.a)(n)&&(s=n,n=void 0),s?u(e,t,n).pipe(Object(o.a)(function(e){return Object(i.a)(e)?s.apply(void 0,e):s(e)})):new r.a(function(r){!function e(t,n,r,i,a){var o;if(function(e){return e&&"function"==typeof e.addEventListener&&"function"==typeof e.removeEventListener}(t)){var u=t;t.addEventListener(n,r,a),o=function(){return u.removeEventListener(n,r,a)}}else if(function(e){return e&&"function"==typeof e.on&&"function"==typeof e.off}(t)){var s=t;t.on(n,r),o=function(){return s.off(n,r)}}else if(function(e){return e&&"function"==typeof e.addListener&&"function"==typeof e.removeListener}(t)){var c=t;t.addListener(n,r),o=function(){return c.removeListener(n,r)}}else{if(!t||!t.length)throw new TypeError("Invalid event target");for(var l=0,f=t.length;l<f;l++)e(t[l],n,r,i,a)}i.add(o)}(e,t,function(e){arguments.length>1?r.next(Array.prototype.slice.call(arguments)):r.next(e)},r,n)})}},function(e,t,n){"use strict";n.d(t,"a",function(){return a});var r=n(3),i=n(10);function a(e){return function(t){return t.lift(new o(e))}}var o=function(){function e(e){this.value=e}return e.prototype.call=function(e,t){return t.subscribe(new u(e,this.value))},e}(),u=function(e){function t(t,n){var r=e.call(this,t)||this;return r.value=n,r}return r.a(t,e),t.prototype._next=function(e){this.destination.next(this.value)},t}(i.a)},function(e,t,n){"use strict";n.d(t,"a",function(){return a});var r=n(3),i=n(10);function a(e,t){return function(n){return n.lift(new o(e,t))}}var o=function(){function e(e,t){this.predicate=e,this.thisArg=t}return e.prototype.call=function(e,t){return t.subscribe(new u(e,this.predicate,this.thisArg))},e}(),u=function(e){function t(t,n,r){var i=e.call(this,t)||this;return i.predicate=n,i.thisArg=r,i.count=0,i}return r.a(t,e),t.prototype._next=function(e){var t;try{t=this.predicate.call(this.thisArg,e,this.count++)}catch(e){return void this.destination.error(e)}t&&this.destination.next(e)},t}(i.a)},function(e,t,n){"use strict";n.d(t,"a",function(){return s});var r=n(25),i=n(77),a=n(26),o=n(106),u=n(33);function s(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return function(t){var n=e[e.length-1];Object(u.a)(n)?e.pop():n=null;var s=e.length;return 1!==s||n?s>0?Object(o.a)(Object(r.a)(e,n),t):Object(o.a)(Object(a.b)(n),t):Object(o.a)(Object(i.a)(e[0]),t)}}},function(e,t,n){"use strict";n.d(t,"a",function(){return o});var r=n(13),i=n(38),a=n(60);function o(e,t){return void 0===e&&(e=0),void 0===t&&(t=i.a),(!Object(a.a)(e)||e<0)&&(e=0),t&&"function"==typeof t.schedule||(t=i.a),new r.a(function(n){return n.add(t.schedule(u,e,{subscriber:n,counter:0,period:e})),n})}function u(e){var t=e.subscriber,n=e.counter,r=e.period;t.next(n),this.schedule({subscriber:t,counter:n+1,period:r},r)}},function(e,t,n){"use strict";n.d(t,"a",function(){return u});var r=n(3),i=n(10),a=n(58),o=n(31);function u(e,t){return function(n){return n.lift(new s(e,t))}}var s=function(){function e(e,t){this.compare=e,this.keySelector=t}return e.prototype.call=function(e,t){return t.subscribe(new c(e,this.compare,this.keySelector))},e}(),c=function(e){function t(t,n,r){var i=e.call(this,t)||this;return i.keySelector=r,i.hasKey=!1,"function"==typeof n&&(i.compare=n),i}return r.a(t,e),t.prototype.compare=function(e,t){return e===t},t.prototype._next=function(e){var t=e;if(this.keySelector&&(t=Object(a.a)(this.keySelector)(e))===o.a)return this.destination.error(o.a.e);var n=!1;if(this.hasKey){if((n=Object(a.a)(this.compare)(this.key,t))===o.a)return this.destination.error(o.a.e)}else this.hasKey=!0;!1===Boolean(n)&&(this.key=t,this.destination.next(e))},t}(i.a)},function(e,t,n){"use strict";n.d(t,"a",function(){return o});var r=n(3),i=n(22),a=n(21);function o(e){return function(t){return t.lift(new u(e))}}var u=function(){function e(e){this.notifier=e}return e.prototype.call=function(e,t){var n=new s(e),r=Object(a.a)(n,this.notifier);return r&&!n.seenValue?(n.add(r),t.subscribe(n)):n},e}(),s=function(e){function t(t){var n=e.call(this,t)||this;return n.seenValue=!1,n}return r.a(t,e),t.prototype.notifyNext=function(e,t,n,r,i){this.seenValue=!0,this.complete()},t.prototype.notifyComplete=function(){},t}(i.a)},function(e,t,n){"use strict";n.d(t,"a",function(){return u});var r=n(3),i=n(10),a=n(80),o=n(26);function u(e){return function(t){return 0===e?Object(o.b)():t.lift(new s(e))}}var s=function(){function e(e){if(this.total=e,this.total<0)throw new a.a}return e.prototype.call=function(e,t){return t.subscribe(new c(e,this.total))},e}(),c=function(e){function t(t,n){var r=e.call(this,t)||this;return r.total=n,r.count=0,r}return r.a(t,e),t.prototype._next=function(e){var t=this.total,n=++this.count;n<=t&&(this.destination.next(e),n===t&&(this.destination.complete(),this.unsubscribe()))},t}(i.a)},function(e,t,n){"use strict";n.d(t,"a",function(){return i});var r=n(67);function i(e,t,n){return void 0===n&&(n=Number.POSITIVE_INFINITY),"function"==typeof t?Object(r.a)(function(){return e},t,n):("number"==typeof t&&(n=t),Object(r.a)(function(){return e},n))}},function(e,t,n){"use strict";n.d(t,"a",function(){return a});var r=n(3),i=n(10);function a(){return function(e){return e.lift(new o)}}var o=function(){function e(){}return e.prototype.call=function(e,t){return t.subscribe(new u(e))},e}(),u=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return r.a(t,e),t.prototype._next=function(e){},t}(i.a)},function(e,t,n){"use strict";n.d(t,"a",function(){return l});var r=n(3),i=n(33),a=n(41),o=n(22),u=n(21),s=n(25),c={};function l(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var n=null,r=null;return Object(i.a)(e[e.length-1])&&(r=e.pop()),"function"==typeof e[e.length-1]&&(n=e.pop()),1===e.length&&Object(a.a)(e[0])&&(e=e[0]),Object(s.a)(e,r).lift(new f(n))}var f=function(){function e(e){this.resultSelector=e}return e.prototype.call=function(e,t){return t.subscribe(new d(e,this.resultSelector))},e}(),d=function(e){function t(t,n){var r=e.call(this,t)||this;return r.resultSelector=n,r.active=0,r.values=[],r.observables=[],r}return r.a(t,e),t.prototype._next=function(e){this.values.push(c),this.observables.push(e)},t.prototype._complete=function(){var e=this.observables,t=e.length;if(0===t)this.destination.complete();else{this.active=t,this.toRespond=t;for(var n=0;n<t;n++){var r=e[n];this.add(Object(u.a)(this,r,r,n))}}},t.prototype.notifyComplete=function(e){0==(this.active-=1)&&this.destination.complete()},t.prototype.notifyNext=function(e,t,n,r,i){var a=this.values,o=a[n],u=this.toRespond?o===c?--this.toRespond:this.toRespond:0;a[n]=t,0===u&&(this.resultSelector?this._tryResultSelector(a):this.destination.next(a.slice()))},t.prototype._tryResultSelector=function(e){var t;try{t=this.resultSelector.apply(this,e)}catch(e){return void this.destination.error(e)}this.destination.next(t)},t}(o.a)},function(e,t,n){"use strict";n.d(t,"a",function(){return u});var r=n(3),i=n(22),a=n(36),o=n(21);function u(e){return function(t){var n=new s(e),r=t.lift(n);return n.caught=r}}var s=function(){function e(e){this.selector=e}return e.prototype.call=function(e,t){return t.subscribe(new c(e,this.selector,this.caught))},e}(),c=function(e){function t(t,n,r){var i=e.call(this,t)||this;return i.selector=n,i.caught=r,i}return r.a(t,e),t.prototype.error=function(t){if(!this.isStopped){var n=void 0;try{n=this.selector(t,this.caught)}catch(t){return void e.prototype.error.call(this,t)}this._unsubscribeAndRecycle();var r=new a.a(this,void 0,void 0);this.add(r),Object(o.a)(this,n,void 0,void 0,r)}},t}(i.a)},function(e,t,n){"use strict";n.d(t,"a",function(){return u});var r=n(13),i=n(38),a=n(60),o=n(33);function u(e,t,n){void 0===e&&(e=0);var u=-1;return Object(a.a)(t)?u=Number(t)<1?1:Number(t):Object(o.a)(t)&&(n=t),Object(o.a)(n)||(n=i.a),new r.a(function(t){var r=Object(a.a)(e)?e:+e-n.now();return n.schedule(s,r,{index:0,period:u,subscriber:t})})}function s(e){var t=e.index,n=e.period,r=e.subscriber;if(r.next(t),!r.closed){if(-1===n)return r.complete();e.index=t+1,this.schedule(e,n)}}},function(e,t,n){"use strict";n.d(t,"a",function(){return u});var r=n(3),i=n(10),a=n(35),o=n(48);function u(e,t,n){return function(r){return r.lift(new s(e,t,n))}}var s=function(){function e(e,t,n){this.nextOrObserver=e,this.error=t,this.complete=n}return e.prototype.call=function(e,t){return t.subscribe(new c(e,this.nextOrObserver,this.error,this.complete))},e}(),c=function(e){function t(t,n,r,i){var u=e.call(this,t)||this;return u._tapNext=a.a,u._tapError=a.a,u._tapComplete=a.a,u._tapError=r||a.a,u._tapComplete=i||a.a,Object(o.a)(n)?(u._context=u,u._tapNext=n):n&&(u._context=n,u._tapNext=n.next||a.a,u._tapError=n.error||a.a,u._tapComplete=n.complete||a.a),u}return r.a(t,e),t.prototype._next=function(e){try{this._tapNext.call(this._context,e)}catch(e){return void this.destination.error(e)}this.destination.next(e)},t.prototype._error=function(e){try{this._tapError.call(this._context,e)}catch(e){return void this.destination.error(e)}this.destination.error(e)},t.prototype._complete=function(){try{this._tapComplete.call(this._context)}catch(e){return void this.destination.error(e)}return this.destination.complete()},t}(i.a)},function(e,t,n){"use strict";n.d(t,"a",function(){return i});var r=n(118);function i(e,t){return t?Object(r.a)(function(){return e},t):Object(r.a)(function(){return e})}},function(e,t,n){"use strict";n.d(t,"a",function(){return i});var r=n(127);function i(e,t,n){return void 0===e&&(e=Number.POSITIVE_INFINITY),void 0===t&&(t=Number.MAX_VALUE),function(i){return i.lift(function(e,t,n){var i,a,o=0,u=!1,s=!1;return function(c){o++,i&&!u||(u=!1,i=new r.a(e,t,n),a=c.subscribe({next:function(e){i.next(e)},error:function(e){u=!0,i.error(e)},complete:function(){s=!0,i.complete()}}));var l=i.subscribe(this);return function(){o--,l.unsubscribe(),a&&0===o&&s&&a.unsubscribe()}}}(e,t,n))}}},function(e,t,n){"use strict";n.d(t,"a",function(){return u});var r=n(96),i=n(92),a=n(43);function o(){return new a.a}function u(){return function(e){return Object(i.a)()(Object(r.a)(o)(e))}}}])});