/*! For license information please see lib.js.LICENSE */
!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t():"function"==typeof define&&define.amd?define([],t):"object"==typeof exports?exports.RxPlayer=t():e.RxPlayer=t()}(window,(function(){return function(e){var t={};function n(r){if(t[r])return t[r].exports;var i=t[r]={i:r,l:!1,exports:{}};return e[r].call(i.exports,i,i.exports,n),i.l=!0,i.exports}return n.m=e,n.c=t,n.d=function(e,t,r){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var i in e)n.d(r,i,function(t){return e[t]}.bind(null,i));return r},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=204)}([function(e,t,n){"use strict";var r=n(32),i="NONE",a=new(function(){function e(){this.error=r.a,this.warn=r.a,this.info=r.a,this.debug=r.a,this.LEVELS={NONE:0,ERROR:1,WARNING:2,INFO:3,DEBUG:4},this.currentLevel=i}var t=e.prototype;return t.setLevel=function(e){var t,n=this.LEVELS[e];"number"==typeof n?(t=n,this.currentLevel=e):(t=0,this.currentLevel="NONE"),this.error=t>=this.LEVELS.ERROR?console.error.bind(console):r.a,this.warn=t>=this.LEVELS.WARNING?console.warn.bind(console):r.a,this.info=t>=this.LEVELS.INFO?console.info.bind(console):r.a,this.debug=t>=this.LEVELS.DEBUG?console.log.bind(console):r.a},t.getLevel=function(){return this.currentLevel},e}());t.a=a},function(e,t,n){"use strict";n.d(t,"a",(function(){return O})),n.d(t,"r",(function(){return i})),n.d(t,"g",(function(){return a})),n.d(t,"h",(function(){return o})),n.d(t,"k",(function(){return u})),n.d(t,"f",(function(){return s})),n.d(t,"i",(function(){return c})),n.d(t,"b",(function(){return l})),n.d(t,"c",(function(){return f})),n.d(t,"d",(function(){return d})),n.d(t,"e",(function(){return p})),n.d(t,"p",(function(){return m})),n.d(t,"q",(function(){return g})),n.d(t,"m",(function(){return h})),n.d(t,"n",(function(){return v})),n.d(t,"o",(function(){return b})),n.d(t,"j",(function(){return y})),n.d(t,"l",(function(){return _}));var r=n(35);function i(e){for(var t=e.length,n=new Uint8Array(t),r=0;r<t;r++)n[r]=255&e.charCodeAt(r);return n}function a(e){return String.fromCharCode.apply(null,e)}function o(e){for(var t="",n=e.length,r=0;r<n;r+=2)t+=String.fromCharCode(e[r]);return t}function u(e){for(var t=e.length,n=new Uint8Array(t/2),r=0,i=0;r<t;r+=2,i++)n[i]=255&parseInt(e.substring(r,r+2),16);return n}function s(e,t){void 0===t&&(t="");for(var n="",r=0;r<e.byteLength;r++)n+=(e[r]>>>4).toString(16),n+=(15&e[r]).toString(16),t.length>0&&r<e.byteLength-1&&(n+=t);return n}function c(){for(var e,t=arguments.length,n=-1,r=0;++n<t;)r+="number"==typeof(e=n<0||arguments.length<=n?void 0:arguments[n])?e:e.length;var i=new Uint8Array(r),a=0;for(n=-1;++n<t;)"number"==typeof(e=n<0||arguments.length<=n?void 0:arguments[n])?a+=e:e.length>0&&(i.set(e,a),a+=e.length);return i}function l(e,t){return(e[t+0]<<8)+(e[t+1]<<0)}function f(e,t){return 65536*e[t+0]+256*e[t+1]+e[t+2]}function d(e,t){return 16777216*e[t+0]+65536*e[t+1]+256*e[t+2]+e[t+3]}function p(e,t){return 4294967296*(16777216*e[t+0]+65536*e[t+1]+256*e[t+2]+e[t+3])+16777216*e[t+4]+65536*e[t+5]+256*e[t+6]+e[t+7]}function h(e){return new Uint8Array([e>>>8&255,255&e])}function v(e){return new Uint8Array([e>>>24&255,e>>>16&255,e>>>8&255,255&e])}function b(e){var t=e%4294967296,n=(e-t)/4294967296;return new Uint8Array([n>>>24&255,n>>>16&255,n>>>8&255,255&n,t>>>24&255,t>>>16&255,t>>>8&255,255&t])}function m(e,t){return(e[t+0]<<0)+(e[t+1]<<8)}function g(e,t){return e[t+0]+256*e[t+1]+65536*e[t+2]+16777216*e[t+3]}function y(e){Object(r.b)(16===e.length,"UUID length should be 16");var t=i(e),n=t[0],a=t[1],o=t[2],u=t[3],c=t[4],l=t[5],f=t[6],d=t[7],p=t.subarray(8,10),h=t.subarray(10,16),v=new Uint8Array(16);return v[0]=u,v[1]=o,v[2]=a,v[3]=n,v[4]=l,v[5]=c,v[6]=d,v[7]=f,v.set(p,8),v.set(h,10),s(v)}function _(e,t){var n=new DataView(e),r=n.byteLength;if(r!==t.length)return!1;for(var i=0;i<r;i++)if(n.getUint8(i)!==t[i])return!1;return!0}function O(e,t){if(e.length!==t.length)return!1;for(var n=e.length-1;n>=0;n--)if(e[n]!==t[n])return!1;return!0}},function(e,t,n){"use strict";function r(e){return"string"==typeof e&&e.length>0}n.d(t,"a",(function(){return r}))},function(e,t,n){"use strict";t.a={DEFAULT_UNMUTED_VOLUME:.1,DEFAULT_REQUEST_TIMEOUT:3e4,DEFAULT_TEXT_TRACK_MODE:"native",DEFAULT_MANUAL_BITRATE_SWITCHING_MODE:"seamless",DEFAULT_AUTO_PLAY:!1,DEFAULT_SHOW_NATIVE_SUBTITLE:!0,DEFAULT_STOP_AT_END:!0,DEFAULT_WANTED_BUFFER_AHEAD:30,DEFAULT_MAX_BUFFER_AHEAD:1/0,DEFAULT_MAX_BUFFER_BEHIND:1/0,MAXIMUM_MAX_BUFFER_AHEAD:{text:18e3},MAXIMUM_MAX_BUFFER_BEHIND:{text:18e3},DEFAULT_INITIAL_BITRATES:{audio:0,video:0,other:0},DEFAULT_MAX_BITRATES:{audio:1/0,video:1/0,other:1/0},INACTIVITY_DELAY:6e4,DEFAULT_THROTTLE_WHEN_HIDDEN:!1,DEFAULT_THROTTLE_VIDEO_BITRATE_WHEN_HIDDEN:!1,DEFAULT_LIMIT_VIDEO_WIDTH:!1,DEFAULT_LIVE_GAP:{DEFAULT:10,LOW_LATENCY:3},BUFFER_DISCONTINUITY_THRESHOLD:1,BITRATE_REBUFFERING_RATIO:1.5,BUFFER_GC_GAPS:{CALM:240,BEEFY:30},DEFAULT_MAX_MANIFEST_REQUEST_RETRY:4,DEFAULT_MAX_PIPELINES_RETRY_ON_ERROR:4,DEFAULT_MAX_PIPELINES_RETRY_ON_OFFLINE:1/0,INITIAL_BACKOFF_DELAY_BASE:{REGULAR:200,LOW_LATENCY:50},MAX_BACKOFF_DELAY_BASE:{REGULAR:3e3,LOW_LATENCY:1e3},SAMPLING_INTERVAL_MEDIASOURCE:1e3,SAMPLING_INTERVAL_LOW_LATENCY:250,SAMPLING_INTERVAL_NO_MEDIASOURCE:500,ABR_MINIMUM_TOTAL_BYTES:15e4,ABR_MINIMUM_CHUNK_SIZE:16e3,ABR_STARVATION_FACTOR:{DEFAULT:.72,LOW_LATENCY:.64},ABR_REGULAR_FACTOR:{DEFAULT:.9,LOW_LATENCY:.9},ABR_STARVATION_GAP:{DEFAULT:5,LOW_LATENCY:5},OUT_OF_STARVATION_GAP:{DEFAULT:7,LOW_LATENCY:7},ABR_STARVATION_DURATION_DELTA:.1,ABR_FAST_EMA:2,ABR_SLOW_EMA:10,RESUME_GAP_AFTER_SEEKING:{DEFAULT:1.5,LOW_LATENCY:.5},RESUME_GAP_AFTER_NOT_ENOUGH_DATA:{DEFAULT:.5,LOW_LATENCY:.5},RESUME_GAP_AFTER_BUFFERING:{DEFAULT:5,LOW_LATENCY:.5},STALL_GAP:{DEFAULT:.5,LOW_LATENCY:.2},MAX_TIME_MISSING_FROM_COMPLETE_SEGMENT:.15,MAX_MANIFEST_BUFFERED_START_END_DIFFERENCE:.4,MAX_MANIFEST_BUFFERED_DURATION_DIFFERENCE:.3,MINIMUM_SEGMENT_SIZE:.005,APPEND_WINDOW_SECURITIES:{START:.2,END:.1},MAXIMUM_HTML_TEXT_TRACK_UPDATE_INTERVAL:50,TEXT_TRACK_SIZE_CHECKS_INTERVAL:250,BUFFER_PADDING:{audio:1,video:3,other:1},SEGMENT_PRIORITIES_STEPS:[6,14],EME_DEFAULT_WIDEVINE_ROBUSTNESSES:["HW_SECURE_ALL","HW_SECURE_DECODE","HW_SECURE_CRYPTO","SW_SECURE_DECODE","SW_SECURE_CRYPTO"],EME_KEY_SYSTEMS:{clearkey:["webkit-org.w3.clearkey","org.w3.clearkey"],widevine:["com.widevine.alpha"],playready:["com.microsoft.playready","com.chromecast.playready","com.youtube.playready"]},OUT_OF_SYNC_MANIFEST_REFRESH_DELAY:3e3,EME_MAX_SIMULTANEOUS_MEDIA_KEY_SESSIONS:50,FORCED_ENDED_THRESHOLD:.001,ADAPTATION_SWITCH_BUFFER_PADDINGS:{video:{before:.5,after:1},audio:{before:.5,after:2},text:{before:0,after:0},image:{before:0,after:0}},SOURCE_BUFFER_FLUSHING_INTERVAL:2e3}},function(e,t,n){"use strict";n.d(t,"a",(function(){return i}));var r=function(e,t){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)};function i(e,t){function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}},,,function(e,t,n){"use strict";var r=n(50),i=n(71),a=n.n(i),o=n(30);n.d(t,"a",(function(){return r})),function(){if(window.WebKitSourceBuffer&&!window.WebKitSourceBuffer.prototype.addEventListener){var e=window.WebKitSourceBuffer.prototype;for(var t in o.a.prototype)o.a.prototype.hasOwnProperty(t)&&(e[t]=o.a.prototype[t]);e._listeners=[],e.__emitUpdate=function(e,t){var n=this;a()((function(){n.trigger(e,t),n.updating=!1,n.trigger("updateend")}))},e.appendBuffer=function(e){if(this.updating)throw new Error("updating");this.trigger("updatestart"),this.updating=!0;try{this.append(e)}catch(e){return void this.__emitUpdate("error",e)}this.__emitUpdate("update")}}}()},function(e,t,n){"use strict";var r=n(10);var i=n(72),a=n(84);var o=n(52),u=n(47);function s(e){return e?1===e.length?e[0]:function(t){return e.reduce((function(e,t){return t(e)}),t)}:u.a}var c=n(43);n.d(t,"a",(function(){return l}));var l=function(){function e(e){this._isScalar=!1,e&&(this._subscribe=e)}return e.prototype.lift=function(t){var n=new e;return n.source=this,n.operator=t,n},e.prototype.subscribe=function(e,t,n){var o=this.operator,u=function(e,t,n){if(e){if(e instanceof r.a)return e;if(e[i.a])return e[i.a]()}return e||t||n?new r.a(e,t,n):new r.a(a.a)}(e,t,n);if(o?u.add(o.call(u,this.source)):u.add(this.source||c.a.useDeprecatedSynchronousErrorHandling&&!u.syncErrorThrowable?this._subscribe(u):this._trySubscribe(u)),c.a.useDeprecatedSynchronousErrorHandling&&u.syncErrorThrowable&&(u.syncErrorThrowable=!1,u.syncErrorThrown))throw u.syncErrorValue;return u},e.prototype._trySubscribe=function(e){try{return this._subscribe(e)}catch(t){c.a.useDeprecatedSynchronousErrorHandling&&(e.syncErrorThrown=!0,e.syncErrorValue=t),!function(e){for(;e;){var t=e,n=t.closed,i=t.destination,a=t.isStopped;if(n||a)return!1;e=i&&i instanceof r.a?i:null}return!0}(e)?console.warn(t):e.error(t)}},e.prototype.forEach=function(e,t){var n=this;return new(t=f(t))((function(t,r){var i;i=n.subscribe((function(t){try{e(t)}catch(e){r(e),i&&i.unsubscribe()}}),r,t)}))},e.prototype._subscribe=function(e){var t=this.source;return t&&t.subscribe(e)},e.prototype[o.a]=function(){return this},e.prototype.pipe=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return 0===e.length?this:s(e)(this)},e.prototype.toPromise=function(e){var t=this;return new(e=f(e))((function(e,n){var r;t.subscribe((function(e){return r=e}),(function(e){return n(e)}),(function(){return e(r)}))}))},e.create=function(t){return new e(t)},e}();function f(e){if(e||(e=c.a.Promise||Promise),!e)throw new Error("no Promise impl found");return e}},function(e,t,n){"use strict";t.a={transports:{},imageBuffer:null,imageParser:null,nativeTextTracksBuffer:null,nativeTextTracksParsers:{},htmlTextTracksBuffer:null,htmlTextTracksParsers:{},emeManager:null,directfile:null}},function(e,t,n){"use strict";n.d(t,"a",(function(){return l}));var r=n(4),i=n(59),a=n(84),o=n(20),u=n(72),s=n(43),c=n(62),l=function(e){function t(n,r,i){var o=e.call(this)||this;switch(o.syncErrorValue=null,o.syncErrorThrown=!1,o.syncErrorThrowable=!1,o.isStopped=!1,arguments.length){case 0:o.destination=a.a;break;case 1:if(!n){o.destination=a.a;break}if("object"==typeof n){n instanceof t?(o.syncErrorThrowable=n.syncErrorThrowable,o.destination=n,n.add(o)):(o.syncErrorThrowable=!0,o.destination=new f(o,n));break}default:o.syncErrorThrowable=!0,o.destination=new f(o,n,r,i)}return o}return r.a(t,e),t.prototype[u.a]=function(){return this},t.create=function(e,n,r){var i=new t(e,n,r);return i.syncErrorThrowable=!1,i},t.prototype.next=function(e){this.isStopped||this._next(e)},t.prototype.error=function(e){this.isStopped||(this.isStopped=!0,this._error(e))},t.prototype.complete=function(){this.isStopped||(this.isStopped=!0,this._complete())},t.prototype.unsubscribe=function(){this.closed||(this.isStopped=!0,e.prototype.unsubscribe.call(this))},t.prototype._next=function(e){this.destination.next(e)},t.prototype._error=function(e){this.destination.error(e),this.unsubscribe()},t.prototype._complete=function(){this.destination.complete(),this.unsubscribe()},t.prototype._unsubscribeAndRecycle=function(){var e=this._parentOrParents;return this._parentOrParents=null,this.unsubscribe(),this.closed=!1,this.isStopped=!1,this._parentOrParents=e,this},t}(o.a),f=function(e){function t(t,n,r,o){var u,s=e.call(this)||this;s._parentSubscriber=t;var c=s;return Object(i.a)(n)?u=n:n&&(u=n.next,r=n.error,o=n.complete,n!==a.a&&(c=Object.create(n),Object(i.a)(c.unsubscribe)&&s.add(c.unsubscribe.bind(c)),c.unsubscribe=s.unsubscribe.bind(s))),s._context=c,s._next=u,s._error=r,s._complete=o,s}return r.a(t,e),t.prototype.next=function(e){if(!this.isStopped&&this._next){var t=this._parentSubscriber;s.a.useDeprecatedSynchronousErrorHandling&&t.syncErrorThrowable?this.__tryOrSetError(t,this._next,e)&&this.unsubscribe():this.__tryOrUnsub(this._next,e)}},t.prototype.error=function(e){if(!this.isStopped){var t=this._parentSubscriber,n=s.a.useDeprecatedSynchronousErrorHandling;if(this._error)n&&t.syncErrorThrowable?(this.__tryOrSetError(t,this._error,e),this.unsubscribe()):(this.__tryOrUnsub(this._error,e),this.unsubscribe());else if(t.syncErrorThrowable)n?(t.syncErrorValue=e,t.syncErrorThrown=!0):Object(c.a)(e),this.unsubscribe();else{if(this.unsubscribe(),n)throw e;Object(c.a)(e)}}},t.prototype.complete=function(){var e=this;if(!this.isStopped){var t=this._parentSubscriber;if(this._complete){var n=function(){return e._complete.call(e._context)};s.a.useDeprecatedSynchronousErrorHandling&&t.syncErrorThrowable?(this.__tryOrSetError(t,n),this.unsubscribe()):(this.__tryOrUnsub(n),this.unsubscribe())}else this.unsubscribe()}},t.prototype.__tryOrUnsub=function(e,t){try{e.call(this._context,t)}catch(e){if(this.unsubscribe(),s.a.useDeprecatedSynchronousErrorHandling)throw e;Object(c.a)(e)}},t.prototype.__tryOrSetError=function(e,t,n){if(!s.a.useDeprecatedSynchronousErrorHandling)throw new Error("bad call");try{t.call(this._context,n)}catch(t){return s.a.useDeprecatedSynchronousErrorHandling?(e.syncErrorValue=t,e.syncErrorThrown=!0,!0):(Object(c.a)(t),!0)}return!1},t.prototype._unsubscribe=function(){var e=this._parentSubscriber;this._context=null,this._parentSubscriber=null,e.unsubscribe()},t}(l)},function(e,t,n){"use strict";var r=Object.getOwnPropertySymbols,i=Object.prototype.hasOwnProperty,a=Object.prototype.propertyIsEnumerable;function o(e){if(null==e)throw new TypeError("Object.assign cannot be called with null or undefined");return Object(e)}e.exports=function(){try{if(!Object.assign)return!1;var e=new String("abc");if(e[5]="de","5"===Object.getOwnPropertyNames(e)[0])return!1;for(var t={},n=0;n<10;n++)t["_"+String.fromCharCode(n)]=n;if("0123456789"!==Object.getOwnPropertyNames(t).map((function(e){return t[e]})).join(""))return!1;var r={};return"abcdefghijklmnopqrst".split("").forEach((function(e){r[e]=e})),"abcdefghijklmnopqrst"===Object.keys(Object.assign({},r)).join("")}catch(e){return!1}}()?Object.assign:function(e,t){for(var n,u,s=o(e),c=1;c<arguments.length;c++){for(var l in n=Object(arguments[c]))i.call(n,l)&&(s[l]=n[l]);if(r){u=r(n);for(var f=0;f<u.length;f++)a.call(n,u[f])&&(s[u[f]]=n[u[f]])}}return s}},function(e,t,n){"use strict";function r(e,t,n){if("function"==typeof Array.prototype.find)return e.find(t,n);for(var r=e.length>>>0,i=0;i<r;i++){var a=e[i];if(t.call(n,a,i,e))return a}}n.d(t,"a",(function(){return r}))},function(e,t,n){"use strict";function r(e,t,n){if("function"==typeof Array.prototype.includes)return e.includes(t,n);var r=e.length>>>0;if(0===r)return!1;for(var i,a,o=0|n,u=o>=0?Math.min(o,r-1):Math.max(r+o,0);u<r;){if((i=e[u])===(a=t)||"number"==typeof i&&"number"==typeof a&&isNaN(i)&&isNaN(a))return!0;u++}return!1}n.d(t,"a",(function(){return r}))},function(e,t,n){"use strict";function r(e){return null==e}n.d(t,"a",(function(){return r}))},function(e,t,n){"use strict";n.d(t,"a",(function(){return i}));var r=n(14);function i(){for(var e=0,t=arguments.length,n=new Array(t),i=0;i<t;i++)n[i]=arguments[i];for(var a=n.length;e<a;){var o=n[e];if(!Object(r.a)(o))return o;e++}}},function(e,t,n){"use strict";n.d(t,"a",(function(){return d})),n.d(t,"b",(function(){return f})),n.d(t,"c",(function(){return l})),n.d(t,"d",(function(){return c})),n.d(t,"e",(function(){return i})),n.d(t,"f",(function(){return r})),n.d(t,"g",(function(){return a})),n.d(t,"h",(function(){return o})),n.d(t,"i",(function(){return s})),n.d(t,"j",(function(){return u}));var r=/^(\d{2,}):(\d{2}):(\d{2}):(\d{2})\.?(\d+)?$/,i=/^(?:(\d{2,}):)?(\d{2}):(\d{2})$/,a=/^(?:(\d{2,}):)?(\d{2}):(\d{2}\.\d{2,})$/,o=/^(\d*\.?\d*)f$/,u=/^(\d*\.?\d*)t$/,s=/^(?:(\d*\.?\d*)h)?(?:(\d*\.?\d*)m)?(?:(\d*\.?\d*)s)?(?:(\d*\.?\d*)ms)?$/,c=/^(\d{1,2}|100)% (\d{1,2}|100)%$/,l=/^((?:\+|\-)?\d*(?:\.\d+)?)(px|em|c|%|rh|rw)$/,f=/^#([0-9A-f]{2})([0-9A-f]{2})([0-9A-f]{2})([0-9A-f]{2})$/,d=/^#([0-9A-f])([0-9A-f])([0-9A-f])([0-9A-f])$/},function(e,t,n){"use strict";function r(e,t,n){var r,i=e.repeatCount;return i>=0?i:(r=null!=t?t.start:null!=n?n:Number.MAX_VALUE,Math.ceil((r-e.start)/e.duration)-1)}function i(e,t,n){var i=e.start,a=e.duration;return a<=0?i:i+(r(e,t,n)+1)*a}function a(e,t){return e*t.timescale+t.indexTimeOffset}function o(e,t){return(e-t.indexTimeOffset)/t.timescale}function u(e,t,n){return[e*n,(e+t)*n]}n.d(t,"a",(function(){return r})),n.d(t,"c",(function(){return i})),n.d(t,"e",(function(){return a})),n.d(t,"b",(function(){return o})),n.d(t,"d",(function(){return u}))},,function(e,t,n){"use strict";n.d(t,"a",(function(){return f})),n.d(t,"b",(function(){return O})),n.d(t,"c",(function(){return h})),n.d(t,"d",(function(){return m})),n.d(t,"e",(function(){return p})),n.d(t,"f",(function(){return b})),n.d(t,"g",(function(){return d})),n.d(t,"h",(function(){return v})),n.d(t,"i",(function(){return g})),n.d(t,"j",(function(){return s})),n.d(t,"k",(function(){return u})),n.d(t,"l",(function(){return _}));var r=1/60;function i(e,t){return Math.abs(e-t)<r}function a(e,t){return{start:Math.min(e.start,t.start),end:Math.max(e.end,t.end)}}function o(e,t){return e.end<=t.start}function u(e,t){for(var n=0;n<e.length;n++)if(s(e[n],t))return!0;return!1}function s(e,t){var n=e.start,r=e.end;return n<=t&&t<r}function c(e,t){return s(e,t.start)||e.start<t.end&&t.end<e.end||s(t,e.start)}function l(e,t){return i(t.start,e.end)||i(t.end,e.start)}function f(e){for(var t=[],n=0;n<e.length;n++)t.push({start:e.start(n),end:e.end(n)});return t}function d(e,t){for(var n=e.length-1;n>=0;n--){var r=e.start(n);if(t>=r){var i=e.end(n);if(t<i)return{start:r,end:i}}}return null}function p(e,t){for(var n=e.length,r=0;r<n;r++){var i=e.start(r);if(t<i)return i-t}return 1/0}function h(e,t){for(var n=null,r=[],i=0;i<e.length;i++){var a=e.start(i),o=e.end(i);t<a||t>=o?r.push({start:a,end:o}):n={start:a,end:o}}return{outerRanges:r,innerRange:n}}function v(e,t){var n=d(e,t);return null!==n?n.end-n.start:0}function b(e,t){var n=d(e,t);return null!==n?t-n.start:0}function m(e,t){var n=d(e,t);return null!==n?n.end-t:1/0}function g(e,t){if(t.start===t.end)return e;for(var n=t,r=0;r<e.length;r++){var i=e[r],u=c(n,i),s=l(n,i);if(u||s)n=a(n,i),e.splice(r--,1);else if(0===r){if(o(n,e[0]))break}else if(o(e[r-1],n)&&o(n,i))break}return e.splice(r,0,n),function(e){for(var t=1;t<e.length;t++){var n=e[t-1],r=e[t];if(l(n,r)){var i=a(n,r);e.splice(--t,2,i)}}return e}(function(e){for(var t=0;t<e.length;t++){var n=e[t];n.start===n.end&&e.splice(t++,1)}return e}(e))}function y(e,t){for(var n=[],r=0;r<t.length;r++)c(e,t[r])&&n.push(t[r]);return n}function _(e,t){for(var n=[],r=0;r<e.length;r++){var i=e[r],a=y(i,t);if(a.length>0)for(var o=0;o<a.length;o++){var u=a[o];n.push({start:Math.max(i.start,u.start),end:Math.min(i.end,u.end)})}}return n}function O(e,t){for(var n=[],r=0;r<e.length;r++){var i=e[r],a=[],o=y(i,t);if(o.length>0)for(var u=0;u<o.length;u++){var s=o[u];a.push({start:Math.max(i.start,s.start),end:Math.min(i.end,s.end)})}if(0===a.length)n.push(i);else{for(var c=i.start,l=0;l<a.length;l++)a[l].start>c&&n.push({start:c,end:a[l].start}),c=a[l].end;c<i.end&&n.push({start:c,end:i.end})}}return n}},function(e,t,n){"use strict";var r=n(51),i=n(95),a=n(59),o=function(){function e(e){return Error.call(this),this.message=e?e.length+" errors occurred during unsubscription:\n"+e.map((function(e,t){return t+1+") "+e.toString()})).join("\n  "):"",this.name="UnsubscriptionError",this.errors=e,this}return e.prototype=Object.create(Error.prototype),e}();n.d(t,"a",(function(){return u}));var u=function(){function e(e){this.closed=!1,this._parentOrParents=null,this._subscriptions=null,e&&(this._unsubscribe=e)}var t;return e.prototype.unsubscribe=function(){var t;if(!this.closed){var n=this._parentOrParents,u=this._unsubscribe,c=this._subscriptions;if(this.closed=!0,this._parentOrParents=null,this._subscriptions=null,n instanceof e)n.remove(this);else if(null!==n)for(var l=0;l<n.length;++l){n[l].remove(this)}if(Object(a.a)(u))try{u.call(this)}catch(e){t=e instanceof o?s(e.errors):[e]}if(Object(r.a)(c)){l=-1;for(var f=c.length;++l<f;){var d=c[l];if(Object(i.a)(d))try{d.unsubscribe()}catch(e){t=t||[],e instanceof o?t=t.concat(s(e.errors)):t.push(e)}}}if(t)throw new o(t)}},e.prototype.add=function(t){var n=t;if(!t)return e.EMPTY;switch(typeof t){case"function":n=new e(t);case"object":if(n===this||n.closed||"function"!=typeof n.unsubscribe)return n;if(this.closed)return n.unsubscribe(),n;if(!(n instanceof e)){var r=n;(n=new e)._subscriptions=[r]}break;default:throw new Error("unrecognized teardown "+t+" added to Subscription.")}var i=n._parentOrParents;if(null===i)n._parentOrParents=this;else if(i instanceof e){if(i===this)return n;n._parentOrParents=[i,this]}else{if(-1!==i.indexOf(this))return n;i.push(this)}var a=this._subscriptions;return null===a?this._subscriptions=[n]:a.push(n),n},e.prototype.remove=function(e){var t=this._subscriptions;if(t){var n=t.indexOf(e);-1!==n&&t.splice(n,1)}},e.EMPTY=((t=new e).closed=!0,t),e}();function s(e){return e.reduce((function(e,t){return e.concat(t instanceof o?t.errors:t)}),[])}},function(e,t,n){"use strict";var r=n(8),i=n(61),a=n(26),o=n(14);t.a=function(e){if(e instanceof r.a)return e;if(!Object(o.a)(e)&&"function"==typeof e.subscribe){var t=e;return new r.a((function(e){var n=t.subscribe((function(t){e.next(t)}),(function(t){e.error(t)}),(function(){e.complete()}));return function(){Object(o.a)(n)||"function"!=typeof n.dispose?Object(o.a)(n)||"function"!=typeof n.unsubscribe||n.unsubscribe():n.dispose()}}))}return Object(o.a)(e)||"function"!=typeof e.then?Object(a.a)(e):Object(i.a)(e)}},function(e,t,n){"use strict";var r=n(8),i=n(3),a=n(134),o=n(2),u=n(14),s=i.a.DEFAULT_REQUEST_TIMEOUT,c="json";var l=function(e){var t={url:e.url,headers:e.headers,responseType:Object(u.a)(e.responseType)?c:e.responseType,timeout:Object(u.a)(e.timeout)?s:e.timeout};return new r.a((function(n){var r=t.url,i=t.headers,s=t.responseType,c=t.timeout,l=new XMLHttpRequest;if(l.open("GET",r,!0),c>=0&&(l.timeout=c),l.responseType=s,"document"===l.responseType&&l.overrideMimeType("text/xml"),!Object(u.a)(i)){var f=i;for(var d in f)f.hasOwnProperty(d)&&l.setRequestHeader(d,f[d])}var p=performance.now();return l.onerror=function(){n.error(new a.a(r,l.status,"ERROR_EVENT",l))},l.ontimeout=function(){n.error(new a.a(r,l.status,"TIMEOUT",l))},!0===e.sendProgressEvents&&(l.onprogress=function(e){var t=performance.now();n.next({type:"progress",value:{url:r,duration:t-p,sendingTime:p,currentTime:t,size:e.loaded,totalSize:e.total}})}),l.onload=function(e){if(4===l.readyState)if(l.status>=200&&l.status<300){var t,i=performance.now(),s=l.response instanceof ArrayBuffer?l.response.byteLength:e.total,c=l.status,f=l.responseType,d=Object(o.a)(l.responseURL)?l.responseURL:r;if(t="json"===f?"object"==typeof l.response?l.response:function(e){try{return JSON.parse(e)}catch(e){return null}}(l.responseText):l.response,Object(u.a)(t))return void n.error(new a.a(r,l.status,"PARSE_ERROR",l));n.next({type:"data-loaded",value:{status:c,url:d,responseType:f,sendingTime:p,receivedTime:i,duration:i-p,size:s,responseData:t}}),n.complete()}else n.error(new a.a(r,l.status,"ERROR_HTTP_CODE",l))},l.send(),function(){Object(u.a)(l)||4===l.readyState||l.abort()}}))};t.a=l},function(e,t,n){"use strict";n.d(t,"a",(function(){return a}));var r=n(13),i=[];function a(e){Object(r.a)(i,e)||(console.warn(e),i.push(e))}},function(e,t,n){"use strict";n.d(t,"b",(function(){return r})),n.d(t,"c",(function(){return i})),n.d(t,"a",(function(){return a})),n.d(t,"d",(function(){return u})),n.d(t,"e",(function(){return o}));var r=!!window.MSInputMethodContext&&!!document.documentMode,i="Microsoft Internet Explorer"===navigator.appName||"Netscape"===navigator.appName&&/(Trident|Edge)\//.test(navigator.userAgent),a=-1!==navigator.userAgent.toLowerCase().indexOf("firefox"),o=/SamsungBrowser/.test(navigator.userAgent),u=/Safari/i.test(navigator.userAgent)},function(e,t,n){"use strict";n.d(t,"a",(function(){return o})),n.d(t,"b",(function(){return c})),n.d(t,"c",(function(){return s})),n.d(t,"d",(function(){return l})),n.d(t,"e",(function(){return u}));var r=n(58),i=n(96),a=window,o=a.HTMLElement,u=null!=a.VTTCue?a.VTTCue:a.TextTrackCue,s=null!=a.MediaSource?a.MediaSource:null!=a.MozMediaSource?a.MozMediaSource:null!=a.WebKitMediaSource?a.WebKitMediaSource:a.MSMediaSource,c=Object(i.a)()?a.WebKitMediaKeys:null!=a.MediaKeys?a.MediaKeys:null!=a.MSMediaKeys?a.MSMediaKeys:null!=a.MozMediaKeys?a.MozMediaKeys:null!=a.WebKitMediaKeys?a.WebKitMediaKeys:function(){return function(){var e=function(){throw new r.a("MEDIA_KEYS_NOT_SUPPORTED","No `MediaKeys` implementation found in the current browser.")};this.create=e,this.createSession=e,this.isTypeSupported=e,this.setServerCertificate=e}}(),l={HAVE_NOTHING:0,HAVE_METADATA:1,HAVE_CURRENT_DATA:2,HAVE_FUTURE_DATA:3,HAVE_ENOUGH_DATA:4}},function(e,t,n){"use strict";n.d(t,"a",(function(){return o}));var r=n(49),i=n(68),a=n(77);function o(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var n=e[e.length-1];return Object(r.a)(n)?(e.pop(),Object(a.a)(e,n)):Object(i.a)(e)}},function(e,t,n){"use strict";n.d(t,"a",(function(){return o}));var r=n(53),i=n(125),a=n(8);function o(e,t,n,o,u){if(void 0===u&&(u=new r.a(e,n,o)),!u.closed)return t instanceof a.a?t.subscribe(u):Object(i.a)(t)(u)}},function(e,t,n){"use strict";n.d(t,"a",(function(){return i}));var r=n(4),i=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return r.a(t,e),t.prototype.notifyNext=function(e,t,n,r,i){this.destination.next(t)},t.prototype.notifyError=function(e,t){this.destination.error(e)},t.prototype.notifyComplete=function(e){this.destination.complete()},t}(n(10).a)},function(e,t,n){"use strict";var r={loaded:function(e){return{type:"loaded",value:{sourceBuffersStore:e}}},decipherabilityUpdate:function(e){return{type:"decipherabilityUpdate",value:e}},manifestReady:function(e){return{type:"manifestReady",value:{manifest:e}}},manifestUpdate:function(){return{type:"manifestUpdate",value:null}},nullRepresentation:function(e,t){return{type:"representationChange",value:{type:e,representation:null,period:t}}},reloadingMediaSource:function(){return{type:"reloading-media-source",value:void 0}},speedChanged:function(e){return{type:"speedChanged",value:e}},stalled:function(e){return{type:"stalled",value:e}},warning:function(e){return{type:"warning",value:e}}};t.a=r},function(e,t,n){"use strict";n.d(t,"a",(function(){return o})),n.d(t,"b",(function(){return u}));var r=n(8),i=n(0),a=n(14),o=function(){function e(){this._listeners={}}var t=e.prototype;return t.addEventListener=function(e,t){var n=this._listeners[e];Array.isArray(n)?n.push(t):this._listeners[e]=[t]},t.removeEventListener=function(e,t){if(Object(a.a)(e))this._listeners={};else{var n=this._listeners[e];if(Array.isArray(n))if(Object(a.a)(t))delete this._listeners[e];else{var r=n.indexOf(t);-1!==r&&n.splice(r,1),0===n.length&&delete this._listeners[e]}}},t.trigger=function(e,t){var n=this._listeners[e];Array.isArray(n)&&n.slice().forEach((function(e){try{e(t)}catch(e){i.a.error(e,e instanceof Error?e.stack:null)}}))},e}();function u(e,t){return new r.a((function(n){function r(e){n.next(e)}return e.addEventListener(t,r),function(){e.removeEventListener(t,r)}}))}},function(e,t,n){"use strict";n.d(t,"a",(function(){return a}));var r=n(4),i=n(10);function a(e,t){return function(n){if("function"!=typeof e)throw new TypeError("argument is not a function. Are you looking for `mapTo()`?");return n.lift(new o(e,t))}}var o=function(){function e(e,t){this.project=e,this.thisArg=t}return e.prototype.call=function(e,t){return t.subscribe(new u(e,this.project,this.thisArg))},e}(),u=function(e){function t(t,n,r){var i=e.call(this,t)||this;return i.project=n,i.count=0,i.thisArg=r||i,i}return r.a(t,e),t.prototype._next=function(e){var t;try{t=this.project.call(this.thisArg,e,this.count++)}catch(e){return void this.destination.error(e)}this.destination.next(t)},t}(i.a)},function(e,t,n){"use strict";t.a=function(){}},function(e,t,n){"use strict";var r=n(169),i=n.n(r);t.a="function"==typeof Promise?Promise:i.a},function(e,t,n){"use strict";var r=n(12),i=n(13),a=n(2);function o(e,t,n){if("function"==typeof String.prototype.startsWith)return e.startsWith(t,n);var r="number"==typeof n?Math.max(n,0):0;return e.substring(r,r+t.length)===t}function u(e,t,n,o){for(var u={},s=e.slice(),c=0;c<=t.length-1;c++){var l=t[c];if(void 0!==l){var f=function(){var e=void 0,t=void 0;if(l.nodeType===Node.ELEMENT_NODE)for(var c=l,f=0;f<=c.attributes.length-1;f++){var d=c.attributes[f],p=d.name;if("style"===p)e=d.value;else if("region"===p)t=d.value;else{var h=p.substring(4);if(Object(i.a)(s,h)&&(u[h]=d.value,s.splice(f,1),0===s.length))return{v:u}}}if(Object(a.a)(e)){var v=Object(r.a)(n,(function(t){return t.id===e}));if(void 0!==v)for(var b=0;b<=s.length-1;b++){var m=s[b];if(!Object(a.a)(u[m])&&Object(a.a)(v.style[m])){if(u[m]=v.style[m],s.splice(b,1),0===s.length)return{v:u};b--}}}if(Object(a.a)(t)){var g=Object(r.a)(o,(function(e){return e.id===t}));if(void 0!==g)for(var y=0;y<=s.length-1;y++){var _=s[y];if(!Object(a.a)(u[_])&&Object(a.a)(g.style[_])){if(u[_]=g.style[_],s.splice(y,1),0===s.length)return{v:u};y--}}}}();if("object"==typeof f)return f.v}}return u}function s(e){if(e.nodeType!==Node.ELEMENT_NODE)return{};for(var t=e,n={},r=0;r<=t.attributes.length-1;r++){var i=t.attributes[r];if(o(i.name,"tts"))n[i.name.substring(4)]=i.value}return n}n.d(t,"a",(function(){return u})),n.d(t,"b",(function(){return s}))},function(e,t,n){"use strict";n.d(t,"b",(function(){return a})),n.d(t,"a",(function(){return o}));var r=n(217),i=n(14);function a(e,t){if(!e)throw new r.a(void 0===t?"invalid assertion":t)}function o(e,t,n){for(var r in void 0===n&&(n="object"),a(!Object(i.a)(e),n+" should be an object"),t)t.hasOwnProperty(r)&&a(typeof e[r]===t[r],n+" should have property "+r+" as a "+t[r])}},function(e,t,n){"use strict";n.d(t,"a",(function(){return i}));var r=n(63);function i(e,t){try{return e(t)}catch(e){return Object(r.a)(e)}}},function(e,t,n){"use strict";n.d(t,"b",(function(){return r})),n.d(t,"c",(function(){return i})),n.d(t,"a",(function(){return a}));var r={NETWORK_ERROR:"NETWORK_ERROR",MEDIA_ERROR:"MEDIA_ERROR",ENCRYPTED_MEDIA_ERROR:"ENCRYPTED_MEDIA_ERROR",OTHER_ERROR:"OTHER_ERROR"},i={TIMEOUT:"TIMEOUT",ERROR_EVENT:"ERROR_EVENT",ERROR_HTTP_CODE:"ERROR_HTTP_CODE",PARSE_ERROR:"PARSE_ERROR"},a={PIPELINE_LOAD_ERROR:"PIPELINE_LOAD_ERROR",PIPELINE_PARSE_ERROR:"PIPELINE_PARSE_ERROR",INTEGRITY_ERROR:"INTEGRITY_ERROR",MANIFEST_PARSE_ERROR:"MANIFEST_PARSE_ERROR",MANIFEST_INCOMPATIBLE_CODECS_ERROR:"MANIFEST_INCOMPATIBLE_CODECS_ERROR",MANIFEST_UNSUPPORTED_ADAPTATION_TYPE:"MANIFEST_UNSUPPORTED_ADAPTATION_TYPE",MEDIA_STARTING_TIME_NOT_FOUND:"MEDIA_STARTING_TIME_NOT_FOUND",MEDIA_TIME_BEFORE_MANIFEST:"MEDIA_TIME_BEFORE_MANIFEST",MEDIA_TIME_AFTER_MANIFEST:"MEDIA_TIME_AFTER_MANIFEST",MEDIA_TIME_NOT_FOUND:"MEDIA_TIME_NOT_FOUND",NO_PLAYABLE_REPRESENTATION:"NO_PLAYABLE_REPRESENTATION",MEDIA_IS_ENCRYPTED_ERROR:"MEDIA_IS_ENCRYPTED_ERROR",CREATE_MEDIA_KEYS_ERROR:"CREATE_MEDIA_KEYS_ERROR",KEY_ERROR:"KEY_ERROR",KEY_STATUS_CHANGE_ERROR:"KEY_STATUS_CHANGE_ERROR",KEY_UPDATE_ERROR:"KEY_UPDATE_ERROR",KEY_LOAD_ERROR:"KEY_LOAD_ERROR",KEY_LOAD_TIMEOUT:"KEY_LOAD_TIMEOUT",KEY_GENERATE_REQUEST_ERROR:"KEY_GENERATE_REQUEST_ERROR",INCOMPATIBLE_KEYSYSTEMS:"INCOMPATIBLE_KEYSYSTEMS",INVALID_ENCRYPTED_EVENT:"INVALID_ENCRYPTED_EVENT",INVALID_KEY_SYSTEM:"INVALID_KEY_SYSTEM",LICENSE_SERVER_CERTIFICATE_ERROR:"LICENSE_SERVER_CERTIFICATE_ERROR",MULTIPLE_SESSIONS_SAME_INIT_DATA:"MULTIPLE_SESSIONS_SAME_INIT_DATA",BUFFER_APPEND_ERROR:"BUFFER_APPEND_ERROR",BUFFER_FULL_ERROR:"BUFFER_FULL_ERROR",BUFFER_TYPE_UNKNOWN:"BUFFER_TYPE_UNKNOWN",MEDIA_ERR_BLOCKED_AUTOPLAY:"MEDIA_ERR_BLOCKED_AUTOPLAY",MEDIA_ERR_PLAY_NOT_ALLOWED:"MEDIA_ERR_PLAY_NOT_ALLOWED",MEDIA_ERR_NOT_LOADED_METADATA:"MEDIA_ERR_NOT_LOADED_METADATA",MEDIA_ERR_ABORTED:"MEDIA_ERR_ABORTED",MEDIA_ERR_NETWORK:"MEDIA_ERR_NETWORK",MEDIA_ERR_DECODE:"MEDIA_ERR_DECODE",MEDIA_ERR_SRC_NOT_SUPPORTED:"MEDIA_ERR_SRC_NOT_SUPPORTED",MEDIA_ERR_UNKNOWN:"MEDIA_ERR_UNKNOWN",MEDIA_SOURCE_NOT_SUPPORTED:"MEDIA_SOURCE_NOT_SUPPORTED",MEDIA_KEYS_NOT_SUPPORTED:"MEDIA_KEYS_NOT_SUPPORTED",NONE:"NONE"}},function(e,t,n){"use strict";function r(e){for(var t=0,n=0;n<e.length;n++)t=(t<<5)-t+e[n],t&=t;return t}n.d(t,"a",(function(){return r}))},,function(e,t,n){"use strict";var r=new WeakMap;t.a={setState:function(e,t){r.set(e,t)},getState:function(e){var t=r.get(e);return null==t?null:t},clearState:function(e){r.set(e,null)}}},function(e,t,n){"use strict";function r(){var e=0;return function(){return String(e++)}}n.d(t,"a",(function(){return r}))},function(e,t,n){"use strict";n.d(t,"a",(function(){return a})),n.d(t,"b",(function(){return o}));var r=/^(?:[a-z]+:)?\/\//i,i=/\/\.{1,2}\//;function a(){var e=arguments.length;if(0===e)return"";for(var t="",n=0;n<e;n++){var a=n<0||arguments.length<=n?void 0:arguments[n];"string"==typeof a&&""!==a&&(r.test(a)?t=a:("/"===a[0]&&(a=a.substring(1)),"/"===t[t.length-1]&&(t=t.substring(0,t.length-1)),t=t+"/"+a))}return function(e){if(!i.test(e))return e;for(var t=[],n=e.split("/"),r=0,a=n.length;r<a;r++)if(".."===n[r])t.pop();else{if("."===n[r])continue;t.push(n[r])}return t.join("/")}(t)}function o(e){var t=e.lastIndexOf("/");return t>=0?e.substring(0,t+1):e}},function(e,t,n){"use strict";n.d(t,"a",(function(){return i}));var r=!1,i={Promise:void 0,set useDeprecatedSynchronousErrorHandling(e){e&&(new Error).stack;r=e},get useDeprecatedSynchronousErrorHandling(){return r}}},function(e,t,n){"use strict";n.d(t,"a",(function(){return i}));var r=n(83),i=new(n(82).a)(r.a)},function(e,t,n){"use strict";n.d(t,"b",(function(){return l})),n.d(t,"a",(function(){return f}));var r=n(4),i=n(8),a=n(10),o=n(20),u=n(55),s=n(102),c=n(72),l=function(e){function t(t){var n=e.call(this,t)||this;return n.destination=t,n}return r.a(t,e),t}(a.a),f=function(e){function t(){var t=e.call(this)||this;return t.observers=[],t.closed=!1,t.isStopped=!1,t.hasError=!1,t.thrownError=null,t}return r.a(t,e),t.prototype[c.a]=function(){return new l(this)},t.prototype.lift=function(e){var t=new d(this,this);return t.operator=e,t},t.prototype.next=function(e){if(this.closed)throw new u.a;if(!this.isStopped)for(var t=this.observers,n=t.length,r=t.slice(),i=0;i<n;i++)r[i].next(e)},t.prototype.error=function(e){if(this.closed)throw new u.a;this.hasError=!0,this.thrownError=e,this.isStopped=!0;for(var t=this.observers,n=t.length,r=t.slice(),i=0;i<n;i++)r[i].error(e);this.observers.length=0},t.prototype.complete=function(){if(this.closed)throw new u.a;this.isStopped=!0;for(var e=this.observers,t=e.length,n=e.slice(),r=0;r<t;r++)n[r].complete();this.observers.length=0},t.prototype.unsubscribe=function(){this.isStopped=!0,this.closed=!0,this.observers=null},t.prototype._trySubscribe=function(t){if(this.closed)throw new u.a;return e.prototype._trySubscribe.call(this,t)},t.prototype._subscribe=function(e){if(this.closed)throw new u.a;return this.hasError?(e.error(this.thrownError),o.a.EMPTY):this.isStopped?(e.complete(),o.a.EMPTY):(this.observers.push(e),new s.a(this,e))},t.prototype.asObservable=function(){var e=new i.a;return e.source=this,e},t.create=function(e,t){return new d(e,t)},t}(i.a),d=function(e){function t(t,n){var r=e.call(this)||this;return r.destination=t,r.source=n,r}return r.a(t,e),t.prototype.next=function(e){var t=this.destination;t&&t.next&&t.next(e)},t.prototype.error=function(e){var t=this.destination;t&&t.error&&this.destination.error(e)},t.prototype.complete=function(){var e=this.destination;e&&e.complete&&this.destination.complete()},t.prototype._subscribe=function(e){return this.source?this.source.subscribe(e):o.a.EMPTY},t}(f)},function(e,t,n){"use strict";function r(e){var t=e[0],n=e[1];return n===1/0?"bytes="+t+"-":"bytes="+t+"-"+n}n.d(t,"a",(function(){return r}))},function(e,t,n){"use strict";function r(){}n.d(t,"a",(function(){return r}))},function(e,t,n){"use strict";n.d(t,"a",(function(){return c}));var r=n(4),i=n(27),a=n(28),o=n(53),u=n(31),s=n(61);function c(e,t,n){return void 0===n&&(n=Number.POSITIVE_INFINITY),"function"==typeof t?function(r){return r.pipe(c((function(n,r){return Object(s.a)(e(n,r)).pipe(Object(u.a)((function(e,i){return t(n,e,r,i)})))}),n))}:("number"==typeof t&&(n=t),function(t){return t.lift(new l(e,n))})}var l=function(){function e(e,t){void 0===t&&(t=Number.POSITIVE_INFINITY),this.project=e,this.concurrent=t}return e.prototype.call=function(e,t){return t.subscribe(new f(e,this.project,this.concurrent))},e}(),f=function(e){function t(t,n,r){void 0===r&&(r=Number.POSITIVE_INFINITY);var i=e.call(this,t)||this;return i.project=n,i.concurrent=r,i.hasCompleted=!1,i.buffer=[],i.active=0,i.index=0,i}return r.a(t,e),t.prototype._next=function(e){this.active<this.concurrent?this._tryNext(e):this.buffer.push(e)},t.prototype._tryNext=function(e){var t,n=this.index++;try{t=this.project(e,n)}catch(e){return void this.destination.error(e)}this.active++,this._innerSub(t,e,n)},t.prototype._innerSub=function(e,t,n){var r=new o.a(this,void 0,void 0);this.destination.add(r),Object(i.a)(this,e,t,n,r)},t.prototype._complete=function(){this.hasCompleted=!0,0===this.active&&0===this.buffer.length&&this.destination.complete(),this.unsubscribe()},t.prototype.notifyNext=function(e,t,n,r,i){this.destination.next(t)},t.prototype.notifyComplete=function(e){var t=this.buffer;this.remove(e),this.active--,t.length>0?this._next(t.shift()):0===this.active&&this.hasCompleted&&this.destination.complete()},t}(a.a)},function(e,t,n){"use strict";function r(e){return e&&"function"==typeof e.schedule}n.d(t,"a",(function(){return r}))},function(e,t,n){"use strict";n.r(t);var r=n(215),i=n(8),a=n(47),o=new i.a(a.a);var u=n(85),s=n(76),c=n(26),l=n(224),f=n(216),d=n(31),p=n(175),h=n(144),v=n(131),b=n(4),m=n(44),g=n(101),y=n(10),_=n(75);function O(e,t){void 0===t&&(t=m.a);var n=Object(g.a)(e)?+e-t.now():Math.abs(e);return function(e){return e.lift(new E(n,t))}}var E=function(){function e(e,t){this.delay=e,this.scheduler=t}return e.prototype.call=function(e,t){return t.subscribe(new w(e,this.delay,this.scheduler))},e}(),w=function(e){function t(t,n,r){var i=e.call(this,t)||this;return i.delay=n,i.scheduler=r,i.queue=[],i.active=!1,i.errored=!1,i}return b.a(t,e),t.dispatch=function(e){for(var t=e.source,n=t.queue,r=e.scheduler,i=e.destination;n.length>0&&n[0].time-r.now()<=0;)n.shift().notification.observe(i);if(n.length>0){var a=Math.max(0,n[0].time-r.now());this.schedule(e,a)}else this.unsubscribe(),t.active=!1},t.prototype._schedule=function(e){this.active=!0,this.destination.add(e.schedule(t.dispatch,this.delay,{source:this,destination:this.destination,scheduler:e}))},t.prototype.scheduleNotification=function(e){if(!0!==this.errored){var t=this.scheduler,n=new j(t.now()+this.delay,e);this.queue.push(n),!1===this.active&&this._schedule(t)}},t.prototype._next=function(e){this.scheduleNotification(_.a.createNext(e))},t.prototype._error=function(e){this.errored=!0,this.queue=[],this.destination.error(e),this.unsubscribe()},t.prototype._complete=function(){this.scheduleNotification(_.a.createComplete()),this.unsubscribe()},t}(y.a),j=function(){return function(e,t){this.time=e,this.notification=t}}(),T=n(176),S=n(28),A=n(27),x={leading:!0,trailing:!1};S.a;var k=function(){function e(e,t,n,r){this.duration=e,this.scheduler=t,this.leading=n,this.trailing=r}return e.prototype.call=function(e,t){return t.subscribe(new R(e,this.duration,this.scheduler,this.leading,this.trailing))},e}(),R=function(e){function t(t,n,r,i,a){var o=e.call(this,t)||this;return o.duration=n,o.scheduler=r,o.leading=i,o.trailing=a,o._hasTrailingValue=!1,o._trailingValue=null,o}return b.a(t,e),t.prototype._next=function(e){this.throttled?this.trailing&&(this._trailingValue=e,this._hasTrailingValue=!0):(this.add(this.throttled=this.scheduler.schedule(I,this.duration,{subscriber:this})),this.leading?this.destination.next(e):this.trailing&&(this._trailingValue=e,this._hasTrailingValue=!0))},t.prototype._complete=function(){this._hasTrailingValue?(this.destination.next(this._trailingValue),this.destination.complete()):this.destination.complete()},t.prototype.clearThrottle=function(){var e=this.throttled;e&&(this.trailing&&this._hasTrailingValue&&(this.destination.next(this._trailingValue),this._trailingValue=null,this._hasTrailingValue=!1),e.unsubscribe(),this.remove(e),this.throttled=null)},t}(y.a);function I(e){e.subscriber.clearThrottle()}var M=n(3),N=n(2),C=n(25);n.d(t,"onPictureInPictureEvent$",(function(){return W})),n.d(t,"isActive",(function(){return $})),n.d(t,"isVideoVisible",(function(){return V})),n.d(t,"videoWidth$",(function(){return H})),n.d(t,"onPlayPause$",(function(){return Z})),n.d(t,"onTextTrackChanges$",(function(){return J})),n.d(t,"onLoadedMetadata$",(function(){return K})),n.d(t,"onSeeking$",(function(){return Y})),n.d(t,"onSeeked$",(function(){return G})),n.d(t,"onEnded$",(function(){return q})),n.d(t,"onTimeUpdate$",(function(){return X})),n.d(t,"onFullscreenChange$",(function(){return Q})),n.d(t,"onSourceOpen$",(function(){return ee})),n.d(t,"onUpdate$",(function(){return te})),n.d(t,"onRemoveSourceBuffers$",(function(){return ne})),n.d(t,"onEncrypted$",(function(){return re})),n.d(t,"onKeyMessage$",(function(){return ie})),n.d(t,"onKeyAdded$",(function(){return ae})),n.d(t,"onKeyError$",(function(){return oe})),n.d(t,"onKeyStatusesChange$",(function(){return ue}));var D=["","webkit","moz","ms"],P=M.a.INACTIVITY_DELAY,B=null==window.devicePixelRatio||0===window.devicePixelRatio?1:window.devicePixelRatio;function L(e,t){return t.filter((function(t){return function(e,t){var n=document.createElement(e.tagName),r="on"+t;return r in n||(n.setAttribute(r,"return;"),"function"==typeof n[r])}(e,t)}))[0]}function U(e,t){var n,i=function(e,t){return e.reduce((function(e,n){return e.concat((null==t?D:t).map((function(e){return e+n})))}),[])}(e,t);return function(e){return e instanceof C.a?(void 0===n&&(n=L(e,i)),Object(N.a)(n)?Object(r.a)(e,n):o):u.a.apply(void 0,i.map((function(t){return Object(r.a)(e,t)})))}}function F(){var e,t=document;null!=t.hidden?e="":null!=t.mozHidden?e="moz":null!=t.msHidden?e="ms":null!=t.webkitHidden&&(e="webkit");var n=Object(N.a)(e)?e+"Hidden":"hidden",i=Object(N.a)(e)?e+"visibilitychange":"visibilitychange";return Object(s.a)((function(){var e=document[n];return Object(r.a)(document,i).pipe(Object(d.a)((function(){return!document[n]})),Object(p.a)(!e),Object(h.a)())}))}function $(){return F().pipe(Object(v.a)((function(e){return e?Object(c.a)(e):Object(c.a)(e).pipe(O(P))})))}function z(e,t){var n=t.width,r=t.height/(e.clientHeight/e.clientWidth);return Math.min(n,r)}function W(e){return Object(s.a)((function(){if(e.webkitSupportsPresentationMode&&"function"==typeof e.webkitSetPresentationMode){var t="picture-in-picture"===e.webkitPresentationMode;return Object(r.a)(e,"webkitpresentationmodechanged").pipe(Object(d.a)((function(){return{isEnabled:"picture-in-picture"===e.webkitPresentationMode,pipWindow:null}})),Object(p.a)({isEnabled:t,pipWindow:null}))}var n={isEnabled:document.pictureInPictureElement&&document.pictureInPictureElement===e,pipWindow:null};return Object(u.a)(Object(r.a)(e,"enterpictureinpicture").pipe(Object(d.a)((function(e){return{isEnabled:!0,pipWindow:e.pictureInPictureWindow}}))),Object(r.a)(e,"leavepictureinpicture").pipe(Object(T.a)({isEnabled:!1,pipWindow:null}))).pipe(Object(p.a)(n))}))}function V(e){return Object(l.a)([F(),e]).pipe(Object(v.a)((function(e){var t=e[0];return e[1].isEnabled||t?Object(c.a)(!0):Object(c.a)(!1).pipe(O(P))})),Object(h.a)())}function H(e,t){return Object(l.a)([t,Object(f.a)(2e4).pipe(Object(p.a)(null)),Object(r.a)(window,"resize").pipe((n=500,void 0===i&&(i=m.a),void 0===a&&(a=x),function(e){return e.lift(new k(n,i,a.leading,a.trailing))}),Object(p.a)(null))]).pipe(Object(v.a)((function(t){var n=t[0];if(n.isEnabled){if(null!=n.pipWindow){var i=n.pipWindow,a=z(e,i);return Object(r.a)(i,"resize").pipe(Object(p.a)(a*B),Object(d.a)((function(){return z(e,i)*B})))}return Object(c.a)(1/0)}return Object(c.a)(e.clientWidth*B)})),Object(h.a)());var n,i,a}var K=U(["loadedmetadata"]),Y=U(["seeking"]),G=U(["seeked"]),q=U(["ended"]),X=U(["timeupdate"]),Q=U(["fullscreenchange","FullscreenChange"],D.concat("MS")),Z=function(e){return Object(u.a)(U(["play"])(e),U(["pause"])(e))},J=function(e){return Object(u.a)(U(["addtrack"])(e),U(["removetrack"])(e))},ee=U(["sourceopen","webkitsourceopen"]),te=U(["update"]),ne=U(["onremovesourcebuffer"]),re=U(["encrypted","needkey"]),ie=U(["keymessage","message"]),ae=U(["keyadded","ready"]),oe=U(["keyerror","error"]),ue=U(["keystatuseschange"])},function(e,t,n){"use strict";n.d(t,"a",(function(){return r}));var r=function(){return Array.isArray||function(e){return e&&"number"==typeof e.length}}()},function(e,t,n){"use strict";n.d(t,"a",(function(){return r}));var r=function(){return"function"==typeof Symbol&&Symbol.observable||"@@observable"}()},function(e,t,n){"use strict";n.d(t,"a",(function(){return i}));var r=n(4),i=function(e){function t(t,n,r){var i=e.call(this)||this;return i.parent=t,i.outerValue=n,i.outerIndex=r,i.index=0,i}return r.a(t,e),t.prototype._next=function(e){this.parent.notifyNext(this.outerValue,e,this.outerIndex,this.index++,this)},t.prototype._error=function(e){this.parent.notifyError(e,this),this.unsubscribe()},t.prototype._complete=function(){this.parent.notifyComplete(this),this.unsubscribe()},t}(n(10).a)},function(e,t,n){"use strict";n.d(t,"a",(function(){return i})),n.d(t,"b",(function(){return a}));var r=n(8),i=new r.a((function(e){return e.complete()}));function a(e){return e?function(e){return new r.a((function(t){return e.schedule((function(){return t.complete()}))}))}(e):i}},function(e,t,n){"use strict";n.d(t,"a",(function(){return r}));var r=function(){function e(){return Error.call(this),this.message="object unsubscribed",this.name="ObjectUnsubscribedError",this}return e.prototype=Object.create(Error.prototype),e}()},function(e,t,n){"use strict";n.d(t,"a",(function(){return a})),n.d(t,"b",(function(){return i})),n.d(t,"c",(function(){return o})),n.d(t,"d",(function(){return u}));var r=n(1);function i(e,t){var n=o(e,t);return null!=n?e.subarray(n[0]+8,n[1]):null}function a(e,t){var n=o(e,t);return null!=n?e.subarray(n[0],n[1]):null}function o(e,t){for(var n,i=e.length,a=0,o=0;a+8<i;){if(o=Object(r.d)(e,a),n=Object(r.d)(e,a+4),o<=0)throw new Error("ISOBMFF: Size out of range");if(n===t)break;a+=o}return a<i?[a,a+o]:null}function u(e,t,n,i,a){for(var o,u=e.length,s=0;s<u;s+=o)if(o=Object(r.d)(e,s),1970628964===Object(r.d)(e,s+4)&&Object(r.d)(e,s+8)===t&&Object(r.d)(e,s+12)===n&&Object(r.d)(e,s+16)===i&&Object(r.d)(e,s+20)===a)return e.subarray(s+24,s+o)}},function(e,t,n){"use strict";function r(e){return e.getElementsByTagName("body")[0]}function i(e){return e.getElementsByTagName("style")}function a(e){return e.getElementsByTagName("region")}function o(e){return e.getElementsByTagName("p")}n.d(t,"a",(function(){return r})),n.d(t,"c",(function(){return i})),n.d(t,"b",(function(){return a})),n.d(t,"d",(function(){return o}))},function(e,t,n){"use strict";n.d(t,"a",(function(){return c}));var r=n(37),i=n(66);function a(e){var t="function"==typeof Map?new Map:void 0;return(a=function(e){if(null===e||(n=e,-1===Function.toString.call(n).indexOf("[native code]")))return e;var n;if("function"!=typeof e)throw new TypeError("Super expression must either be null or a function");if(void 0!==t){if(t.has(e))return t.get(e);t.set(e,r)}function r(){return o(e,arguments,s(this).constructor)}return r.prototype=Object.create(e.prototype,{constructor:{value:r,enumerable:!1,writable:!0,configurable:!0}}),u(r,e)})(e)}function o(e,t,n){return(o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}()?Reflect.construct:function(e,t,n){var r=[null];r.push.apply(r,t);var i=new(Function.bind.apply(e,r));return n&&u(i,n.prototype),i}).apply(null,arguments)}function u(e,t){return(u=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function s(e){return(s=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var c=function(e){var t,n;function a(t,n){var o;return o=e.call(this)||this,Object.setPrototypeOf(function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(o),a.prototype),o.name="MediaError",o.type=r.b.MEDIA_ERROR,o.code=t,o.message=Object(i.a)(o.name,o.code,n),o.fatal=!1,o}return n=e,(t=a).prototype=Object.create(n.prototype),t.prototype.constructor=t,t.__proto__=n,a}(a(Error))},function(e,t,n){"use strict";function r(e){return"function"==typeof e}n.d(t,"a",(function(){return r}))},function(e,t,n){"use strict";n.d(t,"b",(function(){return i})),n.d(t,"c",(function(){return o})),n.d(t,"d",(function(){return a})),n.d(t,"a",(function(){return u}));var r=n(2);function i(e){for(var t=0;t<e.length;){if(""===e[t])return t+1;t++}return t}function a(e,t){return"string"==typeof e[t]&&/^STYLE( .*)?$/g.test(e[t])&&(void 0===e[t+1]||e[t+1].indexOf("--\x3e")<0)}function o(e,t){var n=e[t];if(void 0===n||""===n||a(e,t)||function(e,t){return"string"==typeof e[t]&&/^REGION( .*)?$/g.test(e[t])&&(void 0===e[t+1]||e[t+1].indexOf("--\x3e")<0)}(e,t)||function(e,t){return"string"==typeof e[t]&&/^NOTE( .*)?$/g.test(e[t])&&(void 0===e[t+1]||e[t+1].indexOf("--\x3e")<0)}(e,t))return!1;if(n.indexOf("--\x3e")>=0)return!0;var r=e[t+1];return void 0!==r&&r.indexOf("--\x3e")>=0}function u(e,t){for(var n=t+1;Object(r.a)(e[n]);)n++;return n}},function(e,t,n){"use strict";var r=n(8),i=n(125),a=n(20),o=n(52);var u=n(77),s=n(67);var c=n(100),l=n(98);function f(e,t){if(null!=e){if(function(e){return e&&"function"==typeof e[o.a]}(e))return function(e,t){return new r.a((function(n){var r=new a.a;return r.add(t.schedule((function(){var i=e[o.a]();r.add(i.subscribe({next:function(e){r.add(t.schedule((function(){return n.next(e)})))},error:function(e){r.add(t.schedule((function(){return n.error(e)})))},complete:function(){r.add(t.schedule((function(){return n.complete()})))}}))}))),r}))}(e,t);if(Object(c.a)(e))return function(e,t){return new r.a((function(n){var r=new a.a;return r.add(t.schedule((function(){return e.then((function(e){r.add(t.schedule((function(){n.next(e),r.add(t.schedule((function(){return n.complete()})))})))}),(function(e){r.add(t.schedule((function(){return n.error(e)})))}))}))),r}))}(e,t);if(Object(l.a)(e))return Object(u.a)(e,t);if(function(e){return e&&"function"==typeof e[s.a]}(e)||"string"==typeof e)return function(e,t){if(!e)throw new Error("Iterable cannot be null");return new r.a((function(n){var r,i=new a.a;return i.add((function(){r&&"function"==typeof r.return&&r.return()})),i.add(t.schedule((function(){r=e[s.a](),i.add(t.schedule((function(){if(!n.closed){var e,t;try{var i=r.next();e=i.value,t=i.done}catch(e){return void n.error(e)}t?n.complete():(n.next(e),this.schedule())}})))}))),i}))}(e,t)}throw new TypeError((null!==e&&typeof e||e)+" is not observable")}function d(e,t){return t?f(e,t):e instanceof r.a?e:new r.a(Object(i.a)(e))}n.d(t,"a",(function(){return d}))},function(e,t,n){"use strict";function r(e){setTimeout((function(){throw e}),0)}n.d(t,"a",(function(){return r}))},function(e,t,n){"use strict";n.d(t,"a",(function(){return i}));var r=n(8);function i(e,t){return t?new r.a((function(n){return t.schedule(a,0,{error:e,subscriber:n})})):new r.a((function(t){return t.error(e)}))}function a(e){var t=e.error;e.subscriber.error(t)}},function(e,t,n){"use strict";var r=n(12),i=n(1),a=n(30),o=n(41),u=n(23),s=n(65),c=n(172),l=n(58),f=n(79),d=function(){function e(e,t){var n=this;if(this.parsingErrors=[],this.id=e.id,this.adaptations=Object.keys(e.adaptations).reduce((function(r,i){var a=e.adaptations[i];if(null==a)return r;var o=a.map((function(e){var r,i=null;try{i=new s.b(e,{representationFilter:t})}catch(e){if(Object(c.a)(e)&&"MANIFEST_UNSUPPORTED_ADAPTATION_TYPE"===e.code)return n.parsingErrors.push(e),null;throw e}return(r=n.parsingErrors).push.apply(r,i.parsingErrors),i})).filter((function(e){return null!=e&&e.representations.length>0}));if(0===o.length&&a.length>0&&("video"===i||"audio"===i))throw new l.a("MANIFEST_PARSE_ERROR","No supported "+i+" adaptations");return o.length>0&&(r[i]=o),r}),{}),!Array.isArray(this.adaptations.video)&&!Array.isArray(this.adaptations.audio))throw new l.a("MANIFEST_PARSE_ERROR","No supported audio and video tracks.");this.duration=e.duration,this.start=e.start,null!=this.duration&&null!=this.start&&(this.end=this.start+this.duration)}var t=e.prototype;return t.getAdaptations=function(){var e=this.adaptations;return Object(f.a)(e).reduce((function(e,t){return null!=t?e.concat(t):e}),[])},t.getAdaptationsForType=function(e){var t=this.adaptations[e];return null==t?[]:t},t.getAdaptation=function(e){return Object(r.a)(this.getAdaptations(),(function(t){var n=t.id;return e===n}))},e}(),p=n(229),h=n(0);function v(e,t){e.start=t.start,e.end=t.end,e.duration=t.duration;for(var n=e.getAdaptations(),i=t.getAdaptations(),a=function(e){var t=n[e],a=Object(r.a)(i,(function(e){return e.id===t.id}));if(void 0===a)h.a.warn('Manifest: Adaptation "'+n[e].id+'" not found when merging.');else for(var o=n[e].representations,u=a.representations,s=function(e){var t=o[e],n=Object(r.a)(u,(function(e){return e.id===t.id}));void 0===n?h.a.warn('Manifest: Representation "'+o[e].id+'" not found when merging.'):t.index._update(n.index)},c=0;c<o.length;c++)s(c)},o=0;o<n.length;o++)a(o)}var b=Object(o.a)(),m=function(e){var t,n;function a(t,n){var r;r=e.call(this)||this;var i=n.supplementaryTextTracks,a=void 0===i?[]:i,o=n.supplementaryImageTracks,u=void 0===o?[]:o,s=n.representationFilter;return r.parsingErrors=[],r.id=t.id,r.transport=t.transportType,r._clockOffset=t.clockOffset,r.periods=t.periods.map((function(e){var t,n=new d(e,s);return(t=r.parsingErrors).push.apply(t,n.parsingErrors),n})).sort((function(e,t){return e.start-t.start})),r.adaptations=null==r.periods[0]?{}:null==r.periods[0].adaptations?{}:r.periods[0].adaptations,r.minimumTime=t.minimumTime,r.isLive=t.isLive,r.uris=void 0===t.uris?[]:t.uris,r.lifetime=t.lifetime,r.suggestedPresentationDelay=t.suggestedPresentationDelay,r.availabilityStartTime=t.availabilityStartTime,r.maximumTime=t.maximumTime,r.baseURL=t.baseURL,u.length>0&&r.addSupplementaryImageAdaptations(u),a.length>0&&r.addSupplementaryTextAdaptations(a),r}n=e,(t=a).prototype=Object.create(n.prototype),t.prototype.constructor=t,t.__proto__=n;var o=a.prototype;return o.getPeriod=function(e){return Object(r.a)(this.periods,(function(t){return e===t.id}))},o.getPeriodForTime=function(e){return Object(r.a)(this.periods,(function(t){return e>=t.start&&(null==t.end||t.end>e)}))},o.getPeriodAfter=function(e){var t=e.end;if(null==t)return null;var n=Object(r.a)(this.periods,(function(e){return null==e.end||t<e.end}));return void 0===n?null:n},o.getUrl=function(){return this.uris[0]},o.getAdaptations=function(){Object(u.a)("manifest.getAdaptations() is deprecated. Please use manifest.period[].getAdaptations() instead");var e=this.periods[0];if(null==e)return[];var t=e.adaptations,n=[];for(var r in t)if(t.hasOwnProperty(r)){var i=t[r];n.push.apply(n,i)}return n},o.getAdaptationsForType=function(e){Object(u.a)("manifest.getAdaptationsForType(type) is deprecated. Please use manifest.period[].getAdaptationsForType(type) instead");var t=this.periods[0];if(null==t)return[];var n=t.adaptations[e];return null==n?[]:n},o.getAdaptation=function(e){return Object(u.a)("manifest.getAdaptation(id) is deprecated. Please use manifest.period[].getAdaptation(id) instead"),Object(r.a)(this.getAdaptations(),(function(t){var n=t.id;return e===n}))},o.update=function(e){this.adaptations=e.adaptations,this.availabilityStartTime=e.availabilityStartTime,this.baseURL=e.baseURL,this.id=e.id,this.isLive=e.isLive,this.lifetime=e.lifetime,this.maximumTime=e.maximumTime,this.minimumTime=e.minimumTime,this.parsingErrors=e.parsingErrors,this.suggestedPresentationDelay=e.suggestedPresentationDelay,this.transport=e.transport,this.uris=e.uris,function(e,t){for(var n=0,r=0;r<t.length;r++){for(var i=t[r],a=n,o=e[a];null!=o&&o.id!==i.id;)o=e[++a];if(null!=o){v(o,i);var u=t.slice(n,r);e.splice.apply(e,[a,0].concat(u)),n=r+1}}if(n>e.length)h.a.error("Manifest: error when updating Periods");else{n<e.length&&e.splice(n,e.length-n);var s=t.slice(n,t.length);s.length>0&&e.push.apply(e,s)}}(this.periods,e.periods),this.trigger("manifestUpdate",null)},o.getMinimumPosition=function(){var e=this.minimumTime;if(null==e)return 0;if(!e.isContinuous)return e.value;var t=performance.now()-e.time;return e.value+t/1e3},o.getMaximumPosition=function(){var e=this.maximumTime;if(void 0===e){if(this.isLive){var t=void 0!==this.availabilityStartTime?this.availabilityStartTime:0;return null==this._clockOffset?Date.now()/1e3-t:(performance.now()+this._clockOffset)/1e3-t}return 1/0}if(!e.isContinuous)return e.value;var n=performance.now()-e.time;return e.value+n/1e3},o.getClockOffset=function(){return this._clockOffset},o.addUndecipherableKIDs=function(e){var t=g(this,(function(t){if(!1===t.decipherable||null==t.contentProtections)return!0;for(var n=t.contentProtections.keyIds,r=0;r<n.length;r++)for(var a=n[r],o=0;o<e.length;o++)if(Object(i.l)(e[o],a.keyId))return!1;return!0}));t.length>0&&this.trigger("decipherabilityUpdate",t)},o.addUndecipherableProtectionData=function(e,t){var n=g(this,(function(n){if(!1===n.decipherable)return!0;for(var r=n.getProtectionsInitializationData(),a=0;a<r.length;a++)if(r[a].type===e&&Object(i.a)(t,r[a].data))return!1;return!0}));n.length>0&&this.trigger("decipherabilityUpdate",n)},o.addSupplementaryImageAdaptations=function(e){var t=this,n=(Array.isArray(e)?e:[e]).map((function(e){var n,r=e.mimeType,i=e.url,a="gen-image-ada-"+b(),o="gen-image-rep-"+b(),u=new s.b({id:a,type:"image",representations:[{bitrate:0,id:o,mimeType:r,index:new p.a({media:i})}]},{isManuallyAdded:!0});return(n=t.parsingErrors).push.apply(n,u.parsingErrors),u}));if(n.length>0&&this.periods.length>0){var r=this.periods[0].adaptations;r.image=null!=r.image?r.image.concat(n):n}},o.addSupplementaryTextAdaptations=function(e){var t=this,n=(Array.isArray(e)?e:[e]).reduce((function(e,n){var r=n.mimeType,i=n.codecs,a=n.url,o=n.language,u=n.languages,c=n.closedCaption,l=null!=o?[o]:null!=u?u:[];return e.concat(l.map((function(e){var n,o="gen-text-ada-"+b(),u="gen-text-rep-"+b(),l=new s.b({id:o,type:"text",language:e,closedCaption:c,representations:[{bitrate:0,id:u,mimeType:r,codecs:i,index:new p.a({media:a})}]},{isManuallyAdded:!0});return(n=t.parsingErrors).push.apply(n,l.parsingErrors),l})))}),[]);if(n.length>0&&this.periods.length>0){var r=this.periods[0].adaptations;r.text=null!=r.text?r.text.concat(n):n}},a}(a.a);function g(e,t){for(var n=[],r=0;r<e.periods.length;r++)for(var i=e.periods[r],a=i.getAdaptations(),o=0;o<a.length;o++)for(var u=a[o],s=u.representations,c=0;c<s.length;c++){var l=s[c];t(l)||(n.push({manifest:e,period:i,adaptation:u,representation:l}),l.decipherable=!1)}return n}t.a=m},function(e,t,n){"use strict";var r=n(58),i=n(0),a=n(12),o=n(13),u=n(78);var s="function"==typeof window.Set?function(e){return Array.from(new Set(e))}:function(e){return e.filter((function(e,t,n){return n.indexOf(e)===t}))},c=n(152);var l=n(93);n.d(t,"a",(function(){return f})),n.d(t,"b",(function(){return d}));var f=["audio","video","text","image"];var d=function(){function e(e,t){var n=this;void 0===t&&(t={});var a,s=t,d=s.representationFilter,p=s.isManuallyAdded;if(this.parsingErrors=[],this.id=e.id,a=e.type,!Object(o.a)(f,a))throw i.a.info("Manifest: Not supported adaptation type",e.type),new r.a("MANIFEST_UNSUPPORTED_ADAPTATION_TYPE",'"'+e.type+'" is not a valid Adaptation type.');this.type=e.type;var h=0!==e.representations.length,v=function(e,t){return"audio"===e||"video"===e?t.filter((function(e){return Object(c.a)(function(e){var t=e.codecs,n=void 0===t?"":t,r=e.mimeType;return(void 0===r?"":r)+';codecs="'+n+'"'}(e))})):t}(e.type,e.representations);if(h&&0===v.length){i.a.warn("Incompatible codecs for adaptation",e);var b=new r.a("MANIFEST_INCOMPATIBLE_CODECS_ERROR","An Adaptation contains only incompatible codecs.");this.parsingErrors.push(b)}void 0!==e.language&&(this.language=e.language,this.normalizedLanguage=Object(u.a)(e.language)),void 0!==e.closedCaption&&(this.isClosedCaption=e.closedCaption),void 0!==e.audioDescription&&(this.isAudioDescription=e.audioDescription),void 0!==e.isDub&&(this.isDub=e.isDub),this.representations=v.map((function(e){return new l.a(e)})).sort((function(e,t){return e.bitrate-t.bitrate})).filter((function(e){return null==d||d(e,{bufferType:n.type,language:n.language,normalizedLanguage:n.normalizedLanguage,isClosedCaption:n.isClosedCaption,isDub:n.isDub,isAudioDescription:n.isAudioDescription})})),this.manuallyAdded=!0===p}var t=e.prototype;return t.getAvailableBitrates=function(){for(var e=[],t=0;t<this.representations.length;t++){var n=this.representations[t];!1!==n.decipherable&&e.push(n.bitrate)}return s(e)},t.getRepresentation=function(e){return Object(a.a)(this.representations,(function(t){var n=t.id;return e===n}))},e}()},function(e,t,n){"use strict";function r(e,t,n){return e+" ("+t+") "+n}n.d(t,"a",(function(){return r}))},function(e,t,n){"use strict";function r(){return"function"==typeof Symbol&&Symbol.iterator?Symbol.iterator:"@@iterator"}n.d(t,"a",(function(){return i}));var i=r()},function(e,t,n){"use strict";n.d(t,"a",(function(){return o}));var r=n(8),i=n(99),a=n(77);function o(e,t){return t?Object(a.a)(e,t):new r.a(Object(i.a)(e))}},function(e,t,n){"use strict";n.d(t,"a",(function(){return c}));var r=n(37),i=n(66);function a(e){var t="function"==typeof Map?new Map:void 0;return(a=function(e){if(null===e||(n=e,-1===Function.toString.call(n).indexOf("[native code]")))return e;var n;if("function"!=typeof e)throw new TypeError("Super expression must either be null or a function");if(void 0!==t){if(t.has(e))return t.get(e);t.set(e,r)}function r(){return o(e,arguments,s(this).constructor)}return r.prototype=Object.create(e.prototype,{constructor:{value:r,enumerable:!1,writable:!0,configurable:!0}}),u(r,e)})(e)}function o(e,t,n){return(o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}()?Reflect.construct:function(e,t,n){var r=[null];r.push.apply(r,t);var i=new(Function.bind.apply(e,r));return n&&u(i,n.prototype),i}).apply(null,arguments)}function u(e,t){return(u=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function s(e){return(s=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var c=function(e){var t,n;function a(t,n){var o;return o=e.call(this)||this,Object.setPrototypeOf(function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(o),a.prototype),o.name="OtherError",o.type=r.b.OTHER_ERROR,o.code=t,o.message=Object(i.a)(o.name,o.code,n),o.fatal=!1,o}return n=e,(t=a).prototype=Object.create(n.prototype),t.prototype.constructor=t,t.__proto__=n,a}(a(Error))},function(e,t,n){"use strict";n.d(t,"a",(function(){return i}));var r=n(1);function i(e,t){for(var n=e.length,i=0;i+8<n;){var a=Object(r.d)(e,i);if(a<=0)return-1;if(Object(r.d)(e,i+4)===t)return i+a<=n?i:-1;i+=a}return-1}},function(e,t,n){"use strict";var r,i;r=function(e){if("function"!=typeof e)throw new TypeError(e+" is not a function");return e},i=function(e){var t,n,i=document.createTextNode(""),a=0;return new e((function(){var e;if(t)n&&(t=n.concat(t));else{if(!n)return;t=n}if(n=t,t=null,"function"==typeof n)return e=n,n=null,void e();for(i.data=a=++a%2;n;)e=n.shift(),n.length||(n=null),e()})).observe(i,{characterData:!0}),function(e){r(e),t?"function"==typeof t?t=[t,e]:t.push(e):(t=e,i.data=a=++a%2)}},e.exports=function(){if("object"==typeof process&&process&&"function"==typeof process.nextTick)return process.nextTick;if("object"==typeof document&&document){if("function"==typeof MutationObserver)return i(MutationObserver);if("function"==typeof WebKitMutationObserver)return i(WebKitMutationObserver)}return"function"==typeof setImmediate?function(e){setImmediate(r(e))}:"function"==typeof setTimeout||"object"==typeof setTimeout?function(e){setTimeout(r(e),0)}:null}()},function(e,t,n){"use strict";n.d(t,"a",(function(){return r}));var r=function(){return"function"==typeof Symbol?Symbol("rxSubscriber"):"@@rxSubscriber_"+Math.random()}()},function(e,t,n){"use strict";n.d(t,"a",(function(){return i}));var r=n(51);function i(e){return!Object(r.a)(e)&&e-parseFloat(e)+1>=0}},function(e,t,n){"use strict";n.d(t,"a",(function(){return a}));var r=n(69),i=n(70);function a(e,t){if(t){if(Object(i.a)(e,1718909296)<0)throw new r.a("INTEGRITY_ERROR","Incomplete `ftyp` box");if(Object(i.a)(e,1836019574)<0)throw new r.a("INTEGRITY_ERROR","Incomplete `moov` box")}else{if(Object(i.a)(e,1836019558)<0)throw new r.a("INTEGRITY_ERROR","Incomplete `moof` box");if(Object(i.a)(e,1835295092)<0)throw new r.a("INTEGRITY_ERROR","Incomplete `mdat` box")}}},function(e,t,n){"use strict";n.d(t,"a",(function(){return u}));var r,i=n(54),a=n(26),o=n(63);r||(r={});var u=function(){function e(e,t,n){this.kind=e,this.value=t,this.error=n,this.hasValue="N"===e}return e.prototype.observe=function(e){switch(this.kind){case"N":return e.next&&e.next(this.value);case"E":return e.error&&e.error(this.error);case"C":return e.complete&&e.complete()}},e.prototype.do=function(e,t,n){switch(this.kind){case"N":return e&&e(this.value);case"E":return t&&t(this.error);case"C":return n&&n()}},e.prototype.accept=function(e,t,n){return e&&"function"==typeof e.next?this.observe(e):this.do(e,t,n)},e.prototype.toObservable=function(){switch(this.kind){case"N":return Object(a.a)(this.value);case"E":return Object(o.a)(this.error);case"C":return Object(i.b)()}throw new Error("unexpected notification kind value")},e.createNext=function(t){return void 0!==t?new e("N",t):e.undefinedValueNotification},e.createError=function(t){return new e("E",void 0,t)},e.createComplete=function(){return e.completeNotification},e.completeNotification=new e("C"),e.undefinedValueNotification=new e("N",void 0),e}()},function(e,t,n){"use strict";n.d(t,"a",(function(){return o}));var r=n(8),i=n(61),a=n(54);function o(e){return new r.a((function(t){var n;try{n=e()}catch(e){return void t.error(e)}return(n?Object(i.a)(n):Object(a.b)()).subscribe(t)}))}},function(e,t,n){"use strict";n.d(t,"a",(function(){return a}));var r=n(8),i=n(20);function a(e,t){return new r.a((function(n){var r=new i.a,a=0;return r.add(t.schedule((function(){a!==e.length?(n.next(e[a++]),n.closed||r.add(this.schedule())):n.complete()}))),r}))}},function(e,t,n){"use strict";var r=n(94);t.a=r.a},function(e,t,n){"use strict";t.a="function"==typeof Object.values?Object.values:function(e){return Object.keys(e).map((function(t){return e[t]}))}},function(e,t,n){"use strict";function r(e,t){if(!(e.parentNode instanceof Element))return[];return function e(n){var r=[];n.tagName.toLowerCase()===t.toLowerCase()&&r.push(n);var i=n.parentNode;return i instanceof Element&&r.push.apply(r,e(i)),r}(e.parentNode)}n.d(t,"a",(function(){return r}))},function(e,t,n){"use strict";var r=n(71),i=n.n(r),a=n(26),o=n(30),u=n(36),s=n(19),c=function(){function e(){this._ranges=[],this.length=0}var t=e.prototype;return t.insert=function(e,t){Object(s.i)(this._ranges,{start:e,end:t}),this.length=this._ranges.length},t.remove=function(e,t){var n=[];e>0&&n.push({start:0,end:e}),t<1/0&&n.push({start:t,end:1/0}),this._ranges=Object(s.l)(this._ranges,n),this.length=this._ranges.length},t.start=function(e){if(e>=this._ranges.length)throw new Error("INDEX_SIZE_ERROR");return this._ranges[e].start},t.end=function(e){if(e>=this._ranges.length)throw new Error("INDEX_SIZE_ERROR");return this._ranges[e].end},e}();n.d(t,"a",(function(){return l}));var l=function(e){var t,n;function r(){var t;return(t=e.call(this)||this).updating=!1,t.readyState="opened",t.buffered=new c,t.timestampOffset=0,t.appendWindowStart=0,t.appendWindowEnd=1/0,t}n=e,(t=r).prototype=Object.create(n.prototype),t.prototype.constructor=t,t.__proto__=n;var o=r.prototype;return o.appendBuffer=function(e){var t=this;this._lock((function(){return t._append(e)}))},o.remove=function(e,t){var n=this;this._lock((function(){return n._remove(e,t)}))},o.abort=function(){this.updating=!1,this.readyState="closed",this._abort()},o._lock=function(e){var t=this;if(this.updating)throw new Error("SourceBuffer: SourceBuffer already updating.");this.updating=!0,this.trigger("updatestart",void 0),Object(u.a)((function(){return e(),Object(a.a)(void 0)}),void 0).subscribe((function(){return i()((function(){t.updating=!1,t.trigger("update",void 0),t.trigger("updateend",void 0)}))}),(function(e){return i()((function(){t.updating=!1,t.trigger("error",e),t.trigger("updateend",void 0)}))}))},r}(o.a)},function(e,t,n){"use strict";var r=n(4),i=function(){function e(t,n){void 0===n&&(n=e.now),this.SchedulerAction=t,this.now=n}return e.prototype.schedule=function(e,t,n){return void 0===t&&(t=0),new this.SchedulerAction(this,e).schedule(n,t)},e.now=function(){return Date.now()},e}();n.d(t,"a",(function(){return a}));var a=function(e){function t(n,r){void 0===r&&(r=i.now);var a=e.call(this,n,(function(){return t.delegate&&t.delegate!==a?t.delegate.now():r()}))||this;return a.actions=[],a.active=!1,a.scheduled=void 0,a}return r.a(t,e),t.prototype.schedule=function(n,r,i){return void 0===r&&(r=0),t.delegate&&t.delegate!==this?t.delegate.schedule(n,r,i):e.prototype.schedule.call(this,n,r,i)},t.prototype.flush=function(e){var t=this.actions;if(this.active)t.push(e);else{var n;this.active=!0;do{if(n=e.execute(e.state,e.delay))break}while(e=t.shift());if(this.active=!1,n){for(;e=t.shift();)e.unsubscribe();throw n}}},t}(i)},function(e,t,n){"use strict";var r=n(4),i=function(e){function t(t,n){return e.call(this)||this}return r.a(t,e),t.prototype.schedule=function(e,t){return void 0===t&&(t=0),this},t}(n(20).a);n.d(t,"a",(function(){return a}));var a=function(e){function t(t,n){var r=e.call(this,t,n)||this;return r.scheduler=t,r.work=n,r.pending=!1,r}return r.a(t,e),t.prototype.schedule=function(e,t){if(void 0===t&&(t=0),this.closed)return this;this.state=e;var n=this.id,r=this.scheduler;return null!=n&&(this.id=this.recycleAsyncId(r,n,t)),this.pending=!0,this.delay=t,this.id=this.id||this.requestAsyncId(r,this.id,t),this},t.prototype.requestAsyncId=function(e,t,n){return void 0===n&&(n=0),setInterval(e.flush.bind(e,this),n)},t.prototype.recycleAsyncId=function(e,t,n){if(void 0===n&&(n=0),null!==n&&this.delay===n&&!1===this.pending)return t;clearInterval(t)},t.prototype.execute=function(e,t){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;var n=this._execute(e,t);if(n)return n;!1===this.pending&&null!=this.id&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))},t.prototype._execute=function(e,t){var n=!1,r=void 0;try{this.work(e)}catch(e){n=!0,r=!!e&&e||new Error(e)}if(n)return this.unsubscribe(),r},t.prototype._unsubscribe=function(){var e=this.id,t=this.scheduler,n=t.actions,r=n.indexOf(this);this.work=null,this.state=null,this.pending=!1,this.scheduler=null,-1!==r&&n.splice(r,1),null!=e&&(this.id=this.recycleAsyncId(t,e,null)),this.delay=null},t}(i)},function(e,t,n){"use strict";n.d(t,"a",(function(){return a}));var r=n(43),i=n(62),a={closed:!0,next:function(e){},error:function(e){if(r.a.useDeprecatedSynchronousErrorHandling)throw e;Object(i.a)(e)},complete:function(){}}},function(e,t,n){"use strict";n.d(t,"a",(function(){return u}));var r=n(8),i=n(49),a=n(97),o=n(68);function u(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var n=Number.POSITIVE_INFINITY,u=null,s=e[e.length-1];return Object(i.a)(s)?(u=e.pop(),e.length>1&&"number"==typeof e[e.length-1]&&(n=e.pop())):"number"==typeof s&&(n=e.pop()),null===u&&1===e.length&&e[0]instanceof r.a?e[0]:Object(a.a)(n)(Object(o.a)(e,u))}},function(e,t,n){"use strict";n.d(t,"b",(function(){return d}));var r=n(8),i=n(3),a=n(134),o=n(37),u=n(0),s=n(14),c=i.a.DEFAULT_REQUEST_TIMEOUT,l="function"==typeof Headers?Headers:null,f="function"==typeof AbortController?AbortController:null;function d(){return"function"==typeof window.fetch&&!Object(s.a)(f)&&!Object(s.a)(l)}t.a=function(e){var t;if(!Object(s.a)(e.headers))if(Object(s.a)(l))t=e.headers;else{t=new l;for(var n=Object.keys(e.headers),i=0;i<n.length;i++){var d=n[i];t.append(d,e.headers[d])}}return new r.a((function(n){u.a.debug("Fetch: Called with URL",e.url);var r=!1,i=!1,l=!1,d=performance.now(),p=Object(s.a)(f)?null:new f;function h(){if(!l){if(!Object(s.a)(p))return p.abort();u.a.warn("Fetch: AbortController API not available.")}}var v=Object(s.a)(e.timeout)?c:e.timeout,b=window.setTimeout((function(){i=!0,h()}),v);return fetch(e.url,{headers:t,method:"GET",signal:Object(s.a)(p)?void 0:p.signal}).then((function(e){if(Object(s.a)(b)||clearTimeout(b),e.status>=300)return u.a.warn("Fetch: Request HTTP Error",e),void n.error(new a.a(e.url,e.status,o.c.ERROR_HTTP_CODE));if(!Object(s.a)(e.body)){var t=e.headers.get("Content-Length"),r=Object(s.a)(t)||isNaN(+t)?void 0:+t,i=e.body.getReader(),c=0;return function t(){var a,o,u,f,p;return regeneratorRuntime.async((function(h){for(;;)switch(h.prev=h.next){case 0:return h.next=2,regeneratorRuntime.awrap(i.read());case 2:if((a=h.sent).done||Object(s.a)(a.value)){h.next=11;break}return c+=a.value.byteLength,o=performance.now(),u={type:"data-chunk",value:{url:e.url,currentTime:o,duration:o-d,sendingTime:d,chunkSize:a.value.byteLength,chunk:a.value.buffer,size:c,totalSize:r}},n.next(u),h.abrupt("return",t());case 11:a.done&&(f=performance.now(),p=f-d,l=!0,n.next({type:"data-complete",value:{duration:p,receivedTime:f,sendingTime:d,size:c,status:e.status,url:e.url}}),n.complete());case 12:case"end":return h.stop()}}))}()}n.error(new a.a(e.url,e.status,o.c.PARSE_ERROR))})).catch((function(t){if(r)u.a.debug("Fetch: Request aborted.");else{if(i)return u.a.warn("Fetch: Request timeouted."),void n.error(new a.a(e.url,0,o.c.TIMEOUT));u.a.warn("Fetch: Request Error",t instanceof Error?t.toString():""),n.error(new a.a(e.url,0,o.c.ERROR_EVENT))}})),function(){r=!0,h()}}))}},function(e,t,n){"use strict";n.d(t,"a",(function(){return a}));var r=n(0),i=n(24);function a(e){if(i.a){for(var t=e.textTracks,n=0;n<t.length;n++)t[n].mode="disabled";if(e.hasChildNodes())for(var a=e.childNodes,o=a.length-1;o>=0;o--)if("track"===a[o].nodeName)try{e.removeChild(a[o])}catch(e){r.a.warn("Compat: Could not remove text track child from element.")}}e.src="",e.removeAttribute("src")}},function(e,t,n){"use strict";function r(e,t){return"function"==typeof Array.prototype.flatMap?e.flatMap(t):e.reduce((function(e,n){var r=t(n);return Array.isArray(r)?[].concat(e,r):[].concat(e,[r])}),[])}n.d(t,"a",(function(){return r}))},function(e,t,n){"use strict";var r=n(4),i=n(45),a=n(8),o=n(10),u=n(20),s=n(120),c=function(e){function t(t,n){var r=e.call(this)||this;return r.source=t,r.subjectFactory=n,r._refCount=0,r._isComplete=!1,r}return r.a(t,e),t.prototype._subscribe=function(e){return this.getSubject().subscribe(e)},t.prototype.getSubject=function(){var e=this._subject;return e&&!e.isStopped||(this._subject=this.subjectFactory()),this._subject},t.prototype.connect=function(){var e=this._connection;return e||(this._isComplete=!1,(e=this._connection=new u.a).add(this.source.subscribe(new f(this.getSubject(),this))),e.closed&&(this._connection=null,e=u.a.EMPTY)),e},t.prototype.refCount=function(){return Object(s.a)()(this)},t}(a.a),l=function(){var e=c.prototype;return{operator:{value:null},_refCount:{value:0,writable:!0},_subject:{value:null,writable:!0},_connection:{value:null,writable:!0},_subscribe:{value:e._subscribe},_isComplete:{value:e._isComplete,writable:!0},getSubject:{value:e.getSubject},connect:{value:e.connect},refCount:{value:e.refCount}}}(),f=function(e){function t(t,n){var r=e.call(this,t)||this;return r.connectable=n,r}return r.a(t,e),t.prototype._error=function(t){this._unsubscribe(),e.prototype._error.call(this,t)},t.prototype._complete=function(){this.connectable._isComplete=!0,this._unsubscribe(),e.prototype._complete.call(this)},t.prototype._unsubscribe=function(){var e=this.connectable;if(e){this.connectable=null;var t=e._connection;e._refCount=0,e._subject=null,e._connection=null,t&&t.unsubscribe()}},t}(i.b);o.a;function d(e,t){return function(n){var r;if(r="function"==typeof e?e:function(){return e},"function"==typeof t)return n.lift(new p(r,t));var i=Object.create(n,l);return i.source=n,i.subjectFactory=r,i}}n.d(t,"a",(function(){return d}));var p=function(){function e(e,t){this.subjectFactory=e,this.selector=t}return e.prototype.call=function(e,t){var n=this.selector,r=this.subjectFactory(),i=n(r).subscribe(e);return i.add(t.subscribe(r)),i},e}()},function(e,t,n){"use strict";n.d(t,"a",(function(){return c}));var r=n(37),i=n(66);function a(e){var t="function"==typeof Map?new Map:void 0;return(a=function(e){if(null===e||(n=e,-1===Function.toString.call(n).indexOf("[native code]")))return e;var n;if("function"!=typeof e)throw new TypeError("Super expression must either be null or a function");if(void 0!==t){if(t.has(e))return t.get(e);t.set(e,r)}function r(){return o(e,arguments,s(this).constructor)}return r.prototype=Object.create(e.prototype,{constructor:{value:r,enumerable:!1,writable:!0,configurable:!0}}),u(r,e)})(e)}function o(e,t,n){return(o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}()?Reflect.construct:function(e,t,n){var r=[null];r.push.apply(r,t);var i=new(Function.bind.apply(e,r));return n&&u(i,n.prototype),i}).apply(null,arguments)}function u(e,t){return(u=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function s(e){return(s=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var c=function(e){var t,n;function a(t,n){var o;return o=e.call(this)||this,Object.setPrototypeOf(function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(o),a.prototype),o.name="EncryptedMediaError",o.type=r.b.ENCRYPTED_MEDIA_ERROR,o.code=t,o.message=Object(i.a)(o.name,o.code,n),o.fatal=!1,o}return n=e,(t=a).prototype=Object.create(n.prototype),t.prototype.constructor=t,t.__proto__=n,a}(a(Error))},function(e,t,n){"use strict";var r=n(4),i=1,a={};var o=function(e){var t=i++;return a[t]=e,Promise.resolve().then((function(){return function(e){var t=a[e];t&&t()}(t)})),t},u=function(e){delete a[e]},s=function(e){function t(t,n){var r=e.call(this,t,n)||this;return r.scheduler=t,r.work=n,r}return r.a(t,e),t.prototype.requestAsyncId=function(t,n,r){return void 0===r&&(r=0),null!==r&&r>0?e.prototype.requestAsyncId.call(this,t,n,r):(t.actions.push(this),t.scheduled||(t.scheduled=o(t.flush.bind(t,null))))},t.prototype.recycleAsyncId=function(t,n,r){if(void 0===r&&(r=0),null!==r&&r>0||null===r&&this.delay>0)return e.prototype.recycleAsyncId.call(this,t,n,r);0===t.actions.length&&(u(n),t.scheduled=void 0)},t}(n(83).a),c=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return r.a(t,e),t.prototype.flush=function(e){this.active=!0,this.scheduled=void 0;var t,n=this.actions,r=-1,i=n.length;e=e||n.shift();do{if(t=e.execute(e.state,e.delay))break}while(++r<i&&(e=n.shift()));if(this.active=!1,t){for(;++r<i&&(e=n.shift());)e.unsubscribe();throw t}},t}(n(82).a);n.d(t,"a",(function(){return l}));var l=new c(s)},function(e,t,n){"use strict";function r(e){if(!a()){var t=e;"function"==typeof t.requestFullscreen?t.requestFullscreen():"function"==typeof t.msRequestFullscreen?t.msRequestFullscreen():"function"==typeof t.mozRequestFullScreen?t.mozRequestFullScreen():"function"==typeof t.webkitRequestFullscreen&&t.webkitRequestFullscreen(Element.ALLOW_KEYBOARD_INPUT)}}function i(){if(a()){var e=document;"function"==typeof e.exitFullscreen?e.exitFullscreen():"function"==typeof e.msExitFullscreen?e.msExitFullscreen():"function"==typeof e.mozCancelFullScreen?e.mozCancelFullScreen():"function"==typeof e.webkitExitFullscreen&&e.webkitExitFullscreen()}}function a(){var e=document;return null!=e.fullscreenElement||null!=e.mozFullScreenElement||null!=e.webkitFullscreenElement||null!=e.msFullscreenElement}n.d(t,"c",(function(){return r})),n.d(t,"a",(function(){return i})),n.d(t,"b",(function(){return a}))},function(e,t,n){"use strict";var r=n(0),i=n(1),a=function(){function e(e){this.id=e.id,this.bitrate=e.bitrate,this.codec=e.codecs,null!=e.height&&(this.height=e.height),null!=e.width&&(this.width=e.width),null!=e.mimeType&&(this.mimeType=e.mimeType),void 0!==e.contentProtections&&(this.contentProtections=e.contentProtections),null!=e.frameRate&&(this.frameRate=e.frameRate),this.index=e.index}var t=e.prototype;return t.getMimeTypeString=function(){return this.mimeType+';codecs="'+this.codec+'"'},t.getProtectionsInitializationData=function(){var e=this.contentProtections;return void 0===e?[]:Object.keys(e.initData).reduce((function(t,n){var r=e.initData[n];if(void 0===r||0===r.length)return t;var a=i.i.apply(void 0,r.map((function(e){return e.data})));return t.push({type:n,data:a}),t}),[])},t._addProtectionData=function(e,t,n){var a={systemId:t,data:n};if(void 0!==this.contentProtections){var o=this.contentProtections.initData[e];if(void 0!==o){for(var u=o.length-1;u>=0;u--)if(o[u].systemId===t){if(Object(i.a)(o[u].data,n))return;r.a.warn("Manifest: Two PSSH for the same system ID")}o.push(a)}else this.contentProtections.initData[e]=[a]}else{var s;this.contentProtections={keyIds:[],initData:(s={},s[e]=[a],s)}}},e}();t.a=a},function(e,t,n){"use strict";var r=n(2),i=n(14),a={aa:"aar",ab:"abk",ae:"ave",af:"afr",ak:"aka",am:"amh",an:"arg",ar:"ara",as:"asm",av:"ava",ay:"aym",az:"aze",ba:"bak",be:"bel",bg:"bul",bi:"bis",bm:"bam",bn:"ben",bo:"bod",br:"bre",bs:"bos",ca:"cat",ce:"che",ch:"cha",co:"cos",cr:"cre",cs:"ces",cu:"chu",cv:"chv",cy:"cym",da:"dan",de:"deu",dv:"div",dz:"dzo",ee:"ewe",el:"ell",en:"eng",eo:"epo",es:"spa",et:"est",eu:"eus",fa:"fas",ff:"ful",fi:"fin",fj:"fij",fo:"fao",fr:"fra",fy:"fry",ga:"gle",gd:"gla",gl:"glg",gn:"grn",gu:"guj",gv:"glv",ha:"hau",he:"heb",hi:"hin",ho:"hmo",hr:"hrv",ht:"hat",hu:"hun",hy:"hye",hz:"her",ia:"ina",id:"ind",ie:"ile",ig:"ibo",ii:"iii",ik:"ipk",io:"ido",is:"isl",it:"ita",iu:"iku",ja:"jpn",jv:"jav",ka:"kat",kg:"kon",ki:"kik",kj:"kua",kk:"kaz",kl:"kal",km:"khm",kn:"kan",ko:"kor",kr:"kau",ks:"kas",ku:"kur",kv:"kom",kw:"cor",ky:"kir",la:"lat",lb:"ltz",lg:"lug",li:"lim",ln:"lin",lo:"lao",lt:"lit",lu:"lub",lv:"lav",mg:"mlg",mh:"mah",mi:"mri",mk:"mkd",ml:"mal",mn:"mon",mr:"mar",ms:"msa",mt:"mlt",my:"mya",na:"nau",nb:"nob",nd:"nde",ne:"nep",ng:"ndo",nl:"nld",nn:"nno",no:"nor",nr:"nbl",nv:"nav",ny:"nya",oc:"oci",oj:"oji",om:"orm",or:"ori",os:"oss",pa:"pan",pi:"pli",pl:"pol",ps:"pus",pt:"por",qu:"que",rm:"roh",rn:"run",ro:"ron",ru:"rus",rw:"kin",sa:"san",sc:"srd",sd:"snd",se:"sme",sg:"sag",si:"sin",sk:"slk",sl:"slv",sm:"smo",sn:"sna",so:"som",sq:"sqi",sr:"srp",ss:"ssw",st:"sot",su:"sun",sv:"swe",sw:"swa",ta:"tam",te:"tel",tg:"tgk",th:"tha",ti:"tir",tk:"tuk",tl:"tgl",tn:"tsn",to:"ton",tr:"tur",ts:"tso",tt:"tat",tw:"twi",ty:"tah",ug:"uig",uk:"ukr",ur:"urd",uz:"uzb",ve:"ven",vi:"vie",vo:"vol",wa:"wln",wo:"wol",xh:"xho",yi:"yid",yo:"yor",za:"zha",zh:"zho",zu:"zul"},o={alb:"sqi",arm:"hye",baq:"eus",bur:"mya",chi:"zho",cze:"ces",dut:"nld",fre:"fra",geo:"kat",ger:"deu",gre:"ell",ice:"isl",mac:"mkd",mao:"mri",may:"msa",per:"fas",slo:"slk",rum:"ron",tib:"bod",wel:"cym"};function u(e){if(Object(i.a)(e)||""===e)return"";var t=function(e){var t;switch(e.length){case 2:t=a[e];break;case 3:t=o[e]}return t}((""+e).toLowerCase().split("-")[0]);return Object(r.a)(t)?t:e}function s(e){if(!Object(i.a)(e)){var t,n=!1;return"string"==typeof e?t=e:(t=e.language,!0===e.closedCaption&&(n=!0)),{language:t,closedCaption:n,normalized:u(t)}}return e}function c(e){if(Object(i.a)(e))return e;if("string"==typeof e)return{language:e,audioDescription:!1,normalized:u(e)};var t={language:e.language,audioDescription:!0===e.audioDescription,normalized:u(u(e.language))};return!0===e.isDub&&(t.isDub=!0),t}n.d(t,"b",(function(){return c})),n.d(t,"c",(function(){return s}));t.a=u},function(e,t,n){"use strict";function r(e){return null!==e&&"object"==typeof e}n.d(t,"a",(function(){return r}))},function(e,t,n){"use strict";n.d(t,"a",(function(){return i}));var r=n(24);function i(){return r.d&&null!=window.WebKitMediaKeys}},function(e,t,n){"use strict";n.d(t,"a",(function(){return a}));var r=n(48),i=n(167);function a(e){return void 0===e&&(e=Number.POSITIVE_INFINITY),Object(r.a)(i.a,e)}},function(e,t,n){"use strict";n.d(t,"a",(function(){return r}));var r=function(e){return e&&"number"==typeof e.length&&"function"!=typeof e}},function(e,t,n){"use strict";n.d(t,"a",(function(){return r}));var r=function(e){return function(t){for(var n=0,r=e.length;n<r&&!t.closed;n++)t.next(e[n]);t.complete()}}},function(e,t,n){"use strict";function r(e){return!!e&&"function"!=typeof e.subscribe&&"function"==typeof e.then}n.d(t,"a",(function(){return r}))},function(e,t,n){"use strict";function r(e){return e instanceof Date&&!isNaN(+e)}n.d(t,"a",(function(){return r}))},function(e,t,n){"use strict";n.d(t,"a",(function(){return i}));var r=n(4),i=function(e){function t(t,n){var r=e.call(this)||this;return r.subject=t,r.subscriber=n,r.closed=!1,r}return r.a(t,e),t.prototype.unsubscribe=function(){if(!this.closed){this.closed=!0;var e=this.subject,t=e.observers;if(this.subject=null,t&&0!==t.length&&!e.isStopped&&!e.closed){var n=t.indexOf(this.subscriber);-1!==n&&t.splice(n,1)}}},t}(n(20).a)},function(e,t,n){"use strict";n.d(t,"a",(function(){return r}));var r=function(){function e(){return Error.call(this),this.message="argument out of range",this.name="ArgumentOutOfRangeError",this}return e.prototype=Object.create(Error.prototype),e}()},function(e,t,n){"use strict";n.d(t,"a",(function(){return r}));var r=function(){function e(){this._hashes={}}var t=e.prototype;return t.add=function(e){this._hashes[e]=!0},t.remove=function(e){delete this._hashes[e]},t.test=function(e){return this._hashes.hasOwnProperty(e)},t.isEmpty=function(){return 0===Object.keys(this._hashes).length},e}()},function(e,t,n){"use strict";n.d(t,"a",(function(){return i}));var r=n(1),i=Object(r.d)(Object(r.r)("pssh"),0)},function(e,t,n){"use strict";n.d(t,"a",(function(){return i}));var r=.3;function i(e){return e*((2*Math.random()-1)*r+1)}},function(e,t,n){"use strict";n.d(t,"a",(function(){return c}));var r=n(76),i=n(26),a=n(180),o=n(219),u=n(0),s=n(40);function c(e){return Object(r.a)((function(){var t=s.a.getState(e);if(null===t)return Object(i.a)(null);u.a.debug("EME: Disposing of the current MediaKeys");var n=t.sessionsStore;return s.a.clearState(e),n.closeAllSessions().pipe(Object(a.a)(Object(o.a)(e,null)))}))}},function(e,t,n){"use strict";function r(e,t,n,r){if(n===e.timescale){for(var i=0;i<t.length;i++){var a=t[i],o=a.start-r;if(o>e.time)return!1;if(o===e.time)return a.duration===e.duration&&(null==a.range?null==e.range:null!=e.range&&a.range[0]===e.range[0]&&a.range[1]===e.range[1]);if(a.repeatCount>=0&&null!=a.duration){var u=(o-a.start)/a.duration-1;return u%1==0&&u<=a.repeatCount}}return!1}}n.d(t,"a",(function(){return r}))},function(e,t,n){"use strict";function r(e,t){for(;e.length>0;){var n=e[0];if(n.start>=t)return;if(n.repeatCount<=0)e.shift();else{var r=e[1];if(null!=r&&r.start<=t)e.shift();else{if(n.duration<=0)return;for(var i=n.start+n.duration,a=1;i<t&&a<=n.repeatCount;)i+=n.duration,a++;if(!(a>n.repeatCount)){var o=n.repeatCount-a;return n.start=i,void(n.repeatCount=o)}e.shift()}}}}n.d(t,"a",(function(){return r}))},function(e,t,n){"use strict";n.d(t,"a",(function(){return a}));var r=n(0),i=n(13);function a(e){var t=[];e.periods.forEach((function(n){var o=n.id;if(Object(i.a)(t,o)){r.a.warn("Two periods with the same ID found. Updating.");var u=o+"-dup";n.id=u,a(e),t.push(u)}else t.push(o);var s=n.adaptations,c=[];Object.keys(s).forEach((function(t){var n=s[t];void 0!==n&&n.forEach((function(t){var n=t.id;if(Object(i.a)(c,n)){r.a.warn("Two adaptations with the same ID found. Updating.",n);var o=n+"-dup";t.id=o,a(e),c.push(o)}else c.push(n);var u=[];t.representations.forEach((function(t){var n=t.id;if(Object(i.a)(u,n)){r.a.warn("Two representations with the same ID found. Updating.",n);var o=n+"-dup";t.id=o,a(e),u.push(o)}else u.push(n)}))}))}))}))}},function(e,t,n){"use strict";n.d(t,"a",(function(){return o}));var r=n(22),i=n(112);function a(e){var t=e.url;if(null==t)throw new Error("Cannot perform HTTP(s) request. URL not known");return Object(r.a)({url:t,responseType:"document"})}function o(e){var t=e.customManifestLoader;return null==t?a:Object(i.a)(t,a)}},function(e,t,n){"use strict";n.d(t,"a",(function(){return i}));var r=n(8);function i(e,t){return function(n){return new r.a((function(r){var i=n.url,a=Date.now()-performance.now(),o=!1,u=!1,s=e(i,{reject:function(e){u||(o=!0,r.error(e))},resolve:function(e){if(!u){o=!0;var t=null!=e.receivingTime?e.receivingTime-a:void 0,n=null!=e.sendingTime?e.sendingTime-a:void 0;r.next({type:"data-loaded",value:{responseData:e.data,size:e.size,duration:e.duration,url:e.url,receivedTime:t,sendingTime:n}}),r.complete()}},fallback:function(){u=!0,t(n).subscribe(r)}});return function(){o||u||"function"!=typeof s||s()}}))}}},function(e,t,n){"use strict";n.d(t,"a",(function(){return i}));var r=n(14);function i(e){if(Object(r.a)(e))return"";var t=new Uint8Array(e);239===t[0]&&187===t[1]&&191===t[2]&&(t=t.subarray(3));var n=function(e){for(var t="",n=0;n<e.length;n+=16e3){var r=e.subarray(n,n+16e3);t+=String.fromCharCode.apply(null,r)}return t}(t),i=escape(n);return decodeURIComponent(i)}},function(e,t,n){"use strict";n.d(t,"a",(function(){return a}));var r=n(2),i=n(60);function a(e,t){for(var n=[],a=t;a<e.length;a++)if(Object(i.c)(e,a)){var o=Object(i.a)(e,a);n.push(e.slice(a,o)),a=o}else if(Object(r.a)(e[a]))for(;Object(r.a)(e[a]);)a++;return n}},function(e,t,n){"use strict";n.d(t,"a",(function(){return a}));var r=n(0),i=n(25);function a(e,t,n){if(null==i.e)throw new Error("VTT cues not supported in your target");return e>=t?(r.a.warn("Compat: Invalid cue times: "+e+" - "+t),null):new i.e(e,t,n)}},function(e,t,n){"use strict";n.d(t,"a",(function(){return o}));var r=n(0),i=n(2),a=/(\d+) (\d+)/;function o(e){var t=e.getAttribute("ttp:frameRate"),n=e.getAttribute("ttp:subFramRate"),o=e.getAttribute("ttp:tickRate"),u=e.getAttribute("ttp:frameRateMultiplier"),s=e.getAttribute("xml:space"),c=e.getAttribute("ttp:cellResolution"),l={columns:32,rows:15};if(null!==c){var f=a.exec(c);if(null===f||f.length<3)r.a.warn("TTML Parser: Invalid cellResolution");else{var d=parseInt(f[1],10),p=parseInt(f[2],10);isNaN(d)||isNaN(p)?r.a.warn("TTML Parser: Invalid cellResolution"):l={columns:d,rows:p}}}if(Object(i.a)(s)&&"default"!==s&&"preserve"!==s)throw new Error("Invalid spacing style");var h=Number(t);(isNaN(h)||h<=0)&&(h=30);var v=Number(n);(isNaN(v)||v<=0)&&(v=1);var b=Number(o);(isNaN(b)||b<=0)&&(b=void 0);var m=h,g=null!=v?v:1,y=null!==s?s:"default",_=void 0!==b?b:h*v;if(null!==u){var O=/^(\d+) (\d+)$/g.exec(u);if(null!==O)m=h*(Number(O[1])/Number(O[2]))}return{cellResolution:l,tickRate:_,frameRate:m,subFrameRate:g,spaceStyle:y}}},function(e,t,n){"use strict";n.d(t,"a",(function(){return b}));var r=n(130),i=n(26),a=n(179),o=n(133),u=n(176),s=n(218),c=n(146),l=n(178),f=n(48),d=n(118),p=n(139),h=n(140),v=n(0);function b(e,t,n,b){var m=Object(h.a)(t).pipe(Object(o.a)(1),Object(c.a)((function(){v.a.info("Init: Set initial time",n),t.currentTime="function"==typeof n?n():n})),Object(l.a)({refCount:!0})),g=m.pipe(Object(f.a)((function(){return function(e,t){var n=e.pipe(Object(a.a)((function(e){var n=e.seeking,r=e.stalled,i=e.readyState,a=e.currentRange;return!n&&null==r&&(4===i||3===i&&null!=a)&&(!Object(d.a)()||t.duration>0)})),Object(o.a)(1),Object(u.a)("can-play"));return Object(d.a)()&&0===t.duration?Object(r.a)(Object(i.a)("not-loaded-metadata"),n):n}(e,t).pipe(Object(c.a)((function(){return v.a.info("Init: Can begin to play content")})),Object(f.a)((function(e){return"can-play"===e?b?function(e){return Object(p.a)(e).pipe(Object(u.a)("autoplay"),Object(s.a)((function(e){if(e instanceof Error&&"NotAllowedError"===e.name)return v.a.warn("Init: Media element can't play. It may be due to browser auto-play policies."),Object(i.a)("autoplay-blocked");throw e})))}(t):Object(i.a)("loaded"):Object(i.a)(e)})))})),Object(l.a)({refCount:!0}));return{seek$:m,load$:g}}},function(e,t,n){"use strict";n.d(t,"a",(function(){return i}));var r=n(24);function i(){return r.e}},function(e,t,n){"use strict";n.d(t,"a",(function(){return d}));var r=n(85),i=n(26),a=n(31),o=n(7),u=n(141),s=n(90),c=n(9),l=n(0),f=o.a.onEncrypted$;function d(e,t,n){return null==c.a.emeManager?Object(r.a)(f(e).pipe(Object(a.a)((function(){throw l.a.error("Init: Encrypted event but EME feature not activated"),new s.a("MEDIA_IS_ENCRYPTED_ERROR","EME feature not activated.")}))),Object(i.a)({type:"eme-disabled"})):0===t.length?Object(r.a)(f(e).pipe(Object(a.a)((function(){throw l.a.error("Init: Ciphered media and no keySystem passed"),new s.a("MEDIA_IS_ENCRYPTED_ERROR","Media is encrypted and no `keySystems` given")}))),Object(i.a)({type:"eme-disabled"})):Object(u.a)()?(l.a.debug("Init: Creating EMEManager"),c.a.emeManager(e,t,n)):Object(r.a)(f(e).pipe(Object(a.a)((function(){throw l.a.error("Init: Encrypted event but no EME API available"),new s.a("MEDIA_IS_ENCRYPTED_ERROR","Encryption APIs not found.")}))),Object(i.a)({type:"eme-disabled"}))}},function(e,t,n){"use strict";n.d(t,"a",(function(){return a}));var r=n(4),i=n(10);function a(){return function(e){return e.lift(new o(e))}}var o=function(){function e(e){this.connectable=e}return e.prototype.call=function(e,t){var n=this.connectable;n._refCount++;var r=new u(e,n),i=t.subscribe(r);return r.closed||(r.connection=n.connect()),i},e}(),u=function(e){function t(t,n){var r=e.call(this,t)||this;return r.connectable=n,r}return r.a(t,e),t.prototype._unsubscribe=function(){var e=this.connectable;if(e){this.connectable=null;var t=e._refCount;if(t<=0)this.connection=null;else if(e._refCount=t-1,t>1)this.connection=null;else{var n=this.connection,r=e._connection;this.connection=null,!r||n&&r!==n||r.unsubscribe()}}else this.connection=null},t}(i.a)},function(e,t,n){"use strict";n.d(t,"a",(function(){return o}));var r=n(215),i=n(48),a=n(58);function o(e){return Object(r.a)(e,"error").pipe(Object(i.a)((function(){switch(null==e.error?0:e.error.code){case 1:throw new a.a("MEDIA_ERR_ABORTED","The fetching of the associated resource was aborted by the user's request.");case 2:throw new a.a("MEDIA_ERR_NETWORK","A network error occurred which prevented the media from being successfully fetched");case 3:throw new a.a("MEDIA_ERR_DECODE","An error occurred while trying to decode the media resource");case 4:throw new a.a("MEDIA_ERR_SRC_NOT_SUPPORTED","The media resource has been found to be unsuitable.");default:throw new a.a("MEDIA_ERR_UNKNOWN","The HTMLMediaElement errored due to an unknown reason.")}})))}},function(e,t,n){"use strict";n.d(t,"a",(function(){return f}));var r=n(26),i=n(76),a=n(31),o=n(175),u=n(144),s=n(131),c=n(146),l=n(0);function f(e,t,n,f){var d=f.pauseWhenStalled;return(void 0===d||d?n.pipe(Object(a.a)((function(e){return null!==e.stalled})),Object(o.a)(!1),Object(u.a)()):Object(r.a)(!1)).pipe(Object(s.a)((function(n){return n?Object(i.a)((function(){return l.a.info("Init: Pause playback to build buffer"),e.playbackRate=0,Object(r.a)(0)})):t.pipe(Object(c.a)((function(t){l.a.info("Init: Resume playback speed",t),e.playbackRate=t})))})))}},function(e,t,n){"use strict";n.d(t,"a",(function(){return o}));var r=n(181),i=n(31),a=n(144);function o(e){return e.pipe(Object(r.a)(),Object(i.a)((function(e){return e.stalled})),Object(a.a)((function(e,t){return null===e&&null===t||null!==e&&null!==t&&e.reason===t.reason})))}},function(e,t,n){"use strict";function r(e){return"eme-disabled"===e.type||"attached-media-keys"===e.type||"created-media-keys"===e.type&&!0===e.value.keySystemOptions.disableMediaKeysAttachmentLock}n.d(t,"a",(function(){return r}))},function(e,t,n){"use strict";var r=n(99),i=n(62),a=n(67),o=n(52),u=n(98),s=n(100),c=n(95);n.d(t,"a",(function(){return l}));var l=function(e){if(e&&"function"==typeof e[o.a])return l=e,function(e){var t=l[o.a]();if("function"!=typeof t.subscribe)throw new TypeError("Provided object does not correctly implement Symbol.observable");return t.subscribe(e)};if(Object(u.a)(e))return Object(r.a)(e);if(Object(s.a)(e))return n=e,function(e){return n.then((function(t){e.closed||(e.next(t),e.complete())}),(function(t){return e.error(t)})).then(null,i.a),e};if(e&&"function"==typeof e[a.a])return t=e,function(e){for(var n=t[a.a]();;){var r=n.next();if(r.done){e.complete();break}if(e.next(r.value),e.closed)break}return"function"==typeof n.return&&e.add((function(){n.return&&n.return()})),e};var t,n,l,f=Object(c.a)(e)?"an invalid object":"'"+e+"'";throw new TypeError("You provided "+f+" where a stream was expected. You can provide an Observable, Promise, Array, or Iterable.")}},function(e,t,n){"use strict";var r=n(2);function i(e,t){for(var n=t+1;Object(r.a)(e[n]);)n++;return n}function a(e){for(var t=[],n=0;n<e.length;n++)if(Object(r.a)(e[n])){var a=i(e,n),o=e.slice(n,a);o.length>0&&(1===o.length?o[0].indexOf("--\x3e")>=0&&t.push(o):(o[1].indexOf("--\x3e")>=0||o[0].indexOf("--\x3e")>=0)&&t.push(o)),n=a}return t}n.d(t,"a",(function(){return a}))},function(e,t,n){"use strict";var r=n(2);function i(e){var t=e.split(":");if(Object(r.a)(t[2])){var n=parseInt(t[0],10),i=parseInt(t[1],10),a=parseFloat(t[2].replace(",","."));if(isNaN(n)||isNaN(i)||isNaN(a))return;return 60*n*60+60*i+a}}function a(e,t){if(0===e.length)return null;var n,a,o=[];if(Object(r.a)(e[1])&&-1!==e[1].indexOf("--\x3e")){var u=e[1].split("--\x3e").map((function(e){return e.trim()}));n=u[0],a=u[1],o=e.slice(2,e.length)}if(!Object(r.a)(n)||!Object(r.a)(a)){var s=e[0].split("--\x3e").map((function(e){return e.trim()}));n=s[0],a=s[1],o=e.slice(1,e.length)}if(!Object(r.a)(n)||!Object(r.a)(a))return null;var c=i(n),l=i(a);return void 0===c||void 0===l?null:{start:c+t,end:l+t,payload:o}}n.d(t,"a",(function(){return a}))},function(e,t,n){"use strict";var r=n(2);function i(e){var t=e.split(":").reverse();if(Object(r.a)(t[2])||Object(r.a)(t[1])){var n=Object(r.a)(t[2])?parseInt(t[2],10):0,i=parseInt(t[1],10),a=parseFloat(t[0].replace(",","."));if(isNaN(n)||isNaN(i)||isNaN(a))return;return 60*n*60+60*i+a}}function a(e,t){var n,r,a,o=/-->/;if(o.test(e[0]))n=e[0],r=e.slice(1,e.length);else{if(!o.test(e[1]))return null;a=e[0],n=e[1],r=e.slice(2,e.length)}var u=function(e){var t=e.match(/^([\d:.]+)[ |\t]+-->[ |\t]+([\d:.]+)[ |\t]*(.*)$/);if(null===t)return null;var n=i(t[1]),r=i(t[2]);return null==n||null==r?null:{start:n,end:r,settings:t[3].split(/ |\t/).reduce((function(e,t){var n=t.split(":");return 2===n.length&&(e[n[0]]=n[1]),e}),{})}}(n);return null===u?null:{start:u.start+t,end:u.end+t,settings:u.settings,payload:r,header:a}}n.d(t,"a",(function(){return a}))},function(e,t,n){"use strict";var r=n(2),i=n(16);function a(e,t){var n=e.exec(t);if(null===n||""===n[0])return null;var r=Number(n[1]);isNaN(r)&&(r=0);var i=Number(n[2]);isNaN(i)&&(i=0);var a=Number(n[3]);isNaN(a)&&(a=0);var o=Number(n[4]);return isNaN(o)&&(o=0),o/1e3+a+60*i+3600*r}var o=function(e,t){return i.f.test(e)?function(e,t){var n=i.f.exec(t),r=Number(n[1]),a=Number(n[2]),o=Number(n[3]),u=Number(n[4]),s=Number(n[5]);isNaN(s)&&(s=0);return u+=s/e.subFrameRate,(o+=u/e.frameRate)+60*a+3600*r}(t,e):i.e.test(e)?a(i.e,e):i.g.test(e)?a(i.g,e):i.h.test(e)?function(e,t){var n=i.h.exec(t);return Number(n[1])/e.frameRate}(t,e):i.j.test(e)?function(e,t){var n=i.j.exec(t);return Number(n[1])/e.tickRate}(t,e):i.i.test(e)?a(i.i,e):void 0};function u(e,t){var n=e.getAttribute("begin"),i=e.getAttribute("dur"),a=e.getAttribute("end"),u=Object(r.a)(n)?o(n,t):null,s=Object(r.a)(i)?o(i,t):null,c=Object(r.a)(a)?o(a,t):null;if(null==u||null==c&&null==s)throw new Error("Invalid text cue");return{start:u,end:null==c?u+s:c}}n.d(t,"a",(function(){return u}))},function(e,t,n){"use strict";n.d(t,"a",(function(){return a}));var r=n(26),i=n(168);function a(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return Object(i.a)()(r.a.apply(void 0,e))}},function(e,t,n){"use strict";n.d(t,"a",(function(){return c}));var r=n(4),i=n(28),a=n(53),o=n(27),u=n(31),s=n(61);function c(e,t){return"function"==typeof t?function(n){return n.pipe(c((function(n,r){return Object(s.a)(e(n,r)).pipe(Object(u.a)((function(e,i){return t(n,e,r,i)})))})))}:function(t){return t.lift(new l(e))}}var l=function(){function e(e){this.project=e}return e.prototype.call=function(e,t){return t.subscribe(new f(e,this.project))},e}(),f=function(e){function t(t,n){var r=e.call(this,t)||this;return r.project=n,r.index=0,r}return r.a(t,e),t.prototype._next=function(e){var t,n=this.index++;try{t=this.project(e,n)}catch(e){return void this.destination.error(e)}this._innerSub(t,e,n)},t.prototype._innerSub=function(e,t,n){var r=this.innerSubscription;r&&r.unsubscribe();var i=new a.a(this,void 0,void 0);this.destination.add(i),this.innerSubscription=Object(o.a)(this,e,t,n,i)},t.prototype._complete=function(){var t=this.innerSubscription;t&&!t.closed||e.prototype._complete.call(this),this.unsubscribe()},t.prototype._unsubscribe=function(){this.innerSubscription=null},t.prototype.notifyComplete=function(t){this.destination.remove(t),this.innerSubscription=null,this.isStopped&&e.prototype._complete.call(this)},t.prototype.notifyNext=function(e,t,n,r,i){this.destination.next(t)},t}(i.a)},function(e,t,n){"use strict";n.d(t,"c",(function(){return i})),n.d(t,"a",(function(){return a})),n.d(t,"b",(function(){return o}));var r=n(56);function i(e){var t=Object(r.b)(e,1836019558);return null===t?null:Object(r.b)(t,1953653094)}function a(e){return Object(r.b)(e,1835295092)}function o(e){var t=Object(r.b)(e,1836019574);if(null===t)return null;var n=Object(r.b)(t,1953653099);return null===n?null:Object(r.b)(n,1835297121)}},function(e,t,n){"use strict";n.d(t,"a",(function(){return u}));var r=n(4),i=n(10),a=n(103),o=n(54);function u(e){return function(t){return 0===e?Object(o.b)():t.lift(new s(e))}}var s=function(){function e(e){if(this.total=e,this.total<0)throw new a.a}return e.prototype.call=function(e,t){return t.subscribe(new c(e,this.total))},e}(),c=function(e){function t(t,n){var r=e.call(this,t)||this;return r.total=n,r.count=0,r}return r.a(t,e),t.prototype._next=function(e){var t=this.total,n=++this.count;n<=t&&(this.destination.next(e),n===t&&(this.destination.complete(),this.unsubscribe()))},t}(i.a)},function(e,t,n){"use strict";function r(e){var t="function"==typeof Map?new Map:void 0;return(r=function(e){if(null===e||(n=e,-1===Function.toString.call(n).indexOf("[native code]")))return e;var n;if("function"!=typeof e)throw new TypeError("Super expression must either be null or a function");if(void 0!==t){if(t.has(e))return t.get(e);t.set(e,r)}function r(){return i(e,arguments,o(this).constructor)}return r.prototype=Object.create(e.prototype,{constructor:{value:r,enumerable:!1,writable:!0,configurable:!0}}),a(r,e)})(e)}function i(e,t,n){return(i=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}()?Reflect.construct:function(e,t,n){var r=[null];r.push.apply(r,t);var i=new(Function.bind.apply(e,r));return n&&a(i,n.prototype),i}).apply(null,arguments)}function a(e,t){return(a=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function o(e){return(o=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}n.d(t,"a",(function(){return u}));var u=function(e){var t,n;function r(t,n,i,a){var o;return o=e.call(this)||this,Object.setPrototypeOf(function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(o),r.prototype),o.name="RequestError",o.url=t,o.xhr=a,o.status=n,o.type=i,o.message=i,o}return n=e,(t=r).prototype=Object.create(n.prototype),t.prototype.constructor=t,t.__proto__=n,r}(r(Error))},function(e,t,n){"use strict";var r=n(158),i="function"==typeof Symbol&&"symbol"==typeof Symbol("foo"),a=Object.prototype.toString,o=Array.prototype.concat,u=Object.defineProperty,s=u&&function(){var e={};try{for(var t in u(e,"x",{enumerable:!1,value:e}),e)return!1;return e.x===e}catch(e){return!1}}(),c=function(e,t,n,r){var i;t in e&&("function"!=typeof(i=r)||"[object Function]"!==a.call(i)||!r())||(s?u(e,t,{configurable:!0,enumerable:!1,value:n,writable:!0}):e[t]=n)},l=function(e,t){var n=arguments.length>2?arguments[2]:{},a=r(t);i&&(a=o.call(a,Object.getOwnPropertySymbols(t)));for(var u=0;u<a.length;u+=1)c(e,a[u],t[a[u]],n[a[u]])};l.supportsDescriptors=!!s,e.exports=l},function(e,t,n){"use strict";n.r(t);var r=n(149),i=n(150),a=n(54),o=n(26),u=n(85),s=n(63),c=n(130),l=n(178),f=n(179),d=n(133),p=n(146),h=n(48),v=n(31),b=n(218),m=n(145),g=n(7),y=n(227),_=n(228),O=n(90),E=n(0),w=n(76),j=n(3),T=n(13),S=n(21);function A(e){if(""===e.sessionId)return!1;var t=e.keyStatuses,n=[];return t.forEach((function(e){n.push(e)})),n.length>0&&!Object(T.a)(n,"expired")&&!Object(T.a)(n,"internal-error")&&(E.a.debug("EME: Reuse loaded session",e.sessionId),!0)}function x(e,t,n){return Object(w.a)((function(){var r=n.keySystemOptions,i=n.mediaKeySystemAccess,a=n.sessionsStore,u=n.sessionStorage,s=i.getConfiguration().sessionTypes,c=null!=s&&Object(T.a)(s,"persistent-license"),l=c&&null!=u&&!0===r.persistentLicense?"persistent-license":"temporary";E.a.debug("EME: Create a new "+l+" session");var f=a.createSession(e,t,l);if(!c||null==u||!0!==r.persistentLicense)return Object(o.a)({type:"created-session",value:{mediaKeySession:f,sessionType:l}});var d=u.get(e,t);if(null===d)return Object(o.a)({type:"created-session",value:{mediaKeySession:f,sessionType:l}});var p=function(){return E.a.info("EME: Removing previous persistent session."),null!==u.get(e,t)&&u.delete(e,t),a.deleteAndCloseSession(f).pipe(Object(v.a)((function(){return{type:"created-session",value:{mediaKeySession:a.createSession(e,t,l),sessionType:l}}})))};return function(e,t){return Object(w.a)((function(){return E.a.debug("EME: Load persisted session",e),Object(S.a)(t.load(e))}))}(d.sessionId,f).pipe(Object(h.a)((function(n){return n?n&&A(f)?(u.add(e,t,f),E.a.info("EME: Succeeded to load persistent session."),Object(o.a)({type:"loaded-persistent-session",value:{mediaKeySession:f,sessionType:l}})):(E.a.warn("EME: Previous persistent session not usable anymore."),p()):(E.a.warn("EME: No data stored for the loaded session"),u.delete(e,t),Object(o.a)({type:"created-session",value:{mediaKeySession:f,sessionType:l}}))})),Object(b.a)((function(){return E.a.warn("EME: Unable to load persistent session."),p()})))}))}var k=j.a.EME_MAX_SIMULTANEOUS_MEDIA_KEY_SESSIONS;var R=n(176),I=n(219),M=n(40);var N=n(36),C=n(8),D=n(148),P=n(142),B=n(88),L=j.a.EME_DEFAULT_WIDEVINE_ROBUSTNESSES,U=j.a.EME_KEY_SYSTEMS;function F(e,t){return Object(w.a)((function(){var n=M.a.getState(e);if(null!=n){var r=function(e,t,n){var r=t.getConfiguration();if(Object(D.a)()||null==r)return null;var i=e.filter((function(e){return e.type===n.type&&((!0!==e.persistentLicense||"required"===r.persistentState)&&(!0!==e.distinctiveIdentifierRequired||"required"===r.distinctiveIdentifier))}))[0];return null!=i?{keySystemOptions:i,keySystemAccess:t}:null}(t,n.mediaKeySystemAccess,n.keySystemOptions);if(null!==r)return E.a.debug("EME: Found cached compatible keySystem",r),Object(o.a)({type:"reuse-media-key-system-access",value:{mediaKeySystemAccess:r.keySystemAccess,options:r.keySystemOptions}})}var i=t.reduce((function(e,t){var n,r=U[t.type];null!=r?n=r.map((function(e){return{keyName:t.type,keyType:e,keySystemOptions:t}})):n=[{keyName:function(e){for(var t=0,n=Object.keys(U);t<n.length;t++){var r=n[t];if(Object(T.a)(U[r],e))return r}}(t.type),keyType:t.type,keySystemOptions:t}];return e.concat(n)}),[]);return new C.a((function(e){var t,n=!1;return function r(a){if(!n)if(a>=i.length)e.error(new O.a("INCOMPATIBLE_KEYSYSTEMS","No key system compatible with your wanted configuration has been found in the current browser."));else{var o=i[a],u=o.keyName,s=o.keyType,c=o.keySystemOptions,l=function(e,t){var n=["temporary"],r="optional",i="optional";!0===t.persistentLicense&&(r="required",n.push("persistent-license")),!0===t.persistentStateRequired&&(r="required"),!0===t.distinctiveIdentifierRequired&&(i="required");var a=null!=t.videoRobustnesses?t.videoRobustnesses:"widevine"===e?L:[],o=null!=t.audioRobustnesses?t.audioRobustnesses:"widevine"===e?L:[];return 0===a.length&&a.push(void 0),0===o.length&&o.push(void 0),[{initDataTypes:["cenc"],videoCapabilities:Object(B.a)(a,(function(e){return[{contentType:'video/mp4;codecs="avc1.4d401e"',robustness:e},{contentType:'video/mp4;codecs="avc1.42e01e"',robustness:e},{contentType:'video/webm;codecs="vp8"',robustness:e}]})),audioCapabilities:Object(B.a)(o,(function(e){return[{contentType:'audio/mp4;codecs="mp4a.40.2"',robustness:e},{contentType:"audio/webm;codecs=opus",robustness:e}]})),distinctiveIdentifier:i,persistentState:r,sessionTypes:n}]}(u,c);if(E.a.debug("EME: Request keysystem access "+s+","+(a+1)+" of "+i.length,l),null==P.c)throw new Error("requestMediaKeySystemAccess is not implemented in your browser.");t=Object(P.c)(s,l).subscribe((function(t){E.a.info("EME: Found compatible keysystem",s,l),e.next({type:"create-media-key-system-access",value:{options:c,mediaKeySystemAccess:t}}),e.complete()}),(function(){E.a.debug("EME: Rejected access to keysystem",s,l),t=null,r(a+1)}))}}(0),function(){n=!0,null!=t&&t.unsubscribe()}}))}))}var $=n(225),z=n(226);var W=n(12),V=n(38),H=function(){function e(e){this._mediaKeys=e,this._entries=[]}var t=e.prototype;return t.getAll=function(){return this._entries.map((function(e){return{session:e.session,sessionType:e.sessionType}}))},t.get=function(e,t){var n=Object(V.a)(e),r=Object(W.a)(this._entries,(function(e){return e.initData===n&&e.initDataType===t}));return null!=r?{session:r.session,sessionType:r.sessionType}:null},t.createSession=function(e,t,n){var r=this;if(null!=this.get(e,t))throw new O.a("MULTIPLE_SESSIONS_SAME_INIT_DATA","This initialization data was already stored.");var i=Object(P.a)(this._mediaKeys,n),a={session:i,sessionType:n,initData:Object(V.a)(e),initDataType:t};return null!==i.closed&&i.closed.then((function(){r._delete(i)})).catch((function(e){E.a.warn("EME-MKSS: session.closed rejected: "+e)})),E.a.debug("EME-MKSS: Add session",a),this._entries.push(a),i},t.deleteAndCloseSession=function(e){var t=this;return Object(w.a)((function(){return t._delete(e),E.a.debug("EME-MKSS: Close session",e),function(e){return Object($.a)(Object(S.a)(e.close()),Object(z.a)(1e3).pipe(Object(h.a)((function(){return Object(S.a)(e.update(new Uint8Array(1))).pipe(Object(v.a)((function(){throw new Error("Compat: Couldn't know if session is closed")})),Object(b.a)((function(t){if(t instanceof Error&&"The session is already closed."===t.message)return Object(o.a)(null);var n=Object(S.a)(e.closed);return Object($.a)(n,Object(z.a)(1e3).pipe(Object(v.a)((function(){throw new Error("Compat: Couldn't know if session is closed")}))))})))}))))}(e).pipe(Object(b.a)((function(e){return E.a.error(e),Object(o.a)(null)})))}))},t.closeAllSessions=function(){var e=this;return Object(w.a)((function(){var t=e._entries;e._entries=[];var n=t.map((function(t){return e.deleteAndCloseSession(t.session)}));return Object(c.a)(u.a.apply(void 0,n).pipe(Object(m.a)()),Object(o.a)(null))}))},t._delete=function(e){var t=Object(W.a)(this._entries,(function(t){return t.session===e}));if(null==t)return-1;E.a.debug("EME-MKSS: delete session",t);var n=this._entries.indexOf(t);return this._entries.splice(n,1),n},e}(),K=n(35),Y=n(2);var G=function(){function e(e){!function(e){Object(K.a)(e,{save:"function",load:"function"},"licenseStorage")}(e),this._entries=[],this._storage=e;try{this._entries=this._storage.load(),Array.isArray(this._entries)||(this._entries=[])}catch(e){E.a.warn("EME-PSS: Could not get entries from license storage",e),this.dispose()}}var t=e.prototype;return t.get=function(e,t){var n=Object(V.a)(e),r=Object(W.a)(this._entries,(function(e){return e.initData===n&&e.initDataType===t}));return null==r?null:r},t.add=function(e,t,n){if(null!=n&&Object(Y.a)(n.sessionId)){var r=n.sessionId,i=this.get(e,t);null!=i&&i.sessionId===r||(null!=i&&this.delete(e,t),E.a.info("EME-PSS: Add new session",r,n),this._entries.push({sessionId:r,initData:Object(V.a)(e),initDataType:t}),this._save())}},t.delete=function(e,t){var n=Object(V.a)(e),r=Object(W.a)(this._entries,(function(e){return e.initData===n&&e.initDataType===t}));if(null!=r){E.a.warn("EME-PSS: Delete session from store",r);var i=this._entries.indexOf(r);this._entries.splice(i,1),this._save()}},t.dispose=function(){this._entries=[],this._save()},t._save=function(){try{this._storage.save(this._entries)}catch(e){E.a.warn("EME-PSS: Could not save licenses in localStorage")}},e}();function q(e,t){return F(e,t).pipe(Object(h.a)((function(t){var n=t.value,r=n.options,i=n.mediaKeySystemAccess,a=M.a.getState(e),u=function(e){if(!0!==e.persistentLicense)return null;var t=e.licenseStorage;if(null==t)throw new O.a("INVALID_KEY_SYSTEM","No license storage found for persistent license.");return E.a.info("EME: Set the given license storage"),new G(t)}(r);if(null!=a&&"reuse-media-key-system-access"===t.type){var s=a.mediaKeys,c=a.sessionsStore;return Object(o.a)({mediaKeys:s,sessionsStore:c,mediaKeySystemAccess:i,keySystemOptions:r,sessionStorage:u})}return E.a.debug("EME: Calling createMediaKeys on the MediaKeySystemAccess"),Object(N.a)((function(){return Object(S.a)(i.createMediaKeys())}),void 0).pipe(Object(b.a)((function(e){var t=e instanceof Error?e.message:"Unknown error when creating MediaKeys.";throw new O.a("CREATE_MEDIA_KEYS_ERROR",t)})),Object(v.a)((function(e){return{mediaKeys:e,sessionsStore:new H(e),mediaKeySystemAccess:i,keySystemOptions:r,sessionStorage:u}})))})))}function X(e,t){return q(e,t).pipe(Object(h.a)((function(t){return Object(c.a)(Object(o.a)({type:"created-media-keys",value:t}),function(e,t){return Object(w.a)((function(){var n=e.keySystemOptions,r=e.mediaKeySystemAccess,i=e.mediaKeys,a=e.sessionsStore,u=M.a.getState(t);return M.a.setState(t,{keySystemOptions:n,mediaKeySystemAccess:r,mediaKeys:i,sessionsStore:a}),(null!=u&&u.sessionsStore!==a?u.sessionsStore.closeAllSessions():Object(o.a)(null)).pipe(Object(h.a)((function(){return t.mediaKeys===i?Object(o.a)(null):(E.a.debug("EME: Setting MediaKeys"),Object(I.a)(t,i))})))}))}(t,e).pipe(Object(R.a)({type:"attached-media-keys",value:t})))})))}var Q=function(){function e(){return Error.call(this),this.message="Timeout has occurred",this.name="TimeoutError",this}return e.prototype=Object.create(Error.prototype),e}(),Z=n(45),J=n(167),ee=n(44),te=n(4),ne=n(101),re=n(28),ie=n(27);var ae=function(){function e(e,t,n,r){this.waitFor=e,this.absoluteTimeout=t,this.withObservable=n,this.scheduler=r}return e.prototype.call=function(e,t){return t.subscribe(new oe(e,this.absoluteTimeout,this.waitFor,this.withObservable,this.scheduler))},e}(),oe=function(e){function t(t,n,r,i,a){var o=e.call(this,t)||this;return o.absoluteTimeout=n,o.waitFor=r,o.withObservable=i,o.scheduler=a,o.action=null,o.scheduleTimeout(),o}return te.a(t,e),t.dispatchTimeout=function(e){var t=e.withObservable;e._unsubscribeAndRecycle(),e.add(Object(ie.a)(e,t))},t.prototype.scheduleTimeout=function(){var e=this.action;e?this.action=e.schedule(this,this.waitFor):this.add(this.action=this.scheduler.schedule(t.dispatchTimeout,this.waitFor,this))},t.prototype._next=function(t){this.absoluteTimeout||this.scheduleTimeout(),e.prototype._next.call(this,t)},t.prototype._unsubscribe=function(){this.action=null,this.scheduler=null,this.withObservable=null},t}(re.a);function ue(e,t){return void 0===t&&(t=ee.a),function(e,t,n){return void 0===n&&(n=ee.a),function(r){var i=Object(ne.a)(e),a=i?+e-n.now():Math.abs(e);return r.lift(new ae(a,i,t,n))}}(e,Object(s.a)(new Q),t)}var se=n(175);var ce=n(177),le=n(106),fe=n(14);var de={EXPIRED:"expired",INTERNAL_ERROR:"internal-error",OUTPUT_RESTRICTED:"output-restricted"};function pe(e){var t="function"==typeof Map?new Map:void 0;return(pe=function(e){if(null===e||(n=e,-1===Function.toString.call(n).indexOf("[native code]")))return e;var n;if("function"!=typeof e)throw new TypeError("Super expression must either be null or a function");if(void 0!==t){if(t.has(e))return t.get(e);t.set(e,r)}function r(){return he(e,arguments,be(this).constructor)}return r.prototype=Object.create(e.prototype,{constructor:{value:r,enumerable:!1,writable:!0,configurable:!0}}),ve(r,e)})(e)}function he(e,t,n){return(he=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}()?Reflect.construct:function(e,t,n){var r=[null];r.push.apply(r,t);var i=new(Function.bind.apply(e,r));return n&&ve(i,n.prototype),i}).apply(null,arguments)}function ve(e,t){return(ve=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function be(e){return(be=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var me=g.a.onKeyError$,ge=g.a.onKeyMessage$,ye=g.a.onKeyStatusesChange$,_e=function(e){var t,n;function r(t){var n;return n=e.call(this)||this,Object.setPrototypeOf(function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(n),r.prototype),n.sessionError=t,n}return n=e,(t=r).prototype=Object.create(n.prototype),t.prototype.constructor=t,t.__proto__=n,r}(pe(Error));function Oe(e){if(e instanceof Q)return new O.a("KEY_LOAD_TIMEOUT","The license server took too much time to respond.");var t=new O.a("KEY_LOAD_ERROR","An error occured when calling `getLicense`.");return null!=e&&Object(Y.a)(e.message)&&(t.message=e.message),t}function Ee(e,t){var n=function(e,t){var n=[],r=[],i=t.fallbackOn,a=void 0===i?{}:i;return e.keyStatuses.forEach((function(e,i){var o="string"==typeof e?[e,i]:[i,e],u=o[0],s=o[1];switch(u){case de.EXPIRED:var c=new O.a("KEY_STATUS_CHANGE_ERROR","A decryption key expired");if(!1!==t.throwOnLicenseExpiration)throw c;n.push({type:"warning",value:c});break;case de.INTERNAL_ERROR:var l=new O.a("KEY_STATUS_CHANGE_ERROR","An invalid key status has been encountered: "+u);if(!0!==a.keyInternalError)throw l;n.push({type:"warning",value:l}),r.push(s);case de.OUTPUT_RESTRICTED:var f=new O.a("KEY_STATUS_CHANGE_ERROR","An invalid key status has been encountered: "+u);if(!0!==a.keyOutputRestricted)throw f;n.push({type:"warning",value:f}),r.push(s)}})),[n,r]}(e,t),r=n[0],i=n[1],u=r.length>0?o.a.apply(void 0,r):a.a,s=i.length>0?Object(o.a)({type:"blacklist-keys",value:i}):a.a;return Object(c.a)(u,s)}function we(e,t,n){var r,i=n.initData,s=n.initDataType;E.a.debug("EME: Binding session events",e);var l,f,d=new Z.a,p=t.getLicenseConfig,m=void 0===p?{}:p,g={totalRetry:(r=m.retry,null!=r?r:2),baseDelay:200,maxDelay:3e3,shouldRetry:function(e){return e instanceof Q||null==e||!0!==e.noRetry},onRetry:function(e){return d.next({type:"warning",value:Oe(e)})}},y=me(e).pipe(Object(v.a)((function(e){throw new O.a("KEY_ERROR",e.type)}))),_=ye(e).pipe(Object(h.a)((function(n){E.a.debug("EME: keystatuseschange event",e,n);var r=Ee(e,t),i=Object(N.a)((function(){return"function"==typeof t.onKeyStatusesChange?Object(S.a)(t.onKeyStatusesChange(n,e)):a.a}),void 0).pipe(Object(v.a)((function(t){return{type:"key-status-change-handled",value:{session:e,license:t}}})),Object(b.a)((function(e){var t=new O.a("KEY_STATUS_CHANGE_ERROR","Unknown `onKeyStatusesChange` error");throw null!=e&&Object(Y.a)(e.message)&&(t.message=e.message),t})));return Object(c.a)(r,i)}))),j=ge(e).pipe(Object(h.a)((function(n){var r=new Uint8Array(n.message),a=Object(Y.a)(n.messageType)?n.messageType:"license-request";E.a.debug("EME: Event message type "+a,e,n);var o,u,c,l,f,d,p,y,_=Object(w.a)((function(){var e=t.getLicense(r,a),n=null!=m.timeout?m.timeout:1e4;return Object(S.a)(e).pipe(n>=0?ue(n):J.a)}));return(o=_,u=g,c=u.baseDelay,l=u.maxDelay,f=u.totalRetry,d=u.shouldRetry,p=u.onRetry,y=0,o.pipe(Object(b.a)((function(e,t){if(!Object(fe.a)(d)&&!d(e)||y++>=f)throw e;"function"==typeof p&&p(e,y);var n=Math.min(c*Math.pow(2,y-1),l),r=Object(le.a)(n);return Object(z.a)(r).pipe(Object(h.a)((function(){return t})))})))).pipe(Object(v.a)((function(t){return{type:"key-message-handled",value:{session:e,license:t}}})),Object(b.a)((function(e){var t=Oe(e);if(null!=e&&!0===e.fallbackOnLastTry)throw E.a.warn("EME: Last `getLicense` attempt failed. Blacklisting the current session."),new _e(t);throw t})),Object(se.a)({type:"session-message",value:{messageType:a,initData:i,initDataType:s}}))}))),T=Object(u.a)(j,_).pipe((l=function(t){switch(t.type){case"warning":case"blacklist-keys":case"session-message":return Object(o.a)(t)}var n=t.value.license;return null==n?(E.a.info("EME: No license given, skipping session.update"),Object(o.a)({type:"no-update",value:{initData:i,initDataType:s}})):(E.a.debug("EME: Update session",t),Object(S.a)(e.update(n)).pipe(Object(b.a)((function(e){var t=e instanceof Error?e.toString():"`session.update` failed";throw new O.a("KEY_UPDATE_ERROR",t)})),Object(R.a)({type:"session-updated",value:{session:e,license:n,initData:i,initDataType:s}})))},Object(h.a)(l,f,1))),A=Object(u.a)(Ee(e,t),T,y,d);return null!=e.closed?A.pipe(Object(ce.a)(Object(S.a)(e.closed))):A}function je(e,t){return"function"==typeof e.setServerCertificate?(E.a.debug("EME: Setting server certificate on the MediaKeys"),function(e,t){return Object(w.a)((function(){return Object(S.a)(e.setServerCertificate(t)).pipe(Object(b.a)((function(e){E.a.warn("EME: mediaKeys.setServerCertificate returned an error",e);var t=e instanceof Error?e.toString():"`setServerCertificate` error";throw new O.a("LICENSE_SERVER_CERTIFICATE_ERROR",t)})))}))}(e,t).pipe(Object(m.a)(),Object(b.a)((function(e){return Object(o.a)({type:"warning",value:e})})))):(E.a.warn("EME: Could not set the server certificate. mediaKeys.setServerCertificate is not a function"),a.a)}var Te=function(){function e(){this._namedTypeData={},this._unnamedTypeData={}}var t=e.prototype;return t.get=function(e,t){if(!Object(Y.a)(e))return this._unnamedTypeData[Object(V.a)(t)];var n=this._namedTypeData[e];return null!=n?n[Object(V.a)(t)]:void 0},t.set=function(e,t,n){var r=Object(V.a)(t);if(Object(Y.a)(e)){var i,a=this._namedTypeData[e];if(null==a)this._namedTypeData[e]=((i={})[r]=n,i);else a[r]=n}else this._unnamedTypeData[r]=n},t.remove=function(e,t){if(Object(Y.a)(e)){if(!this._namedTypeData.hasOwnProperty(e))return!1;var n=this._namedTypeData[e],r=Object(V.a)(t);return!!n.hasOwnProperty(r)&&(delete n[r],!0)}var i=Object(V.a)(t);return!!this._unnamedTypeData.hasOwnProperty(i)&&(delete this._unnamedTypeData[i],!0)},e}(),Se=g.a.onEncrypted$;var Ae=n(151);n.d(t,"clearEMESession",(function(){return r.a})),n.d(t,"disposeEME",(function(){return i.a})),n.d(t,"getCurrentKeySystem",(function(){return Ae.a}));t.default=function(e,t,n){E.a.debug("EME: Starting EMEManager logic.");var r=new Te,i=new Te,g=X(e,t).pipe(Object(l.a)()),j=g.pipe(Object(f.a)((function(e){return"attached-media-keys"===e.type})),Object(d.a)(1)),T=Se(e).pipe(Object(p.a)((function(e){E.a.debug("EME: Encrypted event received from media element.",e)})),Object(h.a)((function(e){var t=Object(y.a)(e),n=t.initData,r=t.initDataType;return null==n?a.a:Object(o.a)({type:r,data:n})})),Object(l.a)({refCount:!0})),S=n.pipe(Object(p.a)((function(e){E.a.debug("EME: Encrypted event received from Player",e)}))),R=Object(u.a)(S,T).pipe(Object(h.a)((function(e){return j.pipe(Object(v.a)((function(t){return[e,t]})))})),Object(h.a)((function(e,t){var n=e[0],a=e[1].value,l=a.keySystemOptions,f=a.mediaKeys,d=l.serverCertificate,p=n.type,b=n.data,g=i.get(p,b);if(null!=g){if(null==p){E.a.error("EME: The current session has already been blacklisted but the current content is not known. Throwing.");var y=g.sessionError;return y.fatal=!0,Object(s.a)(y)}return E.a.warn("EME: The current session has already been blacklisted. Blacklisting content."),Object(o.a)({type:"blacklist-protection-data",value:{type:p,data:b}})}if(!0===r.get(p,b))return E.a.debug("EME: Init data already received. Skipping it."),Object(o.a)({type:"init-data-ignored",value:{type:p,data:b}});r.set(p,b,!0);var _=function(e,t){return Object(w.a)((function(){var n=e.type,r=e.data,i=null,a=t.sessionsStore,s=a.get(r,n);if(null!=s){if(A(i=s.session))return E.a.debug("EME: Reuse loaded session",i.sessionId),Object(o.a)({type:"loaded-open-session",value:{mediaKeySession:i,sessionType:s.sessionType,initData:r,initDataType:n}});null!=t.sessionStorage&&t.sessionStorage.delete(new Uint8Array(r),n)}return(null!=i?a.deleteAndCloseSession(i):Object(o.a)(null)).pipe(Object(h.a)((function(){var e=[],i=a.getAll().slice();if(k>0&&k<=i.length)for(var o=0;o<k-i.length+1;o++)e.push(a.deleteAndCloseSession(i[o].session));return Object(c.a)(u.a.apply(void 0,e).pipe(Object(m.a)()),x(r,n,t).pipe(Object(v.a)((function(e){return{type:e.type,value:{mediaKeySession:e.value.mediaKeySession,sessionType:e.value.sessionType,initData:r,initDataType:n}}}))))})))}))}(n,a).pipe(Object(v.a)((function(e){return{type:e.type,value:{initData:e.value.initData,initDataType:e.value.initDataType,mediaKeySession:e.value.mediaKeySession,sessionType:e.value.sessionType,keySystemOptions:a.keySystemOptions,sessionStorage:a.sessionStorage}}})));return 0===t?Object(u.a)(null!=d?Object(c.a)(je(f,d),_):_):_})),Object(h.a)((function(e){switch(e.type){case"warning":case"blacklist-protection-data":case"init-data-ignored":return Object(o.a)(e)}var t=e.value,n=t.initData,r=t.initDataType,s=t.mediaKeySession,c=t.sessionType,l=t.keySystemOptions,f=t.sessionStorage,d="created-session"!==e.type?a.a:Object(_.a)(s,n,r).pipe(Object(p.a)((function(){"persistent-license"===c&&null!=f&&f.add(n,r,s)})),Object(b.a)((function(e){throw new O.a("KEY_GENERATE_REQUEST_ERROR",e instanceof Error?e.toString():"Unknown error")})),Object(m.a)());return Object(u.a)(we(s,l,{initData:n,initDataType:r}),d).pipe(Object(b.a)((function(e){if(!(e instanceof _e))throw e;i.set(r,n,e);var t=e.sessionError;if(null==r)throw E.a.error("EME: Current session blacklisted and content not known. Throwing."),t.fatal=!0,t;return E.a.warn("EME: Current session blacklisted. Blacklisting content."),Object(o.a)({type:"warning",value:t},{type:"blacklist-protection-data",value:{type:r,data:n}})})))})));return Object(u.a)(g,T.pipe(Object(v.a)((function(e){return{type:"encrypted-event-received",value:e}}))),R)}},function(e,t,n){"use strict";n.d(t,"a",(function(){return i}));var r=n(24);function i(){return r.b}},function(e,t,n){"use strict";n.d(t,"a",(function(){return o}));var r=n(8),i=n(0),a=n(87);function o(e,t){return new r.a((function(n){return i.a.info("Setting URL to Element",t,e),e.src=t,n.next(void 0),function(){Object(a.a)(e)}}))}},function(e,t,n){"use strict";n.d(t,"a",(function(){return o}));var r=n(76),i=n(21),a=n(36);function o(e){return Object(r.a)((function(){return Object(a.a)((function(){return Object(i.a)(e.play())}),void 0)}))}},function(e,t,n){"use strict";n.d(t,"a",(function(){return u}));var r=n(26),i=n(133),a=n(25),o=n(50);function u(e){return e.readyState>=a.d.HAVE_METADATA?Object(r.a)(null):Object(o.onLoadedMetadata$)(e).pipe(Object(i.a)(1))}},function(e,t,n){"use strict";n.d(t,"a",(function(){return i}));var r=n(142);function i(){return"function"==typeof r.c}},function(e,t,n){"use strict";n.d(t,"a",(function(){return y})),n.d(t,"c",(function(){return g}));var r=n(45),i=n(85),a=n(63),o=n(26),u=n(177),s=n(1),c=n(21),l=n(30),f=n(33),d=n(25),p=n(24),h=n(50),v=n(96),b=n(143);function m(e,t){e.prototype=Object.create(t.prototype),e.prototype.constructor=e,e.__proto__=t}var g=null;var y=function(e,t){return e.createSession(t)},_=function(){function e(){}var t=e.prototype;return t._setVideo=function(){throw new Error("MediaKeys is not implemented in your browser")},t.createSession=function(){throw new Error("MediaKeys is not implemented in your browser")},t.setServerCertificate=function(){throw new Error("MediaKeys is not implemented in your browser")},e}();if(null==navigator.requestMediaKeySystemAccess||Object(v.a)()){var O=function(e){return function(t,n){var r=this;return new f.a((function(i,a){try{e.call(r,t,null==n?"":n),i()}catch(e){a(e)}}))}},E=function(e){return"function"==typeof e.webkitGenerateKeyRequest};if(E(HTMLVideoElement.prototype)){var w=function(e){function t(t,n){var a;return(a=e.call(this)||this)._closeSession$=new r.a,a._vid=t,a._key=n,a.sessionId="",a.closed=new f.a((function(e){a._closeSession$.subscribe(e)})),a.keyStatuses=new Map,a.expiration=NaN,Object(i.a)(h.onKeyMessage$(t),h.onKeyAdded$(t),h.onKeyError$(t)).pipe(Object(u.a)(a._closeSession$)).subscribe((function(e){return a.trigger(e.type,e)})),a.update=O((function(e,t){if(!E(a._vid))throw new Error("impossible to add a new key");if(a._key.indexOf("clearkey")>=0){var n=e instanceof ArrayBuffer?new Uint8Array(e):e,r=JSON.parse(Object(s.g)(n)),i=Object(s.r)(atob(r.keys[0].k)),o=Object(s.r)(atob(r.keys[0].kid));a._vid.webkitAddKey(a._key,i,o,t)}else a._vid.webkitAddKey(a._key,e,null,t);a.sessionId=t})),a}m(t,e);var n=t.prototype;return n.generateRequest=function(e,t){var n=this;return new f.a((function(e){if(!E(n._vid))throw new Error("impossible to generate a key request");n._vid.webkitGenerateKeyRequest(n._key,t),e()}))},n.close=function(){var e=this;return new f.a((function(t){e._closeSession$.next(),e._closeSession$.complete(),t()}))},n.load=function(){return f.a.resolve(!1)},n.remove=function(){return f.a.resolve()},t}(l.a);_=function(){function e(e){this.ks_=e}var t=e.prototype;return t._setVideo=function(e){this._vid=e},t.createSession=function(){if(null==this._vid)throw new Error("Video not attached to the MediaKeys");return new w(this._vid,this.ks_)},t.setServerCertificate=function(){throw new Error("Server certificate is not implemented in your browser")},e}();g=function(e,t){if(!function(e){var t=document.querySelector("video");return null==t&&(t=document.createElement("video")),null!=t&&"function"==typeof t.canPlayType&&!!t.canPlayType("video/mp4",e)}(e))return Object(a.a)(void 0);for(var n=0;n<t.length;n++){var r=t[n],i=r.videoCapabilities,u=r.audioCapabilities,s=r.initDataTypes,c=r.sessionTypes,l=r.distinctiveIdentifier,f=r.persistentState,d=!0;if(d=(d=(d=(d=d&&(null==s||s.some((function(e){return"cenc"===e}))))&&(null==c||c.filter((function(e){return"temporary"===e})).length===c.length))&&"required"!==l)&&"required"!==f){var p={videoCapabilities:i,audioCapabilities:u,initDataTypes:["cenc"],sessionTypes:["temporary"],distinctiveIdentifier:"not-allowed",persistentState:"not-allowed"};return Object(o.a)(new b.a(e,new _(e),p))}}return Object(a.a)(void 0)}}else if(null!=d.b&&null!=d.b.prototype&&"function"==typeof d.b.isTypeSupported&&(g=function(e,t){if(!d.b.isTypeSupported(e))return Object(a.a)(void 0);for(var n=0;n<t.length;n++){var r=t[n],i=r.videoCapabilities,u=r.audioCapabilities,s=r.initDataTypes,c=r.distinctiveIdentifier,l=!0;if(l=(l=l&&(null==s||s.some((function(e){return"cenc"===e}))))&&"required"!==c){var f={videoCapabilities:i,audioCapabilities:u,initDataTypes:["cenc"],distinctiveIdentifier:"not-allowed",persistentState:"required",sessionTypes:["temporary","persistent-license"]};return Object(o.a)(new b.a(e,new d.b(e),f))}}return Object(a.a)(void 0)},p.b&&"function"==typeof d.b.prototype.createSession)){var j=function(e){function t(t){var n;return(n=e.call(this)||this).sessionId="",n.expiration=NaN,n.keyStatuses=new Map,n._mk=t,n._closeSession$=new r.a,n.closed=new f.a((function(e){n._closeSession$.subscribe(e)})),n.update=O((function(e,t){if(null==n._ss)throw new Error("MediaKeySession not set");n._ss.update(e,t),n.sessionId=t})),n}m(t,e);var n=t.prototype;return n.generateRequest=function(e,t){var n=this;return new f.a((function(e){n._ss=n._mk.createSession("video/mp4",t),Object(i.a)(h.onKeyMessage$(n._ss),h.onKeyAdded$(n._ss),h.onKeyError$(n._ss)).pipe(Object(u.a)(n._closeSession$)).subscribe((function(e){return n.trigger(e.type,e)})),e()}))},n.close=function(){var e=this;return new f.a((function(t){null!=e._ss&&(e._ss.close(),e._ss=void 0),e._closeSession$.next(),e._closeSession$.complete(),t()}))},n.load=function(){return f.a.resolve(!1)},n.remove=function(){return f.a.resolve()},t}(l.a);y=function(e){return new j(e)}}}else g=function(e,t){return Object(c.a)(navigator.requestMediaKeySystemAccess(e,t))};t.b=_},function(e,t,n){"use strict";n.d(t,"a",(function(){return a}));var r=n(33);function i(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var a=function(){function e(e,t,n){this._keyType=e,this._mediaKeys=t,this._configuration=n}var t,n,a,o=e.prototype;return o.createMediaKeys=function(){var e=this;return new r.a((function(t){return t(e._mediaKeys)}))},o.getConfiguration=function(){return this._configuration},t=e,(n=[{key:"keySystem",get:function(){return this._keyType}}])&&i(t.prototype,n),a&&i(t,a),e}()},function(e,t,n){"use strict";n.d(t,"a",(function(){return a}));var r=n(4),i=n(10);function a(e,t){return function(n){return n.lift(new o(e,t))}}var o=function(){function e(e,t){this.compare=e,this.keySelector=t}return e.prototype.call=function(e,t){return t.subscribe(new u(e,this.compare,this.keySelector))},e}(),u=function(e){function t(t,n,r){var i=e.call(this,t)||this;return i.keySelector=r,i.hasKey=!1,"function"==typeof n&&(i.compare=n),i}return r.a(t,e),t.prototype.compare=function(e,t){return e===t},t.prototype._next=function(e){var t;try{var n=this.keySelector;t=n?n(e):e}catch(e){return this.destination.error(e)}var r=!1;if(this.hasKey)try{r=(0,this.compare)(this.key,t)}catch(e){return this.destination.error(e)}else this.hasKey=!0;r||(this.key=t,this.destination.next(e))},t}(i.a)},function(e,t,n){"use strict";n.d(t,"a",(function(){return a}));var r=n(4),i=n(10);function a(){return function(e){return e.lift(new o)}}var o=function(){function e(){}return e.prototype.call=function(e,t){return t.subscribe(new u(e))},e}(),u=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return r.a(t,e),t.prototype._next=function(e){},t}(i.a)},function(e,t,n){"use strict";n.d(t,"a",(function(){return u}));var r=n(4),i=n(10),a=n(47),o=n(59);function u(e,t,n){return function(r){return r.lift(new s(e,t,n))}}var s=function(){function e(e,t,n){this.nextOrObserver=e,this.error=t,this.complete=n}return e.prototype.call=function(e,t){return t.subscribe(new c(e,this.nextOrObserver,this.error,this.complete))},e}(),c=function(e){function t(t,n,r,i){var u=e.call(this,t)||this;return u._tapNext=a.a,u._tapError=a.a,u._tapComplete=a.a,u._tapError=r||a.a,u._tapComplete=i||a.a,Object(o.a)(n)?(u._context=u,u._tapNext=n):n&&(u._context=n,u._tapNext=n.next||a.a,u._tapError=n.error||a.a,u._tapComplete=n.complete||a.a),u}return r.a(t,e),t.prototype._next=function(e){try{this._tapNext.call(this._context,e)}catch(e){return void this.destination.error(e)}this.destination.next(e)},t.prototype._error=function(e){try{this._tapError.call(this._context,e)}catch(e){return void this.destination.error(e)}this.destination.error(e)},t.prototype._complete=function(){try{this._tapComplete.call(this._context)}catch(e){return void this.destination.error(e)}return this.destination.complete()},t}(i.a)},,function(e,t,n){"use strict";n.d(t,"a",(function(){return i}));var r=n(24);function i(){return r.b}},function(e,t,n){"use strict";n.d(t,"a",(function(){return c}));var r=n(76),i=n(54),a=n(145),o=n(137),u=n(107),s=n(40);function c(e){return Object(r.a)((function(){if(Object(o.a)())return Object(u.a)(e).pipe(Object(a.a)());var t=s.a.getState(e);return null!=t&&!0===t.keySystemOptions.closeSessionsOnStop?t.sessionsStore.closeAllSessions().pipe(Object(a.a)()):i.a}))}},function(e,t,n){"use strict";n.d(t,"a",(function(){return a}));var r=n(32),i=n(107);function a(e){Object(i.a)(e).subscribe(r.a)}},function(e,t,n){"use strict";n.d(t,"a",(function(){return i}));var r=n(40);function i(e){var t=r.a.getState(e);return null==t?null:t.keySystemOptions.type}},function(e,t,n){"use strict";n.d(t,"a",(function(){return i}));var r=n(25);function i(e){return null!=r.c&&("function"!=typeof r.c.isTypeSupported||r.c.isTypeSupported(e))}},function(e,t,n){"use strict";n.d(t,"a",(function(){return i}));var r=n(24);function i(){return!r.c}},function(e,t,n){"use strict";n.d(t,"a",(function(){return i}));var r=n(24);function i(e,t){var n,i;if(r.c){var a=e.textTracks.length;(n=a>0?e.textTracks[a-1]:e.addTextTrack("subtitles")).mode=t?n.HIDDEN:n.SHOWING}else i=document.createElement("track"),e.appendChild(i),n=i.track,i.kind="subtitles",n.mode=t?"hidden":"showing";return{track:n,trackElement:i}}},function(e,t,n){"use strict";function r(e){return"function"==typeof window.VTTCue&&e instanceof window.VTTCue}n.d(t,"a",(function(){return r}))},function(e,t,n){"use strict";n.d(t,"a",(function(){return f}));var r=n(76),i=n(8),a=n(216),o=n(175),u=n(31),s=n(144),c=n(0),l=window.ResizeObserver;function f(e,t){return Object(r.a)((function(){if(void 0!==l){var n=-1,r=-1;return new i.a((function(t){var i=new l((function(e){if(0!==e.length){var i=e[0].contentRect,a=i.height,o=i.width;a===n&&o===r||(n=a,r=o,t.next({height:a,width:o}))}else c.a.error("Compat: Resized but no observed element.")}));return i.observe(e),function(){i.disconnect()}}))}return Object(a.a)(t).pipe(Object(o.a)(null),Object(u.a)((function(){var t=e.getBoundingClientRect();return{height:t.height,width:t.width}})),Object(s.a)((function(e,t){return e.height===t.height&&e.width===t.width})))}))}},function(e,t,n){"use strict";var r;function i(e,t){(void 0===r&&(r=void 0!==e.classList&&"function"==typeof e.classList.add),r)?e.classList.add(t):(" "+e.className+" ").indexOf(" "+t+" ")<0&&(e.className+=" "+t)}n.d(t,"a",(function(){return i}))},function(e,t,n){"use strict";var r=Array.prototype.slice,i=n(159),a=Object.keys,o=a?function(e){return a(e)}:n(194),u=Object.keys;o.shim=function(){Object.keys?function(){var e=Object.keys(arguments);return e&&e.length===arguments.length}(1,2)||(Object.keys=function(e){return i(e)?u(r.call(e)):u(e)}):Object.keys=o;return Object.keys||o},e.exports=o},function(e,t,n){"use strict";var r=Object.prototype.toString;e.exports=function(e){var t=r.call(e),n="[object Arguments]"===t;return n||(n="[object Array]"!==t&&null!==e&&"object"==typeof e&&"number"==typeof e.length&&e.length>=0&&"[object Function]"===r.call(e.callee)),n}},function(e,t,n){"use strict";var r=Object,i=TypeError;e.exports=function(){if(null!=this&&this!==r(this))throw new i("RegExp.prototype.flags getter called on non-object");var e="";return this.global&&(e+="g"),this.ignoreCase&&(e+="i"),this.multiline&&(e+="m"),this.dotAll&&(e+="s"),this.unicode&&(e+="u"),this.sticky&&(e+="y"),e}},function(e,t,n){"use strict";var r=n(160),i=n(135).supportsDescriptors,a=Object.getOwnPropertyDescriptor,o=TypeError;e.exports=function(){if(!i)throw new o("RegExp.prototype.flags requires a true ES5 environment that supports property descriptors");if("gim"===/a/gim.flags){var e=a(RegExp.prototype,"flags");if(e&&"function"==typeof e.get&&"boolean"==typeof/a/.dotAll)return e.get}return r}},function(e,t,n){"use strict";function r(){return!1===navigator.onLine}n.d(t,"a",(function(){return r}))},function(e,t,n){"use strict";function r(e,t){return e.segment.id===t.segment.id&&e.representation.id===t.representation.id&&e.adaptation.id===t.adaptation.id&&e.period.id===t.period.id}n.d(t,"a",(function(){return r}))},function(e,t,n){"use strict";n.d(t,"a",(function(){return i}));var r=n(0);function i(e,t){if("function"==typeof e.changeType){try{e.changeType(t)}catch(e){return r.a.warn("Could not call 'changeType' on the given SourceBuffer:",e),!1}return!0}return!1}},function(e,t,n){"use strict";n.d(t,"a",(function(){return i}));var r=n(24);function i(e,t,n,i){return r.a&&i&&"timeupdate"===n&&null!=t&&t.end-e>10}},function(e,t,n){"use strict";function r(e){return null===e||e.indexOf("widevine")<0}n.d(t,"a",(function(){return r}))},function(e,t,n){"use strict";function r(e){return e}n.d(t,"a",(function(){return r}))},function(e,t,n){"use strict";n.d(t,"a",(function(){return i}));var r=n(97);function i(){return Object(r.a)(1)}},function(e,t,n){"use strict";(function(t){var n,r="pending",i="settled",a="fulfilled",o="rejected",u=function(){},s=void 0!==t&&void 0!==t.process&&"function"==typeof t.process.emit,c="undefined"==typeof setImmediate?setTimeout:setImmediate,l=[];function f(){for(var e=0;e<l.length;e++)l[e][0](l[e][1]);l=[],n=!1}function d(e,t){l.push([e,t]),n||(n=!0,c(f,0))}function p(e){var t=e.owner,n=t._state,r=t._data,i=e[n],u=e.then;if("function"==typeof i){n=a;try{r=i(r)}catch(e){m(u,e)}}h(u,r)||(n===a&&v(u,r),n===o&&m(u,r))}function h(e,t){var n;try{if(e===t)throw new TypeError("A promises callback cannot return that same promise.");if(t&&("function"==typeof t||"object"==typeof t)){var r=t.then;if("function"==typeof r)return r.call(t,(function(r){n||(n=!0,t===r?b(e,r):v(e,r))}),(function(t){n||(n=!0,m(e,t))})),!0}}catch(t){return n||m(e,t),!0}return!1}function v(e,t){e!==t&&h(e,t)||b(e,t)}function b(e,t){e._state===r&&(e._state=i,e._data=t,d(y,e))}function m(e,t){e._state===r&&(e._state=i,e._data=t,d(_,e))}function g(e){e._then=e._then.forEach(p)}function y(e){e._state=a,g(e)}function _(e){e._state=o,g(e),!e._handled&&s&&t.process.emit("unhandledRejection",e._data,e)}function O(e){t.process.emit("rejectionHandled",e)}function E(e){if("function"!=typeof e)throw new TypeError("Promise resolver "+e+" is not a function");if(this instanceof E==!1)throw new TypeError("Failed to construct 'Promise': Please use the 'new' operator, this object constructor cannot be called as a function.");this._then=[],function(e,t){function n(e){m(t,e)}try{e((function(e){v(t,e)}),n)}catch(e){n(e)}}(e,this)}E.prototype={constructor:E,_state:r,_then:null,_data:void 0,_handled:!1,then:function(e,t){var n={owner:this,then:new this.constructor(u),fulfilled:e,rejected:t};return!t&&!e||this._handled||(this._handled=!0,this._state===o&&s&&d(O,this)),this._state===a||this._state===o?d(p,n):this._then.push(n),n.then},catch:function(e){return this.then(null,e)}},E.all=function(e){if(!Array.isArray(e))throw new TypeError("You must pass an array to Promise.all().");return new E((function(t,n){var r=[],i=0;function a(e){return i++,function(n){r[e]=n,--i||t(r)}}for(var o,u=0;u<e.length;u++)(o=e[u])&&"function"==typeof o.then?o.then(a(u),n):r[u]=o;i||t(r)}))},E.race=function(e){if(!Array.isArray(e))throw new TypeError("You must pass an array to Promise.race().");return new E((function(t,n){for(var r,i=0;i<e.length;i++)(r=e[i])&&"function"==typeof r.then?r.then(t,n):t(r)}))},E.resolve=function(e){return e&&"object"==typeof e&&e.constructor===E?e:new E((function(t){t(e)}))},E.reject=function(e){return new E((function(t,n){n(e)}))},e.exports=E}).call(this,n(186))},function(e,t,n){"use strict";n.d(t,"a",(function(){return c}));var r=n(37),i=n(66);function a(e){var t="function"==typeof Map?new Map:void 0;return(a=function(e){if(null===e||(n=e,-1===Function.toString.call(n).indexOf("[native code]")))return e;var n;if("function"!=typeof e)throw new TypeError("Super expression must either be null or a function");if(void 0!==t){if(t.has(e))return t.get(e);t.set(e,r)}function r(){return o(e,arguments,s(this).constructor)}return r.prototype=Object.create(e.prototype,{constructor:{value:r,enumerable:!1,writable:!0,configurable:!0}}),u(r,e)})(e)}function o(e,t,n){return(o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}()?Reflect.construct:function(e,t,n){var r=[null];r.push.apply(r,t);var i=new(Function.bind.apply(e,r));return n&&u(i,n.prototype),i}).apply(null,arguments)}function u(e,t){return(u=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function s(e){return(s=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var c=function(e){var t,n;function a(t,n){var o;return o=e.call(this)||this,Object.setPrototypeOf(function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(o),a.prototype),o.name="NetworkError",o.type=r.b.NETWORK_ERROR,o.xhr=void 0===n.xhr?null:n.xhr,o.url=n.url,o.status=n.status,o.errorType=n.type,o.code=t,o.message=Object(i.a)(o.name,o.code,n.message),o.fatal=!1,o}return n=e,(t=a).prototype=Object.create(n.prototype),t.prototype.constructor=t,t.__proto__=n,a.prototype.isHttpError=function(e){return this.errorType===r.c.ERROR_HTTP_CODE&&this.status===e},a}(a(Error))},function(e,t,n){"use strict";n.d(t,"a",(function(){return a})),n.d(t,"b",(function(){return o}));var r=n(1),i={};function a(e,t){var n=t.length+8;return Object(r.i)(Object(r.n)(n),function(e){if(null!=i[e])return i[e];var t=Object(r.r)(e);return i[e]=t,t}(e),t)}function o(e,t){return a(e,r.i.apply(void 0,t))}},function(e,t,n){"use strict";n.d(t,"a",(function(){return s}));var r=n(90),i=n(37),a=n(58),o=n(170),u=n(69);function s(e){return(e instanceof r.a||e instanceof a.a||e instanceof u.a||e instanceof o.a)&&Object.keys(i.b).indexOf(e.type)>=0}},function(e,t,n){var r=n(158),i=n(195),a=n(196),o=n(197),u=n(201),s=n(203),c=Date.prototype.getTime;function l(e,t,n){var p=n||{};return!(p.strict?!a(e,t):e!==t)||(!e||!t||"object"!=typeof e&&"object"!=typeof t?p.strict?a(e,t):e==t:function(e,t,n){var a,p;if(typeof e!=typeof t)return!1;if(f(e)||f(t))return!1;if(e.prototype!==t.prototype)return!1;if(i(e)!==i(t))return!1;var h=o(e),v=o(t);if(h!==v)return!1;if(h||v)return e.source===t.source&&u(e)===u(t);if(s(e)&&s(t))return c.call(e)===c.call(t);var b=d(e),m=d(t);if(b!==m)return!1;if(b||m){if(e.length!==t.length)return!1;for(a=0;a<e.length;a++)if(e[a]!==t[a])return!1;return!0}if(typeof e!=typeof t)return!1;try{var g=r(e),y=r(t)}catch(e){return!1}if(g.length!==y.length)return!1;for(g.sort(),y.sort(),a=g.length-1;a>=0;a--)if(g[a]!=y[a])return!1;for(a=g.length-1;a>=0;a--)if(p=g[a],!l(e[p],t[p],n))return!1;return!0}(e,t,p))}function f(e){return null==e}function d(e){return!(!e||"object"!=typeof e||"number"!=typeof e.length)&&("function"==typeof e.copy&&"function"==typeof e.slice&&!(e.length>0&&"number"!=typeof e[0]))}e.exports=l},function(e,t,n){"use strict";var r=n(4),i=n(45),a=function(e){function t(t,n){var r=e.call(this,t,n)||this;return r.scheduler=t,r.work=n,r}return r.a(t,e),t.prototype.schedule=function(t,n){return void 0===n&&(n=0),n>0?e.prototype.schedule.call(this,t,n):(this.delay=n,this.state=t,this.scheduler.flush(this),this)},t.prototype.execute=function(t,n){return n>0||this.closed?e.prototype.execute.call(this,t,n):this._execute(t,n)},t.prototype.requestAsyncId=function(t,n,r){return void 0===r&&(r=0),null!==r&&r>0||null===r&&this.delay>0?e.prototype.requestAsyncId.call(this,t,n,r):t.flush(this)},t}(n(83).a),o=new(function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return r.a(t,e),t}(n(82).a))(a),u=n(20),s=n(10),c=n(75);var l=function(e){function t(t,n,r){void 0===r&&(r=0);var i=e.call(this,t)||this;return i.scheduler=n,i.delay=r,i}return r.a(t,e),t.dispatch=function(e){var t=e.notification,n=e.destination;t.observe(n),this.unsubscribe()},t.prototype.scheduleMessage=function(e){this.destination.add(this.scheduler.schedule(t.dispatch,this.delay,new f(e,this.destination)))},t.prototype._next=function(e){this.scheduleMessage(c.a.createNext(e))},t.prototype._error=function(e){this.scheduleMessage(c.a.createError(e)),this.unsubscribe()},t.prototype._complete=function(){this.scheduleMessage(c.a.createComplete()),this.unsubscribe()},t}(s.a),f=function(){return function(e,t){this.notification=e,this.destination=t}}(),d=n(55),p=n(102);n.d(t,"a",(function(){return h}));var h=function(e){function t(t,n,r){void 0===t&&(t=Number.POSITIVE_INFINITY),void 0===n&&(n=Number.POSITIVE_INFINITY);var i=e.call(this)||this;return i.scheduler=r,i._events=[],i._infiniteTimeWindow=!1,i._bufferSize=t<1?1:t,i._windowTime=n<1?1:n,n===Number.POSITIVE_INFINITY?(i._infiniteTimeWindow=!0,i.next=i.nextInfiniteTimeWindow):i.next=i.nextTimeWindow,i}return r.a(t,e),t.prototype.nextInfiniteTimeWindow=function(t){var n=this._events;n.push(t),n.length>this._bufferSize&&n.shift(),e.prototype.next.call(this,t)},t.prototype.nextTimeWindow=function(t){this._events.push(new v(this._getNow(),t)),this._trimBufferThenGetEvents(),e.prototype.next.call(this,t)},t.prototype._subscribe=function(e){var t,n=this._infiniteTimeWindow,r=n?this._events:this._trimBufferThenGetEvents(),i=this.scheduler,a=r.length;if(this.closed)throw new d.a;if(this.isStopped||this.hasError?t=u.a.EMPTY:(this.observers.push(e),t=new p.a(this,e)),i&&e.add(e=new l(e,i)),n)for(var o=0;o<a&&!e.closed;o++)e.next(r[o]);else for(o=0;o<a&&!e.closed;o++)e.next(r[o].value);return this.hasError?e.error(this.thrownError):this.isStopped&&e.complete(),t},t.prototype._getNow=function(){return(this.scheduler||o).now()},t.prototype._trimBufferThenGetEvents=function(){for(var e=this._getNow(),t=this._bufferSize,n=this._windowTime,r=this._events,i=r.length,a=0;a<i&&!(e-r[a].time<n);)a++;return i>t&&(a=Math.max(a,i-t)),a>0&&r.splice(0,a),r},t}(i.a),v=function(){return function(e,t){this.time=e,this.value=t}}()},function(e,t,n){"use strict";n.d(t,"a",(function(){return a}));var r=n(130),i=n(49);function a(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var n=e[e.length-1];return Object(i.a)(n)?(e.pop(),function(t){return Object(r.a)(e,t,n)}):function(t){return Object(r.a)(e,t)}}},function(e,t,n){"use strict";n.d(t,"a",(function(){return a}));var r=n(4),i=n(10);function a(e){return function(t){return t.lift(new o(e))}}var o=function(){function e(e){this.value=e}return e.prototype.call=function(e,t){return t.subscribe(new u(e,this.value))},e}(),u=function(e){function t(t,n){var r=e.call(this,t)||this;return r.value=n,r}return r.a(t,e),t.prototype._next=function(e){this.destination.next(this.value)},t}(i.a)},function(e,t,n){"use strict";n.d(t,"a",(function(){return o}));var r=n(4),i=n(28),a=n(27);function o(e){return function(t){return t.lift(new u(e))}}var u=function(){function e(e){this.notifier=e}return e.prototype.call=function(e,t){var n=new s(e),r=Object(a.a)(n,this.notifier);return r&&!n.seenValue?(n.add(r),t.subscribe(n)):n},e}(),s=function(e){function t(t){var n=e.call(this,t)||this;return n.seenValue=!1,n}return r.a(t,e),t.prototype.notifyNext=function(e,t,n,r,i){this.seenValue=!0,this.complete()},t.prototype.notifyComplete=function(){},t}(i.a)},function(e,t,n){"use strict";n.d(t,"a",(function(){return i}));var r=n(174);function i(e,t,n){var i;return i=e&&"object"==typeof e?e:{bufferSize:e,windowTime:t,refCount:!1,scheduler:n},function(e){return e.lift(function(e){var t,n,i=e.bufferSize,a=void 0===i?Number.POSITIVE_INFINITY:i,o=e.windowTime,u=void 0===o?Number.POSITIVE_INFINITY:o,s=e.refCount,c=e.scheduler,l=0,f=!1,d=!1;return function(e){l++,t&&!f||(f=!1,t=new r.a(a,u,c),n=e.subscribe({next:function(e){t.next(e)},error:function(e){f=!0,t.error(e)},complete:function(){d=!0,t.complete()}}));var i=t.subscribe(this);this.add((function(){l--,i.unsubscribe(),n&&!d&&s&&0===l&&(n.unsubscribe(),n=void 0,t=void 0)}))}}(i))}}},function(e,t,n){"use strict";n.d(t,"a",(function(){return a}));var r=n(4),i=n(10);function a(e,t){return function(n){return n.lift(new o(e,t))}}var o=function(){function e(e,t){this.predicate=e,this.thisArg=t}return e.prototype.call=function(e,t){return t.subscribe(new u(e,this.predicate,this.thisArg))},e}(),u=function(e){function t(t,n,r){var i=e.call(this,t)||this;return i.predicate=n,i.thisArg=r,i.count=0,i}return r.a(t,e),t.prototype._next=function(e){var t;try{t=this.predicate.call(this.thisArg,e,this.count++)}catch(e){return void this.destination.error(e)}t&&this.destination.next(e)},t}(i.a)},function(e,t,n){"use strict";n.d(t,"a",(function(){return i}));var r=n(48);function i(e,t,n){return void 0===n&&(n=Number.POSITIVE_INFINITY),"function"==typeof t?Object(r.a)((function(){return e}),t,n):("number"==typeof t&&(n=t),Object(r.a)((function(){return e}),n))}},function(e,t,n){"use strict";n.d(t,"a",(function(){return u}));var r=n(89),i=n(120),a=n(45);function o(){return new a.a}function u(){return function(e){return Object(i.a)()(Object(r.a)(o)(e))}}},,,,,function(e,t){var n;n=function(){return this}();try{n=n||new Function("return this")()}catch(e){"object"==typeof window&&(n=window)}e.exports=n},function(e,t,n){"use strict";n.r(t);var r=n(1);t.default=function(e){var t=0,n=e.length,i=Object(r.g)(e.subarray(t,t+8)),a=e[t+=8],o=e[t+=1],u=e[t+=1],s=e[t+=1];t+=1;var c=[a,o,u,s].join("."),l=e[t]+Object(r.q)(e,t+1);t+=4;var f=Object(r.q)(e,t);t+=4;var d=Object(r.g)(e.subarray(t,t+4));t+=4;var p=Object(r.p)(e,t);t+=2;var h=Object(r.p)(e,t),v=[e[t+=2],e[t+1]].join(":"),b=1===e[t+=2];t+=1,t=64;var m,g=[],y=0;if(0===l)throw new Error("bif: no images to parse");for(;t<n;){var _=Object(r.q)(e,t);t+=4;var O=Object(r.q)(e,t);if(t+=4,null!=m){var E=m.index,w=f,j=y,T=e.subarray(m.offset,O);g.push({index:E,duration:w,ts:j,data:T}),y+=f}if(4294967295===_)break;m={index:_,offset:O}}return{fileFormat:i,version:c,imageCount:l,timescale:f,format:d,width:p,height:h,aspectRatio:v,isVod:b,thumbs:g}}},function(e,t,n){"use strict";n.d(t,"a",(function(){return i}));var r=n(1);function i(e){var t=Object(r.p)(e,8),n=Object(r.h)(e.subarray(10,t+10)),i=(new DOMParser).parseFromString(n,"application/xml").querySelector("KID");if(null===i)throw new Error("Cannot parse PlayReady private data: invalid XML");var a=null===i.textContent?"":i.textContent;return Object(r.j)(atob(a)).toLowerCase()}},function(e,t,n){"use strict";n.r(t);var r=n(115),i=n(35),a=n(2),o=/&#([0-9]+);/g,u=/<br>/gi,s=/<style[^>]*>([\s\S]*?)<\/style[^>]*>/i,c=/\s*<p class=([^>]+)>(.*)/i,l=/<sync[^>]+?start="?([0-9]*)"?[^0-9]/i;function f(e,t){var n=e.match(new RegExp("\\s*"+t+":\\s*(\\S+);","i"));return Array.isArray(n)?n[1]:null}t.default=function(e,t,n){var d,p,h=/<sync[ >]/gi,v=/<sync[ >]|<\/body>/gi,b=[],m=e.match(s),g=null!==m?m[1]:"";v.exec(e);var y=function(e){for(var t=/\.(\S+)\s*{([^}]*)}/gi,n={},r=t.exec(e);Array.isArray(r);){var i=r[1],a=f(r[2],"lang");null!=i&&null!=a&&(n[a]=i),r=t.exec(e)}return n}(g),_=Object(a.a)(n)?y[n]:void 0;for(Object(i.b)(Object(a.a)(_),"sami: could not find lang "+n+" in CSS");d=h.exec(e),p=v.exec(e),null!==d||null!==p;){if(null===d||null===p||d.index>=p.index)throw new Error("parse error");var O=e.slice(d.index,p.index),E=O.match(l);if(null===E)throw new Error("parse error (sync time attribute)");var w=+E[1];if(isNaN(w))throw new Error("parse error (sync time attribute NaN)");j(O.split("\n"),w/1e3)}return function(e){for(var t=[],n=0;n<e.length;n++){var i=e[n],o=i.start,u=i.end,s=i.text;if(Object(a.a)(s)&&null!=u){var c=Object(r.a)(o,u,s);null!=c&&t.push(c)}}return t}(b);function j(e,n){for(var r,i,a=e.length;--a>=0;)if(null!==(r=e[a].match(c))){var s=r,l=s[1],f=s[2];_===l&&("&nbsp;"===f?b[b.length-1].end=n:b.push({text:(i=f,i.replace(u,"\n").replace(o,(function(e,t){return String.fromCharCode(t)}))),start:n+t}))}}}},function(e,t,n){"use strict";n.r(t),n.d(t,"default",(function(){return o}));var r=n(115),i=n(126),a=n(127);function o(e,t){for(var n,o,u,s,c,l=e.split(/\r\n|\n|\r/),f=Object(i.a)(l),d=[],p=0;p<f.length;p++){var h=Object(a.a)(f[p],t);if(null!==h){var v=(o=void 0,u=void 0,s=void 0,c=void 0,o=(n=h).start,u=n.end,s=n.payload,c=s.join("\n"),Object(r.a)(o,u,c));null!==v&&d.push(v)}}return d}},function(e,t,n){"use strict";n.r(t);var r=n(35),i=n(2),a=/&#([0-9]+);/g,o=/<br>/gi,u=/<style[^>]*>([\s\S]*?)<\/style[^>]*>/i,s=/\s*<p class=([^>]+)>(.*)/i,c=/<sync[^>]+?start="?([0-9]*)"?[^0-9]/i;function l(e,t){var n=e.match(new RegExp("\\s*"+t+":\\s*(\\S+);","i"));return Array.isArray(n)?n[1]:null}t.default=function(e,t,n){var f,d,p=/<sync[ >]/gi,h=/<sync[ >]|<\/body>/gi,v=[],b=e.match(u),m=Array.isArray(b)?b[1]:"";h.exec(e);var g=function(e){for(var t=/\.(\S+)\s*{([^}]*)}/gi,n={},r=t.exec(e);null!==r;){var i=r[1],a=l(r[2],"lang");null!=i&&null!=a&&(n[a]=i),r=t.exec(e)}return n}(m),y=function(e){var t=/p\s*{([^}]*)}/gi.exec(e);return null===t?"":t[1]}(m),_=Object(i.a)(n)?g[n]:void 0;for(Object(r.b)(Object(i.a)(_),"sami: could not find lang "+n+" in CSS");f=p.exec(e),d=h.exec(e),null!==f||null!==d;){if(null===f||null===d||f.index>=d.index)throw new Error("parse error");var O=e.slice(f.index,d.index),E=O.match(c);if(!Array.isArray(E))throw new Error("parse error (sync time attribute)");var w=+E[1];if(isNaN(w))throw new Error("parse error (sync time attribute NaN)");j(O.split("\n"),w/1e3)}return v;function j(e,n){for(var r=e.length;--r>=0;){var u=e[r].match(s);if(Array.isArray(u)){var c=u[1],l=u[2];if(_===c)if("&nbsp;"===l)v[v.length-1].end=n;else{var f=document.createElement("DIV");f.className="rxp-texttrack-region";var d=document.createElement("DIV");d.className="rxp-texttrack-div",d.style.position="absolute",d.style.bottom="0",d.style.width="100%",d.style.color="#fff",d.style.textShadow="-1px -1px 0 #000,1px -1px 0 #000,-1px 1px 0 #000,1px 1px 0 #000";var p=document.createElement("div");p.className="rxp-texttrack-p",Object(i.a)(y)&&(p.style.cssText=y);for(var h=l.split(o),b=0;b<h.length;b++){0!==b&&p.appendChild(document.createElement("BR"));var m=document.createElement("SPAN");m.className="rxp-texttrack-span",m.textContent=h[b].replace(a,(function(e,t){return String.fromCharCode(t)})),p.appendChild(m)}d.appendChild(p),f.appendChild(d),v.push({element:f,start:n+t,end:-1})}}}}}},function(e,t,n){"use strict";n.r(t),n.d(t,"default",(function(){return a}));var r=n(126),i=n(127);function a(e,t){for(var n=e.split(/\r\n|\n|\r/),a=Object(r.a)(n),u=[],s=0;s<a.length;s++){var c=Object(i.a)(a[s],t);if(null!=c){var l=o(c);null!=l&&u.push(l)}}return u}function o(e){var t=e.start,n=e.end,r=e.payload,i=document.createElement("div");i.className="rxp-texttrack-p",i.style.fontSize="28px",i.style.position="absolute",i.style.bottom="5%",i.style.width="100%",i.style.textAlign="center",i.style.color="#fff",i.style.textShadow="-1px -1px 2px #000,1px -1px 2px #000,-1px 1px 2px #000,1px 1px 2px #000";for(var a=0;a<r.length;a++){0!==a&&i.appendChild(document.createElement("br"));var o=u(r[a]);i.appendChild(o)}return{start:t,end:n,element:i}}function u(e){var t=document.createElement("div");t.innerHTML=e;return function e(t){var n=t.childNodes,r=document.createElement("span");r.className="rxp-texttrack-span";for(var i=0;i<n.length;i++){var a=n[i];if("#text"===a.nodeName){for(var o=a.wholeText.split("\n"),u=0;u<o.length;u++)if(0!==u&&r.appendChild(document.createElement("br")),o[u].length>0){var s=document.createTextNode(o[u]);r.appendChild(s)}}else if("B"===a.nodeName){var c=e(a);c.style.fontWeight="bold",r.appendChild(c)}else if("I"===a.nodeName){var l=e(a);l.style.fontStyle="italic",r.appendChild(l)}else if("U"===a.nodeName){var f=e(a);f.style.textDecoration="underline",r.appendChild(f)}else if("FONT"===a.nodeName&&null!=a.color){var d=e(a);d.style.color=a.color,r.appendChild(d)}else{var p=e(a);r.appendChild(p)}}return r}(t)}},function(e,t,n){"use strict";n.r(t),n.d(t,"default",(function(){return S}));var r=n(54),i=n(91),a=n(26),o=n(85),u=n(48),s=n(220),c=n(181),l=n(31),f=n(179),d=n(133),p=n(180),h=n(145),v=n(87),b=n(138),m=n(58),g=n(0),y=n(119),_=n(29),O=n(123),E=n(117),w=n(124),j=n(121),T=n(122);function S(e){var t=e.autoPlay,n=e.clock$,S=e.keySystems,A=e.mediaElement,x=e.speed$,k=e.startAt,R=e.url;if(Object(v.a)(A),null==R)throw new Error("No URL for a DirectFile content");var I=Object(b.a)(A,R);g.a.debug("Init: Calculating initial time");var M=function(){return function(e,t){if(null==t)return 0;if(null!=t.position)return t.position;if(null!=t.wallClockTime)return t.wallClockTime;if(null!=t.fromFirstPosition)return t.fromFirstPosition;var n=e.duration;if(null==n||!isFinite(n))return g.a.warn("startAt.fromLastPosition set but no known duration, beginning at 0."),0;if("number"==typeof t.fromLastPosition)return Math.max(0,n+t.fromLastPosition);if(null!=t.percentage){var r=t.percentage;return r>=100?n:r<=0?0:n*(+r/100)}return 0}(A,k)};g.a.debug("Init: Initial time calculated:",M);var N=Object(E.a)(n,A,M,t),C=N.seek$,D=N.load$,P=I.pipe(Object(u.a)((function(){return Object(y.a)(A,S,r.a)})),Object(s.a)(i.a),Object(c.a)()),B=Object(j.a)(A),L=Object(T.a)(A,x,n,{pauseWhenStalled:!0}).pipe(Object(l.a)(_.a.speedChanged)),U=Object(O.a)(n).pipe(Object(l.a)(_.a.stalled)),F=P.pipe(Object(f.a)(w.a),Object(d.a)(1),Object(p.a)(D),Object(u.a)((function(e){if("autoplay-blocked"===e){var t=new m.a("MEDIA_ERR_BLOCKED_AUTOPLAY","Cannot trigger auto-play automatically: your browser does not allow it.");return Object(a.a)(_.a.warning(t),_.a.loaded(null))}if("not-loaded-metadata"===e){var n=new m.a("MEDIA_ERR_NOT_LOADED_METADATA","Cannot load automatically: your browser falsely announced having loaded the content.");return Object(a.a)(_.a.warning(n))}return Object(a.a)(_.a.loaded(null))}))),$=C.pipe(Object(h.a)());return Object(o.a)(F,$,P,B,L,U)}},function(e,t,n){"use strict";var r;if(!Object.keys){var i=Object.prototype.hasOwnProperty,a=Object.prototype.toString,o=n(159),u=Object.prototype.propertyIsEnumerable,s=!u.call({toString:null},"toString"),c=u.call((function(){}),"prototype"),l=["toString","toLocaleString","valueOf","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","constructor"],f=function(e){var t=e.constructor;return t&&t.prototype===e},d={$applicationCache:!0,$console:!0,$external:!0,$frame:!0,$frameElement:!0,$frames:!0,$innerHeight:!0,$innerWidth:!0,$onmozfullscreenchange:!0,$onmozfullscreenerror:!0,$outerHeight:!0,$outerWidth:!0,$pageXOffset:!0,$pageYOffset:!0,$parent:!0,$scrollLeft:!0,$scrollTop:!0,$scrollX:!0,$scrollY:!0,$self:!0,$webkitIndexedDB:!0,$webkitStorageInfo:!0,$window:!0},p=function(){if("undefined"==typeof window)return!1;for(var e in window)try{if(!d["$"+e]&&i.call(window,e)&&null!==window[e]&&"object"==typeof window[e])try{f(window[e])}catch(e){return!0}}catch(e){return!0}return!1}();r=function(e){var t=null!==e&&"object"==typeof e,n="[object Function]"===a.call(e),r=o(e),u=t&&"[object String]"===a.call(e),d=[];if(!t&&!n&&!r)throw new TypeError("Object.keys called on a non-object");var h=c&&n;if(u&&e.length>0&&!i.call(e,0))for(var v=0;v<e.length;++v)d.push(String(v));if(r&&e.length>0)for(var b=0;b<e.length;++b)d.push(String(b));else for(var m in e)h&&"prototype"===m||!i.call(e,m)||d.push(String(m));if(s)for(var g=function(e){if("undefined"==typeof window||!p)return f(e);try{return f(e)}catch(e){return!1}}(e),y=0;y<l.length;++y)g&&"constructor"===l[y]||!i.call(e,l[y])||d.push(l[y]);return d}}e.exports=r},function(e,t,n){"use strict";var r="function"==typeof Symbol&&"symbol"==typeof Symbol.toStringTag,i=Object.prototype.toString,a=function(e){return!(r&&e&&"object"==typeof e&&Symbol.toStringTag in e)&&"[object Arguments]"===i.call(e)},o=function(e){return!!a(e)||null!==e&&"object"==typeof e&&"number"==typeof e.length&&e.length>=0&&"[object Array]"!==i.call(e)&&"[object Function]"===i.call(e.callee)},u=function(){return a(arguments)}();a.isLegacyArguments=o,e.exports=u?a:o},function(e,t,n){"use strict";var r=function(e){return e!=e};e.exports=function(e,t){return 0===e&&0===t?1/e==1/t:e===t||!(!r(e)||!r(t))}},function(e,t,n){"use strict";var r=n(198),i=RegExp.prototype.exec,a=Object.getOwnPropertyDescriptor,o=Object.prototype.toString,u="function"==typeof Symbol&&"symbol"==typeof Symbol.toStringTag;e.exports=function(e){if(!e||"object"!=typeof e)return!1;if(!u)return"[object RegExp]"===o.call(e);var t=a(e,"lastIndex");return!(!t||!r(t,"value"))&&function(e){try{var t=e.lastIndex;return e.lastIndex=0,i.call(e),!0}catch(e){return!1}finally{e.lastIndex=t}}(e)}},function(e,t,n){"use strict";var r=n(199);e.exports=r.call(Function.call,Object.prototype.hasOwnProperty)},function(e,t,n){"use strict";var r=n(200);e.exports=Function.prototype.bind||r},function(e,t,n){"use strict";var r="Function.prototype.bind called on incompatible ",i=Array.prototype.slice,a=Object.prototype.toString;e.exports=function(e){var t=this;if("function"!=typeof t||"[object Function]"!==a.call(t))throw new TypeError(r+t);for(var n,o=i.call(arguments,1),u=function(){if(this instanceof n){var r=t.apply(this,o.concat(i.call(arguments)));return Object(r)===r?r:this}return t.apply(e,o.concat(i.call(arguments)))},s=Math.max(0,t.length-o.length),c=[],l=0;l<s;l++)c.push("$"+l);if(n=Function("binder","return function ("+c.join(",")+"){ return binder.apply(this,arguments); }")(u),t.prototype){var f=function(){};f.prototype=t.prototype,n.prototype=new f,f.prototype=null}return n}},function(e,t,n){"use strict";var r=n(135),i=n(160),a=n(161),o=n(202),u=Function.call.bind(i);r(u,{getPolyfill:a,implementation:i,shim:o}),e.exports=u},function(e,t,n){"use strict";var r=n(135).supportsDescriptors,i=n(161),a=Object.getOwnPropertyDescriptor,o=Object.defineProperty,u=TypeError,s=Object.getPrototypeOf,c=/a/;e.exports=function(){if(!r||!s)throw new u("RegExp.prototype.flags requires a true ES5 environment that supports property descriptors");var e=i(),t=s(c),n=a(t,"flags");return n&&n.get===e||o(t,"flags",{configurable:!0,enumerable:!1,get:e}),e}},function(e,t,n){"use strict";var r=Date.prototype.getDay,i=Object.prototype.toString,a="function"==typeof Symbol&&"symbol"==typeof Symbol.toStringTag;e.exports=function(e){return"object"==typeof e&&null!==e&&(a?function(e){try{return r.call(e),!0}catch(e){return!1}}(e):"[object Date]"===i.call(e))}},function(e,t,n){"use strict";n.r(t);var r=n(173),i=n.n(r),a=n(11),o=n.n(a),u=n(45),s=n(174),c=n(4),l=n(55),f=function(e){function t(t){var n=e.call(this)||this;return n._value=t,n}return c.a(t,e),Object.defineProperty(t.prototype,"value",{get:function(){return this.getValue()},enumerable:!0,configurable:!0}),t.prototype._subscribe=function(t){var n=e.prototype._subscribe.call(this,t);return n&&!n.closed&&t.next(this._value),n},t.prototype.getValue=function(){if(this.hasError)throw this.thrownError;if(this.closed)throw new l.a;return this._value},t.prototype.next=function(t){e.prototype.next.call(this,this._value=t)},t}(u.a),d=n(85),p=n(54),h=n(224),v=n(130),b=n(26),m=n(177),g=n(31),y=n(144),_=n(133),O=n(89);function E(e){return e?Object(O.a)((function(){return new u.a}),e):Object(O.a)(new u.a)}var w=n(179),j=n(181),T=n(175),S=n(176),A=n(10);var x=function(){function e(e){this.predicate=e}return e.prototype.call=function(e,t){return t.subscribe(new k(e,this.predicate))},e}(),k=function(e){function t(t,n){var r=e.call(this,t)||this;return r.predicate=n,r.skipping=!0,r.index=0,r}return c.a(t,e),t.prototype._next=function(e){var t=this.destination;this.skipping&&this.tryCallPredicate(e),this.skipping||t.next(e)},t.prototype.tryCallPredicate=function(e){try{var t=this.predicate(e,this.index++);this.skipping=Boolean(t)}catch(e){this.destination.error(e)}},t}(A.a),R=n(233),I=n(180),M=n(218),N=n(3),C=n(0),D=n(30),P=n(32),B=n(33),L=n(19),U=n(23),F=n(7),$=n(92),z=n(58),W=n(172),V=n(69);function H(e,t){var n=t.defaultCode,r=t.defaultReason;if(Object(W.a)(e))return e;var i=e instanceof Error?e.toString():r;return new V.a(n,i)}var K=n(37),Y=n(9),G=n(150),q=n(151),X=n(149),Q=n(91),Z=n(48),J=n(220),ee=n(146),te=n(20);function ne(e){return function(t){return t.lift(new re(e))}}var re=function(){function e(e){this.callback=e}return e.prototype.call=function(e,t){return t.subscribe(new ie(e,this.callback))},e}(),ie=function(e){function t(t,n){var r=e.call(this,t)||this;return r.add(new te.a(n)),r}return c.a(t,e),t}(A.a),ae=n(131),oe=n(166),ue=n(8);var se=n(15),ce=function(){function e(e){this._alpha=Math.exp(Math.log(.5)/e),this._lastEstimate=0,this._totalWeight=0}var t=e.prototype;return t.addSample=function(e,t){var n=Math.pow(this._alpha,e),r=t*(1-n)+n*this._lastEstimate;isNaN(r)||(this._lastEstimate=r,this._totalWeight+=e)},t.getEstimate=function(){var e=1-Math.pow(this._alpha,this._totalWeight);return this._lastEstimate/e},e}(),le=N.a.ABR_MINIMUM_TOTAL_BYTES,fe=N.a.ABR_MINIMUM_CHUNK_SIZE,de=N.a.ABR_FAST_EMA,pe=N.a.ABR_SLOW_EMA,he=function(){function e(){this._fastEWMA=new ce(de),this._slowEWMA=new ce(pe),this._bytesSampled=0}var t=e.prototype;return t.addSample=function(e,t){if(!(t<fe)){var n=8e3*t/e,r=e/1e3;this._bytesSampled+=t,this._fastEWMA.addSample(r,n),this._slowEWMA.addSample(r,n)}},t.getEstimate=function(){if(!(this._bytesSampled<le))return Math.min(this._fastEWMA.getEstimate(),this._slowEWMA.getEstimate())},t.reset=function(){this._fastEWMA=new ce(de),this._slowEWMA=new ce(pe),this._bytesSampled=0},e}();var ve=n(76),be=n(145),me=n(28),ge=n(27);function ye(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return function(t){var n;"function"==typeof e[e.length-1]&&(n=e.pop());var r=e;return t.lift(new _e(r,n))}}var _e=function(){function e(e,t){this.observables=e,this.project=t}return e.prototype.call=function(e,t){return t.subscribe(new Oe(e,this.observables,this.project))},e}(),Oe=function(e){function t(t,n,r){var i=e.call(this,t)||this;i.observables=n,i.project=r,i.toRespond=[];var a=n.length;i.values=new Array(a);for(var o=0;o<a;o++)i.toRespond.push(o);for(o=0;o<a;o++){var u=n[o];i.add(Object(ge.a)(i,u,u,o))}return i}return c.a(t,e),t.prototype.notifyNext=function(e,t,n,r,i){this.values[n]=t;var a=this.toRespond;if(a.length>0){var o=a.indexOf(n);-1!==o&&a.splice(o,1)}},t.prototype.notifyComplete=function(){},t.prototype._next=function(e){if(0===this.toRespond.length){var t=[e].concat(this.values);this.project?this._tryProject(t):this.destination.next(t)}},t.prototype._tryProject=function(e){var t;try{t=this.project.apply(this,e)}catch(e){return void this.destination.error(e)}this.destination.next(t)},t}(me.a);function Ee(e){var t=e.map((function(t){return Math.log(t/e[0])})),n=t.map((function(e){return e-t[0]+1})),r=(n[n.length-1]-1)/(2*e.length+10),i=1/r;return e.map((function(t,a){return function(t){if(0===t)return 0;var a=Math.min(Math.max(1,t),e.length-1);return i*(r+(e[a]*n[a-1]-e[a-1]*n[a])/(e[a]-e[a-1]))+4}(a)}))}function we(e,t,n){if("function"==typeof Array.prototype.findIndex)return e.findIndex(t,n);for(var r=e.length>>>0,i=0;i<r;i++)if(t.call(n,e[i],i,e))return i;return-1}function je(e,t){var n=Ee(t);return C.a.debug("ABR: Steps for buffer based chooser.",n.map((function(e,n){return{bufferLevel:e,bitrate:t[n]}}))),e.pipe(Object(g.a)((function(e){return function(e,t,n){var r=e.bufferGap,i=e.currentBitrate,a=e.currentScore,o=e.speed;if(null==i)return t[0];var u,s=we(t,(function(e){return e===i}));if(s<0||t.length!==n.length)return C.a.error("ABR: Current Bitrate not found in the calculated levels"),t[0];if(null!=a&&(u=0===o?a:a/o),null!=u&&u>1){var c=n[s],l=function(){for(var e=s+1;e<n.length;e++)if(n[e]>c)return e}();if(null!=l)if(r>=n[l])return t[l]}if((null==u||u<1.15)&&r<n[s]){for(var f=s-1;f>=0;f--)if(t[f]<i)return t[f];return i}return i}(e,t,n)})))}var Te=n(12);function Se(e,t){var n=we(e,(function(e){return e.bitrate>t}));return-1===n?e[e.length-1]:e[n-1]}var Ae=N.a.ABR_REGULAR_FACTOR,xe=N.a.ABR_STARVATION_DURATION_DELTA,ke=N.a.ABR_STARVATION_FACTOR,Re=N.a.ABR_STARVATION_GAP,Ie=N.a.OUT_OF_STARVATION_GAP;function Me(e){if(!(e.progress.length<2)){for(var t=new ce(2),n=e.progress,r=1;r<n.length;r++){var i=n[r].size-n[r-1].size,a=n[r].timestamp-n[r-1].timestamp,o=8*i/(a/1e3);t.addSample(a/1e3,o)}return t.getEstimate()}}function Ne(e,t){var n=8*(e.totalSize-e.size);return Math.max(n/t,0)}var Ce=function(){function e(e,t){this._initialBitrate=e,this._inStarvationMode=!1,this._config=t?{starvationGap:Re.LOW_LATENCY,outOfStarvationGap:Ie.LOW_LATENCY,starvationBitrateFactor:ke.LOW_LATENCY,regularBitrateFactor:Ae.LOW_LATENCY}:{starvationGap:Re.DEFAULT,outOfStarvationGap:Ie.DEFAULT,starvationBitrateFactor:ke.DEFAULT,regularBitrateFactor:Ae.DEFAULT}}var t=e.prototype;return t.getBandwidthEstimate=function(e,t,n,r,i){var a,o,u=this._config,s=e.bufferGap,c=e.currentTime,l=e.duration;return isNaN(l)||s+c<l-xe?!this._inStarvationMode&&s<=u.starvationGap?(C.a.info("ABR: enter starvation mode."),this._inStarvationMode=!0):this._inStarvationMode&&s>=u.outOfStarvationGap&&(C.a.info("ABR: exit starvation mode."),this._inStarvationMode=!1):this._inStarvationMode&&(C.a.info("ABR: exit starvation mode."),this._inStarvationMode=!1),this._inStarvationMode&&null!=(o=function(e,t,n,r){var i=function(e,t){for(var n=0;n<e.length;n++){var r=e[n];if(r.duration>0)if(r.time+r.duration>t&&t-r.time>-.3)return r}}(e,t.currentTime+t.bufferGap);if(void 0!==i){var a=i.duration,o=performance.now(),u=i.progress.length>0?i.progress[i.progress.length-1]:null,s=Me(i);if(null!=u&&null!=s){var c=1.2*Ne(u,s);if((o-u.timestamp)/1e3<=c&&c>t.bufferGap/t.speed)return s}var l=(o-i.requestTimestamp)/1e3,f=l<=(1.5*a+1)/t.speed;if(null!=n&&!f){var d=a/l,p=n.bitrate*Math.min(.7,d);return null==r||p<r?p:void 0}}}(r,e,n,i))&&(C.a.info("ABR: starvation mode emergency estimate:",o),t.reset(),a=null==n?o:Math.min(o,n.bitrate)),null==a&&(a=null!=(o=t.getEstimate())?o*(this._inStarvationMode?u.starvationBitrateFactor:u.regularBitrateFactor):null!=i?i*(this._inStarvationMode?u.starvationBitrateFactor:u.regularBitrateFactor):this._initialBitrate),e.speed>1&&(a/=e.speed),{bandwidthEstimate:o,bitrateChosen:a}},t.isUrgent=function(e,t,n,r){return null==t||e!==t.bitrate&&(e>t.bitrate?!this._inStarvationMode:function(e,t,n){var r=e.currentTime+e.bufferGap,i=Object(Te.a)(t,(function(e){return e.time+e.duration>r}));if(void 0===i)return!0;var a=performance.now(),o=i.progress.length>0?i.progress[i.progress.length-1]:null,u=Me(i);if(null==o||null==u)return!0;var s=Ne(o,u);return!((a-o.timestamp)/1e3<=1.2*s&&s<e.bufferGap/e.speed+n)}(r,n,this._config.starvationGap))},e}(),De=n(79),Pe=function(){function e(){this._currentRequests={}}var t=e.prototype;return t.add=function(e){var t=e.id,n=e.time,r=e.duration,i=e.requestTimestamp;null==this._currentRequests[t]?this._currentRequests[t]={time:n,duration:r,requestTimestamp:i,progress:[]}:C.a.warn("ABR: request already added.")},t.addProgress=function(e){var t=this._currentRequests[e.id];null!=t?t.progress.push(e):C.a.warn("ABR: progress for a request not added")},t.remove=function(e){null==this._currentRequests[e]&&C.a.warn("ABR: can't remove unknown request"),delete this._currentRequests[e]},t.getRequests=function(){return Object(De.a)(this._currentRequests).filter((function(e){return null!=e})).sort()},e}(),Be=function(){function e(){this._currentRepresentationData=null,this._lastRepresentationWithGoodScore=null}var t=e.prototype;return t.addSample=function(e,t,n){var r,i=n/t,a=this._getEWMA(e);null!=a?(r=a,a.addSample(t,i)):((r=new ce(5)).addSample(t,i),this._currentRepresentationData={representation:e,ewma:r}),r.getEstimate()>1&&this._lastRepresentationWithGoodScore!==e&&(C.a.debug("ABR: New last stable representation",e),this._lastRepresentationWithGoodScore=e)},t.getEstimate=function(e){var t=this._getEWMA(e);if(null!=t)return t.getEstimate()},t.getLastStableRepresentation=function(){return this._lastRepresentationWithGoodScore},t._getEWMA=function(e){return null!=this._currentRepresentationData&&this._currentRepresentationData.representation.id===e.id?this._currentRepresentationData.ewma:null},e}();function Le(e,t){var n=e;return null!=t.bitrate&&(n=function(e,t){var n=we(e,(function(e){return e.bitrate>t}));return-1===n?e:e.slice(0,n)}(n,t.bitrate)),null!=t.width&&(n=function(e,t){var n=e.slice().sort((function(e,t){return Object(se.a)(e.width,0)-Object(se.a)(t.width,0)})),r=Object(Te.a)(n,(function(e){return"number"==typeof e.width&&e.width>=t}));if(void 0!==r){var i="number"==typeof r.width?r.width:0;return e.filter((function(e){return"number"!=typeof e.width||e.width<=i}))}return e}(n,t.width)),n}function Ue(e){var t=e.bandwidthEstimator,n=e.bufferEvents$,r=e.clock$,i=e.filters$,a=e.initialBitrate,o=e.lowLatencyMode,u=e.manualBitrate$,s=e.maxAutoBitrate$,c=e.representations,l=new Be,f=new Ce(null==a?0:a,o),p=new Pe;var v=n.pipe(Object(w.a)((function(e){return"metrics"===e.type})),Object(ee.a)((function(e){return function(e){var n=e.duration,r=e.size,i=e.content;t.addSample(n,r);var a=i.segment;if(null!=a.duration){var o=n/1e3,u=a.duration/a.timescale,s=i.representation;l.addSample(s,o,u)}}(e.value)})),Object(be.a)()),m=n.pipe(Object(ee.a)((function(e){switch(e.type){case"requestBegin":p.add(e.value);break;case"requestEnd":p.remove(e.value.id);break;case"progress":p.addProgress(e.value)}})),Object(be.a)()),y=n.pipe(Object(w.a)((function(e){return"representationChange"===e.type})),Object(g.a)((function(e){return e.value.representation})),Object(T.a)(null)),_=Object(ve.a)((function(){if(0===c.length)throw new Error("ABRManager: no representation choice given");return 1===c.length?Object(b.a)({bitrate:void 0,representation:c[0],manual:!1,urgent:!0,knownStableBitrate:void 0}):u.pipe(Object(ae.a)((function(e){if(e>=0){var a=void 0!==(o=Se(c,e))?o:c[0];return Object(b.a)({representation:a,bitrate:void 0,knownStableBitrate:void 0,manual:!0,urgent:!0})}var o,u,d=!0,v=je(n.pipe(Object(w.a)((function(e){return"added-segment"===e.type})),ye(r),Object(g.a)((function(e){var t=e[0].value,n=e[1],r=n.speed,i=n.currentTime,a=t.buffered,o=Object(L.d)(a,i),u=t.content.representation,s=l.getEstimate(u);return{bufferGap:o,currentBitrate:u.bitrate,currentScore:s,speed:r}}))),c.map((function(e){return e.bitrate}))).pipe(Object(T.a)(void 0));return Object(h.a)([r,s,i,v]).pipe(ye(y),Object(g.a)((function(e){var n=e[0],r=n[0],i=n[1],a=n[2],o=n[3],s=e[1],h=Le(c,a),v=p.getRequests(),b=f.getBandwidthEstimate(r,t,s,v,u),m=b.bandwidthEstimate,g=b.bitrateChosen;u=m;var y=l.getLastStableRepresentation(),_=null==y?void 0:y.bitrate/(r.speed>0?r.speed:1),O=r.bufferGap;!d&&O<=5?d=!0:d&&Number.isFinite(O)&&O>10&&(d=!1);var E=function(){var e=Se(h,Math.min(g,i));return void 0!==e?e:h.length>0?h[0]:c[0]}();if(d)return C.a.debug("ABR: Choosing representation with bandwith estimation.",E),{bitrate:m,representation:E,urgent:f.isUrgent(E.bitrate,s,v,r),manual:!1,knownStableBitrate:_};if(null==o||E.bitrate>=o)return C.a.debug("ABR: Choosing representation with bandwith estimation.",E),{bitrate:m,representation:E,urgent:f.isUrgent(E.bitrate,s,v,r),manual:!1,knownStableBitrate:_};var w=Math.min(o,i),j=function(){var e=Se(h,w);return void 0!==e?e:h.length>0?h[0]:c[0]}();return o<=i&&C.a.debug("ABR: Choosing representation with buffer based bitrate ceiling.",j),{bitrate:m,representation:j,urgent:f.isUrgent(o,s,v,r),manual:!1,knownStableBitrate:_}})))})))}));return Object(d.a)(v,m,_)}var Fe=function(){function e(e){this._manualBitrates=e.manualBitrates,this._maxAutoBitrates=e.maxAutoBitrates,this._initialBitrates=e.initialBitrates,this._throttlers=e.throttlers,this._bandwidthEstimators={},this._lowLatencyMode=e.lowLatencyMode}var t=e.prototype;return t.get$=function(e,t,n,r){void 0===t&&(t=[]);var i,a,u,s,c=this._getBandwidthEstimator(e),l=Object(se.a)(this._manualBitrates[e],Object(b.a)(-1)),f=Object(se.a)(this._maxAutoBitrates[e],Object(b.a)(1/0)),d=Object(se.a)(this._initialBitrates[e],0);return Ue({bandwidthEstimator:c,bufferEvents$:r,clock$:n,filters$:(i=this._throttlers.limitWidth[e],a=this._throttlers.throttleBitrate[e],u=this._throttlers.throttle[e],s=[],null!=i&&s.push(i.pipe(Object(g.a)((function(e){return{width:e}})))),null!=u&&s.push(u.pipe(Object(g.a)((function(e){return{bitrate:e}})))),null!=a&&s.push(a.pipe(Object(g.a)((function(e){return{bitrate:e}})))),s.length>0?Object(h.a)(s).pipe(Object(g.a)((function(e){return o.a.apply(void 0,[{}].concat(e))}))):Object(b.a)({})),initialBitrate:d,manualBitrate$:l,maxAutoBitrate$:f,representations:t,lowLatencyMode:this._lowLatencyMode})},t._getBandwidthEstimator=function(e){var t=this._bandwidthEstimators[e];if(null==t){C.a.debug("ABR: Creating new BandwidthEstimator for ",e);var n=new he;return this._bandwidthEstimators[e]=n,n}return t},e}(),$e=n(36),ze=n(226),We=n(162),Ve=n(134),He=n(106);function Ke(e,t){var n=t.baseDelay,r=t.maxDelay,i=t.maxRetryRegular,a=t.maxRetryOffline,o=0,u=1,s=2,c=0;return e.pipe(Object(g.a)((function(e){return{type:"response",value:e}})),Object(M.a)((function(e,t){if(!function(e){return e instanceof Ve.a?e.type===K.c.ERROR_HTTP_CODE?e.status>=500||404===e.status||415===e.status||412===e.status:e.type===K.c.TIMEOUT||e.type===K.c.ERROR_EVENT:Object(W.a)(e)&&"INTEGRITY_ERROR"===e.code}(e))throw e;var l=e instanceof Ve.a&&function(e){return e.type===K.c.ERROR_EVENT&&Object(We.a)()}(e)?s:u;if(l!==c&&(o=0,c=l),++o>(l===s?a:i))throw e;var f=Math.min(n*Math.pow(2,o-1),r),d=Object(He.a)(f);return Object(ze.a)(d).pipe(Object(Z.a)((function(){return t})),Object(T.a)({type:"retry",value:e}))})))}var Ye=n(170);function Ge(e){return e instanceof Ve.a?new Ye.a("PIPELINE_LOAD_ERROR",e):H(e,{defaultCode:"PIPELINE_LOAD_ERROR",defaultReason:"Unknown error when fetching the Manifest"})}function qe(e,t){var n=t.maxRetry,r=t.maxRetryOffline,i=e.loader,a=null!=e.resolver?e.resolver:b.a,o={baseDelay:t.baseDelay,maxDelay:t.maxDelay,maxRetryRegular:n,maxRetryOffline:r};return function(e){return(t=e,Object($e.a)(a,t).pipe(Object(M.a)((function(e){throw Ge(e)})))).pipe(Object(Z.a)((function(e){return(t=e,Ke(Object($e.a)(i,t),o).pipe(Object(M.a)((function(e){throw Ge(e)})),Object(g.a)((function(e){return"retry"===e.type?{type:"warning",value:Ge(e.value)}:e.value})))).pipe(Object(Z.a)((function(e){if("warning"===e.type)return Object(b.a)(e);var t=e.value;return Object(b.a)({type:"response",value:{responseData:t.responseData,url:t.url,sendingTime:t.sendingTime,receivedTime:t.receivedTime}})})));var t})));var t}}var Xe=N.a.DEFAULT_MAX_MANIFEST_REQUEST_RETRY,Qe=N.a.DEFAULT_MAX_PIPELINES_RETRY_ON_ERROR,Ze=N.a.INITIAL_BACKOFF_DELAY_BASE,Je=N.a.MAX_BACKOFF_DELAY_BASE;var et=function(e,t,n){var r,i,a,o,u=(i=(r=t).manifestRetry,a=r.offlineRetry,{baseDelay:(o=r.lowLatencyMode)?Ze.LOW_LATENCY:Ze.REGULAR,maxDelay:o?Je.LOW_LATENCY:Je.REGULAR,maxRetry:null!=i?i:Xe,maxRetryOffline:null!=a?a:Qe,lowLatencyMode:o}),s=qe(e.manifest,u),c=e.manifest.parser;function l(e){var t={baseDelay:u.baseDelay,maxDelay:u.maxDelay,maxRetryRegular:u.maxRetry,maxRetryOffline:u.maxRetryOffline};return Ke(Object($e.a)(e,void 0),t).pipe(Object(Z.a)((function(e){return"retry"===e.type?(n.next(Ge(e.value)),p.a):Object(b.a)(e.value)})),Object(M.a)((function(e){throw Ge(e)})))}return{fetch:function(e){return s({url:e}).pipe(Object(ee.a)((function(e){"warning"===e.type&&n.next(e.value)})),Object(w.a)((function(e){return"response"===e.type})))},parse:function(e,t,r){var i=e.sendingTime;return c({response:e,url:t,externalClockOffset:r,scheduleRequest:l}).pipe(Object(M.a)((function(e){throw H(e,{defaultCode:"PIPELINE_PARSE_ERROR",defaultReason:"Unknown error when parsing the Manifest"})})),Object(g.a)((function(e){for(var t=e.manifest,r=t.parsingErrors,a=0;a<r.length;a++)n.next(r[a]);return{manifest:t,sendingTime:i}})))}}},tt=n(13),nt=function(){function e(){this._cache=new WeakMap}var t=e.prototype;return t.add=function(e,t){var n=e.representation;e.segment.isInit&&this._cache.set(n,t)},t.get=function(e){var t=e.representation;if(e.segment.isInit){var n=this._cache.get(t);if(void 0!==n)return n}return null},e}(),rt=N.a.DEFAULT_MAX_PIPELINES_RETRY_ON_ERROR,it=N.a.DEFAULT_MAX_PIPELINES_RETRY_ON_OFFLINE,at=N.a.INITIAL_BACKOFF_DELAY_BASE,ot=N.a.MAX_BACKOFF_DELAY_BASE;var ut=function(){function e(){this._pendingPriority=null,this._numberOfPendingObservables=0,this._queue=[]}var t=e.prototype;return t.create=function(e,t){var n=this,r=Object(ve.a)((function(){if(null==n._pendingPriority||n._pendingPriority>=t)return n._pendingPriority=t,n._startObservable(e);var i=new u.a;return n._queue.push({observable:r,priority:t,trigger:i}),i.pipe(Object(Z.a)((function(){return n._startObservable(e)})))}));return r},t.updatePriority=function(e,t){var n=we(this._queue,(function(t){return t.observable===e}));if(!(n<0)){var r=this._queue[n];r.priority=t,(null==this._pendingPriority||this._pendingPriority>=t)&&(this._queue.splice(n,1),r.trigger.next(),r.trigger.complete())}},t._startObservable=function(e){var t=this;return this._numberOfPendingObservables++,e.pipe(ne((function(){if(t._numberOfPendingObservables--,!(t._numberOfPendingObservables>0)&&(t._pendingPriority=null,0!==t._queue.length)){t._pendingPriority=t._queue.reduce((function(e,t){return null==e||e>t.priority?t.priority:e}),null);for(var e=0;e<t._queue.length;e++){var n=t._queue[e];n.priority===t._pendingPriority&&(t._queue.splice(e,1),e--,n.trigger.next(),n.trigger.complete())}}})))},e}(),st=n(41),ct=n(217);var lt=n(21);function ft(e,t){var n=t.cache,r=t.maxRetry,i=t.maxRetryOffline,a={baseDelay:t.initialBackoffDelay,maxDelay:t.maximumBackoffDelay,maxRetryRegular:r,maxRetryOffline:i};return function(t){return function(t){function r(){var r=Ke(Object($e.a)(e,t),a).pipe(Object(M.a)((function(e){throw Ge(e)})),Object(g.a)((function(e){if("retry"===e.type)return{type:"warning",value:Ge(e.value)};var r=e.value;return"data-loaded"===r.type&&null!=n&&n.add(t,r.value),e.value})));return Object(v.a)(Object(b.a)({type:"request",value:t}),r)}var i=null!=n?n.get(t):null;return null!=i?Object(lt.a)(i).pipe(Object(g.a)((function(e){return{type:"cache",value:e}})),Object(M.a)(r)):r()}(t).pipe(Object(Z.a)((function(e){var n="data-chunk-complete"===e.type||"data-loaded"===e.type?Object(b.a)({type:"metrics",value:{size:e.value.size,duration:e.value.duration}}):p.a;switch(e.type){case"warning":return Object(b.a)(e);case"cache":case"data-created":case"data-loaded":var r=Object(b.a)({type:"data",value:o()({},t,{responseData:e.value.responseData})});return Object(v.a)(r,n);case"request":case"progress":return Object(b.a)(e);case"data-chunk":return Object(b.a)({type:"chunk",value:o()({},t,{responseData:e.value.responseData})});case"data-chunk-complete":var i=Object(b.a)({type:"chunk-complete",value:null});return Object(v.a)(i,n)}return function(e){throw new ct.a("Unreachable path taken")}()})))}}var dt=Object(st.a)();var pt=function(){function e(e,t){this._transport=e,this._prioritizer=new ut,this._pipelineOptions=t}return e.prototype.createPipeline=function(e,t){var n,r,i=function(e,t){var n=t.segmentRetry,r=t.offlineRetry,i=t.lowLatencyMode;return{cache:Object(tt.a)(["audio","video"],e)?new nt:void 0,maxRetry:"image"===e?0:null!=n?n:rt,maxRetryOffline:null!=r?r:it,initialBackoffDelay:i?at.LOW_LATENCY:at.REGULAR,maximumBackoffDelay:i?ot.LOW_LATENCY:ot.REGULAR}}(e,this._pipelineOptions),a=function(e,t,n,r){var i=ft(t[e].loader,r),a=t[e].parser;return function(e){var t=dt(),r=!1;return i(e).pipe(Object(ee.a)((function(i){switch(i.type){case"metrics":var a=i.value,o=a.size,u=a.duration;null!=o&&null!=u&&n.next({type:"metrics",value:{size:o,duration:u,content:e}});break;case"request":var s=i.value.segment;if(null==s||null==s.duration)return;r=!0;var c=s.duration/s.timescale,l=s.time/s.timescale;n.next({type:"requestBegin",value:{duration:c,time:l,requestTimestamp:performance.now(),id:t}});break;case"progress":var f=i.value;null!=f.totalSize&&f.size<f.totalSize&&n.next({type:"progress",value:{duration:f.duration,size:f.size,totalSize:f.totalSize,timestamp:performance.now(),id:t}})}})),ne((function(){r&&n.next({type:"requestEnd",value:{id:t}})})),Object(w.a)((function(e){return"warning"===e.type||"chunk"===e.type||"chunk-complete"===e.type||"data"===e.type})),Object(Z.a)((function(t){if("warning"===t.type)return Object(b.a)(t);if("chunk-complete"===t.type)return Object(b.a)({type:"chunk-complete"});var n="chunk"===t.type,r={type:"chunk",parse:function(r){var i={data:t.value.responseData,isChunked:n};return a({response:i,init:r,content:e}).pipe(Object(M.a)((function(e){throw H(e,{defaultCode:"PIPELINE_PARSE_ERROR",defaultReason:"Unknown parsing error"})})))}};return n?Object(b.a)(r):Object(v.a)(Object(b.a)(r),Object(b.a)({type:"chunk-complete"}))})),Object(j.a)())}}(e,this._transport,t,i);return n=this._prioritizer,r=a,{createRequest:function(e,t){return void 0===t&&(t=0),n.create(r(e),t)},updatePriority:function(e,t){n.updatePriority(e,t)}}},e}(),ht=n(119),vt=n(87),bt=n(25),mt=n(2),gt=F.a.onSourceOpen$;function yt(e,t,n){if(null!==t&&"closed"!==t.readyState){for(var r=t.readyState,i=t.sourceBuffers,a=i.length-1;a>=0;a--){var o=i[a];try{"open"===r&&(C.a.info("Init: Removing SourceBuffer from mediaSource",o),o.abort()),t.removeSourceBuffer(o)}catch(e){C.a.warn("Init: Error while disposing SourceBuffer",e)}}i.length>0&&C.a.warn("Init: Not all SourceBuffers could have been removed.")}if(Object(vt.a)(e),null!==n)try{C.a.debug("Init: Revoking previous URL"),URL.revokeObjectURL(n)}catch(e){C.a.warn("Init: Error while revoking the media source URL",e)}}function _t(e){return function(e){return new ue.a((function(t){if(null==bt.c)throw new z.a("MEDIA_SOURCE_NOT_SUPPORTED","No MediaSource Object was found in the current browser.");var n=Object(mt.a)(e.src)?e.src:null;yt(e,null,n),C.a.info("Init: Creating MediaSource");var r=new bt.c,i=URL.createObjectURL(r);return C.a.info("Init: Attaching MediaSource URL to the media element",i),e.src=i,t.next(r),function(){yt(e,r,i)}}))}(e).pipe(Object(Z.a)((function(e){return gt(e).pipe(Object(_.a)(1),Object(S.a)(e))})))}var Ot=n(29),Et=N.a.DEFAULT_LIVE_GAP;var wt=n(124),jt=n(53),Tt=n(61);var St=function(){function e(e){this.project=e}return e.prototype.call=function(e,t){return t.subscribe(new At(e,this.project))},e}(),At=function(e){function t(t,n){var r=e.call(this,t)||this;return r.project=n,r.hasSubscription=!1,r.hasCompleted=!1,r.index=0,r}return c.a(t,e),t.prototype._next=function(e){this.hasSubscription||this.tryNext(e)},t.prototype.tryNext=function(e){var t,n=this.index++;try{t=this.project(e,n)}catch(e){return void this.destination.error(e)}this.hasSubscription=!0,this._innerSub(t,e,n)},t.prototype._innerSub=function(e,t,n){var r=new jt.a(this,void 0,void 0);this.destination.add(r),Object(ge.a)(this,e,t,n,r)},t.prototype._complete=function(){this.hasCompleted=!0,this.hasSubscription||this.destination.complete(),this.unsubscribe()},t.prototype.notifyNext=function(e,t,n,r,i){this.destination.next(t)},t.prototype.notifyError=function(e){this.destination.error(e)},t.prototype.notifyComplete=function(e){this.destination.remove(e),this.hasSubscription=!1,this.hasCompleted&&this.destination.complete()},t}(me.a),xt=function(){function e(e){this._array=[],this._sortingFn=e}var t=e.prototype;return t.add=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];t.sort(this._sortingFn);for(var r=0,i=0;i<t.length;i++){for(var a=t[i],o=!1;!o&&r<this._array.length;)this._sortingFn(a,this._array[r])<0?(this._array.splice(r,0,a),o=!0):r++;o||this._array.push(a)}},t.length=function(){return this._array.length},t.get=function(e){if(e<0||e>=this._array.length)throw new Error("Invalid index.");return this._array[e]},t.findFirst=function(e){return Object(Te.a)(this._array,e)},t.has=function(e){return Object(tt.a)(this._array,e)},t.removeElement=function(e){var t=this._array.indexOf(e);if(t>=0)return this._array.splice(t,1),t},t.head=function(){return this._array[0]},t.last=function(){return this._array[this._array.length-1]},t.shift=function(){return this._array.shift()},t.pop=function(){return this._array.pop()},e}(),kt=function(){function e(e){this._weakMap=new WeakMap,this._fn=e}var t=e.prototype;return t.get=function(e){var t=this._weakMap.get(e);if(void 0===t){var n=this._fn(e);return this._weakMap.set(e,n),n}return t},t.destroy=function(e){this._weakMap.delete(e)},e}(),Rt=n(168);function It(e){var t=e.queuedSourceBuffer,n=e.clock$,r=e.maxBufferBehind$,i=e.maxBufferAhead$;return Object(h.a)([n,r,i]).pipe(Object(Z.a)((function(e){var n=e[0],r=e[1],i=e[2];return function(e,t,n,r){if(!isFinite(n)&&!isFinite(r))return p.a;var i=[],a=Object(L.c)(e.getBufferedRanges(),t),o=a.innerRange,u=a.outerRanges;return function(){if(isFinite(n)){for(var e=0;e<u.length;e++){var r=u[e];t-n>=r.end?i.push(r):t>=r.end&&t-n>r.start&&t-n<r.end&&i.push({start:r.start,end:t-n})}null!=o&&t-n>o.start&&i.push({start:o.start,end:t-n})}}(),function(){if(!isFinite(r))return;for(var e=0;e<u.length;e++){var n=u[e];t+r<=n.start?i.push(n):t<=n.start&&t+r<n.end&&t+r>n.start&&i.push({start:t+r,end:n.end})}null!=o&&t+r<o.end&&i.push({start:t+r,end:o.end})}(),Object(Tt.a)(i.map((function(t){return C.a.debug("GC: cleaning range from SourceBuffer",t),e.removeBuffer(t.start,t.end)}))).pipe(Object(Rt.a)(),Object(be.a)())}(t,n,r,i)})))}var Mt=n(216),Nt=n(215),Ct=n(164),Dt=n(163),Pt=N.a.MAX_MANIFEST_BUFFERED_START_END_DIFFERENCE,Bt=N.a.MAX_MANIFEST_BUFFERED_DURATION_DIFFERENCE,Lt=N.a.MINIMUM_SEGMENT_SIZE,Ut=function(){function e(){this.inventory=[]}var t=e.prototype;return t.reset=function(){this.inventory.length=0},t.synchronizeBuffered=function(e){for(var t=this.inventory,n=0,r=t[0],i=e.length,a=0;a<i;a++){if(void 0===r)return;var o=e.start(a),u=e.end(a);if(u-o<Lt)C.a.warn("SI: skipped TimeRange when synchronizing because it was too small",o,u);else{for(var s=n;void 0!==r&&Object(se.a)(r.bufferedEnd,r.end)-o<Lt;)r=t[++n];var c={end:-1,precizeEnd:!1},l=n-s;if(l>0){var f=t[s+l-1];c.end=Object(se.a)(f.bufferedEnd,f.end),c.precizeEnd=f.precizeEnd,C.a.debug("SI: "+l+" segments GCed."),t.splice(s,l),n=s}if(void 0===r)return;if(u-Object(se.a)(r.bufferedStart,r.start)>=Lt){if(zt(r,o,c),n===t.length-1)return void Wt(r,u);r=t[++n];for(var d=Object(se.a)(r.bufferedStart,r.start),p=Object(se.a)(r.bufferedEnd,r.end),h=a<i-1?e.start(a+1):void 0;void 0!==r&&u-d>=Lt&&(void 0===h||u-d>=p-h);){var v=t[n-1];void 0===v.bufferedEnd&&(v.bufferedEnd=r.precizeStart?r.start:v.end,C.a.debug("SI: calculating buffered end of contiguous segment",v.bufferedEnd,v.end)),r.bufferedStart=v.bufferedEnd,void 0!==(r=t[++n])&&(d=Object(se.a)(r.bufferedStart,r.start),p=Object(se.a)(r.bufferedEnd,r.end))}}var b=t[n-1];void 0!==b&&Wt(b,u)}}null!=r&&(C.a.debug("SI: last segments have been GCed",n,t.length),t.splice(n,t.length-n))},t.insertChunk=function(e){var t=e.period,n=e.adaptation,r=e.representation,i=e.segment,a=e.start,o=e.end;if(!i.isInit)if(a>=o)C.a.warn("SI: Invalid chunked inserted: starts before it ends",a,o);else{for(var u=this.inventory,s={partiallyPushed:!0,estimatedStart:a,start:a,end:o,precizeStart:!1,precizeEnd:!1,bufferedStart:void 0,bufferedEnd:void 0,infos:{segment:i,period:t,adaptation:n,representation:r}},c=u.length-1;c>=0;c--){var l=u[c];if(l.start<=a){if(l.end<=a){for(C.a.debug("SI: Pushing segment strictly after previous one."),this.inventory.splice(c+1,0,s),c+=2;c<u.length&&u[c].start<s.end;){if(u[c].end>s.end)return C.a.debug("SI: Segment pushed updates the start of the next one"),u[c].start=s.end,u[c].bufferedStart=void 0,void(u[c].precizeStart=u[c].precizeStart&&s.precizeEnd);C.a.debug("SI: Segment pushed removes the next one"),u.splice(c,1)}return}if(l.start===a){if(l.end<=o){for(C.a.debug("SI: Segment pushed replace another one"),this.inventory.splice(c,1,s),c+=1;c<u.length&&u[c].start<s.end;){if(u[c].end>s.end)return C.a.debug("SI: Segment pushed updates the start of the next one"),u[c].start=s.end,u[c].bufferedStart=void 0,void(u[c].precizeStart=u[c].precizeStart&&s.precizeEnd);C.a.debug("SI: Segment pushed removes the next one"),u.splice(c,1)}return}return C.a.debug("SI: Segment pushed ends before another with the same start"),u.splice(c,0,s),l.start=s.end,l.bufferedStart=void 0,void(l.precizeStart=l.precizeStart&&s.precizeEnd)}if(l.end<=s.end){for(C.a.debug("SI: Segment pushed updates end of previous one"),this.inventory.splice(c+1,0,s),l.end=s.start,l.bufferedEnd=void 0,l.precizeEnd=l.precizeEnd&&s.precizeStart,c+=2;c<u.length&&u[c].start<s.end;){if(u[c].end>s.end)return C.a.debug("SI: Segment pushed updates the start of the next one"),u[c].start=s.end,u[c].bufferedStart=void 0,void(u[c].precizeStart=u[c].precizeStart&&s.precizeEnd);C.a.debug("SI: Segment pushed removes the next one"),u.splice(c,1)}return}C.a.debug("SI: Segment pushed is contained in a previous one");var f={partiallyPushed:l.partiallyPushed,start:s.end,end:l.end,precizeStart:l.precizeStart&&l.precizeEnd&&s.precizeEnd,precizeEnd:l.precizeEnd,bufferedStart:void 0,bufferedEnd:l.end,infos:l.infos};return l.end=s.start,l.bufferedEnd=void 0,l.precizeEnd=l.precizeEnd&&s.precizeStart,u.splice(c+1,0,s),void u.splice(c+2,0,f)}}var d=this.inventory[0];if(null==d)return C.a.debug("SI: Segment pushed comes after all previous ones"),void this.inventory.push(s);if(!(d.start>=o)){if(d.end<=o){for(C.a.debug("SI: Segment pushed starts before and completely recovers the previous first one"),this.inventory.splice(0,1,s);u.length>1&&u[1].start<s.end;){if(u[1].end>s.end)return C.a.debug("SI: Segment pushed updates the start of the next one"),u[1].start=s.end,u[1].bufferedStart=void 0,void(u[1].precizeStart=s.precizeEnd);C.a.debug("SI: Segment pushed removes the next one"),u.splice(1,1)}return}return C.a.debug("SI: Segment pushed start of the next one"),d.start=o,d.bufferedStart=void 0,d.precizeStart=s.precizeEnd,void this.inventory.splice(0,0,s)}C.a.debug("SI: Segment pushed comes before all previous ones"),this.inventory.splice(0,0,s)}},t.completeSegment=function(e){if(!e.segment.isInit){for(var t=this.inventory,n=!1,r=0;r<t.length;r++)if(Object(Dt.a)(t[r].infos,e)){n&&C.a.warn("SI: Completed Segment is splitted.",e),n=!0;var i=r;for(r+=1;r<t.length&&Object(Dt.a)(t[r].infos,e);)r++;var a=r-1,o=a-i,u=t[a].end,s=t[a].bufferedEnd;o>0&&(this.inventory.splice(i+1,o),r-=o),this.inventory[i].partiallyPushed=!1,this.inventory[i].end=u,this.inventory[i].bufferedEnd=s}n||C.a.warn("SI: Completed Segment not found",e)}},t.getInventory=function(){return this.inventory},e}();function Ft(e){if(void 0===e.bufferedStart||e.partiallyPushed)return!1;var t=e.start,n=e.end-t;return Math.abs(t-e.bufferedStart)<=Pt&&(void 0===e.bufferedEnd||e.bufferedEnd>e.bufferedStart&&Math.abs(e.bufferedEnd-e.bufferedStart-n)<=Math.min(Bt,n/3))}function $t(e){if(void 0===e.bufferedEnd||e.partiallyPushed)return!1;var t=e.start,n=e.end,r=n-t;return Math.abs(n-e.bufferedEnd)<=Pt&&null!=e.bufferedStart&&e.bufferedEnd>e.bufferedStart&&Math.abs(e.bufferedEnd-e.bufferedStart-r)<=Math.min(Bt,r/3)}function zt(e,t,n){void 0!==e.bufferedStart?(e.bufferedStart<t&&(C.a.debug("SI: Segment partially GCed at the start",e.bufferedStart,t),e.bufferedStart=t),!e.precizeStart&&Ft(e)&&(e.start=e.bufferedStart,e.precizeStart=!0)):e.precizeStart?(C.a.debug("SI: buffered start is precize start",e.start),e.bufferedStart=e.start):n.end>=0&&n.end>t&&(n.precizeEnd||e.start-n.end<=Pt)?(C.a.debug("SI: buffered start is end of previous segment",t,e.start,n.end),e.bufferedStart=n.end,Ft(e)&&(e.start=n.end,e.precizeStart=!0)):e.start-t<=Pt?(C.a.debug("SI: found true buffered start",t,e.start),e.bufferedStart=t,Ft(e)&&(e.start=t,e.precizeStart=!0)):t<e.start?C.a.debug("SI: range start too far from expected start",t,e.start):(C.a.debug("SI: Segment appears immediately garbage collected at the start",e.bufferedStart,t),e.bufferedStart=t)}function Wt(e,t){void 0!==e.bufferedEnd?(e.bufferedEnd>t&&(C.a.debug("SI: Segment partially GCed at the end",e.bufferedEnd,t),e.bufferedEnd=t),!e.precizeEnd&&$t(e)&&(e.precizeEnd=!0,e.end=t)):e.precizeEnd?(C.a.debug("SI: buffered end is precize end",e.end),e.bufferedEnd=e.end):t-e.end<=Pt?(C.a.debug("SI: found true buffered end",t,e.end),e.bufferedEnd=t,$t(e)&&(e.end=t,e.precizeEnd=!0)):t>e.end?(C.a.debug("SI: range end too far from expected end",t,e.end),e.bufferedEnd=e.end,$t(e)&&(e.end=t,e.precizeEnd=!0)):(C.a.debug("SI: Segment appears immediately garbage collected at the end",e.bufferedEnd,t),e.bufferedEnd=t)}function Vt(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var Ht,Kt=N.a.APPEND_WINDOW_SECURITIES,Yt=N.a.SOURCE_BUFFER_FLUSHING_INTERVAL;!function(e){e[e.Push=0]="Push",e[e.Remove=1]="Remove",e[e.EndOfSegment=2]="EndOfSegment"}(Ht||(Ht={}));var Gt=function(){function e(e,t,n){var r=this;this._destroy$=new u.a,this.bufferType=e,this._sourceBuffer=n,this._queue=[],this._pendingTask=null,this._lastInitSegment=null,this._currentCodec=t,this._segmentInventory=new Ut,Object(Mt.a)(Yt).pipe(Object(ee.a)((function(){return r._flush()})),Object(m.a)(this._destroy$)).subscribe(),Object(Nt.a)(this._sourceBuffer,"error").pipe(Object(ee.a)((function(e){return r._onError(e)})),Object(m.a)(this._destroy$)).subscribe(),Object(Nt.a)(this._sourceBuffer,"updateend").pipe(Object(ee.a)((function(){return r._flush()})),Object(m.a)(this._destroy$)).subscribe()}var t,n,r,i=e.prototype;return i.pushChunk=function(e){return C.a.debug("QSB: receiving order to push data to the SourceBuffer",this.bufferType,e),this._addToQueue({type:Ht.Push,value:e})},i.removeBuffer=function(e,t){return C.a.debug("QSB: receiving order to remove data from the SourceBuffer",this.bufferType,e,t),this._addToQueue({type:Ht.Remove,value:{start:e,end:t}})},i.endOfSegment=function(e){return C.a.debug("QSB: receiving order for validating end of segment",this.bufferType,e.segment),this._addToQueue({type:Ht.EndOfSegment,value:e})},i.synchronizeInventory=function(){this._segmentInventory.synchronizeBuffered(this.getBufferedRanges())},i.getBufferedRanges=function(){return this._sourceBuffer.buffered},i.getInventory=function(){return this._segmentInventory.getInventory()},i.dispose=function(){for(this._destroy$.next(),this._destroy$.complete(),null!=this._pendingTask&&(this._pendingTask.subject.complete(),this._pendingTask=null);this._queue.length>0;){var e=this._queue.shift();null!=e&&e.subject.complete()}},i.abort=function(){this._sourceBuffer.abort()},i._onError=function(e){var t=e instanceof Error?e:new Error("An unknown error occured when appending buffer");this._lastInitSegment=null,null!=this._pendingTask&&this._pendingTask.subject.error(t)},i._addToQueue=function(e){var t=this;return new ue.a((function(n){var r=0===t._queue.length&&null==t._pendingTask,i=new u.a,a=o()({subject:i},e);t._queue.push(a);var s=i.subscribe(n);return r&&t._flush(),function(){s.unsubscribe();var e=t._queue.indexOf(a);e>=0&&t._queue.splice(e,1)}}))},i._flush=function(){if(!this._sourceBuffer.updating){if(null!=this._pendingTask){if(this._pendingTask.type!==Ht.Push||0===this._pendingTask.steps.length){switch(this._pendingTask.type){case Ht.Push:this._segmentInventory.insertChunk(this._pendingTask.inventoryData);break;case Ht.EndOfSegment:this._segmentInventory.completeSegment(this._pendingTask.value);break;case Ht.Remove:this.synchronizeInventory()}var e=this._pendingTask.subject;return this._pendingTask=null,e.next(),e.complete(),void(this._queue.length>0&&this._flush())}}else{if(0===this._queue.length)return;var t=this._queue.shift();if(null==t)throw new Error("An item from the QueuedSourceBuffer queue was not defined");if(this._pendingTask=function(e){switch(e.type){case Ht.Push:var t=[],n=e.value,r=n.data,i=n.inventoryInfos,a=i.estimatedDuration,o=i.estimatedStart,u=i.segment,s=[void 0!==r.appendWindow[0]?Math.max(0,r.appendWindow[0]-Kt.START):void 0,void 0!==r.appendWindow[1]?r.appendWindow[1]+Kt.END:void 0];if(null!==r.initSegment&&t.push({isInit:!0,segmentData:r.initSegment,codec:r.codec,timestampOffset:r.timestampOffset,appendWindow:s}),null!==r.chunk&&t.push({isInit:!1,segmentData:r.chunk,codec:r.codec,timestampOffset:r.timestampOffset,appendWindow:s}),0===t.length)return null;var c=void 0===o?u.time/u.timescale:o,l=void 0===a?u.duration/u.timescale:a,f=c+l;void 0!==s[0]&&(c=Math.max(c,s[0])),void 0!==s[1]&&(f=Math.min(f,s[1]));var d={period:i.period,adaptation:i.adaptation,representation:i.representation,segment:i.segment,start:c,end:f};return{type:Ht.Push,steps:t,inventoryData:d,subject:e.subject};case Ht.Remove:case Ht.EndOfSegment:return e}return null}(t),null==this._pendingTask)return t.subject.next(),t.subject.complete(),void this._flush()}var n=this._pendingTask;try{switch(n.type){case Ht.EndOfSegment:return C.a.debug("QSB: Acknowledging complete segment",n.value),void this._flush();case Ht.Push:var r=n.steps.shift();if(null==r||r.isInit&&this._lastInitSegment===r.segmentData)return void this._flush();this._pushSegmentData(r);break;case Ht.Remove:var i=n.value,a=i.start,o=i.end;C.a.debug("QSB: removing data from SourceBuffer",this.bufferType,a,o),this._sourceBuffer.remove(a,o)}}catch(e){this._onError(e)}}},i._pushSegmentData=function(e){var t=e.isInit,n=e.segmentData,r=e.timestampOffset,i=e.appendWindow,a=e.codec;this._currentCodec!==a&&(C.a.debug("QSB: updating codec"),Object(Ct.a)(this._sourceBuffer,a)?this._currentCodec=a:C.a.warn("QSB: could not update codec",a,this._currentCodec));if(this._sourceBuffer.timestampOffset!==r){var o=r;C.a.debug("QSB: updating timestampOffset",this.bufferType,this._sourceBuffer.timestampOffset,o),this._sourceBuffer.timestampOffset=o}null==i[0]?this._sourceBuffer.appendWindowStart>0&&(this._sourceBuffer.appendWindowStart=0):i[0]!==this._sourceBuffer.appendWindowStart&&(i[0]>=this._sourceBuffer.appendWindowEnd&&(this._sourceBuffer.appendWindowEnd=i[0]+1),this._sourceBuffer.appendWindowStart=i[0]),null==i[1]?this._sourceBuffer.appendWindowEnd!==1/0&&(this._sourceBuffer.appendWindowEnd=1/0):i[1]!==this._sourceBuffer.appendWindowEnd&&(this._sourceBuffer.appendWindowEnd=i[1]),C.a.debug("QSB: pushing new data to SourceBuffer",this.bufferType),t&&(this._lastInitSegment=n),this._sourceBuffer.appendBuffer(n)},t=e,(n=[{key:"codec",get:function(){return this._currentCodec}}])&&Vt(t.prototype,n),r&&Vt(t,r),e}();var qt=["audio","video","text","image"];var Xt=function(){function e(e,t){this._mediaElement=e,this._mediaSource=t,this._initializedSourceBuffers={}}e.isNative=function(e){return Qt(e)};var t=e.prototype;return t.get=function(e){var t=this._initializedSourceBuffers[e];return null!=t?t:null},t.createSourceBuffer=function(e,t,n){void 0===n&&(n={});var r=this._initializedSourceBuffers[e];if(Qt(e)){if(null!=r)return r.codec!==t?C.a.warn("SB: Reusing native SourceBuffer with codec",r.codec,"for codec",t):C.a.info("SB: Reusing native SourceBuffer with codec",t),r;C.a.info("SB: Adding native SourceBuffer with codec",t);var i=function(e,t,n){var r=t.addSourceBuffer(n);return new Gt(e,n,r)}(e,this._mediaSource,t);return this._initializedSourceBuffers[e]=i,i}if(null!=r)return C.a.info("SB: Reusing a previous custom SourceBuffer for the type",e),r;if("text"===e){var a;if(C.a.info("SB: Creating a new text SourceBuffer with codec",t),"html"===n.textTrackMode){if(null==Y.a.htmlTextTracksBuffer)throw new Error("HTML Text track feature not activated");a=new Y.a.htmlTextTracksBuffer(this._mediaElement,n.textTrackElement)}else{if(null==Y.a.nativeTextTracksBuffer)throw new Error("Native Text track feature not activated");a=new Y.a.nativeTextTracksBuffer(this._mediaElement,!0===n.hideNativeSubtitle)}var o=new Gt("text",t,a);return this._initializedSourceBuffers.text=o,o}if("image"===e){if(null==Y.a.imageBuffer)throw new Error("Image buffer feature not activated");C.a.info("SB: Creating a new image SourceBuffer with codec",t);var u=new Y.a.imageBuffer,s=new Gt("image",t,u);return this._initializedSourceBuffers.image=s,s}throw C.a.error("SB: Unknown buffer type:",e),new z.a("BUFFER_TYPE_UNKNOWN","The player wants to create a SourceBuffer of an unknown type.")},t.disposeSourceBuffer=function(e){var t=this._initializedSourceBuffers[e];if(null!=t){if(C.a.info("SB: Aborting SourceBuffer",e),t.dispose(),!Qt(e)||"open"===this._mediaSource.readyState)try{t.abort()}catch(t){C.a.warn("SB: Failed to abort a "+e+" SourceBuffer:",t)}delete this._initializedSourceBuffers[e]}else C.a.warn("SB: Trying to dispose a SourceBuffer that does not exist")},t.disposeAll=function(){var e=this;qt.forEach((function(t){null!=e.get(t)&&e.disposeSourceBuffer(t)}))},e}();function Qt(e){return"audio"===e||"video"===e}var Zt=n(232);function Jt(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];var r=t.map((function(e){return e.pipe(Object(w.a)((function(e){return"complete-buffer"===e.type||"active-buffer"===e.type})),Object(g.a)((function(e){return"complete-buffer"===e.type})),Object(T.a)(!1),Object(y.a)())}));return Object(h.a)(r).pipe(Object(g.a)((function(e){return e.every((function(e){return e}))})),Object(y.a)())}var en={activeBuffer:function(e){return{type:"active-buffer",value:{bufferType:e}}},activePeriodChanged:function(e){return{type:"activePeriodChanged",value:{period:e}}},adaptationChange:function(e,t,n){return{type:"adaptationChange",value:{type:e,adaptation:t,period:n}}},addedSegment:function(e,t,n,r){return{type:"added-segment",value:{content:e,segment:t,segmentData:r,buffered:n}}},bitrateEstimationChange:function(e,t){return{type:"bitrateEstimationChange",value:{type:e,bitrate:t}}},bufferComplete:function(e){return{type:"complete-buffer",value:{type:e}}},discontinuityEncountered:function(e,t){return{type:"discontinuity-encountered",value:{bufferType:t,gap:e}}},endOfStream:function(){return{type:"end-of-stream",value:void 0}},fullBuffer:function(e){return{type:"full-buffer",value:{bufferType:e}}},needsManifestRefresh:function(){return{type:"needs-manifest-refresh",value:void 0}},manifestMightBeOufOfSync:function(){return{type:"manifest-might-be-out-of-sync",value:void 0}},needsMediaSourceReload:function(e){return{type:"needs-media-source-reload",value:{currentTime:e.currentTime,isPaused:e.isPaused}}},needsDecipherabilityFlush:function(e){return{type:"needs-decipherability-flush",value:{currentTime:e.currentTime,isPaused:e.isPaused,duration:e.duration}}},periodBufferReady:function(e,t,n){return{type:"periodBufferReady",value:{type:e,period:t,adaptation$:n}}},periodBufferCleared:function(e,t){return{type:"periodBufferCleared",value:{type:e,period:t}}},protectedSegment:function(e){return{type:"protected-segment",value:e}},representationChange:function(e,t,n){return{type:"representationChange",value:{type:e,period:t,representation:n}}},resumeStream:function(){return{type:"resume-stream",value:void 0}},warning:function(e){return{type:"warning",value:e}}};var tn=Xt,nn=n(63);var rn=n(71),an=n.n(rn);var on=function(){function e(e,t){this.predicate=e,this.inclusive=t}return e.prototype.call=function(e,t){return t.subscribe(new un(e,this.predicate,this.inclusive))},e}(),un=function(e){function t(t,n,r){var i=e.call(this,t)||this;return i.predicate=n,i.inclusive=r,i.index=0,i}return c.a(t,e),t.prototype._next=function(e){var t,n=this.destination;try{t=this.predicate(e,this.index++)}catch(e){return void n.error(e)}this.nextOrComplete(e,t)},t.prototype.nextOrComplete=function(e,t){var n=this.destination;Boolean(t)?n.next(e):(this.inclusive&&n.next(e),n.complete())},t}(A.a),sn=n(104),cn=N.a.BITRATE_REBUFFERING_RATIO,ln=N.a.MAX_TIME_MISSING_FROM_COMPLETE_SEGMENT,fn=N.a.MINIMUM_SEGMENT_SIZE;function dn(e){var t=e.content,n=e.fastSwitchingStep,r=e.loadedSegmentPendingPush,i=e.neededRange,a=e.segmentInventory,o=t.representation.index.getSegments(i.start,i.end-i.start),u=function(e,t){for(var n=[],r=0;r<e.length;r++){var i=!0,a=!0,o=e[r],u=0===r?null:e[r-1],s=r>=e.length-1?null:e[r+1];void 0===o.bufferedStart?i=!1:(null===u||void 0===u.bufferedEnd||u.bufferedEnd!==o.bufferedStart)&&t.start<o.bufferedStart&&o.bufferedStart-o.start>ln&&(C.a.info("Buffer: The start of the wanted segment has been garbage collected",o),i=!1),void 0===o.bufferedEnd?a=!1:(null===s||void 0===s.bufferedEnd||s.bufferedEnd!==o.bufferedStart)&&t.end>o.bufferedEnd&&o.end-o.bufferedEnd>ln&&(C.a.info("Buffer: The end of the wanted segment has been garbage collected",o),a=!1),i&&a&&n.push(o)}return n}(function(e,t){for(var n=Math.max(1/60,fn),r=e.start+n,i=e.end-n,a=[],o=t.length-1;o>=0;o--){var u=t[o];if(!u.partiallyPushed&&!1!==u.infos.representation.decipherable){var s=u.infos.segment,c=s.time/s.timescale;((null==s.duration?u.end:c+s.duration/s.timescale)>r&&c<i||u.end>r&&u.start<i)&&a.unshift(u)}}return a}({start:Math.max(i.start-.5,0),end:i.end+.5},a).filter((function(e){return!function(e,t,n){if(e.period.id!==t.period.id)return!1;if(e.adaptation.id!==t.adaptation.id)return!0;var r=e.representation.bitrate;if(void 0===n){var i=r*cn;return t.representation.bitrate>i}return r<n}(e.infos,t,n)})),i),s=Math.min(1/60,fn);return o.filter((function(e){if(r.test(e.id))return!1;var n=e.duration,i=e.time,a=e.timescale;if(e.isInit||void 0===n)return!0;if(n/a<fn)return!1;for(var o=i/a,c=o+n/a,l=0;l<u.length;l++){var f=u[l];if(f.infos.period.id===t.period.id){var d=f.infos.segment.time,p=f.infos.segment.duration,h=f.infos.segment.timescale,v=d/h;if(o-v>-s&&v+p/h-c>-s)return!1}}for(var b=0;b<u.length;b++){var m=u[b];if(m.end>o){if(m.start>o+s)return!0;for(var g=b+1;g<u.length-1&&u[g-1].end+s>u[g].start;)g++;return g--,u[g].end<c+s}}return!0}))}var pn=N.a.SEGMENT_PRIORITIES_STEPS;function hn(e,t){for(var n=t.currentTime+t.wantedTimeOffset,r=e.time/e.timescale-n,i=0;i<pn.length;i++)if(r<pn[i])return i;return pn.length}var vn=N.a.BUFFER_GC_GAPS.CALM,bn=N.a.BUFFER_GC_GAPS.BEEFY;function mn(e,t,n){for(var r=Object(L.c)(t,e),i=r.innerRange,a=r.outerRanges,o=[],u=0;u<a.length;u++){var s=a[u];e-n<s.end?o.push(s):e+n>s.start&&o.push(s)}return null!=i&&(C.a.debug("Buffer: GC removing part of inner range",o),e-n>i.start&&o.push({start:i.start,end:e-n}),e+n<i.end&&o.push({start:e+n,end:i.end})),o}function gn(e,t,n){var r=t.pushChunk(n);return r.pipe(Object(M.a)((function(n){if(!(n instanceof Error)||"QuotaExceededError"!==n.name){var i=n instanceof Error?n.toString():"An unknown error happened when pushing content";throw new z.a("BUFFER_APPEND_ERROR",i)}return Object(v.a)((a=e,o=t,a.pipe(Object(_.a)(1),Object(Z.a)((function(e){C.a.warn("Buffer: Running garbage collector");var t=o.getBufferedRanges(),n=mn(e.currentTime,t,vn);return 0===n.length&&(n=mn(e.currentTime,t,bn)),C.a.debug("Buffer: GC cleaning",n),Object(Tt.a)(n.map((function(e){var t=e.start,n=e.end;return o.removeBuffer(t,n)}))).pipe(Object(Rt.a)())})))).pipe(Object(be.a)()),r).pipe(Object(M.a)((function(e){var t=e instanceof Error?e.toString():"Could not clean the buffer";throw new z.a("BUFFER_FULL_ERROR",t)})));var a,o})))}var yn=function(e){var t,n,r=e.bufferGoal$,i=e.clock$,a=e.content,c=e.fastSwitchingStep$,l=e.queuedSourceBuffer,f=e.segmentFetcher,m=e.terminate$,y=a.manifest,O=a.period,E=a.adaptation,w=a.representation,A=w.getMimeTypeString(),x=E.type,k=w.index.getInitSegment(),R=null==k?{chunkData:null,chunkInfos:null,chunkOffset:0,segmentProtections:[],appendWindow:[void 0,void 0]}:null,I=[],M=new s.a(1),N=new u.a,D=null,P=new sn.a,B=Object(h.a)([i,r,m.pipe(Object(_.a)(1),Object(S.a)(!0),Object(T.a)(!1)),N.pipe(Object(T.a)(void 0))]).pipe(ye(c),Object(g.a)((function(e){var t=e[0],n=t[0],r=t[1],i=t[2],o=e[1];l.synchronizeInventory();var u,s=function(e,t,n){var r=t.currentTime+t.wantedTimeOffset,i=null==e.start?0:e.start,a=null==e.end?1/0:e.end,o={start:Math.max(i,r),end:a};return{start:Math.min(o.end,Math.max(r,o.start)),end:Math.min(o.end,Math.max(r+n,o.start))}}(O,n,r),c=null!=n.stalled?w.index.checkDiscontinuity(n.currentTime):-1,f=w.index.shouldRefresh(s.start,s.end),d=l.getInventory(),p=dn({content:a,fastSwitchingStep:o,loadedSegmentPendingPush:P,neededRange:s,segmentInventory:d}).map((function(e){return{priority:hn(e,n),segment:e}}));if(null!=k&&null==R){var h=hn(k,n);p=[{segment:k,priority:h}].concat(p)}if(p.length>0||null==O.end)u=!1;else{var v=w.index.getLastPosition();if(void 0===v)u=s.end>=O.end&&w.index.isFinished();else if(null===v)u=w.index.isFinished();else{var b=null!=O.end?Math.min(O.end,v):v;u=s.end>=b&&w.index.isFinished()}}return{discontinuity:c,isFull:u,terminate:i,neededSegments:p,shouldRefreshManifest:f}})),Object(Z.a)((function(e){var t=e.neededSegments,n=t[0];if(e.terminate){if(I=[],null==D)return C.a.debug("Buffer: no request, terminate.",x),M.complete(),Object(b.a)({type:"terminated"});if(null==n||D.segment.id!==n.segment.id)return C.a.debug("Buffer: cancel request and terminate.",x),M.next(),M.complete(),Object(b.a)({type:"terminated"});if(D.priority!==n.priority){var r=D.request$;f.updatePriority(r,n.priority),D.priority=n.priority}return C.a.debug("Buffer: terminate after request.",x),p.a}var i=[];if(e.discontinuity>1){var a=e.discontinuity+1,o=[e.discontinuity,a];i.push(en.discontinuityEncountered(o,x))}if(e.shouldRefreshManifest&&i.push(en.needsManifestRefresh()),null==n)return null!=D&&C.a.debug("Buffer: interrupt segment request.",x),I=[],M.next(),Object(v.a)(b.a.apply(void 0,i),e.isFull?Object(b.a)(en.fullBuffer(x)):p.a);if(null==D)C.a.debug("Buffer: start downloading queue.",x),I=t,M.next();else if(D.segment.id!==n.segment.id)C.a.debug("Buffer: restart download queue.",x),I=t,M.next();else if(D.priority!==n.priority){C.a.debug("Buffer: update request priority.",x);var u=D.request$;f.updatePriority(u,n.priority),D.priority=n.priority}else C.a.debug("Buffer: update downloading queue",x),I=t.slice().splice(1,t.length);return Object(v.a)(b.a.apply(void 0,i),Object(b.a)(en.activeBuffer(x)))})),(t=function(e){return"terminated"!==e.type},void 0===n&&(n=!1),function(e){return e.lift(new on(t,n))})),L=M.pipe(Object(ae.a)((function(){return I.length>0?(e=Object(ve.a)((function(){var t=I.shift();if(null==t)return an()((function(){N.next()})),p.a;var n=t.segment,r=t.priority,i={manifest:y,period:O,adaptation:E,representation:w,segment:n},a=f.createRequest(i,r);D={segment:n,priority:r,request$:a};var o=a.pipe(Object(Z.a)((function(e){return"warning"===e.type?Object(b.a)({type:"retry",value:{segment:n,error:e.value}}):"chunk-complete"===e.type?(D=null,Object(b.a)({type:"end-of-segment",value:{segment:n}})):(null!=R&&null!=R.chunkInfos&&(t=R.chunkInfos),e.parse(t).pipe(Object(g.a)((function(e){return{type:"parsed-segment",value:{segment:n,data:e}}}))));var t})));return Object(v.a)(o,e)}))).pipe(ne((function(){D=null}))):p.a;var e})),Object(Z.a)((function(e){switch(e.type){case"retry":return Object(v.a)(Object(b.a)({type:"warning",value:e.value.error}),Object(ve.a)((function(){var t=e.value.segment,n=w.index;if(!1===n.isSegmentStillAvailable(t))N.next();else if(n.canBeOutOfSyncError(e.value.error))return Object(b.a)(en.manifestMightBeOufOfSync());return p.a})));case"parsed-segment":var t=e.value.segment;return t.isInit&&(R=e.value.data),function(e,t){var n=t.chunkInfos,r=t.chunkData,u=t.chunkOffset,s=t.segmentProtections,c=t.appendWindow;return Object(ve.a)((function(){var t=b.a.apply(void 0,s.map((function(e){return en.protectedSegment(e)})));if(null==r)return t;var f,p,h={initSegment:null!=R?R.chunkData:null,chunk:e.isInit?null:r,timestampOffset:u,appendWindow:c,codec:A};null!==n&&(f=n.time/n.timescale,p=void 0!==n.duration?n.duration/n.timescale:void 0);var v=o()({segment:e,estimatedStart:f,estimatedDuration:p},a),m=gn(i,l,{data:h,inventoryInfos:v}).pipe(Object(g.a)((function(){var t=l.getBufferedRanges();return en.addedSegment(a,e,t,r)})));return Object(d.a)(m,t)}))}(t,e.value.data);case"end-of-segment":var n=e.value.segment;return P.add(n.id),l.endOfSegment(o()({segment:n},a)).pipe(Object(be.a)(),ne((function(){P.remove(n.id)})))}})));return Object(d.a)(B,L).pipe(Object(j.a)())};var _n=function(e){var t=e.abrManager,n=e.clock$,r=e.content,i=e.options,a=e.queuedSourceBuffer,o=e.segmentPipelinesManager,c=e.wantedBufferAhead$,l="direct"===i.manualBitrateSwitchingMode,f=r.manifest,h=r.period,E=r.adaptation,S={},A=new u.a,x=new u.a,k=new u.a,R=new u.a,I=Object(d.a)(k,R),N=E.representations.filter((function(e){return!1!==e.decipherable}));if(N.length<=0){var D=new z.a("NO_PLAYABLE_REPRESENTATION","No Representation in the chosen Adaptation can be played");return Object(nn.a)(D)}var P,B=t.get$(E.type,N,n,I).pipe(Object(J.a)(Q.a),Object(j.a)()),L=o.createPipeline(E.type,R),U=B.pipe(Object(g.a)((function(e){return e.knownStableBitrate})),Object(O.a)((function(){return new s.a(1)})),Object(T.a)(void 0),Object(y.a)()),F=B.pipe(Object(w.a)((function(e){return null!=e.bitrate})),Object(y.a)((function(e,t){return e.bitrate===t.bitrate})),Object(g.a)((function(e){var t=e.bitrate;return C.a.debug("Buffer: new "+E.type+" bitrate estimation",t),en.bitrateEstimationChange(E.type,t)}))),$=B.pipe(Object(y.a)((function(e,t){return e.manual===t.manual&&e.representation.id===t.representation.id}))),W=Object(d.a)($.pipe((P=function(e,t){var r=e.representation;if(l&&e.manual&&0!==t)return n.pipe(Object(_.a)(1),Object(g.a)((function(e){return en.needsMediaSourceReload(e)})));var i=Object(b.a)(en.representationChange(E.type,h,r)),o=function e(t){return Object(ve.a)((function(){var r=S[t.id],i=null!=r?r:1;S[t.id]=i;var o=c.pipe(Object(g.a)((function(e){return e*i})));return C.a.info("Buffer: changing representation",E.type,t),yn({clock$:n,content:{representation:t,adaptation:E,period:h,manifest:f},queuedSourceBuffer:a,segmentFetcher:L,terminate$:x,bufferGoal$:o,fastSwitchingStep$:U}).pipe(Object(M.a)((function(n){var r=H(n,{defaultCode:"NONE",defaultReason:"Unknown `RepresentationBuffer` error"});if("BUFFER_FULL_ERROR"===r.code){var a=c.getValue(),o=i;if(o<=.25||a*o<=2)throw r;return S[t.id]=o-.25,e(t)}throw r})))}))}(r).pipe(Object(m.a)(A));return Object(v.a)(i,o).pipe(Object(ee.a)((function(e){if("representationChange"===e.type||"added-segment"===e.type)return k.next(e)})))},function(e){return Object(ve.a)((function(){var t,n=0,r=!1,i=!1;return e.pipe(Object(Z.a)((function e(a){return Object(ve.a)((function(){return i?(t=a,r=!0,p.a):(r=!1,i=!0,P(a,n++).pipe(Object(ee.a)({complete:function(){return i=!1}}),(function(n){return Object(v.a)(n,Object(ve.a)((function(){return r?e(t):p.a})))})))}))})))}))})),$.pipe(Object(g.a)((function(e,t){0!==t&&(e.urgent?(C.a.info("Buffer: urgent Representation switch",E.type),A.next()):(C.a.info("Buffer: slow Representation switch",E.type),x.next()))})),Object(be.a)()));return Object(d.a)(W,F)};function On(e,t,n,r){var i=r.period;return Object(h.a)([e,t]).pipe(Object(w.a)((function(e){var t=e[0],n=e[1];return null!=i.end&&t.currentTime+n>=i.end})),Object(g.a)((function(){return C.a.debug('Buffer: full "empty" AdaptationBuffer',n),{type:"full-buffer",value:{bufferType:n}}})))}var En=N.a.ADAPTATION_SWITCH_BUFFER_PADDINGS;function wn(e,t,n,r){var i=e.getBufferedRanges();if(0===i.length)return{type:"continue",value:void 0};var a=Object(L.a)(i),o=t.start,u=null==t.end?1/0:t.end,s=Object(L.l)(a,[{start:o,end:u}]);if(0===s.length)return{type:"continue",value:void 0};var c=function(e,t,n){return e.synchronizeInventory(),e.getInventory().reduce((function(e,r){if(r.infos.period.id!==t.id||r.infos.adaptation.id!==n.id)return e;var i=r.bufferedStart,a=r.bufferedEnd;return void 0===i||void 0===a?e:(e.push({start:i,end:a}),e)}),[])}(e,t,n),l=r.currentTime;if("video"===n.type&&r.readyState>1&&Object(L.j)({start:o,end:u},l)&&Object(L.k)(a,l)&&!Object(L.k)(c,l))return{type:"needs-reload",value:void 0};var f=Object(L.b)(s,c),d=n.type,p=En[d].before;null==p&&(p=0);var h=En[d].after;null==h&&(h=0);var v=Object(L.b)(f,[{start:Math.max(l-p,o),end:Math.min(l+h,u)}]);return v.length>0?{type:"clean-buffer",value:v}:{type:"continue",value:void 0}}var jn=function(e){var t=e.abrManager,n=e.bufferType,r=e.clock$,i=e.content,a=e.garbageCollectors,u=e.segmentPipelinesManager,c=e.sourceBuffersStore,l=e.options,f=e.wantedBufferAhead$,h=i.period,m=new s.a(1);return m.pipe(Object(ae.a)((function(e){if(null==e){C.a.info("Buffer: Set no "+n+" Adaptation",h);var s,m=c.get(n);return null!=m?(C.a.info("Buffer: Clearing previous "+n+" SourceBuffer"),s=m.removeBuffer(h.start,null==h.end?1/0:h.end)):s=Object(b.a)(null),Object(v.a)(s.pipe(Object(S.a)(en.adaptationChange(n,null,h))),On(r,f,n,{period:h}))}C.a.info("Buffer: Updating "+n+" adaptation",e,h);var y=r.pipe(Object(_.a)(1),Object(Z.a)((function(s){var m=function(e,t,n,r){var i=e.get(t);if(null!=i)return C.a.info("Buffer: Reusing a previous SourceBuffer for the type",t),i;var a=function(e){var t=e.representations;if(null==t[0])return"";return t[0].getMimeTypeString()}(n),o="text"===t?r.textTrackOptions:void 0;return e.createSourceBuffer(t,a,o)}(c,n,e,l),y=wn(m,h,e,s);if("needs-reload"===y.type)return Object(b.a)(en.needsMediaSourceReload(s));var _="clean-buffer"===y.type?v.a.apply(void 0,y.value.map((function(e){var t=e.start,n=e.end;return m.removeBuffer(t,n)}))).pipe(Object(be.a)()):p.a,O=a.get(m),E=function(e,a){var s=i.manifest,d=r.pipe(Object(g.a)((function(e){var t=a.getBufferedRanges();return o()({},e,{bufferGap:Object(L.d)(t,e.currentTime)})})));return _n({abrManager:t,clock$:d,content:{manifest:s,period:h,adaptation:e},options:l,queuedSourceBuffer:a,segmentPipelinesManager:u,wantedBufferAhead$:f}).pipe(Object(M.a)((function(e){if(!tn.isNative(n)){C.a.error("Buffer: Custom "+n+" buffer crashed. Aborting it.",e),c.disposeSourceBuffer(n);var t=H(e,{defaultCode:"NONE",defaultReason:"Unknown `AdaptationBuffer` error"});return Object(v.a)(Object(b.a)(en.warning(t)),On(r,f,n,{period:h}))}throw C.a.error("Buffer: Native "+n+" buffer crashed. Stopping playback.",e),e})))}(e,m);return Object(v.a)(_,Object(d.a)(E,O))})));return Object(v.a)(Object(b.a)(en.adaptationChange(n,e,h)),y)})),Object(T.a)(en.periodBufferReady(n,h,m)))},Tn=N.a.MAXIMUM_MAX_BUFFER_AHEAD,Sn=N.a.MAXIMUM_MAX_BUFFER_BEHIND;var An=function(e,t,n,r,i,a){var o,s,c=e.manifest,l=e.initialPeriod,f=a.maxBufferAhead$,h=a.maxBufferBehind$,O=a.wantedBufferAhead$,E=new kt((function(e){var n=e.bufferType,r=null!=Sn[n]?Sn[n]:1/0,i=null!=Tn[n]?Tn[n]:1/0;return It({queuedSourceBuffer:e,clock$:t.pipe(Object(g.a)((function(e){return e.currentTime}))),maxBufferBehind$:h.pipe(Object(g.a)((function(e){return Math.min(e,r)}))),maxBufferAhead$:f.pipe(Object(g.a)((function(e){return Math.min(e,i)})))})})),T=t.pipe(Object(Z.a)((function(e){var t=e.currentTime,n=e.wantedTimeOffset+t;if(n<c.getMinimumPosition()){var r=new z.a("MEDIA_TIME_BEFORE_MANIFEST","The current position is behind the earliest time announced in the Manifest.");return Object(b.a)(en.warning(r))}if(n>c.getMaximumPosition()){var i=new z.a("MEDIA_TIME_AFTER_MANIFEST","The current position is after the latest time announced in the Manifest.");return Object(b.a)(en.warning(i))}return p.a}))),S=function(){var e=["audio","video"];return null==Y.a.nativeTextTracksBuffer&&null==Y.a.htmlTextTracksBuffer||e.push("text"),null!=Y.a.imageBuffer&&e.push("image"),e}().map((function(e){return function(e,o){var s=new xt((function(e,t){return e.start-t.start})),l=new u.a,f=!1;function h(o){return function e(o,s,l){C.a.info("BO: Creating new Buffer for",o,s);var f=new u.a,p=new u.a,h=t.pipe(Object(w.a)((function(e){var t=e.currentTime,n=e.wantedTimeOffset;return null!=s.end&&t+n>=s.end}))),y=f.pipe(function e(t,n){return n?function(r){return r.pipe(e((function(e,r){return Object(Tt.a)(t(e,r)).pipe(Object(g.a)((function(t,i){return n(e,t,r,i)})))})))}:function(e){return e.lift(new St(t))}}((function(t){return e(o,t,p)}))),T=l.pipe(Object(_.a)(1),Object(ee.a)((function(){f.complete(),p.next(),p.complete()})),Object(j.a)()),S=Object(d.a)(h,T),A=jn({abrManager:n,bufferType:o,clock$:t,content:{manifest:c,period:s},garbageCollectors:E,segmentPipelinesManager:i,sourceBuffersStore:r,options:a,wantedBufferAhead$:O}).pipe(Object(Z.a)((function(e){var t=e.type;if("full-buffer"===t){var n=c.getPeriodAfter(s);if(null==n)return Object(b.a)(en.bufferComplete(o));f.next(n)}else"active-buffer"===t&&p.next();return Object(b.a)(e)})),Object(j.a)()),x=Object(v.a)(A.pipe(Object(m.a)(S)),Object(b.a)(en.periodBufferCleared(o,s)).pipe(Object(ee.a)((function(){C.a.info("BO: Destroying buffer for",o,s)}))));return Object(d.a)(x,y,T.pipe(Object(be.a)()))}(e,o,l).pipe(Object(ee.a)((function(e){"periodBufferReady"===e.type?(f=!0,s.add(e.value.period)):"periodBufferCleared"===e.type&&s.removeElement(e.value.period)})),Object(j.a)())}var y=t.pipe(Object(w.a)((function(e){var t,n,r,i=e.currentTime,a=e.wantedTimeOffset;return f&&void 0!==c.getPeriodForTime(a+i)&&(t=a+i,n=s.head(),r=s.last(),null==n||null==r||n.start>t||(null==r.end?1/0:r.end)<t)})),Object(ee.a)((function(t){var n=t.currentTime,r=t.wantedTimeOffset;C.a.info("BO: Current position out of the bounds of the active periods,re-creating buffers.",e,n+r),f=!1,l.next()})),Object(Z.a)((function(e){var t=e.currentTime,n=e.wantedTimeOffset,r=c.getPeriodForTime(t+n);if(null==r)throw new z.a("MEDIA_TIME_NOT_FOUND","The wanted position is not found in the Manifest.");return h(r)}))),T=Object(D.b)(c,"decipherabilityUpdate").pipe(Object(Z.a)((function(n){var i=r.get(e);if(!n.some((function(t){return t.adaptation.type===e}))||null==i)return p.a;var a=function(e,t){e.synchronizeInventory();for(var n=[],r=e.getInventory(),i=function(i){var a=r[i];if(t.some((function(e){return a.infos.period.id===e.period.id&&a.infos.adaptation.id===e.adaptation.id&&a.infos.representation.id===e.representation.id}))){var o=a.bufferedStart,u=a.bufferedEnd;if(void 0===o||void 0===u){C.a.warn("BO: No buffered start or end found from a segment.");var s=e.getBufferedRanges(),c=s.length;return 0===c?{v:[]}:{v:[{start:s.start(0),end:s.end(c-1)}]}}var l=n[n.length-1];void 0!==l&&l.end===o?l.end=u:n.push({start:o,end:u})}},a=0;a<r.length;a++){var o=i(a);if("object"==typeof o)return o.v}return n}(i,n);return f=!1,l.next(),v.a.apply(void 0,a.map((function(e){var t=e.start,n=e.end;return i.removeBuffer(t,n).pipe(Object(be.a)())})).concat([t.pipe(Object(_.a)(1),Object(Z.a)((function(e){return Object(v.a)(Object(b.a)(en.needsDecipherabilityFlush(e)),Object(ve.a)((function(){var t=e.currentTime+e.wantedTimeOffset,n=c.getPeriodForTime(t);if(null==n)throw new z.a("MEDIA_TIME_NOT_FOUND","The wanted position is not found in the Manifest.");return h(n)})))})))]))})));return Object(d.a)(y,T,h(o))}(e,l).pipe(Object(J.a)(Q.a),Object(j.a)())})),A=(o=S,s=o.length,d.a.apply(void 0,o).pipe(Object(w.a)((function(e){var t=e.type;return"periodBufferCleared"===t||"adaptationChange"===t||"representationChange"===t})),Object(Zt.a)((function(e,t){switch(t.type){case"periodBufferCleared":var n=t.value,r=n.period,i=n.type,a=e[r.id];null!=a&&a.buffers.has(i)&&(a.buffers.delete(i),0===a.buffers.size&&delete e[r.id]);break;case"adaptationChange":if(null!=t.value.adaptation)return e;case"representationChange":var o=t.value,u=o.period,s=o.type,c=e[u.id];if(null==c||c.buffers.has(s)){var l=new Set;l.add(s),e[u.id]={period:u,buffers:l}}else c.buffers.add(s)}return e}),{}),Object(g.a)((function(e){for(var t=Object.keys(e),n=[],r=0;r<t.length;r++){var i=e[t[r]];null!=i&&i.buffers.size===s&&n.push(i.period)}return n.reduce((function(e,t){return null==e?t:t.start<e.start?t:e}),null)})),Object(y.a)((function(e,t){return null==e&&null==t||null!=e&&null!=t&&e.id===t.id})))).pipe(Object(w.a)((function(e){return null!=e})),Object(g.a)((function(e){return C.a.info("Buffer: New active period",e),en.activePeriodChanged(e)}))),x=Jt.apply(void 0,S).pipe(Object(g.a)((function(e){return e?en.endOfStream():en.resumeStream()})));return d.a.apply(void 0,S.concat([A,x,T]))};var xn=n(225),kn=n(103);var Rn=function(){function e(e){if(this.total=e,this.total<0)throw new kn.a}return e.prototype.call=function(e,t){return t.subscribe(new In(e,this.total))},e}(),In=function(e){function t(t,n){var r=e.call(this,t)||this;return r.total=n,r.ring=new Array,r.count=0,r}return c.a(t,e),t.prototype._next=function(e){var t=this.ring,n=this.total,r=this.count++;t.length<n?t.push(e):t[r%n]=e},t.prototype._complete=function(){var e=this.destination,t=this.count;if(t>0)for(var n=this.count>=this.total?this.total:this.count,r=this.ring,i=0;i<n;i++){var a=t++%n;e.next(r[a])}e.complete()},t}(A.a),Mn=F.a.onRemoveSourceBuffers$,Nn=F.a.onSourceOpen$,Cn=F.a.onUpdate$;function Dn(e){return Object(ve.a)((function(){if(C.a.debug("Init: Trying to call endOfStream"),"open"!==e.readyState)return C.a.debug("Init: MediaSource not open, cancel endOfStream"),Object(b.a)(null);var t=e.sourceBuffers,n=function(e){for(var t=[],n=0;n<e.length;n++){var r=e[n];r.updating&&t.push(r)}return t}(t);if(0===n.length)return C.a.info("Init: Triggering end of stream"),e.endOfStream(),Object(b.a)(null);C.a.debug("Init: Waiting SourceBuffers to be updated before calling endOfStream.");var r,i=n.map((function(e){return Cn(e).pipe(Object(_.a)(1))}));return Object(xn.a)(d.a.apply(void 0,i).pipe((r=1,function(e){return 0===r?Object(p.b)():e.lift(new Rn(r))})),Mn(t).pipe(Object(_.a)(1))).pipe(Object(Z.a)((function(){return Dn(e)})))}))}var Pn=n(165),Bn=N.a.BUFFER_DISCONTINUITY_THRESHOLD;var Ln=n(123);function Un(e,t){e<t.currentTime||(C.a.warn("Init: discontinuity seek",t.currentTime,e),t.currentTime=e)}var Fn=n(117),$n=n(122);function zn(e){var t=e.mediaElement,n=e.manifest,r=e.clock$,i=e.speed$,a=e.bufferOptions,o=e.abrManager,s=e.segmentPipelinesManager;return function(e,c,l){var f=n.isLive?1/0:n.getMaximumPosition();!function(e,t){var n=t===1/0?Number.MAX_VALUE:t;e.duration!==n&&(C.a.info("Init: Setting duration",n),e.duration=n)}(e,f);var v=n.getPeriodForTime(c);if(null==v)throw new z.a("MEDIA_STARTING_TIME_NOT_FOUND","Wanted starting time not found in the Manifest.");var _=new tn(t,e);!function(e,t){Object.keys(t.adaptations).forEach((function(n){if(tn.isNative(n)){var r=t.adaptations[n],i=null!=r&&r.length>0?r[0].representations:[];if(i.length>0){var a=i[0].getMimeTypeString();e.createSourceBuffer(n,a)}}}))}(_,v);var O=Object(Fn.a)(r,t,c,l),E=O.seek$,j=O.load$,S=j.pipe(Object(w.a)((function(e){return"not-loaded-metadata"!==e}))),A=function(e,t){var n=t.autoPlay,r=t.initialPlay$,i=t.initialSeek$,a=t.manifest,o=t.speed$,u=t.startTime,s=!1,c=!1,l=r.pipe(Object(ee.a)((function(){s=!0})),Object(be.a)()),f=i.pipe(Object(ee.a)((function(){c=!0})),Object(be.a)()),p=Object(h.a)([e,o]).pipe(Object(g.a)((function(e){var t=e[0],r=e[1],i=a.isLive;return{currentTime:t.currentTime,duration:t.duration,isPaused:s?t.paused:!n,isLive:i,liveGap:i?a.getMaximumPosition()-t.currentTime:1/0,readyState:t.readyState,speed:r,stalled:t.stalled,wantedTimeOffset:c?0:u-t.currentTime}})));return Object(d.a)(l,f,p)}(r,{autoPlay:l,initialPlay$:S,initialSeek$:E,manifest:n,speed$:i,startTime:c}),x=new u.a,k=An({manifest:n,initialPeriod:v},A,o,_,s,a).pipe(Object(Z.a)((function(n){switch(n.type){case"end-of-stream":return C.a.debug("Init: end-of-stream order received."),function(e){return Nn(e).pipe(Object(T.a)(null),Object(ae.a)((function(){return Dn(e)})))}(e).pipe(Object(be.a)(),Object(m.a)(x));case"resume-stream":return C.a.debug("Init: resume-stream order received."),x.next(null),p.a;case"discontinuity-encountered":var r=n.value,i=r.bufferType,a=r.gap;return tn.isNative(i)&&Un(a[1],t),p.a;default:return Object(b.a)(n)}}))),R=Object($n.a)(t,i,r,{pauseWhenStalled:!0}).pipe(Object(g.a)(Ot.a.speedChanged)),I=Object(Ln.a)(r).pipe(Object(g.a)(Ot.a.stalled)),M=function(e,t){return e.pipe(Object(w.a)((function(e){return null!==e.stalled})),Object(g.a)((function(e){var n=e.buffered,r=e.currentTime,i=e.currentRange,a=e.state,o=e.stalled,u=Object(L.e)(n,r);if(Object(Pn.a)(r,i,a,null!==o))return C.a.warn("Init: After freeze seek",r,i),[r,r];if(u<Bn)return[r,r+u+1/60];var s=t.getPeriodForTime(r);if(null!=s){var c=t.getPeriodAfter(s);if(null!=s&&null!=s.end&&null!=c&&r>s.end-1&&r<=c.start&&c.start-s.end==0)return[s.end,c.start]}})),Object(w.a)((function(e){return void 0!==e})),Object(y.a)())}(r,n).pipe(Object(ee.a)((function(e){Un(e[1],t)})),Object(be.a)()),N=j.pipe(Object(Z.a)((function(e){if("autoplay-blocked"===e){var t=new z.a("MEDIA_ERR_BLOCKED_AUTOPLAY","Cannot trigger auto-play automatically: your browser does not allow it.");return Object(b.a)(Ot.a.warning(t),Ot.a.loaded(_))}if("not-loaded-metadata"===e){var n=new z.a("MEDIA_ERR_NOT_LOADED_METADATA","Cannot load automatically: your browser falsely announced having loaded the content.");return Object(b.a)(Ot.a.warning(n))}return C.a.debug("Init: The current content is loaded."),Object(b.a)(Ot.a.loaded(_))})));return Object(d.a)(M,N,R,I,k).pipe(ne((function(){_.disposeAll()})))}}function Wn(e,t,n,r){function i(a){var o=a.manifest,u=a.sendingTime,s=t.pipe(Object(Z.a)((function(e){var t=null==u?0:performance.now()-u,n=Math.max(r-t,0);return Object(ze.a)(Math.max(e-t,n))}))),c=function(){if(null==o.lifetime||o.lifetime<=0)return p.a;var e=null==u?0:performance.now()-u,t=Math.max(r-e,0),n=1e3*o.lifetime-e;return Object(ze.a)(Math.max(n,t))}();return Object(d.a)(c,s).pipe(Object(_.a)(1),Object(Z.a)((function(){return function(e,t){var n=e.getUrl();if(!Object(mt.a)(n))return C.a.warn("Init: Cannot refresh the manifest: no url"),p.a;var r=e.getClockOffset();return t(n,r).pipe(Object(ee.a)((function(t){var n=t.manifest;e.update(n)})))}(e.manifest,n)})),Object(Z.a)(i),Object(be.a)())}return Object(ve.a)((function(){return i(e)}))}var Vn=n(121),Hn=N.a.OUT_OF_SYNC_MANIFEST_REFRESH_DELAY;var Kn=function(e){var t,n,r=e.adaptiveOptions,i=e.autoPlay,a=e.bufferOptions,s=e.clock$,c=e.keySystems,l=e.lowLatencyMode,f=e.mediaElement,p=e.minimumManifestUpdateInterval,v=e.networkConfig,b=e.pipelines,y=e.speed$,O=e.startAt,E=e.textTrackOptions,A=e.url,x=v.offlineRetry,k=v.segmentRetry,R=v.manifestRetry,I=new u.a,M=et(b,{lowLatencyMode:l,manifestRetry:R,offlineRetry:x},I),N=(t=function(e,t){return M.fetch(e).pipe(Object(Z.a)((function(n){return M.parse(n.value,e,t)})),Object(j.a)())},n=!1,function(){for(var e=arguments.length,r=new Array(e),i=0;i<e;i++)r[i]=arguments[i];return new ue.a((function(e){if(!n){n=!0;var i=t.apply(void 0,r).subscribe((function(t){e.next(t)}),(function(t){n=!1,e.error(t)}),(function(){n=!1,e.complete()}));return function(){i.unsubscribe(),n=!1}}e.complete()}))}),P=new pt(b,{lowLatencyMode:l,offlineRetry:x,segmentRetry:k}),B=new Fe(r),L=_t(f).pipe(Object(J.a)(Q.a),Object(j.a)()),U=new u.a,F=L.pipe(Object(Z.a)((function(){return Object(ht.a)(f,c,U)})),Object(J.a)(Q.a),Object(j.a)()),$=Object(Vn.a)(f),z=Object(h.a)([L,N(A,void 0),F.pipe(Object(w.a)(wt.a),Object(_.a)(1))]).pipe(Object(Z.a)((function(e){var t=e[0],n=e[1],r=n.manifest,c=n.sendingTime;C.a.debug("Init: Calculating initial time");var h=function(e,t,n){if(C.a.debug("Init: calculating initial time"),null!=n){var r=e.getMinimumPosition(),i=e.getMaximumPosition();if(null!=n.position)return C.a.debug("Init: using startAt.minimumPosition"),Math.max(Math.min(n.position,i),r);if(null!=n.wallClockTime){C.a.debug("Init: using startAt.wallClockTime");var a=null==e.availabilityStartTime?0:e.availabilityStartTime,o=n.wallClockTime-a;return Math.max(Math.min(o,i),r)}if(null!=n.fromFirstPosition){C.a.debug("Init: using startAt.fromFirstPosition");var u=n.fromFirstPosition;return u<=0?r:Math.min(i,r+u)}if(null!=n.fromLastPosition){C.a.debug("Init: using startAt.fromLastPosition");var s=n.fromLastPosition;return s>=0?i:Math.max(r,i+s)}if(null!=n.percentage){C.a.debug("Init: using startAt.percentage");var c=n.percentage;return c>100?i:c<0?r:r+(i-r)*(+c/100)}}var l=e.getMinimumPosition();if(e.isLive){var f,d=e.suggestedPresentationDelay,p=e.getClockOffset(),h=e.getMaximumPosition();if(null==p)C.a.info("Init: no clock offset found for a live content, starting close to maximum available position"),f=h;else{C.a.info("Init: clock offset found for a live content, checking if we can start close to it");var v=null==e.availabilityStartTime?0:e.availabilityStartTime,b=(performance.now()+p)/1e3-v;f=Math.min(h,b)}if(C.a.debug("Init: "+f+" defined as the live time, applying a live gap of "+d),null!=d)return Math.max(f-d,l);var m=f-(t?Et.LOW_LATENCY:Et.DEFAULT);return Math.max(m,l)}return C.a.info("Init: starting at the minimum available position:",l),l}(r,l,O);C.a.debug("Init: Initial time calculated:",h);var v=zn({abrManager:B,bufferOptions:o()({textTrackOptions:E},a),clock$:s,manifest:r,mediaElement:f,segmentPipelinesManager:P,speed$:y}),b=function e(t,n,r){var i=new u.a,a=v(t,n,r).pipe(Object(ee.a)((function(e){switch(e.type){case"needs-manifest-refresh":_.next(0);break;case"manifest-might-be-out-of-sync":_.next(Hn);break;case"needs-media-source-reload":i.next(e.value);break;case"needs-decipherability-flush":var t=Object(q.a)(f);if(Object(oe.a)(t))return void i.next(e.value);var n=e.value.currentTime;n+.001<e.value.duration?f.currentTime+=.001:f.currentTime=n;break;case"protected-segment":U.next(e.value)}}))).pipe(Object(m.a)(i)),o=i.pipe(Object(ae.a)((function(t){var n=t.currentTime,r=t.isPaused;return _t(f).pipe(Object(Z.a)((function(t){return e(t,n,!r)})),Object(T.a)(Ot.a.reloadingMediaSource()))})));return Object(d.a)(o,a)}(t,h,i),_=new u.a,w=Wn({manifest:r,sendingTime:c},_,N,p),j=Object(d.a)(Object(D.b)(r,"manifestUpdate").pipe(Object(S.a)(Ot.a.manifestUpdate())),Object(D.b)(r,"decipherabilityUpdate").pipe(Object(g.a)(Ot.a.decipherabilityUpdate))),A=F.pipe(Object(ee.a)((function(e){"blacklist-keys"===e.type?(C.a.info("Init: blacklisting Representations based on keyIDs"),r.addUndecipherableKIDs(e.value)):"blacklist-protection-data"===e.type&&(C.a.info("Init: blacklisting Representations based on protection data."),r.addUndecipherableProtectionData(e.value.type,e.value.data))})));return Object(d.a)(j,w,A,b).pipe(Object(T.a)(Ot.a.manifestReady(r)),ne((function(){_.complete()})))})));return Object(d.a)(z,$,F,I.pipe(Object(g.a)(Ot.a.warning)))},Yn=n(120),Gn=N.a.SAMPLING_INTERVAL_MEDIASOURCE,qn=N.a.SAMPLING_INTERVAL_LOW_LATENCY,Xn=N.a.SAMPLING_INTERVAL_NO_MEDIASOURCE,Qn=N.a.RESUME_GAP_AFTER_SEEKING,Zn=N.a.RESUME_GAP_AFTER_NOT_ENOUGH_DATA,Jn=N.a.RESUME_GAP_AFTER_BUFFERING,er=N.a.STALL_GAP,tr=["canplay","play","progress","seeking","seeked","loadedmetadata","ratechange"];function nr(e,t){if(null===e)return 0;var n=t?"LOW_LATENCY":"DEFAULT";switch(e.reason){case"seeking":return Qn[n];case"not-ready":return Zn[n];default:return Jn[n]}}function rr(e,t){var n=e.buffered,r=e.currentTime,i=e.duration,a=e.ended,o=e.paused,u=e.playbackRate,s=e.readyState,c=e.seeking;return{bufferGap:Object(L.d)(n,r),buffered:n,currentRange:Object(L.g)(n,r),currentTime:r,duration:i,ended:a,paused:o,playbackRate:u,readyState:s,seeking:c,state:t}}function ir(e,t,n){var r,i,a,o=n.withMediaSource,u=n.lowLatencyMode,s=t.state,c=t.currentTime,l=t.bufferGap,f=t.currentRange,d=t.duration,p=t.paused,h=t.readyState,v=t.ended,b=e.stalled,m=e.state,g=e.currentTime,y=function(e,t,n){var r=n?"LOW_LATENCY":"DEFAULT";return null!==e&&t-e.end<=er[r]}(f,d,u),_=h>=1&&"loadedmetadata"!==s&&null===b&&!(y||v);return o?_&&(l<=(u?er.LOW_LATENCY:er.DEFAULT)||l===1/0||1===h)?r=!0:null!==b&&h>1&&(l<1/0&&l>nr(b,u)||y||v)&&(i=!0):_&&(!p&&"timeupdate"===s&&"timeupdate"===m&&c===g||"seeking"===s&&l===1/0)?r=!0:null!==b&&("seeking"!==s&&c!==g||"canplay"===s||l<1/0&&(l>nr(b,u)||y||v))&&(i=!0),!0===i?null:!0===r||null!==b?(a="seeking"===s||t.seeking||null!==b&&"seeking"===b.reason?"seeking":1===h?"not-ready":"buffering",null!==b&&b.reason===a?b:{reason:a,timestamp:performance.now()}):null}var ar=function(e,t){return Object(ve.a)((function(){var n=o()(rr(e,"init"),{stalled:null});var r=tr.map((function(t){return Object(Nt.a)(e,t).pipe(Object(S.a)(t))})),i=t.lowLatencyMode?qn:t.withMediaSource?Gn:Xn,a=Object(Mt.a)(i).pipe(Object(S.a)("timeupdate"));return d.a.apply(void 0,[a].concat(r)).pipe(Object(g.a)((function(r){return n=function(r){var i=rr(e,r),a=ir(n,i,t);return o()(i,{stalled:a})}(r),C.a.debug("API: new clock tick",n),n})),Object(T.a)(n))})).pipe(Object(O.a)((function(){return new s.a(1)})),Object(Yn.a)())},or=N.a.FORCED_ENDED_THRESHOLD,ur={STOPPED:"STOPPED",LOADED:"LOADED",LOADING:"LOADING",PLAYING:"PLAYING",PAUSED:"PAUSED",ENDED:"ENDED",BUFFERING:"BUFFERING",SEEKING:"SEEKING",RELOADING:"RELOADING"};var sr=n(94),cr=N.a.DEFAULT_AUTO_PLAY,lr=N.a.DEFAULT_INITIAL_BITRATES,fr=N.a.DEFAULT_LIMIT_VIDEO_WIDTH,dr=N.a.DEFAULT_MANUAL_BITRATE_SWITCHING_MODE,pr=N.a.DEFAULT_MAX_BITRATES,hr=N.a.DEFAULT_MAX_BUFFER_AHEAD,vr=N.a.DEFAULT_MAX_BUFFER_BEHIND,br=N.a.DEFAULT_SHOW_NATIVE_SUBTITLE,mr=N.a.DEFAULT_STOP_AT_END,gr=N.a.DEFAULT_TEXT_TRACK_MODE,yr=N.a.DEFAULT_THROTTLE_WHEN_HIDDEN,_r=N.a.DEFAULT_THROTTLE_VIDEO_BITRATE_WHEN_HIDDEN,Or=N.a.DEFAULT_WANTED_BUFFER_AHEAD;var Er=n(78);function wr(e){return e.map((function(e){return null==e?e:{normalized:Object(Er.a)(e.language),audioDescription:e.audioDescription}}))}function jr(e){return e.map((function(e){return null==e?e:{normalized:Object(Er.a)(e.language),closedCaption:e.closedCaption}}))}var Tr=function(){function e(e){var t=e.preferredAudioTracks,n=e.preferredTextTracks;this._periods=new xt((function(e,t){return e.period.start-t.period.start})),this._audioChoiceMemory=new WeakMap,this._textChoiceMemory=new WeakMap,this._videoChoiceMemory=new WeakMap,this._preferredAudioTracks=t,this._preferredTextTracks=n}var t=e.prototype;return t.addPeriod=function(e,t,n){var r=xr(this._periods,t),i=t.adaptations[e];if(null==i&&(i=[]),null!=r){if(null!=r[e])return void C.a.warn("TrackManager: "+e+" already added for period",t);r[e]={adaptations:i,adaptation$:n}}else{var a;this._periods.add(((a={period:t})[e]={adaptations:i,adaptation$:n},a))}},t.removePeriod=function(e,t){var n=function(e,t){for(var n=0;n<e.length();n++){if(e.get(n).period.id===t.id)return n}}(this._periods,t);if(null!=n){var r=this._periods.get(n);null!=r[e]?(delete r[e],null==r.audio&&null==r.text&&null==r.video&&this._periods.removeElement(r)):C.a.warn("TrackManager: "+e+" already removed for period",t)}else C.a.warn("TrackManager: "+e+" not found for period",t)},t.resetPeriods=function(){for(;this._periods.length()>0;)this._periods.pop()},t.update=function(){this._updateAudioTrackChoices(),this._updateTextTrackChoices(),this._updateVideoTrackChoices()},t.setInitialAudioTrack=function(e){var t=xr(this._periods,e),n=null!=t?t.audio:null;if(null==n||null==t)throw new Error("TrackManager: Given Period not found.");var r=this._preferredAudioTracks.getValue(),i=void 0===e.adaptations.audio?[]:e.adaptations.audio,a=this._audioChoiceMemory.get(e);if(null===a)n.adaptation$.next(null);else if(void 0!==a&&Object(tt.a)(i,a))n.adaptation$.next(a);else{var o=Sr(i,wr(r));this._audioChoiceMemory.set(e,o),n.adaptation$.next(o)}},t.setInitialTextTrack=function(e){var t=xr(this._periods,e),n=null!=t?t.text:null;if(null==n||null==t)throw new Error("TrackManager: Given Period not found.");var r=this._preferredTextTracks.getValue(),i=void 0===e.adaptations.text?[]:e.adaptations.text,a=this._textChoiceMemory.get(e);if(null===a)n.adaptation$.next(null);else if(void 0!==a&&Object(tt.a)(i,a))n.adaptation$.next(a);else{var o=Ar(i,jr(r));this._textChoiceMemory.set(e,o),n.adaptation$.next(o)}},t.setInitialVideoTrack=function(e){var t=xr(this._periods,e),n=null!=t?t.video:null;if(null==n||null==t)throw new Error("TrackManager: Given Period not found.");var r=void 0===e.adaptations.video?[]:e.adaptations.video,i=this._videoChoiceMemory.get(e);if(null===i)n.adaptation$.next(null);else if(void 0!==i&&Object(tt.a)(r,i))n.adaptation$.next(i);else{var a=r[0];this._videoChoiceMemory.set(e,a),n.adaptation$.next(a)}},t.setAudioTrackByID=function(e,t){var n=xr(this._periods,e),r=null!=n?n.audio:null;if(null==r)throw new Error("TrackManager: Given Period not found.");var i=Object(Te.a)(r.adaptations,(function(e){return e.id===t}));if(void 0===i)throw new Error("Audio Track not found.");this._audioChoiceMemory.get(e)!==i&&(this._audioChoiceMemory.set(e,i),r.adaptation$.next(i))},t.setTextTrackByID=function(e,t){var n=xr(this._periods,e),r=null!=n?n.text:null;if(null==r)throw new Error("TrackManager: Given Period not found.");var i=Object(Te.a)(r.adaptations,(function(e){return e.id===t}));if(void 0===i)throw new Error("Text Track not found.");this._textChoiceMemory.get(e)!==i&&(this._textChoiceMemory.set(e,i),r.adaptation$.next(i))},t.setVideoTrackByID=function(e,t){var n=xr(this._periods,e),r=null!=n?n.video:null;if(null==r)throw new Error("LanguageManager: Given Period not found.");var i=Object(Te.a)(r.adaptations,(function(e){return e.id===t}));if(void 0===i)throw new Error("Video Track not found.");this._videoChoiceMemory.get(e)!==i&&(this._videoChoiceMemory.set(e,i),r.adaptation$.next(i))},t.disableTextTrack=function(e){var t=xr(this._periods,e),n=null!=t?t.text:null;if(null==n)throw new Error("TrackManager: Given Period not found.");null!==this._textChoiceMemory.get(e)&&(this._textChoiceMemory.set(e,null),n.adaptation$.next(null))},t.getChosenAudioTrack=function(e){var t=xr(this._periods,e);if(null==(null!=t?t.audio:null))return null;var n=this._audioChoiceMemory.get(e);if(null==n)return null;var r={language:Object(se.a)(n.language,""),normalized:Object(se.a)(n.normalizedLanguage,""),audioDescription:!0===n.isAudioDescription,id:n.id};return!0===n.isDub&&(r.dub=!0),r},t.getChosenTextTrack=function(e){var t=xr(this._periods,e);if(null==(null!=t?t.text:null))return null;var n=this._textChoiceMemory.get(e);return null==n?null:{language:Object(se.a)(n.language,""),normalized:Object(se.a)(n.normalizedLanguage,""),closedCaption:!0===n.isClosedCaption,id:n.id}},t.getChosenVideoTrack=function(e){var t=xr(this._periods,e);if(null==(null!=t?t.video:null))return null;var n=this._videoChoiceMemory.get(e);return null==n?null:{id:n.id,representations:n.representations.map(kr)}},t.getAvailableAudioTracks=function(e){var t=xr(this._periods,e),n=null!=t?t.audio:null;if(null==n)return[];var r=this._audioChoiceMemory.get(e),i=null!=r?r.id:null;return n.adaptations.map((function(e){var t={language:Object(se.a)(e.language,""),normalized:Object(se.a)(e.normalizedLanguage,""),audioDescription:!0===e.isAudioDescription,id:e.id,active:null!=i&&i===e.id};return!0===e.isDub&&(t.dub=!0),t}))},t.getAvailableTextTracks=function(e){var t=xr(this._periods,e),n=null!=t?t.text:null;if(null==n)return[];var r=this._textChoiceMemory.get(e),i=null!=r?r.id:null;return n.adaptations.map((function(e){return{language:Object(se.a)(e.language,""),normalized:Object(se.a)(e.normalizedLanguage,""),closedCaption:!0===e.isClosedCaption,id:e.id,active:null!=i&&i===e.id}}))},t.getAvailableVideoTracks=function(e){var t=xr(this._periods,e),n=null!=t?t.video:null;if(null==n)return[];var r=this._videoChoiceMemory.get(e),i=null!=r?r.id:null;return n.adaptations.map((function(e){return{id:e.id,active:null!==i&&i===e.id,representations:e.representations.map(kr)}}))},t._updateAudioTrackChoices=function(){var e=this,t=wr(this._preferredAudioTracks.getValue());!function n(r){if(!(r>=e._periods.length())){var i=e._periods.get(r);if(null!=i.audio){var a=i.period,o=i.audio,u=void 0===a.adaptations.audio?[]:a.adaptations.audio,s=e._audioChoiceMemory.get(a);if(null===s||void 0!==s&&Object(tt.a)(u,s))n(r+1);else{var c=Sr(u,t);e._audioChoiceMemory.set(a,c),o.adaptation$.next(c),n(0)}}else n(r+1)}}(0)},t._updateTextTrackChoices=function(){var e=this,t=jr(this._preferredTextTracks.getValue());!function n(r){if(!(r>=e._periods.length())){var i=e._periods.get(r);if(null!=i.text){var a=i.period,o=i.text,u=void 0===a.adaptations.text?[]:a.adaptations.text,s=e._textChoiceMemory.get(a);if(null===s||void 0!==s&&Object(tt.a)(u,s))n(r+1);else{var c=Ar(u,t);e._textChoiceMemory.set(a,c),o.adaptation$.next(c),n(0)}}else n(r+1)}}(0)},t._updateVideoTrackChoices=function(){var e=this;!function t(n){if(!(n>=e._periods.length())){var r=e._periods.get(n);if(null!=r.video){var i=r.period,a=r.video,o=void 0===i.adaptations.video?[]:i.adaptations.video,u=e._videoChoiceMemory.get(i);if(null===u||void 0!==u&&Object(tt.a)(o,u))t(n+1);else{var s=o[0];e._videoChoiceMemory.set(i,s),a.adaptation$.next(s),t(0)}}else t(n+1)}}(0)},e}();function Sr(e,t){if(0===e.length)return null;for(var n=function(n){var r=t[n];if(null===r)return{v:null};var i=Object(Te.a)(e,(function(e){return Object(se.a)(e.normalizedLanguage,"")===r.normalized&&(r.audioDescription?!0===e.isAudioDescription:!0!==e.isAudioDescription)}));return void 0!==i?{v:i}:void 0},r=0;r<t.length;r++){var i=n(r);if("object"==typeof i)return i.v}return e[0]}function Ar(e,t){if(0===e.length)return null;for(var n=function(n){var r=t[n];if(null===r)return{v:null};var i=Object(Te.a)(e,(function(e){return Object(se.a)(e.normalizedLanguage,"")===r.normalized&&(r.closedCaption?!0===e.isClosedCaption:!0!==e.isClosedCaption)}));return void 0!==i?{v:i}:void 0},r=0;r<t.length;r++){var i=n(r);if("object"==typeof i)return i.v}return null}function xr(e,t){for(var n=0;n<e.length();n++){var r=e.get(n);if(r.period.id===t.id)return r}}function kr(e){return{id:e.id,bitrate:e.bitrate,frameRate:e.frameRate,width:e.width,height:e.height,codec:e.codec}}function Rr(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var Ir=N.a.DEFAULT_UNMUTED_VOLUME,Mr=F.a.isActive,Nr=F.a.isVideoVisible,Cr=F.a.onEnded$,Dr=F.a.onFullscreenChange$,Pr=F.a.onPlayPause$,Br=F.a.onPictureInPictureEvent$,Lr=F.a.onSeeking$,Ur=F.a.onTextTrackChanges$,Fr=F.a.videoWidth$,$r=function(e){var t,n;function r(t){var n;void 0===t&&(t={}),n=e.call(this)||this;var r=function(e){var t,n,r,i,a,o,u,s,c,l,f,d,p;if(null==e.maxBufferAhead)t=hr;else if(t=Number(e.maxBufferAhead),isNaN(t))throw new Error("Invalid maxBufferAhead parameter. Should be a number.");if(null==e.maxBufferBehind)n=vr;else if(n=Number(e.maxBufferBehind),isNaN(n))throw new Error("Invalid maxBufferBehind parameter. Should be a number.");if(null==e.wantedBufferAhead)r=Or;else if(r=Number(e.wantedBufferAhead),isNaN(r))throw new Error("Invalid wantedBufferAhead parameter. Should be a number.");if(i=null==e.limitVideoWidth?fr:!!e.limitVideoWidth,null!=e.throttleWhenHidden?(Object(U.a)("`throttleWhenHidden` API is deprecated. Consider using `throttleVideoBitrateWhenHidden` instead."),a=!!e.throttleWhenHidden):a=yr,o=!a&&(null==e.throttleVideoBitrateWhenHidden?_r:!!e.throttleVideoBitrateWhenHidden),void 0!==e.preferredTextTracks?Array.isArray(e.preferredTextTracks)?s=e.preferredTextTracks:(Object(U.a)("Invalid `preferredTextTracks` option, it should be an Array"),s=[]):s=[],void 0!==e.preferredAudioTracks?Array.isArray(e.preferredAudioTracks)?u=e.preferredAudioTracks:(Object(U.a)("Invalid `preferredAudioTracks` option, it should be an Array"),u=[]):u=[],null==e.videoElement)c=document.createElement("video");else{if(!(e.videoElement instanceof HTMLMediaElement))throw new Error("Invalid videoElement parameter. Should be a HTMLMediaElement.");c=e.videoElement}if(null==e.initialVideoBitrate)l=lr.video;else if(l=Number(e.initialVideoBitrate),isNaN(l))throw new Error("Invalid initialVideoBitrate parameter. Should be a number.");if(null==e.initialAudioBitrate)f=lr.audio;else if(f=Number(e.initialAudioBitrate),isNaN(f))throw new Error("Invalid initialAudioBitrate parameter. Should be a number.");if(null==e.maxVideoBitrate)p=pr.video;else if(p=Number(e.maxVideoBitrate),isNaN(p))throw new Error("Invalid maxVideoBitrate parameter. Should be a number.");if(null==e.maxAudioBitrate)d=pr.audio;else if(d=Number(e.maxAudioBitrate),isNaN(d))throw new Error("Invalid maxAudioBitrate parameter. Should be a number.");return{maxBufferAhead:t,maxBufferBehind:n,limitVideoWidth:i,videoElement:c,wantedBufferAhead:r,throttleWhenHidden:a,throttleVideoBitrateWhenHidden:o,preferredAudioTracks:u,preferredTextTracks:s,initialAudioBitrate:f,initialVideoBitrate:l,maxAudioBitrate:d,maxVideoBitrate:p,stopAtEnd:null==e.stopAtEnd?mr:!!e.stopAtEnd}}(t),i=r.initialAudioBitrate,a=r.initialVideoBitrate,o=r.limitVideoWidth,c=r.maxAudioBitrate,l=r.maxBufferAhead,d=r.maxBufferBehind,p=r.maxVideoBitrate,h=r.preferredAudioTracks,v=r.preferredTextTracks,b=r.throttleWhenHidden,_=r.throttleVideoBitrateWhenHidden,O=r.videoElement,E=r.wantedBufferAhead,w=r.stopAtEnd;return O.preload="auto",n.version="3.17.0",n.log=C.a,n.state="STOPPED",n.videoElement=O,n._priv_destroy$=new u.a,n._priv_pictureInPictureEvent$=new s.a(1),Br(O).pipe(Object(m.a)(n._priv_destroy$)).subscribe(n._priv_pictureInPictureEvent$),Dr(O).pipe(Object(m.a)(n._priv_destroy$)).subscribe((function(){return n.trigger("fullscreenChange",n.isFullscreen())})),Ur(O.textTracks).pipe(Object(m.a)(n._priv_destroy$),Object(g.a)((function(e){for(var t=e.target,n=[],r=0;r<t.length;r++){var i=t[r];n.push(i)}return n})),Object(y.a)((function(e,t){if(e.length!==t.length)return!1;for(var n=0;n<e.length;n++)if(e[n]!==t[n])return!1;return!0}))).subscribe((function(e){return n._priv_onNativeTextTracksNext(e)})),n._priv_playing$=new s.a(1),n._priv_speed$=new f(O.playbackRate),n._priv_stopCurrentContent$=new u.a,n._priv_contentLock$=new f(!1),n._priv_bufferOptions={wantedBufferAhead$:new f(E),maxBufferAhead$:new f(l),maxBufferBehind$:new f(d)},n._priv_bitrateInfos={lastBitrates:{audio:i,video:a},maxAutoBitrates:{audio:new f(c),video:new f(p)},manualBitrates:{audio:new f(-1),video:new f(-1)}},n._priv_throttleWhenHidden=b,n._priv_throttleVideoBitrateWhenHidden=_,n._priv_limitVideoWidth=o,n._priv_mutedMemory=Ir,n._priv_trackManager=null,n._priv_currentError=null,n._priv_contentInfos=null,n._priv_contentEventsMemory={},n._priv_stopAtEnd=w,n._priv_setPlayerState(ur.STOPPED),n._priv_preferredAudioTracks=new f(h),n._priv_preferredTextTracks=new f(v),n}n=e,(t=r).prototype=Object.create(n.prototype),t.prototype.constructor=t,t.__proto__=n;var a,c,l,O=r.prototype;return O.stop=function(){this.state!==ur.STOPPED&&(this._priv_stopCurrentContent$.next(),this._priv_cleanUpCurrentContentState(),this._priv_setPlayerState(ur.STOPPED))},O.dispose=function(){this.stop(),null!==this.videoElement&&Object(G.a)(this.videoElement),this._priv_destroy$.next(),this._priv_destroy$.complete(),this._priv_stopCurrentContent$.complete(),this._priv_playing$.complete(),this._priv_speed$.complete(),this._priv_contentLock$.complete(),this._priv_bufferOptions.wantedBufferAhead$.complete(),this._priv_bufferOptions.maxBufferAhead$.complete(),this._priv_bufferOptions.maxBufferBehind$.complete(),this._priv_pictureInPictureEvent$.complete(),this._priv_bitrateInfos.manualBitrates.video.complete(),this._priv_bitrateInfos.manualBitrates.audio.complete(),this._priv_bitrateInfos.maxAutoBitrates.video.complete(),this._priv_bitrateInfos.maxAutoBitrates.audio.complete(),this.videoElement=null},O.loadVideo=function(e){var t=this,n=function(e){var t,n,r,i,a,u;if(null==e)throw new Error("No option set on loadVideo");if(null!=e.url)t=String(e.url);else if(null==e.transportOptions||null==e.transportOptions.manifestLoader)throw new Error("No url set on loadVideo");if(null==e.transport)throw new Error("No transport set on loadVideo");n=String(e.transport);var s=null==e.autoPlay?cr:!!e.autoPlay;if(null==e.keySystems)r=[];else{var c=r=Array.isArray(e.keySystems)?e.keySystems:[e.keySystems],l=Array.isArray(c),f=0;for(c=l?c:c[Symbol.iterator]();;){var d;if(l){if(f>=c.length)break;d=c[f++]}else{if((f=c.next()).done)break;d=f.value}var p=d;if("string"!=typeof p.type||"function"!=typeof p.getLicense)throw new Error("Invalid key system given: Missing type string or getLicense callback")}}var h=void 0!==e.lowLatencyMode&&!!e.lowLatencyMode,v="object"==typeof e.transportOptions&&null!==e.transportOptions?e.transportOptions:{},b={aggressiveMode:v.aggressiveMode,checkMediaSegmentIntegrity:v.checkMediaSegmentIntegrity,lowLatencyMode:h,manifestLoader:v.manifestLoader,referenceDateTime:v.referenceDateTime,representationFilter:v.representationFilter,segmentLoader:v.segmentLoader,serverSyncInfos:v.serverSyncInfos,supplementaryImageTracks:[],supplementaryTextTracks:[]};if(void 0!==e.supplementaryTextTracks){var m=Array.isArray(e.supplementaryTextTracks)?e.supplementaryTextTracks:[e.supplementaryTextTracks],g=m,y=Array.isArray(g),_=0;for(g=y?g:g[Symbol.iterator]();;){var O;if(y){if(_>=g.length)break;O=g[_++]}else{if((_=g.next()).done)break;O=_.value}var E=O;if("string"!=typeof E.language||"string"!=typeof E.mimeType||"string"!=typeof E.url)throw new Error("Invalid supplementary text track given. Missing either language, mimetype or url")}b.supplementaryTextTracks=m}if(void 0!==e.supplementaryImageTracks){var w=Array.isArray(e.supplementaryImageTracks)?e.supplementaryImageTracks:[e.supplementaryImageTracks],j=w,T=Array.isArray(j),S=0;for(j=T?j:j[Symbol.iterator]();;){var A;if(T){if(S>=j.length)break;A=j[S++]}else{if((S=j.next()).done)break;A=S.value}var x=A;if("string"!=typeof x.mimeType||"string"!=typeof x.url)throw new Error("Invalid supplementary image track given. Missing either mimetype or url")}b.supplementaryImageTracks=w}if(null==e.textTrackMode)i=gr;else{if("native"!==e.textTrackMode&&"html"!==e.textTrackMode)throw new Error("Invalid textTrackMode.");i=e.textTrackMode}null!=e.defaultAudioTrack&&Object(U.a)("The `defaultAudioTrack` loadVideo option is deprecated.\nPlease use the `preferredAudioTracks` constructor option or the`setPreferredAudioTracks` method instead");var k=Object(sr.b)(e.defaultAudioTrack);null!=e.defaultTextTrack&&Object(U.a)("The `defaultTextTrack` loadVideo option is deprecated.\nPlease use the `preferredTextTracks` constructor option or the`setPreferredTextTracks` method instead");var R=Object(sr.c)(e.defaultTextTrack),I=null==e.hideNativeSubtitle?!br:!!e.hideNativeSubtitle,M=null==e.manualBitrateSwitchingMode?dr:e.manualBitrateSwitchingMode;if("html"===i){if(null==e.textTrackElement)throw new Error('You have to provide a textTrackElement in "html" textTrackMode.');if(!(e.textTrackElement instanceof HTMLElement))throw new Error("textTrackElement should be an HTMLElement.");a=e.textTrackElement}else null!=e.textTrackElement&&C.a.warn('API: You have set a textTrackElement without being in an "html" textTrackMode. It will be ignored.');if(null!=e.startAt)if(e.startAt.wallClockTime instanceof Date){var N=e.startAt.wallClockTime.getTime()/1e3;u=o()({},e.startAt,{wallClockTime:N})}else u=e.startAt;return{autoPlay:s,defaultAudioTrack:k,defaultTextTrack:R,hideNativeSubtitle:I,keySystems:r,lowLatencyMode:h,manualBitrateSwitchingMode:M,minimumManifestUpdateInterval:void 0!==e.transportOptions&&void 0!==e.transportOptions.minimumManifestUpdateInterval?e.transportOptions.minimumManifestUpdateInterval:0,networkConfig:null==e.networkConfig?{}:{manifestRetry:e.networkConfig.manifestRetry,offlineRetry:e.networkConfig.offlineRetry,segmentRetry:e.networkConfig.segmentRetry},startAt:u,textTrackElement:a,textTrackMode:i,transport:n,transportOptions:b,url:t}}(e);C.a.info("API: Calling loadvideo",n);var r=n.autoPlay,i=n.defaultAudioTrack,a=n.defaultTextTrack,u=n.keySystems,s=n.lowLatencyMode,c=n.manualBitrateSwitchingMode,l=n.minimumManifestUpdateInterval,f=n.networkConfig,O=n.startAt,A=n.transport,k=n.transportOptions,M=n.url;if(null===this.videoElement)throw new Error("the attached video element is disposed");this.stop();var N="directfile"===A;this._priv_currentError=null,this._priv_contentInfos={url:M,isDirectFile:N,sourceBuffersStore:null,thumbnails:null,manifest:null,currentPeriod:null,activeAdaptations:null,activeRepresentations:null,initialAudioTrack:i,initialTextTrack:a},this._priv_playing$.next(!1);var D,B=this.videoElement,L=ar(B,{withMediaSource:!N,lowLatencyMode:s}),F=Object(d.a)(this._priv_stopCurrentContent$,this._priv_stopAtEnd?Cr(B):p.a).pipe(Object(_.a)(1));if(N){if(null==Y.a.directfile)throw new Error("DirectFile feature not activated in your build.");var $=Y.a.directfile({autoPlay:r,clock$:L,keySystems:u,mediaElement:B,speed$:this._priv_speed$,startAt:O,url:M}).pipe(Object(m.a)(F));D=E()($)}else{var z=Y.a.transports[A];if("function"!=typeof z)throw new Error('transport "'+A+'" not supported');var W=z(k),V={initialBitrates:this._priv_bitrateInfos.lastBitrates,lowLatencyMode:s,manualBitrates:this._priv_bitrateInfos.manualBitrates,maxAutoBitrates:this._priv_bitrateInfos.maxAutoBitrates,throttlers:{throttle:this._priv_throttleWhenHidden?{video:Mr().pipe(Object(g.a)((function(e){return e?1/0:0})),Object(m.a)(this._priv_stopCurrentContent$))}:{},throttleBitrate:this._priv_throttleVideoBitrateWhenHidden?{video:Nr(this._priv_pictureInPictureEvent$).pipe(Object(g.a)((function(e){return e?1/0:0})),Object(m.a)(this._priv_stopCurrentContent$))}:{},limitWidth:this._priv_limitVideoWidth?{video:Fr(B,this._priv_pictureInPictureEvent$).pipe(Object(m.a)(this._priv_stopCurrentContent$))}:{}}},H="native"===n.textTrackMode?{textTrackMode:"native",hideNativeSubtitle:n.hideNativeSubtitle}:{textTrackMode:"html",textTrackElement:n.textTrackElement},K=o()({manualBitrateSwitchingMode:c},this._priv_bufferOptions),G=Kn({adaptiveOptions:V,autoPlay:r,bufferOptions:K,clock$:L,keySystems:u,lowLatencyMode:s,mediaElement:B,minimumManifestUpdateInterval:l,networkConfig:f,pipelines:W,speed$:this._priv_speed$,startAt:O,textTrackOptions:H,url:M}).pipe(Object(m.a)(F));D=E()(G)}var q,X,Q=D.pipe(Object(w.a)((function(e){return"stalled"===e.type})),Object(g.a)((function(e){return e.value}))),Z=D.pipe(Object(w.a)((function(e){return"loaded"===e.type})),Object(j.a)()),J=D.pipe(Object(w.a)((function(e){return"reloading-media-source"===e.type})),Object(j.a)()),ee=Cr(B),te=Lr(B),ne=Object(h.a)([this._priv_playing$,Q.pipe(Object(T.a)(null)),ee.pipe(Object(T.a)(null)),te.pipe(Object(T.a)(null))]).pipe(Object(m.a)(this._priv_stopCurrentContent$),Object(g.a)((function(e){var t=e[0],n=e[1];return function(e,t,n){if(e.ended)return ur.ENDED;if(null!==n){var r=Math.abs(e.duration-e.currentTime);return null!=or&&r<or?ur.ENDED:"seeking"===n.reason?ur.SEEKING:ur.BUFFERING}return t?ur.PLAYING:ur.PAUSED}(B,t,n)}))),re=Object(v.a)(Object(b.a)(ur.LOADING),Z.pipe(Object(_.a)(1),Object(S.a)(ur.LOADED)),Object(d.a)(ne.pipe(Object(m.a)(J),(q=function(e){return e===ur.PAUSED},function(e){return e.lift(new x(q))})),J.pipe(Object(R.a)(Z.pipe(Object(_.a)(1),Object(I.a)(ne),Object(T.a)(ur.RELOADING)))))).pipe(Object(y.a)());this._priv_stopCurrentContent$.pipe(Object(_.a)(1)).subscribe((function(){void 0!==X&&X.unsubscribe()})),Pr(B).pipe(Object(m.a)(this._priv_stopCurrentContent$)).subscribe((function(e){return t._priv_onPlayPauseNext("play"===e.type)}),P.a),L.pipe(Object(m.a)(this._priv_stopCurrentContent$)).subscribe((function(e){return t._priv_triggerTimeChange(e)}),P.a),re.pipe(Object(m.a)(this._priv_stopCurrentContent$)).subscribe((function(e){return t._priv_setPlayerState(e)}),P.a),D.subscribe((function(e){return t._priv_onPlaybackEvent(e)}),(function(e){return t._priv_onPlaybackError(e)}),(function(){return t._priv_onPlaybackFinished()})),this._priv_contentLock$.pipe(Object(w.a)((function(e){return!e})),Object(_.a)(1),Object(m.a)(this._priv_stopCurrentContent$)).subscribe((function(){X=D.connect()}))},O.getError=function(){return this._priv_currentError},O.getManifest=function(){return null===this._priv_contentInfos?null:this._priv_contentInfos.manifest},O.getCurrentAdaptations=function(){if(null===this._priv_contentInfos)return null;var e=this._priv_contentInfos,t=e.currentPeriod,n=e.activeAdaptations;return null===t||null===n||null==n[t.id]?null:n[t.id]},O.getCurrentRepresentations=function(){if(null===this._priv_contentInfos)return null;var e=this._priv_contentInfos,t=e.currentPeriod,n=e.activeRepresentations;return null===t||null===n||null==n[t.id]?null:n[t.id]},O.getVideoElement=function(){return this.videoElement},O.getNativeTextTrack=function(){if(Object(U.a)("getNativeTextTrack is deprecated. Please open an issue if you used this API."),null===this.videoElement)throw new Error("Disposed player");var e=this.videoElement;return e.textTracks.length>0?e.textTracks[0]:null},O.getPlayerState=function(){return this.state},O.isLive=function(){if(null===this._priv_contentInfos)return!1;var e=this._priv_contentInfos,t=e.isDirectFile,n=e.manifest;return!t&&null!==n&&n.isLive},O.getUrl=function(){if(null!==this._priv_contentInfos){var e=this._priv_contentInfos,t=e.isDirectFile,n=e.manifest,r=e.url;return t?r:null!=n?n.getUrl():void 0}},O.getVideoDuration=function(){if(null===this.videoElement)throw new Error("Disposed player");return this.videoElement.duration},O.getVideoBufferGap=function(){if(null===this.videoElement)throw new Error("Disposed player");var e=this.videoElement;return Object(L.d)(e.buffered,e.currentTime)},O.getVideoLoadedTime=function(){if(null===this.videoElement)throw new Error("Disposed player");var e=this.videoElement;return Object(L.h)(e.buffered,e.currentTime)},O.getVideoPlayedTime=function(){if(null===this.videoElement)throw new Error("Disposed player");var e=this.videoElement;return Object(L.f)(e.buffered,e.currentTime)},O.getWallClockTime=function(){if(null===this.videoElement)throw new Error("Disposed player");if(null===this._priv_contentInfos)return this.videoElement.currentTime;var e=this._priv_contentInfos,t=e.isDirectFile,n=e.manifest;return t?this.videoElement.currentTime:null!=n?this.videoElement.currentTime+(void 0!==n.availabilityStartTime?n.availabilityStartTime:0):0},O.getPosition=function(){if(null===this.videoElement)throw new Error("Disposed player");return this.videoElement.currentTime},O.getPlaybackRate=function(){return this._priv_speed$.getValue()},O.setPlaybackRate=function(e){this._priv_speed$.next(e)},O.getAvailableVideoBitrates=function(){if(null===this._priv_contentInfos)return[];var e=this._priv_contentInfos,t=e.currentPeriod,n=e.activeAdaptations;if(null===t||null===n)return[];var r=n[t.id];return void 0===r||null==r.video?[]:r.video.getAvailableBitrates()},O.getAvailableAudioBitrates=function(){if(null===this._priv_contentInfos)return[];var e=this._priv_contentInfos,t=e.currentPeriod,n=e.activeAdaptations;if(null===t||null===n)return[];var r=n[t.id];return void 0===r||null==r.audio?[]:r.audio.getAvailableBitrates()},O.getManualAudioBitrate=function(){return this._priv_bitrateInfos.manualBitrates.audio.getValue()},O.getManualVideoBitrate=function(){return this._priv_bitrateInfos.manualBitrates.video.getValue()},O.getVideoBitrate=function(){var e=this.getCurrentRepresentations();if(null!==e&&null!=e.video)return e.video.bitrate},O.getAudioBitrate=function(){var e=this.getCurrentRepresentations();if(null!==e&&null!=e.audio)return e.audio.bitrate},O.getMaxVideoBitrate=function(){return this._priv_bitrateInfos.maxAutoBitrates.video.getValue()},O.getMaxAudioBitrate=function(){return this._priv_bitrateInfos.maxAutoBitrates.audio.getValue()},O.play=function(){var e=this;if(null===this.videoElement)throw new Error("Disposed player");var t=this.videoElement.play();return null==t||"function"!=typeof t.catch?B.a.resolve():t.catch((function(t){if("NotAllowedError"===t.name){var n=new z.a("MEDIA_ERR_PLAY_NOT_ALLOWED",t.toString());e.trigger("warning",n)}throw t}))},O.pause=function(){if(null===this.videoElement)throw new Error("Disposed player");this.videoElement.pause()},O.seekTo=function(e){if(null===this.videoElement)throw new Error("Disposed player");if(null===this._priv_contentInfos)throw new Error("player: no content loaded");var t,n=this._priv_contentInfos,r=n.isDirectFile,i=n.manifest;if(!r&&null===i)throw new Error("player: the content did not load yet");if("number"==typeof e)t=e;else if("object"==typeof e){var a=e,o=this.videoElement.currentTime;if(null!=a.relative)t=o+a.relative;else if(null!=a.position)t=a.position;else{if(null==a.wallClockTime)throw new Error('invalid time object. You must set one of the following properties: "relative", "position" or "wallClockTime"');t=r||null===i?a.wallClockTime:a.wallClockTime-(void 0!==i.availabilityStartTime?i.availabilityStartTime:0)}}if(void 0===t)throw new Error("invalid time given");return this.videoElement.currentTime=t,t},O.isFullscreen=function(){return Object(U.a)("isFullscreen is deprecated. Fullscreen management should now be managed by the application"),Object($.b)()},O.setFullscreen=function(e){if(void 0===e&&(e=!0),Object(U.a)("setFullscreen is deprecated. Fullscreen management should now be managed by the application"),null===this.videoElement)throw new Error("Disposed player");e?Object($.c)(this.videoElement):Object($.a)()},O.exitFullscreen=function(){Object(U.a)("exitFullscreen is deprecated. Fullscreen management should now be managed by the application"),Object($.a)()},O.getVolume=function(){if(null===this.videoElement)throw new Error("Disposed player");return this.videoElement.volume},O.setVolume=function(e){if(null===this.videoElement)throw new Error("Disposed player");var t=this.videoElement;e!==t.volume&&(t.volume=e,this.trigger("volumeChange",e))},O.isMute=function(){return 0===this.getVolume()},O.mute=function(){this._priv_mutedMemory=this.getVolume(),this.setVolume(0)},O.unMute=function(){0===this.getVolume()&&this.setVolume(0===this._priv_mutedMemory?Ir:this._priv_mutedMemory)},O.setVideoBitrate=function(e){this._priv_bitrateInfos.manualBitrates.video.next(e)},O.setAudioBitrate=function(e){this._priv_bitrateInfos.manualBitrates.audio.next(e)},O.setMaxVideoBitrate=function(e){this._priv_bitrateInfos.maxAutoBitrates.video.next(e)},O.setMaxAudioBitrate=function(e){this._priv_bitrateInfos.maxAutoBitrates.audio.next(e)},O.setMaxBufferBehind=function(e){this._priv_bufferOptions.maxBufferBehind$.next(e)},O.setMaxBufferAhead=function(e){this._priv_bufferOptions.maxBufferAhead$.next(e)},O.setWantedBufferAhead=function(e){this._priv_bufferOptions.wantedBufferAhead$.next(e)},O.getMaxBufferBehind=function(){return this._priv_bufferOptions.maxBufferBehind$.getValue()},O.getMaxBufferAhead=function(){return this._priv_bufferOptions.maxBufferAhead$.getValue()},O.getWantedBufferAhead=function(){return this._priv_bufferOptions.wantedBufferAhead$.getValue()},O.getCurrentKeySystem=function(){if(null===this.videoElement)throw new Error("Disposed player");return Object(q.a)(this.videoElement)},O.getAvailableAudioTracks=function(){if(null===this._priv_contentInfos)return[];var e=this._priv_contentInfos.currentPeriod;return null===this._priv_trackManager||null===e?[]:this._priv_trackManager.getAvailableAudioTracks(e)},O.getAvailableTextTracks=function(){if(null===this._priv_contentInfos)return[];var e=this._priv_contentInfos.currentPeriod;return null===this._priv_trackManager||null===e?[]:this._priv_trackManager.getAvailableTextTracks(e)},O.getAvailableVideoTracks=function(){if(null===this._priv_contentInfos)return[];var e=this._priv_contentInfos.currentPeriod;return null===this._priv_trackManager||null===e?[]:this._priv_trackManager.getAvailableVideoTracks(e)},O.getAudioTrack=function(){if(null!==this._priv_contentInfos){var e=this._priv_contentInfos.currentPeriod;if(null!==this._priv_trackManager&&null!==e)return this._priv_trackManager.getChosenAudioTrack(e)}},O.getTextTrack=function(){if(null!==this._priv_contentInfos){var e=this._priv_contentInfos.currentPeriod;if(null!==this._priv_trackManager&&null!==e)return this._priv_trackManager.getChosenTextTrack(e)}},O.getVideoTrack=function(){if(null!==this._priv_contentInfos){var e=this._priv_contentInfos.currentPeriod;if(null!==this._priv_trackManager&&null!==e)return this._priv_trackManager.getChosenVideoTrack(e)}},O.setAudioTrack=function(e){if(null===this._priv_contentInfos)throw new Error("No content loaded");var t=this._priv_contentInfos.currentPeriod;if(null===this._priv_trackManager||null===t)throw new Error("No compatible content launched.");try{this._priv_trackManager.setAudioTrackByID(t,e)}catch(e){throw new Error("player: unknown audio track")}},O.setTextTrack=function(e){if(null===this._priv_contentInfos)throw new Error("No content loaded");var t=this._priv_contentInfos.currentPeriod;if(null===this._priv_trackManager||null===t)throw new Error("No compatible content launched.");try{this._priv_trackManager.setTextTrackByID(t,e)}catch(e){throw new Error("player: unknown text track")}},O.disableTextTrack=function(){if(null!==this._priv_contentInfos){var e=this._priv_contentInfos.currentPeriod;if(null!==this._priv_trackManager&&null!==e)return this._priv_trackManager.disableTextTrack(e)}},O.setVideoTrack=function(e){if(null===this._priv_contentInfos)throw new Error("No content loaded");var t=this._priv_contentInfos.currentPeriod;if(null===this._priv_trackManager||null===t)throw new Error("No compatible content launched.");try{this._priv_trackManager.setVideoTrackByID(t,e)}catch(e){throw new Error("player: unknown video track")}},O.getPreferredAudioTracks=function(){return this._priv_preferredAudioTracks.getValue()},O.getPreferredTextTracks=function(){return this._priv_preferredTextTracks.getValue()},O.setPreferredAudioTracks=function(e){if(!Array.isArray(e))throw new Error("Invalid `setPreferredAudioTracks` argument. Should have been an Array.");return this._priv_preferredAudioTracks.next(e)},O.setPreferredTextTracks=function(e){if(!Array.isArray(e))throw new Error("Invalid `setPreferredTextTracks` argument. Should have been an Array.");return this._priv_preferredTextTracks.next(e)},O.getImageTrackData=function(){return null===this._priv_contentInfos?null:this._priv_contentInfos.thumbnails},O.getMinimumPosition=function(){if(null===this._priv_contentInfos)return null;if(this._priv_contentInfos.isDirectFile)return 0;var e=this._priv_contentInfos.manifest;return null!=e?e.getMinimumPosition():null},O.getMaximumPosition=function(){if(null===this._priv_contentInfos)return null;var e=this._priv_contentInfos,t=e.isDirectFile,n=e.manifest;if(t){if(null===this.videoElement)throw new Error("Disposed player");return this.videoElement.duration}return null!=n?n.getMaximumPosition():null},O.__priv_getSourceBufferContent=function(e){if(null===this._priv_contentInfos||null===this._priv_contentInfos.sourceBuffersStore)return null;var t=this._priv_contentInfos.sourceBuffersStore.get(e);return null===t?null:t.getInventory()},O._priv_cleanUpCurrentContentState=function(){var e=this;this._priv_contentLock$.next(!0),this._priv_contentInfos=null,this._priv_trackManager=null,this._priv_contentEventsMemory={};var t=function(){e._priv_contentLock$.next(!1)};null!=this.videoElement?Object(X.a)(this.videoElement).pipe(Object(M.a)((function(){return p.a}))).subscribe(P.a,t,t):t()},O._priv_triggerContentEvent=function(e,t){var n=this._priv_contentEventsMemory[e];i()(n,t)||(this._priv_contentEventsMemory[e]=t,this.trigger(e,t))},O._priv_onPlaybackEvent=function(e){switch(e.type){case"activePeriodChanged":this._priv_onActivePeriodChanged(e.value);break;case"periodBufferReady":this._priv_onPeriodBufferReady(e.value);break;case"periodBufferCleared":this._priv_onPeriodBufferCleared(e.value);break;case"reloading-media-source":this._priv_onReloadingMediaSource();break;case"representationChange":this._priv_onRepresentationChange(e.value);break;case"adaptationChange":this._priv_onAdaptationChange(e.value);break;case"bitrateEstimationChange":this._priv_onBitrateEstimationChange(e.value);break;case"manifestReady":this._priv_onManifestReady(e.value);break;case"warning":this._priv_onPlaybackWarning(e.value);break;case"loaded":if(null===this._priv_contentInfos)return void C.a.error("API: Loaded event while no content is loaded");this._priv_contentInfos.sourceBuffersStore=e.value.sourceBuffersStore;break;case"decipherabilityUpdate":this._priv_triggerContentEvent("decipherabilityUpdate",e.value);break;case"added-segment":if(null===this._priv_contentInfos)return void C.a.error("API: Added segment while no content is loaded");var t=e.value,n=t.content,r=t.segmentData;if("image"===n.adaptation.type&&null!=r&&"bif"===r.type){var i=r.data;this._priv_contentInfos.thumbnails=i,this.trigger("imageTrackUpdate",{data:this._priv_contentInfos.thumbnails})}}},O._priv_onPlaybackError=function(e){var t=H(e,{defaultCode:"NONE",defaultReason:"An unknown error stopped content playback."});t.fatal=!0,this._priv_stopCurrentContent$.next(),this._priv_cleanUpCurrentContentState(),this._priv_currentError=t,C.a.error("API: The player stopped because of an error:",e),this._priv_setPlayerState(ur.STOPPED),this._priv_currentError===t&&this.trigger("error",t)},O._priv_onPlaybackFinished=function(){this._priv_stopCurrentContent$.next(),this._priv_cleanUpCurrentContentState(),this._priv_setPlayerState(ur.ENDED)},O._priv_onPlaybackWarning=function(e){var t=H(e,{defaultCode:"NONE",defaultReason:"An unknown error happened."});C.a.warn("API: Sending warning:",t),this.trigger("warning",t)},O._priv_onManifestReady=function(e){var t=this,n=e.manifest;if(null!==this._priv_contentInfos){this._priv_contentInfos.manifest=n;var r=this._priv_contentInfos,i=r.initialAudioTrack,a=r.initialTextTrack;this._priv_trackManager=new Tr({preferredAudioTracks:void 0===i?this._priv_preferredAudioTracks:new f([i]),preferredTextTracks:void 0===a?this._priv_preferredTextTracks:new f([a])}),Object(D.b)(n,"manifestUpdate").pipe(Object(m.a)(this._priv_stopCurrentContent$)).subscribe((function(){null!=t._priv_trackManager&&t._priv_trackManager.update()}))}else C.a.error("API: The manifest is loaded but no content is.")},O._priv_onActivePeriodChanged=function(e){var t=e.period;if(null!==this._priv_contentInfos){if(this._priv_contentInfos.currentPeriod=t,this._priv_triggerContentEvent("periodChange",t),this._priv_triggerContentEvent("availableAudioTracksChange",this.getAvailableAudioTracks()),this._priv_triggerContentEvent("availableTextTracksChange",this.getAvailableTextTracks()),this._priv_triggerContentEvent("availableVideoTracksChange",this.getAvailableVideoTracks()),null!=this._priv_trackManager){var n=this._priv_trackManager.getChosenAudioTrack(t),r=this._priv_trackManager.getChosenTextTrack(t),i=this._priv_trackManager.getChosenVideoTrack(t);this._priv_triggerContentEvent("audioTrackChange",n),this._priv_triggerContentEvent("textTrackChange",r),this._priv_triggerContentEvent("videoTrackChange",i)}else this._priv_triggerContentEvent("audioTrackChange",null),this._priv_triggerContentEvent("textTrackChange",null),this._priv_triggerContentEvent("videoTrackChange",null);this._priv_triggerContentEvent("availableAudioBitratesChange",this.getAvailableAudioBitrates()),this._priv_triggerContentEvent("availableVideoBitratesChange",this.getAvailableVideoBitrates());var a=this.getCurrentRepresentations();if(null!=a&&null!=a.audio){var o=a.audio.bitrate;this._priv_triggerContentEvent("audioBitrateChange",null!=o?o:-1)}else this._priv_triggerContentEvent("audioBitrateChange",-1);var u=this.getCurrentRepresentations();if(null!=u&&null!=u.video){var s=u.video.bitrate;this._priv_triggerContentEvent("videoBitrateChange",null!=s?s:-1)}else this._priv_triggerContentEvent("videoBitrateChange",-1)}else C.a.error("API: The active period changed but no content is loaded")},O._priv_onPeriodBufferReady=function(e){var t=e.type,n=e.period,r=e.adaptation$;switch(t){case"video":null===this._priv_trackManager?(C.a.error("API: TrackManager not instanciated for a new video period"),r.next(null)):(this._priv_trackManager.addPeriod(t,n,r),this._priv_trackManager.setInitialVideoTrack(n));break;case"audio":null===this._priv_trackManager?(C.a.error("API: TrackManager not instanciated for a new "+t+" period"),r.next(null)):(this._priv_trackManager.addPeriod(t,n,r),this._priv_trackManager.setInitialAudioTrack(n));break;case"text":null===this._priv_trackManager?(C.a.error("API: TrackManager not instanciated for a new "+t+" period"),r.next(null)):(this._priv_trackManager.addPeriod(t,n,r),this._priv_trackManager.setInitialTextTrack(n));break;default:var i=n.adaptations[t];null!=i&&i.length>0?r.next(i[0]):r.next(null)}},O._priv_onPeriodBufferCleared=function(e){var t=e.type,n=e.period;switch(t){case"audio":case"text":case"video":null!=this._priv_trackManager&&this._priv_trackManager.removePeriod(t,n)}if(null!==this._priv_contentInfos){var r=this._priv_contentInfos,i=r.activeAdaptations,a=r.activeRepresentations;if(null!=i&&null!=i[n.id]){var o=i[n.id];delete o[t],0===Object.keys(o).length&&delete i[n.id]}if(null!=a&&null!=a[n.id]){var u=a[n.id];delete u[t],0===Object.keys(u).length&&delete a[n.id]}}},O._priv_onReloadingMediaSource=function(){null!==this._priv_contentInfos&&(this._priv_contentInfos.sourceBuffersStore=null),null!==this._priv_trackManager&&this._priv_trackManager.resetPeriods()},O._priv_onAdaptationChange=function(e){var t=e.type,n=e.adaptation,r=e.period;if(null!==this._priv_contentInfos){null===this._priv_contentInfos.activeAdaptations&&(this._priv_contentInfos.activeAdaptations={});var i,a=this._priv_contentInfos,o=a.activeAdaptations,u=a.currentPeriod,s=o[r.id];if(null==s)o[r.id]=((i={})[t]=n,i);else s[t]=n;if(null!=this._priv_trackManager&&null!=u&&null!=r&&r.id===u.id)switch(t){case"audio":var c=this._priv_trackManager.getChosenAudioTrack(u);this._priv_triggerContentEvent("audioTrackChange",c),this._priv_triggerContentEvent("availableAudioBitratesChange",this.getAvailableVideoBitrates());break;case"text":var l=this._priv_trackManager.getChosenTextTrack(u);this._priv_triggerContentEvent("textTrackChange",l);break;case"video":var f=this._priv_trackManager.getChosenVideoTrack(u);this._priv_triggerContentEvent("videoTrackChange",f),this._priv_triggerContentEvent("availableVideoBitratesChange",this.getAvailableVideoBitrates())}}else C.a.error("API: The adaptations changed but no content is loaded")},O._priv_onRepresentationChange=function(e){var t=e.type,n=e.period,r=e.representation;if(null!==this._priv_contentInfos){null===this._priv_contentInfos.activeRepresentations&&(this._priv_contentInfos.activeRepresentations={});var i,a=this._priv_contentInfos,o=a.activeRepresentations,u=a.currentPeriod,s=o[n.id];if(null==s)o[n.id]=((i={})[t]=r,i);else s[t]=r;var c=null==r?null:r.bitrate;null!=n&&null!=u&&u.id===n.id&&("video"===t?this._priv_triggerContentEvent("videoBitrateChange",null!=c?c:-1):"audio"===t&&this._priv_triggerContentEvent("audioBitrateChange",null!=c?c:-1))}else C.a.error("API: The representations changed but no content is loaded")},O._priv_onBitrateEstimationChange=function(e){var t=e.type,n=e.bitrate;null!=n&&(this._priv_bitrateInfos.lastBitrates[t]=n),this._priv_triggerContentEvent("bitrateEstimationChange",{type:t,bitrate:n})},O._priv_onPlayPauseNext=function(e){if(null===this.videoElement)throw new Error("Disposed player");this._priv_playing$.next(e)},O._priv_onNativeTextTracksNext=function(e){this.trigger("nativeTextTracksChange",e)},O._priv_setPlayerState=function(e){this.state!==e&&(this.state=e,C.a.info("API: playerStateChange event",e),this.trigger("playerStateChange",e))},O._priv_triggerTimeChange=function(e){if(null!==this._priv_contentInfos){if(this.state!==ur.RELOADING){var t=this._priv_contentInfos,n=t.isDirectFile,r=t.manifest;if((n||null!==r)&&null!=e){var i=null!==r?r.getMaximumPosition():void 0,a={position:e.currentTime,duration:e.duration,playbackRate:e.playbackRate,maximumBufferTime:i,bufferGap:isFinite(e.bufferGap)?e.bufferGap:0};if(null!==r&&null!=i&&r.isLive&&e.currentTime>0){var o=null==r.availabilityStartTime?0:r.availabilityStartTime;a.wallClockTime=e.currentTime+o,a.liveGap=i-e.currentTime}this.trigger("positionUpdate",a)}}}else C.a.warn("API: Cannot perform time update: no content loaded.")},a=r,l=[{key:"ErrorTypes",get:function(){return K.b}},{key:"ErrorCodes",get:function(){return K.a}},{key:"LogLevel",get:function(){return C.a.getLevel()},set:function(e){C.a.setLevel(e)}}],(c=null)&&Rr(a.prototype,c),l&&Rr(a,l),r}(D.a);$r.version="3.17.0";var zr=$r;Y.a.emeManager=n(136).default,Y.a.imageBuffer=n(213).default,Y.a.imageParser=n(187).default,Y.a.transports.smooth=n(206).default,Y.a.transports.dash=n(205).default,Y.a.transports.metaplaylist=n(209).default,Y.a.nativeTextTracksBuffer=n(211).default,Y.a.nativeTextTracksParsers.vtt=n(212).default,Y.a.nativeTextTracksParsers.ttml=n(214).default,Y.a.nativeTextTracksParsers.sami=n(189).default,Y.a.nativeTextTracksParsers.srt=n(190).default,Y.a.htmlTextTracksBuffer=n(210).default,Y.a.htmlTextTracksParsers.sami=n(191).default,Y.a.htmlTextTracksParsers.ttml=n(207).default,Y.a.htmlTextTracksParsers.srt=n(192).default,Y.a.htmlTextTracksParsers.vtt=n(208).default,Y.a.directfile=n(193).default;t.default=zr},function(e,t,n){"use strict";n.r(t);var r=n(111),i=n(26),a=n(9),o=n(22),u=n(15);function s(e){var t=e.segment;if(t.isInit||null==t.mediaURL)return Object(i.a)({type:"data-created",value:{responseData:null}});var n=t.mediaURL;return Object(o.a)({url:n,responseType:"arraybuffer",sendProgressEvents:!0})}function c(e){var t=e.response,n=e.content,r=n.segment,o=n.period,s=t.data;if(t.isChunked)throw new Error("Image data should not be downloaded in chunks");if(null===s||null==a.a.imageParser)return Object(i.a)({chunkData:null,chunkInfos:r.timescale>0?{duration:r.isInit?0:r.duration,time:r.isInit?-1:r.time,timescale:r.timescale}:null,chunkOffset:Object(u.a)(r.timestampOffset,0),segmentProtections:[],appendWindow:[o.start,o.end]});var c=a.a.imageParser(new Uint8Array(s)),l=c.thumbs;return Object(i.a)({chunkData:{data:l,start:0,end:Number.MAX_VALUE,timescale:1,type:"bif"},chunkInfos:{time:0,duration:Number.MAX_VALUE,timescale:c.timescale},chunkOffset:Object(u.a)(r.timestampOffset,0),segmentProtections:[],appendWindow:[o.start,o.end]})}var l=n(11),f=n.n(l),d=n(224),p=n(179),h=n(31),v=n(48),b=n(64),m=n(12),g=n(41),y=n(42),_=n(110),O=n(0);function E(e){var t=Date.parse(e)-performance.now();if(!isNaN(t))return t;O.a.warn("DASH Parser: Invalid clock received: ",e)}function w(e){for(var t=e.representations,n=null,r=0;r<t.length;r++){var i=t[r].index.getLastPosition();if(void 0===i)return;null!==i&&(n=null==n?i:Math.min(n,i))}return null===n?null:n}function j(e){for(var t=e.periods.length-1;t>=0;t--){var n=e.periods[t].adaptations,r=null==n.audio?void 0:n.audio[0],i=null==n.video?void 0:n.video[0];if(null!=r||null!=i){var a=null,o=null;if(null!=r){var u=w(r);if(void 0===u)return;a=u}if(null!=i){var s=w(i);if(void 0===s)return;o=s}if(null!=r&&null===a||null!=i&&null===o)return void O.a.info("DASH Parser: found Period with no segment. ","Going to previous one to calculate last position");if(null!=o)return null!=a?Math.min(a,o):o;if(null!=a)return a}}}function T(e){for(var t=e.representations,n=null,r=0;r<t.length;r++){var i=t[r].index.getFirstPosition();if(void 0===i)return;null!==i&&(n=null==n?i:Math.max(n,i))}return null===n?null:n}function S(e){for(var t=0;t<=e.periods.length-1;t++){var n=e.periods[t].adaptations,r=null==n.audio?void 0:n.audio[0],i=null==n.video?void 0:n.video[0];if(null!=r||null!=i){var a=null,o=null;if(null!=r){var u=T(r);if(void 0===u)return;a=u}if(null!=i){var s=T(i);if(void 0===s)return;o=s}if(null!=r&&null===a||null!=i&&null===o)return void O.a.info("DASH Parser: found Period with no segment. ","Going to next one to calculate first position");if(null!=o)return null!=a?Math.max(a,o):o;if(null!=a)return a}}}function A(e){var t={},n=e.textContent;if(null!==n&&0!==n.length){for(var r=0;r<e.attributes.length;r++){var i=e.attributes[r];switch(i.name){case"availabilityTimeOffset":t.availabilityTimeOffset="INF"===i.value?1/0:parseInt(i.value,10)}}return{value:n,attributes:t}}}function x(e){for(var t={},n=0;n<e.attributes.length;n++){var r=e.attributes[n];switch(r.name){case"id":t.id=r.value;break;case"lang":t.language=r.value;break;case"contentType":t.contentType=r.value;break;case"par":t.par=r.value}}return t}function k(e){for(var t,n,r,i=e.replace(/[^A-Za-z0-9\+\/]/g,""),a=i.length,o=3*a+1>>>2,u=new Uint8Array(o),s=0,c=0,l=0;l<a;l++)if(n=3&l,s|=((r=i.charCodeAt(l))>64&&r<91?r-65:r>96&&r<123?r-71:r>47&&r<58?r+4:43===r?62:47===r?63:0)<<18-6*n,3===n||a-l==1){for(t=0;t<3&&c<o;t++,c++)u[c]=s>>>(16>>>t&24)&255;s=0}return u}var R=n(1);function I(e){for(var t=[],n=0;n<e.length;n++)if(e[n].nodeType===Node.ELEMENT_NODE){var r=e[n];if("cenc:pssh"===r.nodeName){var i=r.textContent;null!==i&&i.length>0&&t.push(k(i))}}return{cencPssh:t}}function M(e){for(var t,n,r,i=0;i<e.attributes.length;i++){var a=e.attributes[i];switch(a.name){case"schemeIdUri":t=a.value;break;case"value":n=a.value;break;case"cenc:default_KID":r=Object(R.k)(a.value.replace(/-/g,""))}}return{schemeIdUri:t,value:n,keyId:r}}var N=n(2),C=/^P(([\d.]*)Y)?(([\d.]*)M)?(([\d.]*)D)?T?(([\d.]*)H)?(([\d.]*)M)?(([\d.]*)S)?/,D=/([0-9]+)-([0-9]+)/;function P(e){return"true"===e}function B(e){return"true"===e||"false"!==e&&parseInt(e,10)}function L(e){return new Date(Date.parse(e)).getTime()/1e3}function U(e){if(!Object(N.a)(e))return 0;var t=C.exec(e);if(null==t)throw new Error(e+" is not a valid ISO8601 duration");return 365*parseFloat(Object(N.a)(t[2])?t[2]:"0")*24*60*60+30*parseFloat(Object(N.a)(t[4])?t[4]:"0")*24*60*60+24*parseFloat(Object(N.a)(t[6])?t[6]:"0")*60*60+60*parseFloat(Object(N.a)(t[8])?t[8]:"0")*60+60*parseFloat(Object(N.a)(t[10])?t[10]:"0")+parseFloat(Object(N.a)(t[12])?t[12]:"0")}function F(e){var t=D.exec(e);return null==t?null:[+t[1],+t[2]]}function $(e){for(var t,n,r=0;r<e.attributes.length;r++){var i=e.attributes[r];switch(i.name){case"schemeIdUri":t=i.value;break;case"value":n=i.value}}return{schemeIdUri:t,value:n}}function z(e){for(var t={},n=0;n<e.attributes.length;n++){var r=e.attributes[n];switch(r.name){case"range":var i=F(r.value);null==i?O.a.warn('DASH: invalid range ("'+r.value+'")'):t.range=i;break;case"sourceURL":t.media=r.value}}return t}function W(e){for(var t={},n=e.childNodes,r=0;r<n.length;r++)if(n[r].nodeType===Node.ELEMENT_NODE){var i=n[r];"Initialization"===i.nodeName&&(t.initialization=z(i))}for(var a=0;a<e.attributes.length;a++){var o=e.attributes[a];switch(o.name){case"timescale":var u=parseInt(o.value,10);isNaN(u)?O.a.warn('DASH: invalid timescale ("'+o.value+'")'):t.timescale=u;break;case"presentationTimeOffset":var s=parseFloat(o.value);isNaN(s)?O.a.warn('DASH: invalid presentationTimeOffset ("'+o.value+'")'):t.presentationTimeOffset=s;break;case"indexRange":var c=F(o.value);Array.isArray(c)?t.indexRange=c:O.a.warn('DASH: invalid indexRange ("'+o.value+'")');break;case"indexRangeExact":t.indexRangeExact=P(o.value);break;case"availabilityTimeOffset":var l=parseFloat(o.value);isNaN(l)?O.a.warn('DASH: invalid availabilityTimeOffset ("'+o.value+'")'):t.availabilityTimeOffset=l;break;case"availabilityTimeComplete":t.availabilityTimeComplete=P(o.value);break;case"duration":var d=parseInt(o.value,10);isNaN(d)?O.a.warn('DASH: invalid duration ("'+o.value+'")'):t.duration=d;break;case"startNumber":var p=parseInt(o.value,10);isNaN(p)?O.a.warn('DASH: invalid startNumber ("'+o.value+'")'):t.startNumber=p}}var h=null==t.timescale?1:t.timescale,v=!0===t.indexRangeExact,b=null==t.availabilityTimeComplete||t.availabilityTimeComplete;return f()(t,{availabilityTimeComplete:b,indexRangeExact:v,timeline:[],timescale:h})}function V(e){for(var t={},n=0;n<e.attributes.length;n++){var r=e.attributes[n];switch(r.name){case"media":t.media=r.value;break;case"indexRange":var i=F(r.value);Array.isArray(i)?t.indexRange=i:O.a.warn('DASH: invalid indexRange ("'+r.value+'")');break;case"index":t.index=r.value;break;case"mediaRange":var a=F(r.value);Array.isArray(a)?t.mediaRange=a:O.a.warn('DASH: invalid mediaRange ("'+r.value+'")')}}return t}function H(e){for(var t=W(e),n=[],r=e.childNodes,i=0;i<r.length;i++)if(r[i].nodeType===Node.ELEMENT_NODE){var a=r[i];if("SegmentURL"===a.nodeName){var o=V(a);n.push(o)}}var u=t.duration;if(null==u)throw new Error("Invalid SegmentList: no duration");return f()(t,{list:n,duration:u})}function K(e){for(var t={},n=0;n<e.attributes.length;n++){var r=e.attributes[n];switch(r.name){case"t":var i=parseInt(r.value,10);isNaN(i)?O.a.warn('DASH: invalid t ("'+r.value+'")'):t.start=i;break;case"d":var a=parseInt(r.value,10);isNaN(a)?O.a.warn('DASH: invalid d ("'+r.value+'")'):t.duration=a;break;case"r":var o=parseInt(r.value,10);isNaN(o)?O.a.warn('DASH: invalid r ("'+r.value+'")'):t.repeatCount=o}}return t}function Y(e){for(var t=[],n=e.childNodes,r=0;r<n.length;r++)if(n[r].nodeType===Node.ELEMENT_NODE){var i=n[r];if("S"===i.nodeName){var a=K(i);t.push(a)}}return t}function G(e){for(var t,n,r,i,a,o,u=W(e),s=0;s<e.childNodes.length;s++)if(e.childNodes[s].nodeType===Node.ELEMENT_NODE){var c=e.childNodes[s];"SegmentTimeline"===c.nodeName&&(o=Y(c))}for(var l=0;l<e.attributes.length;l++){var d=e.attributes[l];switch(d.nodeName){case"initialization":null==u.initialization&&(u.initialization={media:d.value});break;case"index":n=d.value;break;case"availabilityTimeOffset":r=d.value;break;case"media":i=d.value;break;case"bitstreamSwitching":a=P(d.value)}}if(null!=o)t=f()({},u,{indexType:"timeline",timeline:o});else{var p=u.duration;if(null==p)throw new Error("Invalid SegmentTemplate: no duration");t=f()({},u,{indexType:"template",duration:p})}return null!=n&&(t.index=n),null!=i&&(t.media=i),null!=a&&(t.bitstreamSwitching=a),null!=r&&(t.availabilityTimeOffset="INF"===r?1/0:parseInt(r,10)),t}function q(e){for(var t={baseURL:void 0},n=0;n<e.length;n++)if(e[n].nodeType===Node.ELEMENT_NODE){var r=e[n];switch(r.nodeName){case"BaseURL":t.baseURL=A(r);break;case"SegmentBase":t.segmentBase=W(r);break;case"SegmentList":t.segmentList=H(r);break;case"SegmentTemplate":t.segmentTemplate=G(r)}}return t}function X(e){for(var t={},n=0;n<e.attributes.length;n++){var r=e.attributes[n];switch(r.name){case"audioSamplingRate":t.audioSamplingRate=r.value;break;case"bandwidth":var i=parseInt(r.value,10);isNaN(i)?O.a.warn('DASH: invalid bandwidth ("'+r.value+'")'):t.bitrate=i;break;case"codecs":t.codecs=r.value;break;case"codingDependency":t.codingDependency=P(r.value);break;case"frameRate":t.frameRate=r.value;break;case"height":var a=parseInt(r.value,10);isNaN(a)?O.a.warn('DASH: invalid height ("'+r.value+'")'):t.height=a;break;case"id":t.id=r.value;break;case"maxPlayoutRate":var o=parseFloat(r.value);isNaN(o)?O.a.warn('DASH: invalid maxPlayoutRate ("'+r.value+'")'):t.maxPlayoutRate=o;break;case"maximumSAPPeriod":var u=parseFloat(r.value);isNaN(u)?O.a.warn('DASH: invalid maximumSAPPeriod ("'+r.value+'")'):t.maximumSAPPeriod=u;break;case"mimeType":t.mimeType=r.value;break;case"profiles":t.profiles=r.value;break;case"qualityRanking":var s=parseInt(r.value,10);isNaN(s)?O.a.warn('DASH: invalid qualityRanking ("'+r.value+'")'):t.qualityRanking=s;break;case"segmentProfiles":t.segmentProfiles=r.value;break;case"width":var c=parseInt(r.value,10);isNaN(c)?O.a.warn('DASH: invalid width ("'+r.value+'")'):t.width=c}}return t}function Q(e){for(var t,n,r={baseURL:void 0,representations:[]},i=[],a=0;a<e.length;a++)if(e[a].nodeType===Node.ELEMENT_NODE){var o=e[a];switch(o.nodeName){case"Accessibility":r.accessibility=$(o);break;case"BaseURL":r.baseURL=A(o);break;case"ContentComponent":r.contentComponent=x(o);break;case"EssentialProperty":null==r.essentialProperties?r.essentialProperties=[$(o)]:r.essentialProperties.push($(o));break;case"Representation":var u={children:q((n=o).childNodes),attributes:X(n)};r.representations.push(u);break;case"Role":null==r.roles?r.roles=[$(o)]:r.roles.push($(o));break;case"SupplementalProperty":null==r.supplementalProperties?r.supplementalProperties=[$(o)]:r.supplementalProperties.push($(o));break;case"SegmentBase":r.segmentBase=W(o);break;case"SegmentList":r.segmentList=H(o);break;case"SegmentTemplate":r.segmentTemplate=G(o);break;case"ContentProtection":var s={children:I((t=o).childNodes),attributes:M(t)};void 0!==s&&i.push(s)}}return i.length>0&&(r.contentProtections=i),r}function Z(e){for(var t={},n=0;n<e.attributes.length;n++){var r=e.attributes[n];switch(r.name){case"id":t.id=r.value;break;case"group":var i=parseInt(r.value,10);isNaN(i)?O.a.warn('DASH: invalid group ("'+r.value+'")'):t.group=i;break;case"lang":t.language=r.value;break;case"contentType":t.contentType=r.value;break;case"par":t.par=r.value;break;case"minBandwidth":var a=parseInt(r.value,10);isNaN(a)?O.a.warn('DASH: invalid minBandwidth ("'+r.value+'")'):t.minBitrate=a;break;case"maxBandwidth":var o=parseInt(r.value,10);isNaN(o)?O.a.warn('DASH: invalid maxBandwidth ("'+r.value+'")'):t.maxBitrate=o;break;case"minWidth":var u=parseInt(r.value,10);isNaN(u)?O.a.warn('DASH: invalid minWidth ("'+r.value+'")'):t.minWidth=u;break;case"maxWidth":var s=parseInt(r.value,10);isNaN(s)?O.a.warn('DASH: invalid maxWidth ("'+r.value+'")'):t.maxWidth=s;break;case"minHeight":var c=parseInt(r.value,10);isNaN(c)?O.a.warn('DASH: invalid minHeight ("'+r.value+'")'):t.minHeight=c;break;case"maxHeight":var l=parseInt(r.value,10);isNaN(l)?O.a.warn('DASH: invalid maxHeight ("'+r.value+'")'):t.maxHeight=l;break;case"minFrameRate":t.minFrameRate=r.value;break;case"maxFrameRate":t.maxFrameRate=r.value;break;case"segmentAlignment":var f=B(r.value);"number"==typeof f&&isNaN(f)?O.a.warn('DASH: invalid segmentAlignment ("'+r.value+'")'):t.segmentAlignment=f;break;case"subsegmentAlignment":var d=B(r.value);"number"==typeof d&&isNaN(d)?O.a.warn('DASH: invalid subsegmentAlignment ("'+r.value+'")'):t.subsegmentAlignment=d;break;case"bitstreamSwitching":t.bitstreamSwitching=P(r.value);break;case"audioSamplingRate":t.audioSamplingRate=r.value;break;case"codecs":t.codecs=r.value;break;case"codingDependency":t.codingDependency=P(r.value);break;case"frameRate":t.frameRate=r.value;break;case"height":var p=parseInt(r.value,10);isNaN(p)?O.a.warn('DASH: invalid height ("'+r.value+'")'):t.height=p;break;case"maxPlayoutRate":var h=parseFloat(r.value);isNaN(h)?O.a.warn('DASH: invalid maxPlayoutRate ("'+r.value+'")'):t.maxPlayoutRate=h;break;case"maximumSAPPeriod":var v=parseFloat(r.value);isNaN(v)?O.a.warn('DASH: invalid maximumSAPPeriod ("'+r.value+'")'):t.maximumSAPPeriod=v;break;case"mimeType":t.mimeType=r.value;break;case"profiles":t.profiles=r.value;break;case"segmentProfiles":t.segmentProfiles=r.value;break;case"width":var b=parseInt(r.value,10);isNaN(b)?O.a.warn('DASH: invalid width ("'+r.value+'")'):t.width=b}}return t}function J(e){for(var t,n,r=[],i=0;i<e.length;i++)if(e[i].nodeType===Node.ELEMENT_NODE){var a=e[i];switch(a.nodeName){case"BaseURL":t=A(a);break;case"AdaptationSet":var o={children:Q((n=a).childNodes),attributes:Z(n)};r.push(o)}}return{baseURL:t,adaptations:r}}function ee(e){for(var t={},n=0;n<e.attributes.length;n++){var r=e.attributes[n];switch(r.name){case"id":t.id=r.value;break;case"start":var i=U(r.value);isNaN(i)?O.a.warn("DASH: Unrecognized start in the mpd:",r.value):t.start=i;break;case"duration":var a=U(r.value);isNaN(a)?O.a.warn("DASH: Unrecognized duration in the mpd:",r.value):t.duration=a;break;case"bitstreamSwitching":t.bitstreamSwitching=P(r.value);break;case"xlink:href":t.xlinkHref=r.value;break;case"xlink:actuate":t.xlinkActuate=r.value}}return t}function te(e){return{children:J(e.childNodes),attributes:ee(e)}}function ne(e){for(var t,n=[],r=[],i=[],a=0;a<e.length;a++)if(e[a].nodeType===Node.ELEMENT_NODE){var o=e[a];switch(o.nodeName){case"BaseURL":t=A(o);break;case"Location":n.push(null===o.textContent?"":o.textContent);break;case"Period":var u=te(o);r.push(u);break;case"UTCTiming":var s=$(o);i.push(s)}}return{baseURL:t,locations:n,periods:r,utcTimings:i}}function re(e){for(var t={},n=0;n<e.attributes.length;n++){var r=e.attributes[n];switch(r.name){case"id":t.id=r.value;break;case"profiles":t.profiles=r.value;break;case"type":t.type=r.value;break;case"availabilityStartTime":t.availabilityStartTime=L(r.value);break;case"availabilityEndTime":t.availabilityEndTime=L(r.value);break;case"publishTime":t.publishTime=L(r.value);break;case"mediaPresentationDuration":t.duration=U(r.value);break;case"minimumUpdatePeriod":t.minimumUpdatePeriod=U(r.value);break;case"minBufferTime":t.minBufferTime=U(r.value);break;case"timeShiftBufferDepth":t.timeShiftBufferDepth=U(r.value);break;case"suggestedPresentationDelay":t.suggestedPresentationDelay=U(r.value);break;case"maxSegmentDuration":t.maxSegmentDuration=U(r.value);break;case"maxSubsegmentDuration":t.maxSubsegmentDuration=U(r.value)}}return t}var ie=n(88),ae=n(79);var oe=function(){function e(e){this._isDynamic=e.isDynamic,this._timeShiftBufferDepth=e.isDynamic&&null!=e.timeShiftBufferDepth?e.timeShiftBufferDepth:null}var t=e.prototype;return t.setLastPosition=function(e,t){this._lastPosition=e,this._positionTime=t},t.lastPositionIsKnown=function(){return this._isDynamic?null!=this._positionTime&&null!=this._lastPosition:null!=this._lastPosition},t.getMinimumBound=function(){if(!this._isDynamic||null===this._timeShiftBufferDepth)return 0;var e=this.getMaximumBound();return void 0!==e?e-this._timeShiftBufferDepth:void 0},t.getMaximumBound=function(){return this._isDynamic&&null!=this._positionTime&&null!=this._lastPosition?Math.max(this._lastPosition-this._positionTime+performance.now()/1e3,0):this._lastPosition},e}(),ue=n(13),se=["audio","video","text","image"],ce=["subtitle","caption"];var le=function(e,t,n){var r,i;return e+(null!=(i=null===(r=t)||void 0===r?void 0:r.attributes.availabilityTimeOffset)?i:0)+(null!=n?n:0)},fe=n(17);function de(e){var t=e.initialization;return{id:"init",isInit:!0,time:0,duration:0,range:null!=t?t.range:void 0,indexRange:e.indexRange,mediaURL:null!=t?t.mediaURL:null,timescale:e.timescale,timestampOffset:-e.indexTimeOffset/e.timescale}}function pe(e){return function(t,n,r){var i,a,o,u=Object(N.a)(r)?parseInt(r,10):1;return i=String(e),a=u,(o=i.toString()).length>=a?o:(new Array(a+1).join("0")+o).slice(-a)}}function he(e,t,n,r){return function(e,t,n){return-1===e.indexOf("$")?e:e.replace(/\$\$/g,"$").replace(/\$RepresentationID\$/g,String(t)).replace(/\$Bandwidth(|\%0(\d+)d)\$/g,pe(void 0===n?0:n))}(Object(y.a)(e,t),n,r)}function ve(e,t,n){return-1===e.indexOf("$")?e:e.replace(/\$\$/g,"$").replace(/\$Number(|\%0(\d+)d)\$/g,(function(e,t,r){if(null==n)throw new Error("Segment number not defined in a $Number$ scheme");return pe(n)(e,t,r)})).replace(/\$Time(|\%0(\d+)d)\$/g,(function(e,n,r){if(null==t)throw new Error("Segment time not defined in a $Time$ scheme");return pe(t)(e,n,r)}))}function be(e,t,n,r){for(var i,a,o=Object(fe.e)(t,e),u=Object(fe.e)(t+n,e),s=e.timeline,c=e.timescale,l=e.mediaURL,f=e.startNumber,d=null!=f?f:void 0,p=[],h=s.length,v=s.length>0&&null!=s[0].duration?s[0].duration:0,b=0;b<h;b++){var m=s[b],g=m.duration,y=m.start,_=m.range;v=Math.max(v,g);for(var O=Object(fe.a)(m,s[b+1],r),E=(i=g,a=void 0,(a=o-y)>0?Math.floor(a/i):0),w=y+E*g;w<u&&E<=O;){var j=null!=d?d+E:void 0,T={id:String(w),time:w-e.indexTimeOffset,isInit:!1,range:_,duration:g,timescale:c,mediaURL:ve(l,w,j),number:j,timestampOffset:-e.indexTimeOffset/c};p.push(T),w=y+ ++E*g}if(w>=u)return p;null!=d&&(d+=O+1)}return p}function me(e,t){if(t.timescale!==e.timescale){var n=e.timescale;e.timeline.push({start:t.time/t.timescale*n,duration:t.duration/t.timescale*n,repeatCount:void 0===t.count?0:t.count,range:t.range})}else e.timeline.push({start:t.time,duration:t.duration,repeatCount:void 0===t.count?0:t.count,range:t.range});return!0}var ge=function(){function e(e,t){var n=t.periodStart,r=t.periodEnd,i=t.representationBaseURL,a=t.representationId,o=t.representationBitrate,u=e.timescale,s=(null!=e.presentationTimeOffset?e.presentationTimeOffset:0)-n*u,c=he(i,void 0!==e.initialization?e.initialization.media:void 0,a,o),l=void 0!==e.initialization?e.initialization.range:void 0!==e.indexRange?[0,e.indexRange[0]-1]:void 0;this._index={indexRange:e.indexRange,indexTimeOffset:s,initialization:{mediaURL:c,range:l},mediaURL:he(i,e.media,a,o),startNumber:e.startNumber,timeline:e.timeline,timescale:u},this._scaledPeriodEnd=null==r?void 0:Object(fe.e)(r,this._index)}var t=e.prototype;return t.getInitSegment=function(){return de(this._index)},t.getSegments=function(e,t){return be(this._index,e,t,this._scaledPeriodEnd)},t.shouldRefresh=function(){return!1},t.getFirstPosition=function(){var e=this._index;return 0===e.timeline.length?null:Object(fe.b)(e.timeline[0].start,e)},t.getLastPosition=function(){var e=this._index.timeline;if(0===e.length)return null;var t=e[e.length-1],n=Object(fe.c)(t,null,this._scaledPeriodEnd);return Object(fe.b)(n,this._index)},t.isSegmentStillAvailable=function(){return!0},t.checkDiscontinuity=function(){return-1},t._addSegments=function(e){for(var t=0;t<e.length;t++)me(this._index,e[t])},t.canBeOutOfSyncError=function(){return!1},t.isFinished=function(){return!0},t._update=function(e){this._index=e._index},e}(),ye=function(){function e(e,t){var n=t.periodStart,r=t.representationBaseURL,i=t.representationId,a=t.representationBitrate;this._periodStart=n;var o=(null!=e.presentationTimeOffset?e.presentationTimeOffset:0)-n*e.timescale,u=e.list.map((function(e){return{mediaURL:he(r,e.media,i,a),mediaRange:e.mediaRange}}));this._index={list:u,timescale:e.timescale,duration:e.duration,indexTimeOffset:o,indexRange:e.indexRange,initialization:null==e.initialization?void 0:{mediaURL:he(r,e.initialization.media,i,a),range:e.initialization.range}}}var t=e.prototype;return t.getInitSegment=function(){return de(this._index)},t.getSegments=function(e,t){for(var n=this._index,r=n.duration,i=n.list,a=n.timescale,o=e-this._periodStart,u=Object(fe.d)(o,t,a),s=u[0],c=u[1],l=this._periodStart*a,f=Math.min(i.length-1,Math.floor(c/r)),d=[],p=Math.floor(s/r);p<=f;){var h=i[p].mediaRange,v=i[p].mediaURL,b={id:String(p),time:p*r+l,isInit:!1,range:h,duration:r,timescale:a,mediaURL:v,timestampOffset:-n.indexTimeOffset/a};d.push(b),p++}return d},t.shouldRefresh=function(e,t){var n=this._index,r=n.timescale,i=n.duration,a=n.list,o=t*r,u=Math.floor(o/i);return u<0||u>=a.length},t.getFirstPosition=function(){return this._periodStart},t.getLastPosition=function(){var e=this._index,t=e.duration;return e.list.length*t/e.timescale+this._periodStart},t.isSegmentStillAvailable=function(e){if(e.isInit)return!0;var t=this._index,n=this._periodStart*t.timescale,r=(e.timescale!==t.timescale?e.time*t.timescale/e.timescale+n:e.time-n)/t.duration;return r>0&&r%1==0},t.checkDiscontinuity=function(){return-1},t.canBeOutOfSyncError=function(){return!1},t.isFinished=function(){return!0},t._update=function(e){this._index=e._index},t._addSegments=function(){0},e}(),_e=n(3).a.MINIMUM_SEGMENT_SIZE,Oe=function(){function e(e,t){var n=e.timescale,r=t.aggressiveMode,i=t.availabilityTimeOffset,a=t.manifestBoundsCalculator,o=t.isDynamic,u=t.periodEnd,s=t.periodStart,c=t.representationBaseURL,l=t.representationId,f=t.representationBitrate;this._availabilityTimeOffset=i,this._manifestBoundsCalculator=a,this._aggressiveMode=r;var d=null!=e.presentationTimeOffset?e.presentationTimeOffset:0,p=d-s*n;this._index={duration:e.duration,timescale:n,indexRange:e.indexRange,indexTimeOffset:p,initialization:null==e.initialization?void 0:{mediaURL:he(c,e.initialization.media,l,f),range:e.initialization.range},mediaURL:he(c,e.media,l,f),presentationTimeOffset:d,startNumber:e.startNumber},this._isDynamic=o,this._periodStart=s,this._relativePeriodEnd=null==u?void 0:u-s}var t=e.prototype;return t.getInitSegment=function(){return de(this._index)},t.getSegments=function(e,t){var n=this._index,r=n.duration,i=n.startNumber,a=n.timescale,o=n.mediaURL,u=this._periodStart*a,s=null==this._relativePeriodEnd?void 0:this._relativePeriodEnd*a,c=e*a-u,l=(e+t)*a-u,f=this._getFirstSegmentStart(),d=this._getLastSegmentStart();if(null==f||null==d)return[];var p=Math.max(f,c),h=Math.min(d,l);if(h+r<=p)return[];for(var v=[],b=null==i?1:i,m=Math.floor(p/r),g=m*r;g<=h;g+=r){var y=m+b,_=null!=s&&g+r>s?s-g:r,O=g+u,E=ve(o,g+this._index.presentationTimeOffset,y),w={id:String(y),number:y,time:O,isInit:!1,duration:_,timescale:a,mediaURL:E,timestampOffset:-n.indexTimeOffset/a};v.push(w),m++}return v},t.getFirstPosition=function(){var e=this._getFirstSegmentStart();return null==e?e:e/this._index.timescale+this._periodStart},t.getLastPosition=function(){var e=this._getLastSegmentStart();return null==e?e:(e+this._index.duration)/this._index.timescale+this._periodStart},t.shouldRefresh=function(){return!1},t.checkDiscontinuity=function(){return-1},t.isSegmentStillAvailable=function(e){if(e.isInit)return!0;if(e.timescale===this._index.timescale){var t=e.timescale,n=e.time-this._periodStart*t,r=this._getFirstSegmentStart(),i=this._getLastSegmentStart();if(void 0!==r&&void 0!==i)return null!==r&&null!==i&&(!(n<r)&&(!(n>i||e.duration!==this._index.duration)&&n/this._index.duration%1==0))}},t.canBeOutOfSyncError=function(){return!1},t.isFinished=function(){if(!this._isDynamic)return!0;if(null==this._relativePeriodEnd)return!1;var e=this._index.timescale,t=this._getLastSegmentStart();return null!=t&&t+this._index.duration+1/60*e>=this._relativePeriodEnd*e},t._addSegments=function(){O.a.warn("Tried to add Segments to a template RepresentationIndex")},t._update=function(e){this._index=e._index,this._aggressiveMode=e._aggressiveMode,this._isDynamic=e._isDynamic,this._periodStart=e._periodStart,this._relativePeriodEnd=e._relativePeriodEnd,this._manifestBoundsCalculator=e._manifestBoundsCalculator},t._getFirstSegmentStart=function(){if(!this._isDynamic)return 0;if(0===this._relativePeriodEnd||null==this._relativePeriodEnd){var e=this._manifestBoundsCalculator.getMaximumBound();if(void 0!==e&&e<this._periodStart)return null}var t=this._index,n=t.duration,r=t.timescale,i=this._manifestBoundsCalculator.getMinimumBound();if(void 0!==i){var a=i>this._periodStart?(i-this._periodStart)*r:0;return Math.floor(a/n)*n}},t._getLastSegmentStart=function(){var e=this._index,t=e.duration,n=e.timescale;if(this._isDynamic){var r=this._manifestBoundsCalculator.getMaximumBound();if(void 0===r)return;var i=this._aggressiveMode?t/n:0;if(null!=this._relativePeriodEnd&&this._relativePeriodEnd<r+i-this._periodStart){var a=this._relativePeriodEnd*n;return a<t?null:(Math.floor(a/t)-1)*t}var o=(r-this._periodStart)*n;if(o<0)return null;var u=((void 0!==this._availabilityTimeOffset?this._availabilityTimeOffset:0)+i)*n,s=Math.floor((o+u)/t);return s<=0?null:(s-1)*t}var c=(void 0===this._relativePeriodEnd?0:this._relativePeriodEnd)*n,l=Math.ceil(c/t)-1,f=l*t;return c-f>_e*n||0===l?f:(l-1)*t},e}(),Ee=n(170),we=n(109),je=n(108);function Te(e,t,n,r){var i=e.start,a=e.duration,o=e.repeatCount;return null==i&&(null==t?i=r:null!=t.duration&&(i=t.start+t.duration*(t.repeatCount+1))),null!=a&&!isNaN(a)||null==n||null==n.start||isNaN(n.start)||null==i||isNaN(i)||(a=n.start-i),null==i||isNaN(i)||null==a||isNaN(a)||null!=o&&isNaN(o)?(O.a.warn('DASH: A "S" Element could not have been parsed.'),null):{start:i,duration:a,repeatCount:void 0===o?0:o}}var Se=function(){function e(e,t){for(var n=t.manifestBoundsCalculator,r=t.isDynamic,i=t.representationBaseURL,a=t.representationId,o=t.representationBitrate,u=t.periodStart,s=t.periodEnd,c=e.timescale,l=u*c,f=(null!=e.presentationTimeOffset?e.presentationTimeOffset:0)-l,d=e.timeline,p=[],h=0;h<d.length;h++){var v=Te(d[h],void 0===p[p.length-1]?null:p[p.length-1],void 0===d[h+1]?null:d[h+1],l);null!=v&&p.push(v)}this._manifestBoundsCalculator=n,this._lastUpdate=null==t.receivedTime?performance.now():t.receivedTime,this._isDynamic=r,this._index={indexRange:e.indexRange,indexTimeOffset:f,initialization:null==e.initialization?void 0:{mediaURL:he(i,e.initialization.media,a,o),range:e.initialization.range},mediaURL:he(i,e.media,a,o),startNumber:e.startNumber,timeline:p,timescale:c},this._scaledPeriodStart=Object(fe.e)(u,this._index),this._scaledPeriodEnd=null==s?void 0:Object(fe.e)(s,this._index)}var t=e.prototype;return t.getInitSegment=function(){return de(this._index)},t.getSegments=function(e,t){return this._refreshTimeline(),be(this._index,e,t,this._scaledPeriodEnd)},t.shouldRefresh=function(e,t){if(this._refreshTimeline(),!this._isDynamic)return!1;if(0===this._index.timeline.length)return!0;var n=this._index.timeline[this._index.timeline.length-1],r=Object(fe.c)(n,null,this._scaledPeriodEnd);if(t*this._index.timescale<r)return!1;var i=this._getTheoriticalLastPosition();return null==i||i>r},t.getFirstPosition=function(){this._refreshTimeline();var e=this._index;return 0===e.timeline.length?null:Object(fe.b)(e.timeline[0].start,e)},t.getLastPosition=function(){this._refreshTimeline();var e=this._index.timeline;if(0===e.length)return null;var t=e[e.length-1],n=Object(fe.c)(t,null,this._scaledPeriodEnd);return Object(fe.b)(n,this._index)},t.isSegmentStillAvailable=function(e){if(e.isInit)return!0;this._refreshTimeline();var t=this._index,n=t.timeline,r=t.timescale,i=t.indexTimeOffset;return Object(je.a)(e,n,r,i)},t.checkDiscontinuity=function(e){this._refreshTimeline();var t=this._index,n=t.timeline,r=t.timescale,i=Object(fe.e)(e,this._index);if(i<=0)return-1;var a=function(e,t){for(var n=e.timeline,r=0,i=n.length;r<i;){var a=r+i>>>1;n[a].start<t?r=a+1:i=a}return r>0?r-1:r}(this._index,i);if(a<0||a>=n.length-1)return-1;var o=n[a];if(-1===o.duration)return-1;var u=n[a+1];if(null==u)return-1;var s=o.start,c=Object(fe.c)(o,u,this._scaledPeriodEnd);return c<u.start&&i>=s&&c-i<r?Object(fe.b)(u.start,this._index):-1},t.canBeOutOfSyncError=function(e){return!!this._isDynamic&&(e instanceof Ee.a&&e.isHttpError(404))},t._update=function(e){this._index=e._index,this._isDynamic=e._isDynamic,this._scaledPeriodStart=e._scaledPeriodStart,this._scaledPeriodEnd=e._scaledPeriodEnd,this._lastUpdate=e._lastUpdate,this._manifestBoundsCalculator=e._manifestBoundsCalculator},t._addSegments=function(){0},t.isFinished=function(){if(!this._isDynamic)return!0;var e=this._index.timeline;if(null==this._scaledPeriodEnd||0===e.length)return!1;var t=e[e.length-1];return Object(fe.c)(t,null,this._scaledPeriodEnd)+1/60>=this._scaledPeriodEnd},t._refreshTimeline=function(){var e=this._manifestBoundsCalculator.getMinimumBound();if(null!=e){var t=Object(fe.e)(e,this._index);Object(we.a)(this._index.timeline,t)}},t._getTheoriticalLastPosition=function(){var e=this._index;if(!(e.timeline.length<=0)){var t=e.timeline[e.timeline.length-1],n=Object(fe.c)(t,null,this._scaledPeriodEnd);if(!this._isDynamic)return n;var r=t.duration,i=(performance.now()-this._lastUpdate)/1e3*e.timescale;return i<r?n:Math.floor(i/r)*r+n}},e}();function Ae(e,t,n){return e.map((function(e){var r,i,a=void 0!==e.children.baseURL?e.children.baseURL.value:"",o=Object(y.a)(n.baseURL,a),u={aggressiveMode:n.aggressiveMode,availabilityTimeOffset:n.availabilityTimeOffset,manifestBoundsCalculator:n.manifestBoundsCalculator,isDynamic:n.isDynamic,periodEnd:n.end,periodStart:n.start,receivedTime:n.receivedTime,representationBaseURL:o,representationBitrate:e.attributes.bitrate,representationId:e.attributes.id,timeShiftBufferDepth:n.timeShiftBufferDepth};if(null!=e.children.segmentBase){var s=e.children.segmentBase;u.availabilityTimeOffset=le(n.availabilityTimeOffset,e.children.baseURL,s.availabilityTimeOffset),r=new ge(s,u)}else if(null!=e.children.segmentList){var c=e.children.segmentList;r=new ye(c,u)}else if(null!=e.children.segmentTemplate){var l=e.children.segmentTemplate;"timeline"===l.indexType?r=new Se(l,u):(u.availabilityTimeOffset=le(n.availabilityTimeOffset,e.children.baseURL,l.availabilityTimeOffset),r=new Oe(l,u))}else r=function(e,t){var n,r=e.children;if(null!=r.segmentBase){var i=r.segmentBase;n=new ge(i,t)}else if(null!=r.segmentList){var a=r.segmentList;n=new ye(a,t)}else if(null!=r.segmentTemplate){var o=r.segmentTemplate;n="timeline"===o.indexType?new Se(o,t):new Oe(o,t)}else n=new Oe({duration:Number.MAX_VALUE,timescale:1,startNumber:0,initialization:{media:""},media:""},t);return n}(t,u);null==e.attributes.bitrate?(O.a.warn("DASH: No usable bitrate found in the Representation."),i=0):i=e.attributes.bitrate;var f,d={bitrate:i,index:r,id:null!=e.attributes.id?e.attributes.id:String(e.attributes.bitrate)+(null!=e.attributes.height?"-"+e.attributes.height:"")+(null!=e.attributes.width?"-"+e.attributes.width:"")+(null!=e.attributes.mimeType?"-"+e.attributes.mimeType:"")+(null!=e.attributes.codecs?"-"+e.attributes.codecs:"")};if(null!=e.attributes.codecs?f=e.attributes.codecs:null!=t.attributes.codecs&&(f=t.attributes.codecs),null!=f&&(f="mp4a.40.02"===f?"mp4a.40.2":f,d.codecs=f),null!=e.attributes.frameRate?d.frameRate=e.attributes.frameRate:null!=t.attributes.frameRate&&(d.frameRate=t.attributes.frameRate),null!=e.attributes.height?d.height=e.attributes.height:null!=t.attributes.height&&(d.height=t.attributes.height),null!=e.attributes.mimeType?d.mimeType=e.attributes.mimeType:null!=t.attributes.mimeType&&(d.mimeType=t.attributes.mimeType),null!=e.attributes.width?d.width=e.attributes.width:null!=t.attributes.width&&(d.width=t.attributes.width),null!=t.children.contentProtections){var p=t.children.contentProtections.reduce((function(e,t){var n;if(void 0!==t.attributes.schemeIdUri&&"urn:uuid:"===t.attributes.schemeIdUri.substring(0,9)&&(n=t.attributes.schemeIdUri.substring(9).replace(/-/g,"").toLowerCase()),void 0!==t.attributes.keyId&&t.attributes.keyId.length>0&&e.keyIds.push({keyId:t.attributes.keyId,systemId:n}),void 0!==n)for(var r=t.children.cencPssh,i=0;i<r.length;i++){var a=r[i];void 0===e.initData.cenc&&(e.initData.cenc=[]),e.initData.cenc.push({systemId:n,data:a})}return e}),{keyIds:[],initData:{}});(Object.keys(p.initData).length>0||p.keyIds.length>0)&&(d.contentProtections=p)}return d}))}function xe(e,t){return e.reduce((function(e,n){var r,i,a=n.children,o=e.adaptations,u=a.essentialProperties,s=a.roles;if(Array.isArray(u)&&u.some((function(e){return"http://dashif.org/guidelines/trickmode"===e.schemeIdUri})))return e;var c,l=Array.isArray(s)&&s.some((function(e){return"main"===e.value}))&&s.some((function(e){return"urn:mpeg:dash:role:2011"===e.schemeIdUri})),f=n.children.representations,d=(null!=(i=null===(r=n.children.baseURL)||void 0===r?void 0:r.attributes.availabilityTimeOffset)?i:0)+t.availabilityTimeOffset,p={aggressiveMode:t.aggressiveMode,availabilityTimeOffset:d,baseURL:Object(y.a)(t.baseURL,void 0!==a.baseURL?a.baseURL.value:""),manifestBoundsCalculator:t.manifestBoundsCalculator,end:t.end,isDynamic:t.isDynamic,receivedTime:t.receivedTime,start:t.start,timeShiftBufferDepth:t.timeShiftBufferDepth},h=n.attributes.mimeType,v=n.attributes.codecs,b=function(e,t,n,r){function i(e,t){var n=e.split("/")[0];return Object(ue.a)(se,n)?n:"application/bif"===e?"image":"application/ttml+xml"===e?"text":"application/mp4"===e?null!=t&&null!=Object(m.a)(t,(function(e){return"urn:mpeg:dash:role:2011"===e.schemeIdUri&&Object(ue.a)(ce,e.value)}))?"text":"metadata":void 0}function a(e){switch(e.substring(0,3)){case"avc":case"hev":case"hvc":case"vp8":case"vp9":case"av1":return"video";case"vtt":return"text";case"bif":return"image"}switch(e.substring(0,4)){case"mp4a":return"audio";case"wvtt":case"stpp":return"text"}}if(null!=t){var o=i(t,r);if(null!=o)return o}if(null!=n){var u=a(n);if(null!=u)return u}for(var s=e.map((function(e){return e.attributes.mimeType})).filter((function(e){return null!=e})),c=e.map((function(e){return e.attributes.codecs})).filter((function(e){return null!=e})),l=0;l<s.length;l++){var f=s[l];if(null!=f){var d=i(f,r);if(null!=d)return d}}for(var p=0;p<c.length;p++){var h=c[p];if(null!=h){var v=a(h);if(null!=v)return v}}return"unknown"}(f,Object(N.a)(h)?h:null,Object(N.a)(v)?v:null,null!=a.roles?a.roles:null),g=Ae(f,n,p),_=n.attributes.id,E=function(e){if(null!=e.children.supplementalProperties)for(var t=e.children.supplementalProperties,n=0;n<t.length;n++){var r=t[n];if("urn:mpeg:dash:adaptation-set-switching:2016"===r.schemeIdUri&&null!=r.value)return r.value.split(",").map((function(e){return e.trim()})).filter((function(e){return e}))}return[]}(n),w=e.videoMainAdaptation;if("video"===b&&null!==w&&l){var j;(j=w.representations).push.apply(j,g),c=w.id}else{var T,S=a.accessibility;void 0!==s&&s.some((function(e){return"dub"===e.value}))&&(T=!0);var A=!("text"!==b||null==S||!function(e){return null!=e&&("urn:tva:metadata:cs:AudioPurposeCS:2007"===e.schemeIdUri&&"2"===e.value)}(S))||void 0,x=!("audio"!==b||null==S||!function(e){return null!=e&&("urn:tva:metadata:cs:AudioPurposeCS:2007"===e.schemeIdUri&&"1"===e.value)}(S))||void 0,k={id:c=function(e,t,n){if(Object(N.a)(e.attributes.id))return e.attributes.id;var r=n.type;return Object(N.a)(e.attributes.language)&&(r+="-"+e.attributes.language),!0===n.isClosedCaption&&(r+="-cc"),!0===n.isAudioDescription&&(r+="-ad"),Object(N.a)(e.attributes.contentType)&&(r+="-"+e.attributes.contentType),Object(N.a)(e.attributes.codecs)&&(r+="-"+e.attributes.codecs),Object(N.a)(e.attributes.mimeType)&&(r+="-"+e.attributes.mimeType),Object(N.a)(e.attributes.frameRate)&&(r+="-"+e.attributes.frameRate),r.length===n.type.length&&(r+=t.length>0?"-"+t[0].id:"-empty"),"adaptation-"+r}(n,g,{isClosedCaption:A,isAudioDescription:x,type:b}),representations:g,type:b};null!=n.attributes.language&&(k.language=n.attributes.language),null!=A&&(k.closedCaption=A),null!=x&&(k.audioDescription=x),!0===T&&(k.isDub=!0);var R=o[b];if(void 0===R)o[b]=[k],l&&"video"===b&&(e.videoMainAdaptation=k);else{for(var I=null,M=function(t){var n=E[t],r=e.adaptationSwitchingInfos[n];if(null!=r&&r.newID!==c&&Object(ue.a)(r.adaptationSetSwitchingIDs,_)){var i,a=Object(m.a)(R,(function(e){return e.id===n}));if(null!=a&&a.audioDescription===k.audioDescription&&a.closedCaption===k.closedCaption&&a.language===k.language)O.a.info('DASH Parser: merging "switchable" AdaptationSets',_,n),(i=a.representations).push.apply(i,k.representations),I=a}},C=0;C<E.length;C++)M(C);if(l&&"video"===b)if(null==I)R.unshift(k),e.videoMainAdaptation=k;else{var D=R.indexOf(I);D<0?R.unshift(k):0!==D&&(R.splice(D,1),R.unshift(I)),e.videoMainAdaptation=I}else null===I&&R.push(k)}}return null!=_&&null==e.adaptationSwitchingInfos[_]&&(e.adaptationSwitchingInfos[_]={newID:c,adaptationSetSwitchingIDs:E}),{adaptations:o,adaptationSwitchingInfos:e.adaptationSwitchingInfos,videoMainAdaptation:e.videoMainAdaptation}}),{adaptations:{},videoMainAdaptation:null,adaptationSwitchingInfos:{}}).adaptations}var ke=Object(g.a)();function Re(e,t){var n,r,i=[],a=function(e,t){var n=[];return e.forEach((function(r,i){var a,o;if(null!=r.attributes.start)a=r.attributes.start;else if(0===i)a=t.isDynamic&&null!=t.availabilityStartTime?t.availabilityStartTime:0;else{var u=n[n.length-1];if(null==u||null==u.periodEnd)throw new Error("Missing start time when parsing periods.");a=u.periodEnd}var s=e[i+1];null!=r.attributes.duration?o=r.attributes.duration:i===e.length-1?o=t.duration:null!=s.attributes.start&&(o=s.attributes.start-a);var c=null!=o?a+o:void 0;n.push({periodStart:a,periodDuration:o,periodEnd:c})})),n}(e,t);if(a.length!==e.length)throw new Error("MPD parsing error: the time information are incoherent.");var o=t.isDynamic,u=t.timeShiftBufferDepth,s=new oe({isDynamic:o,timeShiftBufferDepth:u});o||null==t.duration||s.setLastPosition(t.duration);for(var c=e.length-1;c>=0;c--){var l=e[c],f=t.xlinkInfos.get(l),d=Object(y.a)(t.baseURL,void 0!==l.children.baseURL?l.children.baseURL.value:""),p=a[c],h=p.periodStart,v=p.periodDuration,b=p.periodEnd,m=void 0;null==l.attributes.id?(O.a.warn("DASH: No usable id found in the Period. Generating one."),m="gen-dash-period-"+ke()):m=l.attributes.id;var g=void 0!==f?f.receivedTime:t.receivedTime,_=(null!=(r=null===(n=l.children.baseURL)||void 0===n?void 0:n.attributes.availabilityTimeOffset)?r:0)+t.availabilityTimeOffset,E={aggressiveMode:t.aggressiveMode,availabilityTimeOffset:_,baseURL:d,manifestBoundsCalculator:s,end:b,isDynamic:o,receivedTime:g,start:h,timeShiftBufferDepth:u},w=xe(l.children.adaptations,E),j={id:m,start:h,end:b,duration:v,adaptations:w};if(i.unshift(j),!s.lastPositionIsKnown()){var T=Me(w);if(o)if("number"==typeof T){var S=performance.now()/1e3;s.setLastPosition(T,S)}else{var A=Ie(t,h);if(void 0!==A){var x=A[0],k=A[1];s.setLastPosition(x,k)}}else"number"==typeof T&&s.setLastPosition(T)}}if(t.isDynamic&&!s.lastPositionIsKnown()){var R=Ie(t,0);if(void 0!==R){var I=R[0],M=R[1];s.setLastPosition(I,M)}}return function(e){if(0===e.length)return[];for(var t=[e[0]],n=1;n<e.length;n++){for(var r=e[n],i=t[t.length-1];null==i.duration||i.start+i.duration>r.start;)O.a.warn("DASH: Updating overlapping Periods.",i,r),i.duration=r.start-i.start,i.end=r.start,i.duration<=0&&(t.pop(),i=t[t.length-1]);t.push(r)}return t}(i)}function Ie(e,t){if(null!=e.clockOffset){var n=e.clockOffset/1e3-e.availabilityStartTime,r=performance.now()/1e3,i=r+n;if(i>=t)return[i,r]}else{var a=Date.now()/1e3;if(a>=t)return O.a.warn("DASH Parser: no clock synchronization mechanism found. Using the system clock instead."),[a-e.availabilityStartTime,performance.now()/1e3]}}function Me(e){for(var t=null,n=!0,r=Object(ae.a)(e).filter((function(e){return null!=e})),i=Object(ie.a)(r,(function(e){return e})),a=0;a<i.length;a++)for(var o=i[a].representations,u=0;u<o.length;u++){var s=o[u].index.getLastPosition();null!==s&&(n=!1,"number"==typeof s&&(t=null==t?s:Math.max(t,s)))}return null!=t?t:n?null:void 0}var Ne=Object(g.a)();function Ce(e,t){return function e(t,n,r){var i=t.children,a=t.attributes,o=new WeakMap;if(null==n.externalClockOffset){var u="dynamic"===a.type,s=Object(m.a)(i.utcTimings,(function(e){return"urn:mpeg:dash:utc:direct:2014"===e.schemeIdUri&&null!=e.value})),c=null!=s&&null!=s.value?E(s.value):void 0,l=null==c||isNaN(c)?void 0:c;if(null!=l)n.externalClockOffset=l;else if(u&&!0!==r){var f=function(e){var t=e.children.utcTimings.filter((function(e){return"urn:mpeg:dash:utc:http-iso:2014"===e.schemeIdUri&&null!=e.value}));return t.length>0?t[0].value:void 0}(t);if(null!=f&&f.length>0)return{type:"needs-ressources",value:{ressources:[f],continue:function(r){if(1!==r.length)throw new Error("DASH parser: wrong number of loaded ressources.");return l=E(r[0].responseData),n.externalClockOffset=l,e(t,n,!0)}}}}}for(var d=[],p=0;p<i.periods.length;p++){var h=i.periods[p].attributes,v=h.xlinkHref,b=h.xlinkActuate;null!=v&&"onLoad"===b&&d.push({index:p,ressource:v})}if(0===d.length)return function(e,t,n){var r,i,a,o,u=e.children,s=e.attributes,c="dynamic"===s.type,l=Object(y.a)(Object(y.b)(null==t.url?"":t.url),void 0!==u.baseURL?u.baseURL.value:""),f=function(e,t){return"dynamic"!==e.type?0:null==e.availabilityStartTime?null==t?0:t:e.availabilityStartTime}(s,t.referenceDateTime),d=s.timeShiftBufferDepth,p=t.externalClockOffset,h=null!==(i=null===(r=u.baseURL)||void 0===r?void 0:r.attributes.availabilityTimeOffset)&&void 0!==i?i:0,v={aggressiveMode:t.aggressiveMode,availabilityStartTime:f,availabilityTimeOffset:h,baseURL:l,clockOffset:p,duration:s.duration,isDynamic:c,receivedTime:t.manifestReceivedTime,timeShiftBufferDepth:d,xlinkInfos:n},b=Re(u.periods,v),m=s.duration,g={availabilityStartTime:f,baseURL:l,clockOffset:t.externalClockOffset,id:null!=s.id?s.id:"gen-dash-manifest-"+Ne(),isLive:c,periods:b,suggestedPresentationDelay:s.suggestedPresentationDelay,transportType:"dash",uris:null==t.url?u.locations:[t.url].concat(u.locations)};null!=s.minimumUpdatePeriod&&s.minimumUpdatePeriod>0&&(g.lifetime=s.minimumUpdatePeriod);Object(_.a)(g);var O=function(e){if(0===e.periods.length)throw new Error("DASH Parser: no period available for a dynamic content");return[S(e),j(e)]}(g),E=O[0],w=O[1],T=performance.now();if(c)null!=E&&(g.minimumTime={isContinuous:null!=d,value:E,time:T}),null!=w&&(g.maximumTime={isContinuous:!0,value:w,time:T},null==E&&(g.minimumTime={isContinuous:!0,value:w,time:T}));else if(void 0!==E?g.minimumTime={isContinuous:!1,value:E,time:T}:void 0!==(null===(a=b[0])||void 0===a?void 0:a.start)&&(g.minimumTime={isContinuous:!1,value:b[0].start,time:T}),void 0!==w)g.maximumTime={isContinuous:!1,value:w,time:T};else if(void 0!==m)g.maximumTime={isContinuous:!1,value:m,time:T};else if(void 0!==b[b.length-1]){var A=b[b.length-1],x=null!=(o=A.end)?o:void 0!==A.duration?A.start+A.duration:void 0;void 0!==x&&(g.maximumTime={isContinuous:!1,value:x,time:T})}return{type:"done",value:g}}(t,n,o);return{type:"needs-ressources",value:{ressources:d.map((function(e){return e.ressource})),continue:function(r){if(r.length!==d.length)throw new Error("DASH parser: wrong number of loaded ressources.");for(var a=r.length-1;a>=0;a--){var u,s=d[a].index,c=r[a],l=c.responseData,f=c.receivedTime,p=c.sendingTime,h=c.url,v="<root>"+l+"</root>",b=(new DOMParser).parseFromString(v,"text/xml");if(null==b||0===b.children.length)throw new Error("DASH parser: Invalid external ressources");for(var m=b.children[0].children,g=[],y=0;y<m.length;y++)if(m[y].nodeType===Node.ELEMENT_NODE){var _=te(m[y]);o.set(_,{receivedTime:f,sendingTime:p,url:h}),g.push(_)}(u=i.periods).splice.apply(u,[s,1].concat(g))}return e(t,n)}}}}(function(e){return{children:ne(e.childNodes),attributes:re(e)}}(e),t)}var De=function(e,t){var n=e.documentElement;if(null==n||"MPD"!==n.nodeName)throw new Error("DASH Parser: document root should be MPD");return Ce(n,t)};function Pe(e){var t=e.aggressiveMode,n=e.referenceDateTime,r=null!=e.serverSyncInfos?e.serverSyncInfos.serverTimestamp-e.serverSyncInfos.clientTime:void 0;return function(a){var u=a.response,s=a.scheduleRequest,c=a.externalClockOffset,l=a.url,m=null==u.url?l:u.url,g="string"==typeof u.responseData?(new DOMParser).parseFromString(u.responseData,"text/xml"):u.responseData;return function t(n){if("done"===n.type){var r=new b.a(n.value,e);return Object(i.a)({manifest:r,url:m})}var a=n.value,u=a.ressources,c=a.continue,l=u.map((function(e){return s((function(){return function(e){return Object(o.a)({url:e,responseType:"text"}).pipe(Object(p.a)((function(e){return"data-loaded"===e.type})),Object(h.a)((function(e){return e.value})))}(e)}))}));return Object(d.a)(l).pipe(Object(v.a)((function(e){for(var n=[],r=0;r<e.length;r++){var i=e[r];if("string"!=typeof i.responseData)throw new Error("External DASH resources should only be strings");n.push(f()(i,{responseData:i.responseData}))}return t(c(n))})))}(De(g,{aggressiveMode:!0===t,url:m,referenceDateTime:n,externalClockOffset:null==r?c:r}))}}var Be=n(8),Le=n(146),Ue=n(86),Fe=n(23),$e=n(46),ze=n(74);function We(e,t){var n=t.segment;if(null==n.range)return Object(o.a)({url:e,responseType:"arraybuffer",sendProgressEvents:!0});if(null==n.indexRange)return Object(o.a)({url:e,headers:{Range:Object($e.a)(n.range)},responseType:"arraybuffer",sendProgressEvents:!0});if(n.range[1]+1===n.indexRange[0])return Object(o.a)({url:e,headers:{Range:Object($e.a)([n.range[0],n.indexRange[1]])},responseType:"arraybuffer",sendProgressEvents:!0});var r=Object(o.a)({url:e,headers:{Range:Object($e.a)(n.range)},responseType:"arraybuffer",sendProgressEvents:!1}),i=Object(o.a)({url:e,headers:{Range:Object($e.a)(n.indexRange)},responseType:"arraybuffer",sendProgressEvents:!1});return Object(d.a)([r,i]).pipe(Object(h.a)((function(t){var n=t[0],r=t[1],i=Object(R.i)(new Uint8Array(n.value.responseData),new Uint8Array(r.value.responseData)),a=Math.min(n.value.sendingTime,r.value.sendingTime),o=Math.max(n.value.receivedTime,r.value.receivedTime);return{type:"data-loaded",value:{url:e,responseData:i,size:n.value.size+r.value.size,duration:o-a,sendingTime:a,receivedTime:o}}})))}function Ve(e){return"video/webm"===e.mimeType||"audio/webm"===e.mimeType}var He=n(232),Ke=n(70);function Ye(e,t){var n=t.segment,r=null!=n.range?{Range:Object($e.a)(n.range)}:void 0;return Object(Ue.a)({url:e,headers:r}).pipe(Object(He.a)((function(e,t){if("data-complete"===t.type)return null!=e.partialChunk&&O.a.warn("DASH Pipelines: remaining chunk does not belong to any segment"),{event:t,completeChunks:[],partialChunk:null};var n=new Uint8Array(t.value.chunk),r=function(e){for(var t=0,n=[];t<e.length;){var r=e.subarray(t,1/0),i=Object(Ke.a)(r,1836019558);if(i<0)return[n,r];var a=t+i+Object(R.d)(e,i+t);if(a>e.length)return[n,r];var o=Object(Ke.a)(r,1835295092);if(o<0)return[n,r];var u=t+o+Object(R.d)(e,o+t);if(u>e.length)return[n,r];var s=Math.max(a,u),c=e.subarray(t,s);n.push(c),t=s}return[n,null]}(null!=e.partialChunk?Object(R.i)(e.partialChunk,n):n);return{event:t,completeChunks:r[0],partialChunk:r[1]}}),{event:null,completeChunks:[],partialChunk:null}),Object(v.a)((function(e){for(var t=[],n=0;n<e.completeChunks.length;n++)t.push({type:"data-chunk",value:{responseData:e.completeChunks[n]}});var r=e.event;if(null!=r&&"data-chunk"===r.type){var a=r.value;t.push({type:"progress",value:{duration:a.duration,size:a.size,totalSize:a.totalSize}})}else if(null!=r&&"data-complete"===r.type){var o=r.value;t.push({type:"data-chunk-complete",value:{duration:o.duration,receivedTime:o.receivedTime,sendingTime:o.sendingTime,size:o.size,status:o.status,url:o.url}})}return i.a.apply(void 0,t)})))}function Ge(e,t,n){if(t.segment.isInit)return We(e,t);var r=Ve(t.representation);if(n&&!r){if(Object(Ue.b)())return Ye(e,t);Object(Fe.a)("DASH: Your browser does not have the fetch API. You will have a higher chance of rebuffering when playing close to the live edge")}var i=t.segment;return Object(o.a)({url:e,responseType:"arraybuffer",sendProgressEvents:!0,headers:null!=i.range?{Range:Object($e.a)(i.range)}:void 0})}var qe=n(231),Xe=n(230),Qe=408125543,Ze=357149030,Je=2807729,et=17545,tt=475249515,nt=187,rt=179,it=183,at=241;function ot(e,t,n,r){for(var i=r[0],a=r[1],o=i;o<a;){var u=lt(n,o);if(null==u)return null;var s=u.value,c=o+u.length,l=ft(n,c);if(null==l)return null;var f=c+l.length,d=f+l.value;if(s===e)return[f,d];if(t.length>0)for(var p=0;p<t.length;p++){if(s===t[p])return ot(e,t.slice(p+1,t.length),n,[f,d])}o=d}return null}function ut(e,t){var n=ot(Je,[Qe,Ze],e,[t,e.length]);if(null==n)return null;var r=n[1]-n[0];return 1e9/dt(e,n[0],r)}function st(e,t){var n=ot(et,[Qe,Ze],e,[t,e.length]);if(null==n)return null;var r=n[1]-n[0];return 4===r?function(e,t){return new DataView(e.buffer).getFloat32(t)}(e,n[0]):8===r?function(e,t){return new DataView(e.buffer).getFloat64(t)}(e,n[0]):null}function ct(e,t){for(var n=1;n<=8;n++)if(e[t]>=Math.pow(2,8-n))return n}function lt(e,t){var n=ct(e,t);if(null==n)return O.a.warn("webm: unrepresentable length"),null;if(t+n>e.length)return O.a.warn("webm: impossible length"),null;for(var r=0,i=0;i<n;i++)r=e[t+i]*Math.pow(2,8*(n-i-1))+r;return{length:n,value:r}}function ft(e,t){var n=ct(e,t);if(null==n)return O.a.warn("webm: unrepresentable length"),null;if(t+n>e.length)return O.a.warn("webm: impossible length"),null;for(var r=(e[t]&(1<<8-n)-1)*Math.pow(2,8*(n-1)),i=1;i<n;i++)r=e[t+i]*Math.pow(2,8*(n-i-1))+r;return{length:n,value:r}}function dt(e,t,n){for(var r=0,i=0;i<n;i++)r=e[t+i]*Math.pow(2,8*(n-i-1))+r;return r}var pt=function(e,t,n,r){var i,a,o,u,s=Object(qe.a)(e),c=void 0!==r?r.timescale:n.timescale,l=Object(qe.d)(e);return t?null==r?null:l<0?null:{time:l,duration:s>=0?s:void 0,timescale:r.timescale}:(c===n.timescale?(o=Math.min(.9*c,null!=n.duration?n.duration/4:.25),u=n.duration):(o=Math.min(.9*c,null!=n.duration?n.duration/n.timescale*c/4:.25),u=null!=n.duration?n.duration/n.timescale*c:void 0),l>=0?(i=null!=n.timestampOffset?l+n.timestampOffset*c:l,s>=0&&(null==u||Math.abs(s-u)<=o)&&(a=s),{timescale:c,time:i,duration:a}):null)};function ht(e){var t=e.content,n=e.response,r=e.init,a=t.period,o=t.representation,s=t.segment,c=n.data,l=n.isChunked;if(null==c)return Object(i.a)({chunkData:null,chunkInfos:null,chunkOffset:0,segmentProtections:[],appendWindow:[a.start,a.end]});var f=c instanceof Uint8Array?c:new Uint8Array(c),d=s.indexRange,p=Ve(o),h=p?function(e,t){var n=ot(Qe,[],e,[t,e.length]);if(null==n)return null;var r=n[0],i=n[1],a=ut(e,r);if(null==a)return null;var o=st(e,r);if(null==o)return null;var u=ot(tt,[],e,[r,i]);if(null==u)return null;for(var s=[],c=u[0];c<u[1];){var l=ot(nt,[],e,[c,u[1]]);if(null==l)break;var f=ot(rt,[],e,[l[0],l[1]]);if(null==f)return null;var d=dt(e,f[0],f[1]-f[0]),p=ot(at,[it],e,[l[0],l[1]]);if(null==p)return null;var h=dt(e,p[0],p[1]-p[0])+r;s.push({time:d,rangeStart:h}),c=l[1]}for(var v=[],b=0;b<s.length;b++){var m=s[b];b===s.length-1?v.push({time:m.time,count:0,timescale:a,duration:0===b?o:o-m.time,range:[m.rangeStart,1/0]}):v.push({time:m.time,count:0,timescale:a,duration:s[b+1].time-m.time,range:[m.rangeStart,s[b+1].rangeStart-1]})}return v}(f,0):Object(qe.c)(f,Array.isArray(d)?d[0]:0);if(s.isInit){null!==h&&h.length>0&&o.index._addSegments(h);var v=p?ut(f,0):Object(qe.b)(f),b=null!=v&&v>0?{time:0,duration:0,timescale:v}:null;if(!p){var m=Object(Xe.a)(f);if(m.length>0)for(var g=0;g<m.length;g++){var y=m[g],_=y.systemID,O=y.data;o._addProtectionData("cenc",_,O)}}var E=o.getProtectionsInitializationData();return Object(i.a)({chunkData:f,chunkInfos:b,chunkOffset:Object(u.a)(s.timestampOffset,0),segmentProtections:E,appendWindow:[a.start,a.end]})}var w=p?null:pt(f,l,s,r);return Object(i.a)({chunkData:f,chunkInfos:w,chunkOffset:Object(u.a)(s.timestampOffset,0),segmentProtections:[],appendWindow:[a.start,a.end]})}function vt(e){return"application/mp4"===e.mimeType}var bt=n(132),mt=n(113);function gt(e){var t=e.response,n=e.content,r=e.init,a=n.period,o=n.representation,u=n.segment.timestampOffset,s=void 0===u?0:u,c=t.data,l=t.isChunked;return null==c?Object(i.a)({chunkData:null,chunkInfos:null,chunkOffset:s,segmentProtections:[],appendWindow:[a.start,a.end]}):vt(o)?function(e){var t,n=e.response,r=e.content,a=e.init,o=r.period,u=r.representation,s=r.segment,c=s.isInit,l=s.indexRange,f=s.timestampOffset,d=void 0===f?0:f,p=r.adaptation.language,h=n.data,v=n.isChunked;t="string"==typeof h?Object(R.r)(h):h instanceof Uint8Array?h:new Uint8Array(h);var b=Object(qe.c)(t,Array.isArray(l)?l[0]:0);if(c){var m=Object(qe.b)(t),g=m>0?{time:0,duration:0,timescale:m}:null;return Array.isArray(b)&&b.length>0&&u.index._addSegments(b),Object(i.a)({chunkData:null,chunkInfos:g,chunkOffset:d,segmentProtections:[],appendWindow:[o.start,o.end]})}var y,_,E=pt(t,v,s,a),w=1;null==E?v?O.a.warn("DASH: Unavailable time data for current text track."):(_=(y=s.time)+s.duration,w=s.timescale):(y=E.time,null!=E.duration?_=y+E.duration:v||(_=y+s.duration),w=E.timescale);var j,T=null==u.codec?"":u.codec;switch(T.toLowerCase()){case"stpp":case"stpp.ttml.im1t":j="ttml";break;case"wvtt":j="vtt"}if(void 0===j)throw new Error('The codec used for the subtitles "'+T+'" is not managed yet.');var S={data:Object(mt.a)(Object(bt.a)(t)),type:j,language:p,start:y,end:_,timescale:w};return Object(i.a)({chunkData:S,chunkInfos:E,chunkOffset:d,segmentProtections:[],appendWindow:[o.start,o.end]})}({response:{data:c,isChunked:l},content:n,init:r}):function(e){var t=e.response,n=e.content,r=n.adaptation,a=n.period,o=n.representation,u=n.segment,s=r.language,c=u.timestampOffset,l=void 0===c?0:c;if(u.isInit)return Object(i.a)({chunkData:null,chunkInfos:null,chunkOffset:l,segmentProtections:[],appendWindow:[a.start,a.end]});var f,d,p,h=t.data,v=t.isChunked;if("string"!=typeof h){var b=h instanceof Uint8Array?h:new Uint8Array(h);f=Object(R.g)(b)}else f=h;var m,g=1;v?O.a.warn("DASH: Unavailable time data for current text track."):(p=(d=u.time)+u.duration,g=u.timescale);var y=o.mimeType,_=void 0===y?"":y;switch(o.mimeType){case"application/ttml+xml":m="ttml";break;case"application/x-sami":case"application/smil":m="sami";break;case"text/vtt":m="vtt"}if(void 0===m){var E=o.codec;if("srt"!==(void 0===E?"":E).toLowerCase())throw new Error("could not find a text-track parser for the type "+_);m="srt"}var w={data:f,type:m,language:s,start:d,end:p,timescale:g};return Object(i.a)({chunkData:w,chunkInfos:null,chunkOffset:l,segmentProtections:[],appendWindow:[a.start,a.end]})}({response:{data:c,isChunked:l},content:n})}t.default=function(e){var t=Object(r.a)({customManifestLoader:e.manifestLoader}),n=Pe(e),a=function(e){var t=e.lowLatencyMode,n=e.segmentLoader;return!0!==e.checkMediaSegmentIntegrity?r:function(e){return r(e).pipe(Object(Le.a)((function(t){"data-loaded"!==t.type&&"data-chunk"!==t.type||null===t.value.responseData||Object(ze.a)(new Uint8Array(t.value.responseData),e.segment.isInit)})))};function r(e){var r=e.segment.mediaURL;if(null==r)return Object(i.a)({type:"data-created",value:{responseData:null}});if(t||null==n)return Ge(r,e,t);var a={adaptation:e.adaptation,manifest:e.manifest,period:e.period,representation:e.representation,segment:e.segment,transport:"dash",url:r};return new Be.a((function(i){var o=!1,u=!1,s=n(a,{reject:function(e){void 0===e&&(e={}),u||(o=!0,i.error(e))},resolve:function(e){u||(o=!0,i.next({type:"data-loaded",value:{responseData:e.data,size:e.size,duration:e.duration}}),i.complete())},progress:function(e){u||i.next({type:"progress",value:{duration:e.duration,size:e.size,totalSize:e.totalSize}})},fallback:function(){u=!0,Ge(r,e,t).subscribe(i)}});return function(){o||u||"function"!=typeof s||s()}}))}}(e);return{manifest:{loader:t,parser:n},audio:{loader:a,parser:ht},video:{loader:a,parser:ht},text:{loader:function(e){var t=e.lowLatencyMode;return!0!==e.checkMediaSegmentIntegrity?n:function(e){return n(e).pipe(Object(Le.a)((function(t){"data-loaded"!==t.type&&"data-chunk"!==t.type||null===t.value.responseData||"string"==typeof t.value.responseData||Object(ze.a)(new Uint8Array(t.value.responseData),e.segment.isInit)})))};function n(e){var n=e.segment,r=n.mediaURL,a=n.range;if(null==r)return Object(i.a)({type:"data-created",value:{responseData:null}});if(e.segment.isInit)return We(r,e);var u=vt(e.representation);if(t&&u){if(Object(Ue.b)())return Ye(r,e);Object(Fe.a)("DASH: Your browser does not have the fetch API. You will have a higher chance of rebuffering when playing close to the live edge")}var s=u?"arraybuffer":"text";return Object(o.a)({url:r,responseType:s,headers:Array.isArray(a)?{Range:Object($e.a)(a)}:null,sendProgressEvents:!0})}}(e),parser:gt},image:{loader:s,parser:c}}}},function(e,t,n){"use strict";n.r(t);var r=n(26),i=n(31),a=n(146),o=n(9),u=n(0),s=n(64),c=n(230),l=n(132),f=n(11),d=n.n(f),p=n(35),h=n(41),v=n(2),b=n(42),m=n(15),g=n(110);function y(e){var t=/00000001\d7([0-9a-fA-F]{6})/.exec(e);return null!==t&&Object(v.a)(t[1])?"avc1."+t[1]:""}var _=n(1),O=n(188);function E(e){return[{systemId:"edef8ba9-79d6-4ace-a3c8-27dcd51d21ed",privateData:Object(_.i)([8,1,18,16],e)}]}var w=n(170),j=n(109),T=n(17),S=n(108);function A(e,t,n){var r,i=e.timeline,a=e.timescale,o=i[i.length-1],u=t.timescale===a?{time:t.time,duration:t.duration}:{time:t.time/t.timescale*a,duration:t.duration/t.timescale*a};return 0!==n.timescale&&(r=n.timescale===a?n.time:n.time/n.timescale*a),!(null!=r&&u.time===r)&&(u.time>=Object(T.c)(o,null)&&(o.duration===u.duration?o.repeatCount++:e.timeline.push({duration:u.duration,start:u.time,repeatCount:0}),!0))}function x(e,t){return e.replace(/\{start time\}/g,String(t))}function k(e,t,n){var r=t-e;return r>0?Math.floor(r/n):0}function R(e,t){var n=e.repeatCount;if(null!=e.duration&&n<0){var r=void 0!==t?t.start:1/0;n=Math.ceil((r-e.start)/e.duration)-1}return n}var I=function(){function e(e,t){var n=t.aggressiveMode,r=t.isLive,i=t.segmentPrivateInfos,a=null==e.manifestReceivedTime?performance.now():e.manifestReceivedTime;if(this._index=e,this._indexValidityTime=a,this._initSegmentInfos={bitsPerSample:i.bitsPerSample,channels:i.channels,codecPrivateData:i.codecPrivateData,packetSize:i.packetSize,samplingRate:i.samplingRate,protection:i.protection},this._isAggressiveMode=n,this._isLive=r,0!==e.timeline.length){var o=e.timeline[e.timeline.length-1],u=Object(T.c)(o,null);if(this._initialScaledLastPosition=u,e.isLive){var s=a/1e3*e.timescale;this._scaledLiveGap=s-u}}}var t=e.prototype;return t.getInitSegment=function(){return{id:"init",isInit:!0,time:0,duration:0,timescale:this._index.timescale,privateInfos:{smoothInit:this._initSegmentInfos},mediaURL:null}},t.getSegments=function(e,t){this._refreshTimeline();for(var n,r=function(e,t,n){var r=void 0===e.timescale||0===e.timescale?1:e.timescale;return{up:t*r,to:(t+n)*r}}(this._index,e,t),i=r.up,a=r.to,o=this._index,u=o.timeline,s=o.timescale,c=o.media,l=this._isAggressiveMode,f=[],d=u.length,p=null==this._scaledLiveGap?void 0:performance.now()/1e3*s-this._scaledLiveGap,h=0;h<d;h++){for(var v=u[h],b=v.duration,m=v.start,g=R(v,u[h+1]),y=k(m,i,b),_=m+y*b,O=l?0:b;_<a&&y<=g&&(null==p||_+O<=p);){var E=_,w=null!=n?n+y:void 0,j={id:String(_),time:E,isInit:!1,duration:b,timescale:s,number:w,mediaURL:x(c,E)};f.push(j),_=m+ ++y*b}if(_>=a)return f;null!=n&&(n+=g+1)}return f},t.shouldRefresh=function(e,t){if(this._refreshTimeline(),!this._index.isLive)return!1;var n=this._index,r=n.timeline,i=n.timescale,a=r[r.length-1];if(void 0===a)return!1;var o=a.repeatCount,u=a.start+(o+1)*a.duration;return!(t*i<u)&&(e*i>=u||e*i>a.start+o*a.duration)},t.getFirstPosition=function(){this._refreshTimeline();var e=this._index;return 0===e.timeline.length?null:e.timeline[0].start/e.timescale},t.getLastPosition=function(){this._refreshTimeline();var e=this._index;if(null==this._scaledLiveGap){var t=e.timeline[e.timeline.length-1];return Object(T.c)(t,null)/e.timescale}for(var n=e.timeline.length-1;n>=0;n--)for(var r=e.timeline[n],i=performance.now()/1e3*e.timescale,a=r.start,o=r.duration,u=r.repeatCount;u>=0;u--){var s=a+o*(u+1);if((this._isAggressiveMode?s-o:s)<=i-this._scaledLiveGap)return s/e.timescale}},t.checkDiscontinuity=function(e){this._refreshTimeline();var t=this._index,n=t.timeline,r=t.timescale,i=void 0===r?1:r,a=e*i;if(a<=0)return-1;var o=function(e,t){for(var n=e.timeline,r=0,i=n.length;r<i;){var a=r+i>>>1;n[a].start<t?r=a+1:i=a}return r>0?r-1:r}(t,a);if(o<0||o>=n.length-1)return-1;var u=n[o];if(-1===u.duration)return-1;var s=u.start,c=Object(T.c)(u,null),l=n[o+1];return c!==l.start&&a>=s&&a<=c&&c-a<i?l.start/i:-1},t.isSegmentStillAvailable=function(e){if(e.isInit)return!0;this._refreshTimeline();var t=this._index,n=t.timeline,r=t.timescale;return Object(S.a)(e,n,r,0)},t.canBeOutOfSyncError=function(e){return!!this._isLive&&(e instanceof w.a&&(e.isHttpError(404)||e.isHttpError(412)))},t._update=function(e){var t=this._index.timeline,n=e._index.timeline,r=this._index.timescale,i=e._index.timescale;if(this._index=e._index,this._initialScaledLastPosition=e._initialScaledLastPosition,this._indexValidityTime=e._indexValidityTime,this._scaledLiveGap=e._scaledLiveGap,0!==t.length&&0!==n.length&&r===i){var a=t[t.length-1],o=n[n.length-1],s=Object(T.c)(o,null);if(!(Object(T.c)(a,null)<=s))for(var c=0;c<t.length;c++){var l=t[c],f=Object(T.c)(l,null);if(f===s)return void(this._index.timeline=this._index.timeline.concat(t.slice(c+1)));if(f>s){if(l.duration!==o.duration)return;var d=s-l.start;if(0===d)return u.a.warn("Smooth Parser: a discontinuity detected in the previous manifest has been resolved."),void(this._index.timeline=this._index.timeline.concat(t.slice(c)));if(d<0||d%l.duration!=0)return;var p=d/l.duration-1,h=l.repeatCount-p;if(h<0)return;o.repeatCount+=h;var v=t.slice(c+1);return void(this._index.timeline=this._index.timeline.concat(v))}}}},t.isFinished=function(){return!this._isLive},t._addSegments=function(e,t){this._refreshTimeline();for(var n=0;n<e.length;n++)A(this._index,e[n],t)},t._refreshTimeline=function(){if(null!=this._initialScaledLastPosition){var e=this._index,t=e.timeShiftBufferDepth,n=(performance.now()-this._indexValidityTime)/1e3+this._initialScaledLastPosition/e.timescale;if(null!=t){var r=(n-t)*e.timescale;Object(j.a)(e.timeline,r)}}},e}();function M(e,t,n){for(var r=e.firstElementChild,i=n;null!==r;)i=t(i,r.nodeName,r),r=r.nextElementSibling;return i}var N=!1,C=Object(h.a)(),D={audio:"audio/mp4",video:"video/mp4",text:"application/ttml+xml"},P={audio:"mp4a.40.2",video:"avc1.4D401E"},B={AACL:"audio/mp4",AVC1:"video/mp4",H264:"video/mp4",TTML:"application/ttml+xml+mp4"};var L=function(e){void 0===e&&(e={});var t=void 0===e.referenceDateTime?Date.UTC(1970,0,1,0,0,0,0)/1e3:e.referenceDateTime,n=void 0===e.minRepresentationBitrate?0:e.minRepresentationBitrate,r=e.serverSyncInfos,i=void 0!==r?r.serverTimestamp-r.clientTime:void 0;function a(t){var r=t.root,i=t.timescale,a=t.rootURL,o=t.protections,s=t.timeShiftBufferDepth,c=t.manifestReceivedTime,l=t.isLive,f=r.getAttribute("Timescale"),h=null===f?i:isNaN(+f)?i:+f,g=r.getAttribute("Type");if(null==g)throw new Error("StreamIndex without type.");var _=r.getAttribute("Subtype"),O=r.getAttribute("Language"),E=r.getAttribute("Url"),w=null===E?"":E;var j,T=M(r,(function(e,t,r){switch(t){case"QualityLevel":var i=function(e,t){var n=M(e,(function(e,t,n){return"CustomAttributes"===t&&e.push.apply(e,M(n,(function(e,t,n){if("Attribute"===t){var r=n.getAttribute("Name"),i=n.getAttribute("Value");null!==r&&null!==i&&e.push(r+"="+i)}return e}),[])),e}),[]);function r(t){var n=e.getAttribute(t);return null==n?void 0:n}switch(t){case"audio":var i=r("AudioTag"),a=r("BitsPerSample"),o=r("Channels"),s=r("CodecPrivateData"),c=r("FourCC"),l=r("PacketSize"),f=r("SamplingRate"),d=r("Bitrate"),p=void 0===d?0:isNaN(parseInt(d,10))?0:parseInt(d,10);return{audiotag:void 0!==i?parseInt(i,10):i,bitrate:p,bitsPerSample:void 0!==a?parseInt(a,10):a,channels:void 0!==o?parseInt(o,10):o,codecPrivateData:Object(m.a)(s,""),customAttributes:n,mimeType:void 0!==c?B[c]:c,packetSize:void 0!==l?parseInt(l,10):l,samplingRate:void 0!==f?parseInt(f,10):f};case"video":var h=r("CodecPrivateData"),v=r("FourCC"),b=r("MaxWidth"),g=r("MaxHeight"),_=r("Bitrate");return{bitrate:void 0===_?0:isNaN(parseInt(_,10))?0:parseInt(_,10),customAttributes:n,mimeType:void 0!==v?B[v]:v,codecPrivateData:Object(m.a)(h,""),codecs:y(Object(m.a)(h,"")),width:void 0!==b?parseInt(b,10):void 0,height:void 0!==g?parseInt(g,10):void 0};case"text":var O=r("CodecPrivateData"),E=r("FourCC"),w=r("Bitrate");return{bitrate:void 0===w?0:isNaN(parseInt(w,10))?0:parseInt(w,10),customAttributes:n,mimeType:void 0!==E?B[E]:E,codecPrivateData:Object(m.a)(O,"")};default:return u.a.error("Smooth Parser: Unrecognized StreamIndex type: "+t),null}}(r,g);if(null===i)return e;if("audio"===g){var a=r.getAttribute("FourCC"),o=null===a?"":a;i.codecs=function(e,t){var n;return 0!==(n="AACH"===e?5:Object(v.a)(t)?(248&parseInt(t.substring(0,2),16))>>3:2)?"mp4a.40."+n:""}(o,i.codecPrivateData)}("video"!==g||i.bitrate>n)&&e.qualityLevels.push(i);break;case"c":e.cNodes.push(r)}return e}),{qualityLevels:[],cNodes:[]}),S=T.qualityLevels,A=T.cNodes,x={timeline:(j=A,j.reduce((function(e,t,n){var r=t.getAttribute("d"),i=t.getAttribute("t"),a=t.getAttribute("r"),o=null!==a?+a-1:0,u=null!==i?+i:void 0,s=null!==r?+r:void 0;if(0===n)u=void 0===u||isNaN(u)?0:u;else{var c=e[n-1];if(null==u||isNaN(u)){if(null==c.duration||isNaN(c.duration))throw new Error("Smooth: Invalid CNodes. Missing timestamp.");u=c.start+c.duration*(c.repeatCount+1)}}if(null==s||isNaN(s)){var l=j[n+1];if(void 0===l)return e;var f=l.getAttribute("t"),d=Object(v.a)(f)?+f:null;if(null===d)throw new Error("Can't build index timeline from Smooth Manifest.");s=d-u}return e.push({duration:s,start:u,repeatCount:o}),e}),[])),timescale:h};Object(p.b)(0!==S.length,"adaptation should have at least one representation");var k=g+(Object(v.a)(O)?"_"+O:""),R=S.map((function(t){var n,r,i,u,f=Object(b.a)(a,w),p={timeline:x.timeline,timescale:x.timescale,media:(n=f,r=t.bitrate,i=t.customAttributes,n.replace(/\{bitrate\}/g,String(r)).replace(/{CustomAttributes}/g,i.length>0?i[0]:"")),isLive:l,timeShiftBufferDepth:s,manifestReceivedTime:c},h=Object(v.a)(t.mimeType)?t.mimeType:D[g],m=Object(v.a)(t.codecs)?t.codecs:P[g],y=k+"_"+(null!=g?g+"-":"")+(null!=h?h+"-":"")+(null!=m?m+"-":"")+String(t.bitrate),_=[];o.length>0&&(u=o[0],o.forEach((function(e){var t=e.keyId;e.keySystems.forEach((function(e){_.push({keyId:t,systemId:e.systemId})}))})));var O={bitsPerSample:t.bitsPerSample,channels:t.channels,codecPrivateData:t.codecPrivateData,packetSize:t.packetSize,samplingRate:t.samplingRate,protection:null!=u?{keyId:u.keyId,keySystems:u.keySystems}:void 0},E=null==e.aggressiveMode?N:e.aggressiveMode,j=new I(p,{aggressiveMode:E,isLive:l,segmentPrivateInfos:O}),T=d()({},t,{index:j,mimeType:h,codecs:m,id:y});return _.length>0&&(T.contentProtections={keyIds:_,initData:{}}),T}));if("ADVT"===_)return null;var C={id:k,type:g,representations:R,language:null==O?void 0:O};return"text"===g&&"DESC"===_&&(C.closedCaption=!0),C}return function(n,r,o){var u,s=Object(b.b)(null==r?"":r),c=n.documentElement;if(null==c||"SmoothStreamingMedia"!==c.nodeName)throw new Error("document root should be SmoothStreamingMedia");var l=c.getAttribute("MajorVersion"),f=c.getAttribute("MinorVersion");if(null===l||null===f||!/^[2]-[0-2]$/.test(l+"-"+f))throw new Error("Version should be 2.0, 2.1 or 2.2");var d,p,h=c.getAttribute("Timescale"),m=Object(v.a)(h)?isNaN(+h)?1e7:+h:1e7,y=M(c,(function(t,n,r){switch(n){case"Protection":t.protections.push(function(e,t){if(void 0===t&&(t=E),null===e.firstElementChild||"ProtectionHeader"!==e.firstElementChild.nodeName)throw new Error("Protection should have ProtectionHeader child");var n=e.firstElementChild,r=Object(_.r)(atob(null===n.textContent?"":n.textContent)),i=Object(O.a)(r),a=Object(_.k)(i),o=n.getAttribute("SystemID");return{keyId:a,keySystems:[{systemId:(null!==o?o:"").toLowerCase().replace(/\{|\}/g,""),privateData:r}].concat(t(a))}}(r,e.keySystems));break;case"StreamIndex":t.adaptationNodes.push(r)}return t}),{adaptationNodes:[],protections:[]}),w=y.protections,j=y.adaptationNodes,T="boolean"==typeof(d=c.getAttribute("IsLive"))?d:"string"==typeof d&&"TRUE"===d.toUpperCase();if(T){var S=c.getAttribute("DVRWindowLength");null==S||isNaN(+S)||0==+S||(p=+S/m)}var A,x,k,R,I,N,D=j.map((function(e){return a({root:e,rootURL:s,timescale:m,protections:w,isLive:T,timeShiftBufferDepth:p,manifestReceivedTime:o})})).filter((function(e){return null!=e})).reduce((function(e,t){var n=t.type,r=e[n];return void 0===r?e[n]=[t]:r.push(t),e}),{}),P=void 0!==D.video?D.video[0]:void 0,B=void 0!==D.audio?D.audio[0]:void 0;if(void 0!==P||void 0!==B){var L=[],U=[];if(void 0!==P){var F=P.representations[0];if(void 0!==F){var $=F.index.getFirstPosition(),z=F.index.getLastPosition();null!=$&&L.push($),null!=z&&U.push(z)}}if(void 0!==B){var W=B.representations[0];if(void 0!==W){var V=W.index.getFirstPosition(),H=W.index.getLastPosition();null!=V&&L.push(V),null!=H&&U.push(H)}}L.length>0&&(I=Math.max.apply(Math,L)),U.length>0&&(N=Math.min.apply(Math,U))}var K=c.getAttribute("Duration"),Y=null!=K&&0!=+K?+K/m:void 0;if(T){A=e.suggestedPresentationDelay,x=t;var G=performance.now();R={isContinuous:!0,value:null!=N?N:Date.now()/1e3-x,time:G},k=null==p?{isContinuous:!1,value:null!=I?I:x,time:G}:{isContinuous:!0,value:Math.min(R.value-p+5,R.value),time:G}}else k={isContinuous:!1,value:null!=I?I:0,time:performance.now()},void 0!==N?R={isContinuous:!1,value:N,time:performance.now()}:void 0!==Y&&(R={isContinuous:!1,value:k.value+Y,time:performance.now()});var q=T?0:k.value,X=T?void 0:null===(u=R)||void 0===u?void 0:u.value,Q={availabilityStartTime:void 0===x?0:x,clockOffset:i,id:"gen-smooth-manifest-"+C(),isLive:T,maximumTime:R,minimumTime:k,periods:[{adaptations:D,duration:void 0!==X?X-q:Y,end:X,id:"gen-smooth-period-0",start:q}],suggestedPresentationDelay:A,transportType:"smooth",uris:null==r?[]:[r]};return Object(g.a)(Q),Q}},U=n(22),F=n(113),$=n(23),z=n(74),W=n(111),V=n(231),H=n(56);function K(e,t,n,r){var i,a,o=[];if(r){var s=Object(l.c)(e);null!==s?(a=function(e){var t=Object(H.d)(e,3565190898,3392751253,2387879627,2655430559);if(void 0===t)return[];for(var n=[],r=t[0],i=t[4],a=0;a<i;a++){var o=void 0,u=void 0;1===r?(u=Object(_.e)(t,16*a+5),o=Object(_.e)(t,16*a+5+8)):(u=Object(_.d)(t,8*a+5),o=Object(_.d)(t,8*a+5+4)),n.push({time:u,duration:o})}return n}(s),i=function(e){var t=Object(H.d)(e,1830656773,1121273062,2162299933,2952222642);if(null!=t)return{duration:Object(_.e)(t,12),time:Object(_.e)(t,4)}}(s)):u.a.warn("smooth: could not find traf atom")}if(void 0!==a)for(var c=0;c<a.length;c++)o.push({time:a[c].time,duration:a[c].duration,timescale:n.timescale});if(void 0!==i)return{nextSegments:o,chunkInfos:{time:i.time,duration:i.duration,timescale:n.timescale}};if(t)return{nextSegments:o,chunkInfos:null};var f=Math.min(.9*n.timescale,n.duration/4),d=Object(V.a)(e);return{nextSegments:o,chunkInfos:d>=0&&(null==n.duration||Math.abs(d-n.duration)<=f)?{time:n.time,duration:d,timescale:n.timescale}:{time:n.time,duration:n.duration,timescale:n.timescale}}}var Y=n(171);function G(e,t){return Object(Y.a)("schm",Object(_.i)(4,Object(_.r)(e),Object(_.n)(t)))}function q(e){return Object(Y.a)("frma",Object(_.r)(e))}function X(e){var t=[7,[e.length]];return Object(Y.a)("stsd",_.i.apply(void 0,t.concat(e)))}function Q(e,t,n){return Object(Y.a)("tenc",Object(_.i)(6,[e,t],n))}function Z(e,t,n,r,i){var a=[e,t,n];return void 0!==i&&a.push(Object(Y.a)("senc",i),function(e){if(0===e.length)return Object(Y.a)("saiz",new Uint8Array(0));var t=Object(_.d)(e,0),n=Object(_.d)(e,4),r=new Uint8Array(n+9);r.set(Object(_.n)(n),5);for(var i,a,o=9,u=8;u<e.length;)u+=8,2==(2&t)?(a=2,u+=6*(i=Object(_.b)(e,u))+2):(i=0,a=0),r[o]=6*i+8+a,o++;return Object(Y.a)("saiz",r)}(i),function(e,t,n,r){return Object(Y.a)("saio",Object(_.i)(4,[0,0,0,1],Object(_.n)(e.length+t.length+n.length+r.length+8+8+8+8)))}(r,e,t,n)),Object(Y.b)("traf",a)}var J=n(153);function ee(e,t,n,r){var i,a=n[1]-n[0],o=t.length-a,u=Object(H.c)(e,1835295092);if(null==u)throw new Error("Smooth: Invalid ISOBMFF given");if(Object(J.a)()&&(0===o||o<=-8))return t.set(Object(_.n)(u[0]+8),r+16),e.set(t,n[0]),o<=-8&&e.set((i=-o,Object(Y.a)("free",new Uint8Array(i-8))),t.length),e;t.set(Object(_.n)(u[0]+o+8),r+16);var s=new Uint8Array(e.length+o),c=e.subarray(0,n[0]),l=e.subarray(n[1],e.length);return s.set(c,0),s.set(t,c.length),s.set(l,c.length+t.length),s}function te(e,t){var n=Object(H.c)(e,1836019558);if(null==n)throw new Error("Smooth: Invalid ISOBMFF given");var r=e.subarray(n[0]+8,n[1]),i=Object(H.a)(r,1835427940),a=Object(H.b)(r,1953653094);if(null==a||null==i)throw new Error("Smooth: Invalid ISOBMFF given");var o=Object(H.a)(a,1952868452),u=Object(H.a)(a,1953658222);if(null==o||null==u)throw new Error("Smooth: Invalid ISOBMFF given");o.set([0,0,0,1],12);var s=function(e){return Object(Y.a)("tfdt",Object(_.i)([1,0,0,0],Object(_.o)(e)))}(t),c=Z(o,s,function(e){if(0!==(1&e[11]))return e;var t=new Uint8Array(e.length+4);return t.set(Object(_.n)(e.length+4),0),t.set(e.subarray(4,16),4),t[11]=1|t[11],t.set([0,0,0,0],16),t.set(e.subarray(16,e.length),20),t}(u),i,Object(H.d)(a,2721664850,1520127764,2722393154,2086964724));return ee(e,Object(Y.b)("moof",[i,c]),n,i.length+o.length+s.length+8+8)}var ne=n(8),re=n(46);function ie(e,t,n,r){var i=[e,t,n];return r.forEach((function(e){var t=function(e,t,n){void 0===t&&(t=new Uint8Array(0)),void 0===n&&(n=new Uint8Array(0));var r,i,a=e.replace(/-/g,"");if(32!==a.length)throw new Error("HSS: wrong system id length");var o=n.length;return o>0?(r=1,i=_.i.apply(void 0,[Object(_.n)(o)].concat(n))):(r=0,i=[]),Object(Y.a)("pssh",Object(_.i)([r,0,0,0],Object(_.k)(a),i,Object(_.n)(t.length),t))}(e.systemId,e.privateData,e.keyIds);i.push(t)})),Object(Y.b)("moov",i)}function ae(e,t,n,r,i,a,o){var u,s,c,l=Object(Y.b)("stbl",[n,Object(Y.a)("stts",new Uint8Array(8)),Object(Y.a)("stsc",new Uint8Array(8)),Object(Y.a)("stsz",new Uint8Array(12)),Object(Y.a)("stco",new Uint8Array(8))]),f=function(e){return Object(Y.a)("dref",Object(_.i)(7,[1],e))}(Object(Y.a)("url ",new Uint8Array([0,0,0,1]))),d=Object(Y.b)("dinf",[f]),p=Object(Y.b)("minf",[r,d,l]),h=function(e){var t,n;switch(e){case"video":t="vide",n="VideoHandler";break;case"audio":t="soun",n="SoundHandler";break;default:t="hint",n=""}return Object(Y.a)("hdlr",Object(_.i)(8,Object(_.r)(t),12,Object(_.r)(n),1))}(t),v=function(e){return Object(Y.a)("mdhd",Object(_.i)(12,Object(_.n)(e),8))}(e),b=Object(Y.b)("mdia",[v,h,p]),m=function(e,t,n){return Object(Y.a)("tkhd",Object(_.i)(Object(_.n)(7),8,Object(_.n)(n),20,[1,0,0,0],[0,1,0,0],12,[0,1,0,0],12,[64,0,0,0],Object(_.m)(e),2,Object(_.m)(t),2))}(i,a,1),g=Object(Y.b)("trak",[m,b]),y=(u=1,Object(Y.a)("trex",Object(_.i)(4,Object(_.n)(u),[0,0,0,1],12))),O=Object(Y.b)("mvex",[y]),E=ie(function(e,t){return Object(Y.a)("mvhd",Object(_.i)(12,Object(_.n)(e),4,[0,1],2,[1,0],10,[0,1],14,[0,1],14,[64,0,0,0],26,Object(_.m)(t+1)))}(e,1),O,g,o),w=(s="isom",c=["isom","iso2","iso6","avc1","dash"],Object(Y.a)("ftyp",_.i.apply(null,[Object(_.r)(s),[0,0,0,1]].concat(c.map(_.r)))));return Object(_.i)(w,E)}function oe(e,t,n,r,i,a,o,u,s){var c,l,f=void 0===s?[]:s,d=o.split("00000001"),p=d[1],h=d[2],v=function(e,t,n){var r=2===n?1:4===n?3:0,i=e[1],a=e[2],o=e[3];return Object(Y.a)("avcC",Object(_.i)([1,i,a,o,252|r,225],Object(_.m)(e.length),e,[1],Object(_.m)(t.length),t))}(Object(_.k)(p),Object(_.k)(h),a);if(0===f.length||null==u){c=X([function(e,t,n,r,i,a,o){return Object(Y.a)("avc1",Object(_.i)(6,Object(_.m)(1),16,Object(_.m)(e),Object(_.m)(t),Object(_.m)(n),2,Object(_.m)(r),6,[0,1,i.length],Object(_.r)(i),31-i.length,Object(_.m)(a),[255,255],o))}(t,n,r,i,"AVC Coding",24,v)])}else{var b=Q(1,8,u),m=Object(Y.b)("schi",[b]),g=G("cenc",65536),y=q("avc1");c=X([function(e,t,n,r,i,a,o,u){return Object(Y.a)("encv",Object(_.i)(6,Object(_.m)(1),16,Object(_.m)(e),Object(_.m)(t),Object(_.m)(n),2,Object(_.m)(r),6,[0,1,i.length],Object(_.r)(i),31-i.length,Object(_.m)(a),[255,255],o,u))}(t,n,r,i,"AVC Coding",24,v,Object(Y.b)("sinf",[y,g,m]))])}return ae(e,"video",c,((l=new Uint8Array(12))[3]=1,Object(Y.a)("vmhd",l)),t,n,f)}var ue=[96e3,88200,64e3,48e3,44100,32e3,24e3,22050,16e3,12e3,11025,8e3,7350];function se(e,t,n,r,i,a,o,u){void 0===u&&(u=[]);var s,c,l,f=function(e,t){return Object(Y.a)("esds",Object(_.i)(4,[3,25],Object(_.m)(e),[0,4,17,64,21],11,[5,2],Object(_.k)(t),[6,1,2]))}(1,0===a.length?(s=i,c=t,l=((l=((l=(63&2)<<4)|31&ue.indexOf(s))<<4)|31&c)<<3,Object(_.f)(Object(_.m)(l))):a);return ae(e,"audio",function(){if(0===u.length||null==o)return X([function(e,t,n,r,i,a){return Object(Y.a)("mp4a",Object(_.i)(6,Object(_.m)(e),8,Object(_.m)(t),Object(_.m)(n),2,Object(_.m)(r),Object(_.m)(i),2,a))}(1,t,n,r,i,f)]);var e=Q(1,8,o),a=Object(Y.b)("schi",[e]),s=G("cenc",65536),c=q("mp4a"),l=Object(Y.b)("sinf",[c,s,a]);return X([function(e,t,n,r,i,a,o){return Object(Y.a)("enca",Object(_.i)(6,Object(_.m)(e),8,Object(_.m)(t),Object(_.m)(n),2,Object(_.m)(r),Object(_.m)(i),2,a,o))}(1,t,n,r,i,f,l)])}(),Object(Y.a)("smhd",new Uint8Array(8)),0,0,u)}function ce(e){var t,n=e.url,r=e.segment.range;return Array.isArray(r)&&(t={Range:Object(re.a)(r)}),Object(U.a)({url:n,responseType:"arraybuffer",headers:t,sendProgressEvents:!0})}var le=function(e){return function(t){var n=t.segment,i=t.representation,a=t.adaptation,o=t.period,u=t.manifest;if(n.isInit){if(void 0===n.privateInfos||null==n.privateInfos.smoothInit)throw new Error("Smooth: Invalid segment format");var s,c=n.privateInfos.smoothInit,l=c.codecPrivateData,f=void 0===l?"":l,d=c.protection,p=void 0===d?{keyId:void 0,keySystems:void 0}:d;switch(a.type){case"video":var h=i.width,v=void 0===h?0:h,b=i.height,m=void 0===b?0:b;s=oe(n.timescale,v,m,72,72,4,f,p.keyId,p.keySystems);break;case"audio":var g=c.channels,y=void 0===g?0:g,_=c.bitsPerSample,O=void 0===_?0:_,E=c.packetSize,w=void 0===E?0:E,j=c.samplingRate,T=void 0===j?0:j;s=se(n.timescale,y,O,w,T,f,p.keyId,p.keySystems);break;default:0,s=new Uint8Array(0)}return Object(r.a)({type:"data-created",value:{responseData:s}})}if(null==n.mediaURL)return Object(r.a)({type:"data-created",value:{responseData:null}});var S={adaptation:a,manifest:u,period:o,representation:i,segment:n,transport:"smooth",url:n.mediaURL};return"function"!=typeof e?ce(S):new ne.a((function(t){var n=!1,r=!1,i=e(S,{reject:function(e){void 0===e&&(e={}),r||(n=!0,t.error(e))},resolve:function(e){r||(n=!0,t.next({type:"data-loaded",value:{responseData:e.data,size:e.size,duration:e.duration}}),t.complete())},fallback:function(){r=!0,ce(S).subscribe(t)},progress:function(e){r||t.next({type:"progress",value:{duration:e.duration,size:e.size,totalSize:e.totalSize}})}});return function(){n||r||"function"!=typeof i||i()}}))}},fe=/(\.isml?)(\?token=\S+)?$/,de=/\?token=(\S+)/;function pe(e,t){return Object(v.a)(t)?e.replace(de,"?token="+t):e.replace(de,"")}function he(e){return fe.test(e)?(Object($.a)("Giving a isml URL to loadVideo is deprecated. Please give the Manifest URL directly"),e.replace(fe,"$1/manifest$2")):e}var ve=/\.wsx?(\?token=\S+)?/;function be(e,t,n){u.a.debug("Smooth Parser: update segments information.");for(var r=e.representations,i=0;i<r.length;i++){r[i].index._addSegments(t,n)}}t.default=function(e){var t=L(e),n=le(e.segmentLoader),f={customManifestLoader:e.manifestLoader},d={loader:function(t){return t.segment.isInit||!0!==e.checkMediaSegmentIntegrity?n(t):n(t).pipe(Object(a.a)((function(e){"data-loaded"!==e.type&&"data-chunk"!==e.type||null===e.value.responseData||Object(z.a)(new Uint8Array(e.value.responseData),t.segment.isInit)})))},parser:function(e){var t=e.content,n=e.response,i=t.segment,a=t.representation,o=t.adaptation,u=t.manifest,s=n.data,l=n.isChunked;if(null==s)return Object(r.a)({chunkData:null,chunkInfos:null,chunkOffset:0,segmentProtections:[],appendWindow:[void 0,void 0]});var f=s instanceof Uint8Array?s:new Uint8Array(s);if(i.isInit){var d={timescale:i.timescale,time:0,duration:0},p=Object(c.a)(f);if(p.length>0)for(var h=0;h<p.length;h++){var v=p[h],b=v.systemID,m=v.data;a._addProtectionData("cenc",b,m)}var g=a.getProtectionsInitializationData();return Object(r.a)({chunkData:s,chunkInfos:d,chunkOffset:0,segmentProtections:g,appendWindow:[void 0,void 0]})}var y=K(f,l,i,u.isLive),_=y.nextSegments,O=y.chunkInfos;if(null==O)throw new Error("Smooth Segment without time information");var E=te(f,O.time);return _.length>0&&be(o,_,O),Object(r.a)({chunkData:E,chunkInfos:O,chunkOffset:0,segmentProtections:[],appendWindow:[void 0,void 0]})}};return{manifest:{resolver:function(e){var t,n=e.url;if(null==n)return Object(r.a)({url:void 0});ve.test(n)?(Object($.a)("Giving WSX URL to loadVideo is deprecated. You should only give Manifest URLs."),t=Object(U.a)({url:pe(n,""),responseType:"document"}).pipe(Object(i.a)((function(e){var t=e.value,n=t.responseData.getElementsByTagName("media")[0].getAttribute("src");if(null===n||0===n.length)throw new Error("Invalid ISML");return n})))):t=Object(r.a)(n);var a=function(e){var t=e.match(de);if(null!==t){var n=t[1];if(void 0!==n)return n}return""}(n);return t.pipe(Object(i.a)((function(e){return{url:pe(he(e),a)}})))},loader:Object(W.a)(f),parser:function(n){var i=n.response,a=n.url,o=null==i.url?a:i.url,u="string"==typeof i.responseData?(new DOMParser).parseFromString(i.responseData,"text/xml"):i.responseData,c=i.receivedTime,l=t(u,o,c),f=new s.a(l,{representationFilter:e.representationFilter,supplementaryImageTracks:e.supplementaryImageTracks,supplementaryTextTracks:e.supplementaryTextTracks});return Object(r.a)({manifest:f,url:o})}},audio:d,video:d,text:{loader:function(t){var n=t.segment,i=t.representation;if(n.isInit||null==n.mediaURL)return Object(r.a)({type:"data-created",value:{responseData:null}});var o=function(e){return"string"==typeof e.mimeType&&e.mimeType.indexOf("mp4")>=0}(i);return o&&!0===e.checkMediaSegmentIntegrity?Object(U.a)({url:n.mediaURL,responseType:"arraybuffer",sendProgressEvents:!0}).pipe(Object(a.a)((function(e){"data-loaded"===e.type&&Object(z.a)(new Uint8Array(e.value.responseData),n.isInit)}))):Object(U.a)({url:n.mediaURL,responseType:o?"arraybuffer":"text",sendProgressEvents:!0})},parser:function(e){var t,n=e.content,i=e.response,a=n.manifest,o=n.adaptation,s=n.representation,c=n.segment,f=o.language,d=s.mimeType,p=void 0===d?"":d,h=s.codec,v=void 0===h?"":h,b=i.data,m=i.isChunked;if(c.isInit||null==b)return Object(r.a)({chunkData:null,chunkInfos:null,chunkOffset:0,segmentProtections:[],appendWindow:[void 0,void 0]});var g,y,O,E,w=null,j=1;if(p.indexOf("mp4")>=0){var T,S=K(T="string"==typeof b?Object(_.r)(b):b instanceof Uint8Array?b:new Uint8Array(b),m,c,a.isLive);t=S.nextSegments,null==(w=S.chunkInfos)?m?u.a.warn("Smooth: Unavailable time data for current text track."):(y=(g=c.time)+c.duration,j=c.timescale):(g=w.time,y=null!=w.duration?w.time+w.duration:void 0,j=w.timescale);var A=v.toLowerCase();if("application/ttml+xml+mp4"===p||"stpp"===A||"stpp.ttml.im1t"===A)E="ttml";else{if("wvtt"!==A)throw new Error("could not find a text-track parser for the type "+p);E="vtt"}var x=Object(l.a)(T);O=Object(F.a)(x)}else{var k;if("string"!=typeof b){var R=b instanceof Uint8Array?b:new Uint8Array(b);k=Object(_.g)(R)}else k=b;var I=c.time;switch(g=I,y=I+c.duration,j=c.timescale,p){case"application/x-sami":case"application/smil":E="sami";break;case"application/ttml+xml":E="ttml";break;case"text/vtt":E="vtt"}if(void 0===E){if("srt"!==v.toLowerCase())throw new Error("could not find a text-track parser for the type "+p);E="srt"}O=k}return null!=w&&Array.isArray(t)&&t.length>0&&be(o,t,w),Object(r.a)({chunkData:{type:E,data:O,language:f,timescale:j,start:g,end:y},chunkInfos:w,chunkOffset:null==g?0:g/j,segmentProtections:[],appendWindow:[void 0,void 0]})}},image:{loader:function(e){var t=e.segment;return t.isInit||null==t.mediaURL?Object(r.a)({type:"data-created",value:{responseData:null}}):Object(U.a)({url:t.mediaURL,responseType:"arraybuffer",sendProgressEvents:!0})},parser:function(e){var t=e.response,n=t.data;if(t.isChunked)throw new Error("Image data should not be downloaded in chunks");if(null===n||null==o.a.imageParser)return Object(r.a)({chunkData:null,chunkInfos:null,chunkOffset:0,segmentProtections:[],appendWindow:[void 0,void 0]});var i=o.a.imageParser(new Uint8Array(n)),a=i.thumbs;return Object(r.a)({chunkData:{data:a,start:0,end:Number.MAX_VALUE,timescale:1,type:"bif"},chunkInfos:{time:0,duration:Number.MAX_VALUE,timescale:i.timescale},chunkOffset:0,segmentProtections:[],appendWindow:[void 0,void 0]})}}}}},function(e,t,n){"use strict";n.r(t);var r=n(11),i=n.n(r),a=n(12),o=n(2),u=n(116),s=n(80),c=n(34),l=n(57),f=n(129),d=n(157),p=n(0),h=n(16);function v(e,t){return"-1px -1px "+t+" "+e+",1px -1px "+t+" "+e+",-1px 1px "+t+" "+e+",1px 1px "+t+" "+e}function b(e){var t;return null!=(t=h.b.exec(e))?"rgba("+String(parseInt(t[1],16))+","+String(parseInt(t[2],16))+","+String(parseInt(t[3],16))+","+String(parseInt(t[4],16)/255)+")":null!=(t=h.a.exec(e))?"rgba("+String(parseInt(t[1]+t[1],16))+","+String(parseInt(t[2]+t[2],16))+","+String(parseInt(t[3]+t[3],16))+","+String(parseInt(t[4]+t[4],16)/255)+")":e}var m=["color","direction","display","fontFamily","fontSize","fontStyle","fontWeight","textDecoration","textOutline","unicodeBidi","visibility","wrapOption"];function g(e,t,n){var r=t.color;Object(o.a)(r)&&(e.style.color=b(r));var i=t.backgroundColor;Object(o.a)(i)&&(e.style.backgroundColor=b(i));var a=t.textOutline;if(Object(o.a)(a)){var u=a.trim().replace(/\s+/g," ").split(" "),s=u.length;if(3===s){var c=b(u[0]),l=u[1];e.style.textShadow=v(c,l)}else if(Object(o.a)(r)&&1===s){var f=u[0];e.style.textShadow=v(r,f)}else if(2===s){var m=/^[#A-Z]/i.test(u[0]);if(m!==/^[0-9]/.test(u[0]))if(m){var g=b(u[0]),y=u[1];e.style.textShadow=v(g,y)}else if(Object(o.a)(r)){var _=u[0];e.style.textShadow=v(r,_)}}}var O=t.textDecoration;if(Object(o.a)(O))switch(O){case"noUnderline":case"noLineThrough":case"noOverline":e.style.textDecoration="none";break;case"lineThrough":e.style.textDecoration="line-through";break;default:e.style.textDecoration=O}var E=t.fontFamily;if(Object(o.a)(E))switch(E){case"proportionalSansSerif":e.style.fontFamily="Arial, Helvetica, Liberation Sans, sans-serif";break;case"monospaceSansSerif":case"sansSerif":e.style.fontFamily="sans-serif";break;case"monospaceSerif":case"default":e.style.fontFamily="Courier New, Liberation Mono, monospace";break;case"proportionalSerif":e.style.fontFamily="serif";break;default:e.style.fontFamily=E}var w=t.fontStyle;Object(o.a)(w)&&(e.style.fontStyle=w);var j=t.fontWeight;Object(o.a)(j)&&(e.style.fontWeight=j);var T=t.fontSize;Object(o.a)(T)?function(e,t){var n=t.trim().split(" ");if(0!==n.length){var r=h.c.exec(n[0]);null!==r&&("px"===r[2]||"%"===r[2]||"em"===r[2]?e.style.fontSize=r[1]+r[2]:"c"===r[2]?(e.style.position="relative",Object(d.a)(e,"proportional-style"),e.setAttribute("data-proportional-font-size",r[1])):p.a.warn("TTML Parser: unhandled fontSize unit:",r[2]))}}(e,T):(Object(d.a)(e,"proportional-style"),e.setAttribute("data-proportional-font-size","1"));var S=t.direction;Object(o.a)(S)&&(e.style.direction=S);var A=t.unicodeBidi;if(Object(o.a)(A))switch(A){case"bidiOverride":e.style.unicodeBidi="bidi-override";break;case"embed":e.style.unicodeBidi="embed";break;default:e.style.unicodeBidi="normal"}var x=t.visibility;Object(o.a)(x)&&(e.style.visibility=x),"none"===t.display&&(e.style.display="none");var k=t.wrapOption;e.style.whiteSpace="noWrap"===k?n?"nowrap":"pre":n?"normal":"pre-wrap"}function y(e,t){var n=t.extent;Object(o.a)(n)&&function(e,t){var n=t.trim();if("auto"!==n){var r=n.split(" ");if(2===r.length){var i=h.c.exec(r[0]),a=h.c.exec(r[1]);null!==i&&null!==a&&("px"===i[2]||"%"===i[2]||"em"===i[2]?e.style.width=i[1]+i[2]:"c"===i[2]?(Object(d.a)(e,"proportional-style"),e.setAttribute("data-proportional-width",i[1])):p.a.warn("TTML Parser: unhandled extent unit:",i[2]),"px"===a[2]||"%"===a[2]||"em"===a[2]?e.style.height=a[1]+a[2]:"c"===a[2]?(Object(d.a)(e,"proportional-style"),e.setAttribute("data-proportional-height",a[1])):p.a.warn("TTML Parser: unhandled extent unit:",a[2]))}}}(e,n);var r=t.writingMode;Object(o.a)(r);var i=t.overflow;e.style.overflow=Object(o.a)(i)?i:"hidden";var a=t.padding;Object(o.a)(a)&&function(e,t){var n=t.trim().split(" ");if(!(n.length<1)){var r=h.c.exec(n[0]);if(null!==r){if("px"===r[2]||"%"===r[2]||"em"===r[2]){var i=r[1]+r[2];1===n.length?e.style.padding=i:2===n.length?(e.style.paddingTop=i,e.style.paddingBottom=i):e.style.paddingTop=i}else"c"===r[2]?(Object(d.a)(e,"proportional-style"),1===n.length?(e.setAttribute("data-proportional-padding-top",r[1]),e.setAttribute("data-proportional-padding-bottom",r[1]),e.setAttribute("data-proportional-padding-left",r[1]),e.setAttribute("data-proportional-padding-right",r[1])):2===n.length?(e.setAttribute("data-proportional-padding-top",r[1]),e.setAttribute("data-proportional-padding-bottom",r[1])):e.setAttribute("data-proportional-padding-top",r[1])):p.a.warn("TTML Parser: unhandled padding unit:",r[2]);if(1!==n.length){var a=h.c.exec(n[1]);if(null!==a){if("px"===a[2]||"%"===a[2]||"em"===a[2]){var o=a[1]+a[2];n.length<4?(e.style.paddingLeft=o,e.style.paddingRight=o):e.style.paddingRight=o}else"c"===a[2]?(Object(d.a)(e,"proportional-style"),n.length<4?(e.setAttribute("data-proportional-padding-left",a[1]),e.setAttribute("data-proportional-padding-right",a[1])):e.setAttribute("data-proportional-padding-right",a[1])):p.a.warn("TTML Parser: unhandled padding unit:",a[2]);if(2!==n.length){var u=h.c.exec(n[2]);if(null!==u){if("px"===u[2]||"%"===u[2]||"em"===u[2]){var s=u[1]+u[2];e.style.paddingBottom=s}else"c"===u[2]?(Object(d.a)(e,"proportional-style"),e.setAttribute("data-proportional-padding-bottom",u[1])):p.a.warn("TTML Parser: unhandled padding unit:",u[2]);if(3!==n.length){var c=h.c.exec(n[3]);if(null!==c)if("px"===c[2]||"%"===c[2]||"em"===c[2]){var l=c[1]+c[2];e.style.paddingLeft=l}else"c"===c[2]?(Object(d.a)(e,"proportional-style"),e.setAttribute("data-proportional-padding-left",c[1])):p.a.warn("TTML Parser: unhandled padding unit:",c[2])}}}}}}}}(e,a);var u=t.origin;Object(o.a)(u)&&function(e,t){var n=t.trim();if("auto"!==n){var r=n.split(" ");if(2===r.length){var i=h.c.exec(r[0]),a=h.c.exec(r[1]);null!==i&&null!==a&&("px"===i[2]||"%"===i[2]||"em"===i[2]?(e.style.position="relative",e.style.left=i[1]+i[2]):"c"===i[2]?(e.style.position="relative",Object(d.a)(e,"proportional-style"),e.setAttribute("data-proportional-left",i[1])):p.a.warn("TTML Parser: unhandled origin unit:",i[2]),"px"===a[2]||"%"===a[2]||"em"===a[2]?(e.style.position="relative",e.style.top=a[1]+a[2]):"c"===a[2]?(e.style.position="relative",Object(d.a)(e,"proportional-style"),e.setAttribute("data-proportional-top",a[1])):p.a.warn("TTML Parser: unhandled origin unit:",a[2]))}}}(e,u);var s=t.displayAlign;if(e.style.display="flex",e.style.flexDirection="column",Object(o.a)(s))switch(s){case"before":e.style.justifyContent="flex-start";break;case"center":e.style.justifyContent="center";break;case"after":e.style.justifyContent="flex-end"}var c=t.opacity;Object(o.a)(c)&&(e.style.opacity=c);var l=t.visibility;Object(o.a)(l)&&(e.style.visibility=l),"none"===t.display&&(e.style.display="none")}function _(e,t){e.style.margin="0px";var n=t.backgroundColor;Object(o.a)(n)&&(e.style.backgroundColor=b(n));var r=t.lineHeight;Object(o.a)(r)&&function(e,t){var n=t.trim();if("auto"!==n){var r=h.c.exec(n[0]);null!==r&&("px"===r[2]||"%"===r[2]||"em"===r[2]?e.style.lineHeight=r[1]+r[2]:"c"===r[2]?(Object(d.a)(e,"proportional-style"),e.setAttribute("data-proportional-line-height",r[1])):p.a.warn("TTML Parser: unhandled lineHeight unit:",r[2]))}}(e,r);var i=t.textAlign;if(Object(o.a)(i))switch(i){case"center":e.style.textAlign="center";break;case"left":case"start":e.style.textAlign="left";break;case"right":case"end":e.style.textAlign="right"}}function O(e,t,n){var r=document.createElement("span"),i=null===e.textContent?"":e.textContent;if(n){var a=i.trim();i=a=a.replace(/\s+/g," ")}return r.innerHTML=i,r.className="rxp-texttrack-span",g(r,t,n),r}function E(e,t,n,r,a,u){var l=u.cellResolution,f=u.shouldTrimWhiteSpace,d=Object(s.a)(e,"div"),p=document.createElement("DIV");if(p.className="rxp-texttrack-region",p.setAttribute("data-resolution-columns",String(l.columns)),p.setAttribute("data-resolution-rows",String(l.rows)),y(p,a),null!==t){var h=Object(c.a)(["backgroundColor"],[].concat(d,[t]),r,n).bodyBackgroundColor;Object(o.a)(h)&&(p.style.backgroundColor=b(h))}var v=document.createElement("p");v.className="rxp-texttrack-p",_(v,a);for(var g=function(e,t,n,r,a){return function e(r,a,u,s){for(var l=r.childNodes,f=[],d=0;d<l.length;d++){var p=l[d];if("#text"===p.nodeName){var h=Object(c.a)(["backgroundColor"],u,n,t).backgroundColor;Object(o.a)(h)?a.backgroundColor=h:delete a.backgroundColor;var v=O(p,a,s);f.push(v)}else if("br"===p.nodeName){var b=document.createElement("BR");f.push(b)}else if("span"===p.nodeName&&p.nodeType===Node.ELEMENT_NODE&&p.childNodes.length>0){var g=p.getAttribute("xml:space"),y=Object(o.a)(g)?"default"===g:s,_=i()({},a,Object(c.a)(m,[p],n,t));f.push.apply(f,e(p,_,[p].concat(u),y))}}return f}(e,i()({},r),[],a)}(e,n,r,a,f),E=0;E<g.length;E++)v.appendChild(g[E]);return p.appendChild(v),p}function w(e,t,n,r,i,a,o,u){if(!e.hasAttribute("begin")&&!e.hasAttribute("end")&&/^\s*$/.test(null===e.textContent?"":e.textContent))return null;var s=o.cellResolution,c=Object(f.a)(e,o);return{start:c.start+t,end:c.end+t,element:E(e,i,r,n,a,{cellResolution:s,shouldTrimWhiteSpace:u})}}var j=["backgroundColor","color","direction","display","displayAlign","extent","fontFamily","fontSize","fontStyle","fontWeight","lineHeight","opacity","origin","overflow","padding","textAlign","textDecoration","textOutline","unicodeBidi","visibility","wrapOption","writingMode"];t.default=function(e,t){var n=[],r=(new DOMParser).parseFromString(e,"text/xml");if(null!=r){var f=r.getElementsByTagName("tt")[0];if(void 0===f)throw new Error("invalid XML");for(var d=Object(l.a)(f),p=Object(l.c)(f),h=Object(l.b)(f),v=Object(l.d)(f),b=Object(u.a)(f),m=[],g=0;g<=p.length-1;g++){var y=p[g];if(y instanceof Element){var _=y.getAttribute("xml:id");null!==_&&m.push({id:_,style:Object(c.b)(y)})}}for(var O=[],E=0;E<=h.length-1;E++){var T=h[E];if(T instanceof Element){var S=T.getAttribute("xml:id");null!==S&&function(){var e=Object(c.b)(T),t=T.getAttribute("style");if(Object(o.a)(t)){var n=Object(a.a)(m,(function(e){return e.id===t}));void 0!==n&&(e=i()({},n.style,e))}O.push({id:S,style:e})}()}}for(var A=null!==d?Object(c.a)(j,[d],m,O):Object(c.a)(j,[],m,O),x="default"===(null!==d?d.getAttribute("xml:space"):void 0)||"default"===b.spaceStyle,k=0;k<v.length;k++){var R=v[k];if(R instanceof Element){var I=Object(s.a)(R,"div"),M=i()({},A,Object(c.a)(j,[R].concat(I),m,O)),N=R.getAttribute("xml:space"),C=Object(o.a)(N)?"default"===N:x,D=w(R,t,m,O,d,M,b,C);null!==D&&n.push(D)}}}return n}},function(e,t,n){"use strict";n.r(t);var r=n(114),i=n(2),a=n(60);var o=n(128),u={white:"#ffffff",lime:"#00ff00",cyan:"#00ffff",red:"#ff0000",yellow:"#ffff00",magenta:"#ff00ff",blue:"#0000ff",black:"#000000"};function s(e){var t=Object.keys(u).reduce((function(e,t){return e[t]="color: "+u[t]+";",e["bg_"+t]="background-color: "+u[t]+";",e}),{}),n="";return e.forEach((function(e){if(e.length>=2)for(var r=1;r<e.length;r++){var a=e[r];if(Array.isArray(a.match(/::cue {/)))for(a=e[++r];Object(i.a)(a)&&!Array.isArray(a.match(/}/))&&0!==a.length;)n+=a,a=e[++r];else!function(){for(var n=[],o=a.match(/::cue\(\.?(.*?)\)(?:,| {)/);Object(i.a)(a)&&Array.isArray(o);)n.push(o[1]),o=(a=e[++r]).match(/::cue\(\.?(.*?)\)(?:,| {)/);for(var u="";Object(i.a)(a)&&!Array.isArray(a.match(/}/))&&0!==a.length;)u+=a,a=e[++r];n.forEach((function(e){void 0===t[e]?t[e]=u:t[e]+=u}))}()}})),{classes:t,global:n}}var c=n(13);function l(e,t){var n,r=["u","i","b"],a=e.nodeName.toLowerCase().split(".")[0];if(Object(c.a)(["u","i","b","c","#text"],a))if("#text"===a){var o=e.wholeText.split("\n");n=document.createElement("span");for(var u=0;u<o.length;u++)if(u>0&&n.appendChild(document.createElement("br")),o[u].length>0){var s=document.createTextNode(o[u]);n.appendChild(s)}}else{var f=e.nodeName.toLowerCase().split("."),d=[];if(f.forEach((function(e){Object(i.a)(t[e])&&d.push(t[e])})),0!==d.length){var p=document.createAttribute("style");d.forEach((function(e){p.value+=e}));var h=Object(c.a)(r,a)?a:"span";(n=document.createElement(h)).setAttributeNode(p)}else{var v=Object(c.a)(r,a)?a:"span";n=document.createElement(v)}for(var b=0;b<e.childNodes.length;b++){var m=l(e.childNodes[b],t);n.appendChild(m)}}else{n=document.createElement("span");for(var g=0;g<e.childNodes.length;g++){var y=l(e.childNodes[g],t);n.appendChild(y)}}return n}function f(e,t){var n=e.start,r=e.end,a=e.header,o=e.payload,u=document.createElement("div"),s=document.createAttribute("style");s.value="width:100%;height:100%;display:flex;flex-direction:column;justify-content:flex-end;align-items:center;",u.setAttributeNode(s);var c=document.createElement("p"),f=document.createAttribute("style");f.value="text-align:center",c.setAttributeNode(f);var d=document.createElement("span"),p=document.createAttribute("style");p.value="background-color:rgba(0,0,0,0.8);color:white;",d.setAttributeNode(p);var h=t.global,v=t.classes,b=[h,Object(i.a)(a)?v[a]:void 0].filter((function(e){return void 0!==e})).join("");return p.value+=b,d.setAttributeNode(p),function(e,t){for(var n=e.replace(/<[0-9]{2}:[0-9]{2}.[0-9]{3}>/,"").replace(/<([u,i,b,c])(\..*?)?(?: .*?)?>(.*?)<\/\1>/g,"<$1$2>$3</$1$2>"),r=(new DOMParser).parseFromString(n,"text/html").body.childNodes,i=[],a=0;a<r.length;a++)i.push(l(r[a],t));return i}(o.join("\n"),v).forEach((function(e){d.appendChild(e)})),u.appendChild(c),c.appendChild(d),{start:n,end:r,element:u}}t.default=function(e,t){var n=e.split(/\r\n|\n|\r/g),u=[];if(null===n[0].match(/^WEBVTT( |\t|\n|\r|$)/))throw new Error("Can't parse WebVTT: Invalid File.");for(var c=Object(a.b)(n),l=function(e,t){for(var n=[],r=t;r<e.length;r++)if(Object(a.d)(e,r)){var o=r;for(r++;Object(i.a)(e[r]);)r++;var u=e.slice(o,r);n.push(u)}else if(Object(i.a)(e[r]))for(;Object(i.a)(e[r]);)r++;return n}(n,c),d=Object(r.a)(n,c),p=s(l),h=0;h<d.length;h++){var v=Object(o.a)(d[h],t);if(null!=v){var b=f(v,p);u.push(b)}}return u}},function(e,t,n){"use strict";n.r(t);var r=n(11),i=n.n(r),a=n(26),o=n(224),u=n(179),s=n(31),c=n(48),l=n(9),f=n(64),d=n(65),p=n(229),h=n(41),v=function(){function e(e,t,n,r){this._wrappedIndex=e,this._timeOffset=t[0],this._contentEnd=t[1],this._transport=n,this._baseContentInfos=r}var t=e.prototype;return t.getInitSegment=function(){var e=this._wrappedIndex.getInitSegment();return null===e?null:(void 0===e.privateInfos&&(e.privateInfos={}),e.privateInfos.metaplaylistInfos={transportType:this._transport,baseContent:this._baseContentInfos,contentStart:this._timeOffset,contentEnd:this._contentEnd},e)},t.getSegments=function(e,t){var n=this;return this._wrappedIndex.getSegments(e-this._timeOffset,t).map((function(e){return void 0===e.privateInfos&&(e.privateInfos={}),e.privateInfos.metaplaylistInfos={transportType:n._transport,baseContent:n._baseContentInfos,contentStart:n._timeOffset,contentEnd:n._contentEnd},e.time+=n._timeOffset*e.timescale,e}))},t.shouldRefresh=function(){return!1},t.getFirstPosition=function(){var e=this._wrappedIndex.getFirstPosition();return null!=e?e+this._timeOffset:void 0},t.getLastPosition=function(){var e=this._wrappedIndex.getLastPosition();return null!=e?e+this._timeOffset:void 0},t.isSegmentStillAvailable=function(e){var t=this._timeOffset*e.timescale,n=i()({},e,{time:e.time-t});return this._wrappedIndex.isSegmentStillAvailable(n)},t.canBeOutOfSyncError=function(e){return this._wrappedIndex.canBeOutOfSyncError(e)},t.checkDiscontinuity=function(e){return this._wrappedIndex.checkDiscontinuity(e-this._timeOffset)},t.isFinished=function(){return this._wrappedIndex.isFinished()},t._update=function(t){if(!(t instanceof e))throw new Error("A MetaPlaylist can only be updated with another MetaPlaylist");this._wrappedIndex._update(t._wrappedIndex)},t._addSegments=function(e,t){return this._wrappedIndex._addSegments(e,t)},e}(),b=Object(h.a)();function m(e){return e.replace(/_/g,"_")}var g=function(e,t){var n;if("object"==typeof e&&null!=e)n=e;else{if("string"!=typeof e)throw new Error("MPL Parser: Parser input must be either a string or the MetaPlaylist data directly.");try{n=JSON.parse(e)}catch(e){throw new Error("MPL Parser: Bad MetaPlaylist file. Expected JSON.")}}var r=n,i=r.contents,a=r.version;if("MPL"!==r.type)throw new Error("MPL Parser: Bad MetaPlaylist. The `type` property is not set to `MPL`");if("0.1"!==a)throw new Error("MPL Parser: Bad MetaPlaylist version");if(null==i||0===i.length)throw new Error("MPL Parser: No content found.");for(var o=[],u=0;u<i.length;u++){var s=i[u];if(null==s.url||null==s.startTime||null==s.endTime||null==s.transport)throw new Error("MPL Parser: Malformed content.");o.push({url:s.url,transportType:s.transport})}var c=n;return{type:"needs-manifest-loader",value:{ressources:o,continue:function(e){return{type:"done",value:function(e,t,n){for(var r,i=n.url,a=n.serverSyncInfos,o=void 0!==a?a.serverTimestamp-a.clientTime:void 0,u=Object(h.a)(),s=Object(h.a)(),c=e.contents,l=c.length>0?c[0].startTime:0,f=c.length>0?c[c.length-1].endTime:0,g=!0===e.dynamic,y=null,_=null,O=[],E=function(e){var n=c[e];y=null!==y?Math.min(y,n.startTime):n.startTime,_=null!==_?Math.max(_,n.endTime):n.endTime;var r=t[e];if(r.periods.length<=0)return"continue";for(var i=n.startTime-r.periods[0].start,a=n.endTime,o=[],l=function(e){var t,c=r.periods[e],l=d.a.reduce((function(e,t){var o=c.adaptations[t];if(null==o)return e;for(var u=[],s=0;s<o.length;s++){for(var l=o[s],f=[],d=0;d<l.representations.length;d++){var p=l.representations[d],h={manifest:r,period:c,adaptation:l,representation:p},b=new v(p.index,[i,a],n.transport,h);f.push({bitrate:p.bitrate,index:b,id:p.id,height:p.height,width:p.width,mimeType:p.mimeType,frameRate:p.frameRate,codecs:p.codec,contentProtections:p.contentProtections})}u.push({id:l.id,representations:f,type:l.type,audioDescription:l.isAudioDescription,closedCaption:l.isClosedCaption,isDub:l.isDub,language:l.language}),e[t]=u}return e}),{}),f=(void 0===n.textTracks?[]:n.textTracks).map((function(e){var t="gen-text-ada-"+u(),n="gen-text-rep-"+s();return{id:t,type:"text",language:e.language,closedCaption:e.closedCaption,manuallyAdded:!0,representations:[{bitrate:0,id:n,mimeType:e.mimeType,codecs:e.codecs,index:new p.a({media:e.url})}]}}),[]);f.length>0&&(null==l.text?l.text=f:(t=l.text).push.apply(t,f));var h={id:m(r.id)+"_"+m(c.id),adaptations:l,duration:c.duration,start:i+c.start};o.push(h)},f=0;f<r.periods.length;f++)l(f);for(var h=o.length-1;h>=0;h--){var b=o[h];b.start>=n.endTime?o.splice(h,1):null!=b.duration?b.start+b.duration>n.endTime&&(b.duration=n.endTime-b.start):h===o.length-1&&(b.duration=n.endTime-b.start)}O.push.apply(O,o)},w=0;w<c.length;w++)E(w);if(!g){if(null===_||null===y)throw new Error("MPL Parser: can't define duration of manifest.");r=_-y}var j=performance.now();return{availabilityStartTime:0,clockOffset:o,suggestedPresentationDelay:10,duration:r,id:"gen-metaplaylist-man-"+b(),periods:O,transportType:"metaplaylist",isLive:g,uris:null==i?[]:[i],maximumTime:{isContinuous:!1,value:f,time:j},minimumTime:{isContinuous:!1,value:l,time:j},lifetime:e.pollInterval}}(c,e,t)}}}}},y=n(22),_=n(112);function O(e){var t=e.url;if(null==t)throw new Error("Cannot perform HTTP(s) request. URL not known");return Object(y.a)({url:t,responseType:"text"})}function E(e,t){if(null==e.privateInfos||null==e.privateInfos.metaplaylistInfos)throw new Error("MetaPlaylist: missing private infos");var n=e.privateInfos.metaplaylistInfos.baseContent,r=n.manifest,a=n.period,o=n.adaptation,u=n.representation,s=e.time<0?e.time:e.time-t*e.timescale;return{manifest:r,period:a,adaptation:o,representation:u,segment:i()({},e,{time:s})}}function w(e,t,n){return{init:e.init,response:e.response,content:E(t,n)}}function j(e,t,n){var r=e[t];if(null!=r)return r;var i=l.a.transports[t];if(null==i)throw new Error("MetaPlaylist: Unknown transport "+t+".");var a=i(n);return e[t]=a,a}function T(e){var t=e.privateInfos;if(null==t||null==t.metaplaylistInfos)throw new Error("MetaPlaylist: Undefined transport for content for metaplaylist.");return t.metaplaylistInfos}t.default=function(e){var t={},n=function(e){var t=e.customManifestLoader;return"function"!=typeof t?O:Object(_.a)(t,O)}({customManifestLoader:e.manifestLoader}),r=i()({},e,{manifestLoader:void 0,supplementaryTextTracks:[],supplementaryImageTracks:[]});function l(e){var n=T(e).transportType;return j(t,n,r)}function d(e,t,n,r){var i=r.chunkData,a=r.chunkInfos,o=r.chunkOffset,u=r.segmentProtections,s=r.appendWindow,c=o+e;if(null==i)return{chunkData:null,chunkInfos:a,chunkOffset:c,segmentProtections:u,appendWindow:[void 0,void 0]};null!==a&&a.time>-1&&(a.time+=t);var l,f=null!=s[0]?Math.max(s[0]+e,e):e;return null!=s[1]?l=null!=n?Math.min(s[1]+e,n):s[1]+e:null!=n&&(l=n),{chunkData:i,chunkInfos:a,chunkOffset:c,segmentProtections:u,appendWindow:[f,l]}}return{manifest:{loader:n,parser:function(n){var i=n.response,l=n.url,d=n.scheduleRequest,p=n.externalClockOffset,h=null==i.url?l:i.url,v=i.responseData,b={url:h,serverSyncInfos:e.serverSyncInfos};return function n(i){if("done"===i.type){var l=new f.a(i.value,e);return Object(a.a)({manifest:l})}var h=i.value.ressources.map((function(e){var n=j(t,e.transportType,r);if(null==n)throw new Error("MPL: Unrecognized transport.");return d((function(){return n.manifest.loader({url:e.url}).pipe(Object(u.a)((function(e){return"data-loaded"===e.type})),Object(s.a)((function(e){return e.value})))})).pipe(Object(c.a)((function(t){return n.manifest.parser({response:t,url:e.url,scheduleRequest:d,externalClockOffset:p}).pipe(Object(s.a)((function(e){return e.manifest})))})))}));return Object(o.a)(h).pipe(Object(c.a)((function(e){return n(i.value.continue(e))})))}(g(v,b))}},audio:{loader:function(e){var t=e.segment,n=e.period;return l(t).audio.loader(E(t,n.start))},parser:function(e){var t=e.init,n=e.content.segment,r=T(n),i=r.contentStart,a=r.contentEnd,o=i*(null!=t?t.timescale:n.timescale);return l(n).audio.parser(w(e,n,i)).pipe(Object(s.a)((function(e){return d(i,o,a,e)})))}},video:{loader:function(e){var t=e.segment,n=e.period;return l(t).video.loader(E(t,n.start))},parser:function(e){var t=e.init,n=e.content.segment,r=T(n),i=r.contentStart,a=r.contentEnd,o=i*(null!=t?t.timescale:n.timescale);return l(n).video.parser(w(e,n,i)).pipe(Object(s.a)((function(e){return d(i,o,a,e)})))}},text:{loader:function(e){var t=e.segment,n=e.period;return l(t).text.loader(E(t,n.start))},parser:function(e){var t=e.init,n=e.content.segment,r=T(n),i=r.contentStart,a=r.contentEnd,o=i*(null!=t?t.timescale:n.timescale);return l(n).text.parser(w(e,n,i)).pipe(Object(s.a)((function(e){return d(i,o,a,e)})))}},image:{loader:function(e){var t=e.segment,n=e.period;return l(t).image.loader(E(t,n.start))},parser:function(e){var t=e.init,n=e.content.segment,r=T(n),i=r.contentStart,a=r.contentEnd,o=i*(null!=t?t.timescale:n.timescale);return l(n).image.parser(w(e,n,i)).pipe(Object(s.a)((function(e){return d(i,o,a,e)})))}}}}},function(e,t,n){"use strict";n.r(t);var r=n(85),i=n(216),a=n(130),o=n(26),u=n(45),s=n(175),c=n(233),l=n(176),f=n(177),d=n(7),p=n(156),h=n(3),v=n(0),b=n(81),m=.2;function g(e,t){return Math.abs(e-t)<=m}function y(e,t){for(var n=0;n<e.length;n++){if(t<e[n].end)return e.slice(0,n)}return e.slice()}function _(e,t){for(var n=0;n<e.length;n++){if(e[n].start>t)return e.slice(n,e.length)}return[]}function O(e,t,n){var r=Math.max(e.start,t),i=y(e.cues,t),a={start:e.start,end:r,cues:i},o=Math.min(n,e.end),u=_(e.cues,n);return[a,{start:o,end:e.end,cues:u}]}var E=function(){function e(){this._cuesBuffer=[]}var t=e.prototype;return t.get=function(e){for(var t=this._cuesBuffer,n=t.length-1;n>=0;n--)for(var r=t[n].cues,i=r.length-1;i>=0;i--){var a=r[i];if(e>=a.start)return e<a.end?a:void 0}},t.remove=function(e,t){for(var n=Math.max(e,t),r=this._cuesBuffer,i=r.length,a=0;a<i;a++)if(r[a].end>e){var o=r[a];if(o.start>=n)return;if(o.end>=n){var u=O(o,e,n),s=u[0],c=u[1];return this._cuesBuffer[a]=s,void r.splice(a+1,0,c)}o.cues=y(o.cues,e),o.end=Math.max(e,o.start);for(var l=a+1;l<i;l++){var f=r[a];if(n<=f.end)return r.splice(a+1,l-(a+1)),void(n>f.start&&(f.cues=_(f.cues,n),f.start=n))}return void r.splice(a+1,r.length-(a+1))}},t.insert=function(e,t,n){for(var r=this._cuesBuffer,i={start:t,end:n,cues:e},a=0;a<r.length;a++){var o=r[a];if(t<o.end){if(g(t,o.start)){if(g(n,o.end))return void(r[a]=i);if(n<o.end)return o.cues=_(o.cues,n),o.start=n,void r.splice(a,0,i);do{r.splice(a,1),o=r[a]}while(void 0!==o&&n>o.end);return void 0===o||g(n,o.end)?void(r[a]=i):(o.cues=_(o.cues,n),o.start=n,void r.splice(a,0,i))}if(t<o.start)return n<o.start?void r.splice(a,0,i):g(n,o.start)?(o.start=n,void r.splice(a,0,i)):(o.cues=_(o.cues,n),o.start=n,void r.splice(a,0,i));if(n>o.end||g(n,o.end))return o.cues=y(o.cues,t),o.end=t,void r.splice(a+1,0,i);var u=O(o,t,n),s=u[0],c=u[1];return this._cuesBuffer[a]=s,r.splice(a+1,0,i),void r.splice(a+2,0,c)}}r.push(i)},e}(),w=n(9);var j=d.a.onEnded$,T=d.a.onSeeked$,S=d.a.onSeeking$,A=h.a.MAXIMUM_HTML_TEXT_TRACK_UPDATE_INTERVAL,x=h.a.TEXT_TRACK_SIZE_CHECKS_INTERVAL;function k(e,t){try{e.removeChild(t)}catch(e){v.a.warn("HTSB: Can't remove text track: not in the element.")}}var R=function(e){var t,n;function d(t,n){var d;return v.a.debug("HTSB: Creating html text track SourceBuffer"),(d=e.call(this)||this)._videoElement=t,d._textTrackElement=n,d._clearSizeUpdates$=new u.a,d._destroy$=new u.a,d._buffer=new E,d._currentCue=null,function(e){var t=S(e),n=T(e),u=j(e),d=Object(r.a)(n,u),p=Object(i.a)(A).pipe(Object(s.a)(null));return d.pipe(Object(s.a)(null),Object(c.a)(Object(a.a)(p.pipe(Object(l.a)(!0),Object(f.a)(t)),Object(o.a)(!1))))}(d._videoElement).pipe(Object(f.a)(d._destroy$)).subscribe((function(e){if(e){var t=Math.max(d._videoElement.currentTime-A/2e3,0),n=d._buffer.get(t);void 0===n?d._hideCurrentCue():d._displayCue(n.element)}else d._hideCurrentCue()})),d}n=e,(t=d).prototype=Object.create(n.prototype),t.prototype.constructor=t,t.__proto__=n;var h=d.prototype;return h._append=function(e){v.a.debug("HTSB: Appending new html text tracks",e);var t,n,r=e.timescale,i=e.start,a=e.end,o=e.data,u=e.type,s=e.language,c=null!=i?i/r:void 0,l=null!=a?a/r:void 0,f=function(e,t,n,r){v.a.debug("HTSB: Finding parser for html text tracks:",e);var i=w.a.htmlTextTracksParsers[e];if("function"!=typeof i)throw new Error("no parser found for the given text track");v.a.debug("HTSB: Parser found, parsing...");var a=i(t,n,r);return v.a.debug("HTTB: Parsed successfully!",a),a}(u,o,this.timestampOffset,s);if(0!==this.appendWindowStart&&this.appendWindowEnd!==1/0){for(var d=0;d<f.length&&f[d].end<=this.appendWindowStart;)d++;for(f.splice(0,d),d=0;d<f.length&&f[d].start<this.appendWindowStart;)f[d].start=this.appendWindowStart,d++;for(d=f.length-1;d>=0&&f[d].start>=this.appendWindowEnd;)d--;for(f.splice(d,f.length),d=f.length-1;d>=0&&f[d].end>this.appendWindowEnd;)f[d].end=this.appendWindowEnd,d--}if(null!=c)t=Math.max(this.appendWindowStart,c);else{if(f.length<=0)return void v.a.warn("HTSB: Current text tracks have no cues nor start time. Aborting");v.a.warn("HTSB: No start time given. Guessing from cues."),t=f[0].start}if(null!=l)n=Math.min(this.appendWindowEnd,l);else{if(f.length<=0)return void v.a.warn("HTSB: Current text tracks have no cues nor end time. Aborting");v.a.warn("HTSB: No end time given. Guessing from cues."),n=f[f.length-1].end}n<=t?v.a.warn("HTSB: Invalid text track appended: ","the start time is inferior or equal to the end time."):(this._buffer.insert(f,t,n),this.buffered.insert(t,n))},h._remove=function(e,t){v.a.debug("HTSB: Removing html text track data",e,t),this._buffer.remove(e,t),this.buffered.remove(e,t)},h._abort=function(){v.a.debug("HTSB: Aborting html text track SourceBuffer"),this._hideCurrentCue(),this._remove(0,1/0),this._destroy$.next(),this._destroy$.complete()},h._hideCurrentCue=function(){this._clearSizeUpdates$.next(),null!==this._currentCue&&(k(this._textTrackElement,this._currentCue.element),this._currentCue=null)},h._displayCue=function(e){var t=this;if(null===this._currentCue||this._currentCue.element!==e){this._clearSizeUpdates$.next(),null!==this._currentCue&&k(this._textTrackElement,this._currentCue.element);var n=function(e){var t=e.getAttribute("data-resolution-rows"),n=e.getAttribute("data-resolution-columns");if(null===t||null===n)return null;var r=parseInt(t,10),i=parseInt(n,10);return null===r||null===i?null:{rows:r,columns:i}}(e);this._currentCue={element:e,resolution:n},null!==n&&Object(p.a)(this._textTrackElement,x).pipe(Object(f.a)(this._clearSizeUpdates$),Object(f.a)(this._destroy$)).subscribe((function(e){var n=e.height,r=e.width;null!==t._currentCue&&null!==t._currentCue.resolution&&(function(e,t,n,r){for(var i=[t/n.columns,e/n.rows],a=r.getElementsByClassName("proportional-style"),o=0;o<a.length;o++){var u=a[o];if(u instanceof HTMLElement){var s=u.getAttribute("data-proportional-font-size");null===s||isNaN(+s)||(u.style.fontSize=String(+s*i[1])+"px");var c=u.getAttribute("data-proportional-width");null===c||isNaN(+c)||(u.style.width=String(+c*i[0])+"px");var l=u.getAttribute("data-proportional-height");null===l||isNaN(+l)||(u.style.height=String(+l*i[1])+"px");var f=u.getAttribute("data-proportional-line-height");null===f||isNaN(+f)||(u.style.lineHeight=String(+f*i[1])+"px");var d=u.getAttribute("data-proportional-left");null===d||isNaN(+d)||(u.style.left=String(+d*i[0])+"px");var p=u.getAttribute("data-proportional-top");null===p||isNaN(+p)||(u.style.top=String(+p*i[1])+"px");var h=u.getAttribute("data-proportional-padding-top");null===h||isNaN(+h)||(u.style.paddingTop=String(+h*i[1])+"px");var v=u.getAttribute("data-proportional-padding-bottom");null===v||isNaN(+v)||(u.style.paddingBottom=String(+v*i[1])+"px");var b=u.getAttribute("data-proportional-padding-left");null===b||isNaN(+b)||(u.style.paddingLeft=String(+b*i[0])+"px");var m=u.getAttribute("data-proportional-padding-right");null===m||isNaN(+m)||(u.style.paddingRight=String(+m*i[0])+"px")}}return a.length>0}(n,r,t._currentCue.resolution,t._currentCue.element)||t._clearSizeUpdates$.next())})),this._textTrackElement.appendChild(e)}},d}(b.a);t.default=R},function(e,t,n){"use strict";n.r(t);var r=n(154),i=n(0),a=n(24);function o(e,t){if(a.a&&function(e,t){for(var n=e.activeCues,r=0;r<n.length;r++)if(n[r]===t)return!0;return!1}(e,t)){var n=e.mode;e.mode="hidden";try{e.removeCue(t)}catch(e){i.a.warn("Compat: Could not remove cue from text track.")}e.mode=n}else try{e.removeCue(t)}catch(e){i.a.warn("Compat: Could not remove cue from text track.")}}var u=n(81),s=n(9);var c=function(e){var t,n;function a(t,n){var a;i.a.debug("NTSB: Creating native text track SourceBuffer"),a=e.call(this)||this;var o=Object(r.a)(t,n),u=o.track,s=o.trackElement;return a._videoElement=t,a._track=u,a._trackElement=s,a}n=e,(t=a).prototype=Object.create(n.prototype),t.prototype.constructor=t,t.__proto__=n;var u=a.prototype;return u._append=function(e){i.a.debug("NTSB: Appending new native text tracks",e);var t,n,r=e.timescale,a=e.start,o=e.end,u=e.data,c=e.type,l=e.language,f=null!=a?a/r:void 0,d=null!=o?o/r:void 0,p=function(e,t,n,r){i.a.debug("NTSB: Finding parser for native text tracks:",e);var a=s.a.nativeTextTracksParsers[e];if("function"!=typeof a)throw new Error("no parser found for the given text track");i.a.debug("NTSB: Parser found, parsing...");var o=a(t,n,r);return i.a.debug("NTSB: Parsed successfully!",o),o}(c,u,this.timestampOffset,l);if(0!==this.appendWindowStart&&this.appendWindowEnd!==1/0){for(var h=0;h<p.length&&p[h].endTime<=this.appendWindowStart;)h++;for(p.splice(0,h),h=0;h<p.length&&p[h].startTime<this.appendWindowStart;)p[h].startTime=this.appendWindowStart,h++;for(h=p.length-1;h>=0&&p[h].startTime>=this.appendWindowEnd;)h--;for(p.splice(h,p.length),h=p.length-1;h>=0&&p[h].endTime>this.appendWindowEnd;)p[h].endTime=this.appendWindowEnd,h--}if(null!=f)t=Math.max(this.appendWindowStart,f);else{if(p.length<=0)return void i.a.warn("NTSB: Current text tracks have no cues nor start time. Aborting");i.a.warn("NTSB: No start time given. Guessing from cues."),t=p[0].startTime}if(null!=d)n=Math.min(this.appendWindowEnd,d);else{if(p.length<=0)return void i.a.warn("NTSB: Current text tracks have no cues nor end time. Aborting");i.a.warn("NTSB: No end time given. Guessing from cues."),n=p[p.length-1].endTime}if(n<=t)i.a.warn("NTSB: Invalid text track appended: ","the start time is inferior or equal to the end time.");else if(p.length<=0)this.buffered.insert(t,n);else{var v=p[0],b=this._track.cues;b.length>0&&v.startTime<b[b.length-1].startTime&&this._remove(v.startTime,1/0);for(var m=0;m<p.length;m++)this._track.addCue(p[m]);this.buffered.insert(t,n)}},u._remove=function(e,t){i.a.debug("NTSB: Removing native text track data",e,t);var n=this._track,r=n.cues;if(null!=r)for(var a=r.length-1;a>=0;a--){var u=r[a],s=u.startTime,c=u.endTime;s>=e&&s<=t&&c<=t&&o(n,u)}this.buffered.remove(e,t)},u._abort=function(){i.a.debug("NTSB: Aborting native text track SourceBuffer"),this._remove(0,1/0);var e=this._trackElement,t=this._videoElement;if(void 0!==e&&null!=t&&t.hasChildNodes())try{t.removeChild(e)}catch(e){i.a.warn("NTSB: Can't remove track element from the video")}null!=this._track&&(this._track.mode="disabled"),null!=this._trackElement&&(this._trackElement.innerHTML="")},a}(u.a);t.default=c},function(e,t,n){"use strict";n.r(t);var r=n(155),i=n(114),a=n(128),o=n(60),u=n(13),s=n(2);function c(e,t){if(!Object(s.a)(e.vertical)||"rl"!==e.vertical&&"lr"!==e.vertical||(t.vertical=e.vertical),Object(s.a)(e.line)){var n=e.line.match(/^(\d+(\.\d+)?)%(,([a-z]+))?/);if(Array.isArray(n))t.line=Number(n[1]),t.snapToLines=!1,Object(u.a)(["start","center","end"],n[4])&&(t.lineAlign=n[4]);else{var r=e.line.match(/^(-?\d+)(,([a-z]+))?/);Array.isArray(r)&&(t.line=Number(r[1]),t.snapToLines=!0,Object(u.a)(["start","center","end"],r[3])&&(t.lineAlign=r[3]))}}if(Object(s.a)(e.position)){var i=/^([\d\.]+)%(?:,(line-left|line-right|center))?$/.exec(e.position);if(Array.isArray(i)&&i.length>=2){var a=parseInt(i[1],10);isNaN(a)||(t.position=a,void 0!==i[2]&&(t.positionAlign=i[2]))}}Object(s.a)(e.size)&&(t.size=e.size),"string"==typeof e.align&&Object(u.a)(["start","center","end","left"],e.align)&&(t.align=e.align)}var l=n(115);t.default=function(e,t){var n=e.split(/\r\n|\n|\r/);if(!/^WEBVTT($| |\t)/.test(n[0]))throw new Error("Can't parse WebVTT: Invalid file.");for(var u,s,f,d,p=Object(o.b)(n),h=Object(i.a)(n,p),v=[],b=0;b<h.length;b++){var m=Object(a.a)(h[b],t);if(null!=m){var g=(s=void 0,f=void 0,d=void 0,s=(u=m).start,f=u.end,d=u.payload.join("\n"),Object(l.a)(s,f,d));null!=g&&(Object(r.a)(g)&&c(m.settings,g),v.push(g))}}return v}},function(e,t,n){"use strict";n.r(t);var r=n(0);var i=function(e){var t,n;function i(){return e.apply(this,arguments)||this}n=e,(t=i).prototype=Object.create(n.prototype),t.prototype.constructor=t,t.__proto__=n;var a=i.prototype;return a._append=function(e){r.a.debug("ImageSourceBuffer: appending new data.");var t=e.start,n=e.end,i=e.timescale,a=t/i,o=null==n?Number.MAX_VALUE:n/i,u=Math.max(this.appendWindowStart,a),s=Math.min(this.appendWindowEnd,o);this.buffered.insert(u,s)},a._remove=function(e,t){r.a.info("ImageSourceBuffer: ignored image data remove order",e,t)},a._abort=function(){r.a.debug("ImageSourceBuffer: aborting image SourceBuffer"),this._remove(0,1/0)},i}(n(81).a);t.default=i},function(e,t,n){"use strict";n.r(t);var r=n(11),i=n.n(r),a=n(115),o=n(155),u=n(12),s=n(2),c=n(116),l=n(80),f=n(34),d=n(129),p=n(57),h=n(16),v=["extent","writingMode","origin","align"],b={left:"start",center:"center",right:"end",start:"start",end:"end"},m={left:"line-left",center:"center",right:"line-right"};function g(e,t,n,r,i,u,c){if(!e.hasAttribute("begin")&&!e.hasAttribute("end")&&/^\s*$/.test(null===e.textContent?"":e.textContent))return null;var l=Object(d.a)(e,u),f=l.start,p=l.end,v=function(e,t){return function e(t,n){for(var r=t.childNodes,i="",a=0;a<r.length;a++){var o=r[a];if("#text"===o.nodeName){var u=o.textContent;if(null===u&&(u=""),n){var c=u.trim();u=c=c.replace(/\s+/g," ")}i+=u.replace(/&|\u0026/g,"&amp;").replace(/<|\u003C/g,"&lt;").replace(/>|\u2265/g,"&gt;").replace(/\u200E/g,"&lrm;").replace(/\u200F/g,"&rlm;").replace(/\u00A0/g,"&nbsp;")}else if("br"===o.nodeName)i+="\n";else if("span"===o.nodeName&&o.nodeType===Node.ELEMENT_NODE&&o.childNodes.length>0){var l=o.getAttribute("xml:space");i+=e(o,Object(s.a)(l)?"default"===l:n)}}return i}(e,t)}(e,c),g=Object(a.a)(f+t,p+t,v);return null===g?null:(Object(o.a)(g)&&function(e,t){var n=t.extent;if(Object(s.a)(n)){var r=h.d.exec(n);null!=r&&(e.size=Number(r[1]))}switch(t.writingMode){case"tb":case"tblr":e.vertical="lr";break;case"tbrl":e.vertical="rl"}var i=t.origin;if(Object(s.a)(i))h.d.exec(i);var a=t.align;if(Object(s.a)(a)){e.align=a,"center"===a&&("center"!==e.align&&(e.align="middle"),e.position="auto");var o=m[a];e.positionAlign=void 0===o?"":o;var u=b[a];e.lineAlign=void 0===u?"":u}}(g,i),g)}var y=function(e,t){var n=[],r=(new DOMParser).parseFromString(e,"text/xml");if(null!=r){var a=r.getElementsByTagName("tt")[0];if(void 0===a)throw new Error("invalid XML");for(var o=Object(p.a)(a),d=Object(p.c)(a),h=Object(p.b)(a),b=Object(p.d)(a),m=Object(c.a)(a),y=[],_=0;_<=d.length-1;_++){var O=d[_];if(O instanceof Element){var E=O.getAttribute("xml:id");null!=E&&y.push({id:E,style:Object(f.b)(O)})}}for(var w=[],j=0;j<=h.length-1;j++){var T=h[j];if(T instanceof Element){var S=T.getAttribute("xml:id");null!=S&&function(){var e=Object(f.b)(T),t=T.getAttribute("style");if(Object(s.a)(t)){var n=Object(u.a)(y,(function(e){return e.id===t}));void 0!==n&&(e=i()({},n.style,e))}w.push({id:S,style:e})}()}}for(var A=null!==o?Object(f.a)(v,[o],y,w):Object(f.a)(v,[],y,w),x="default"===(null!==o?o.getAttribute("xml:space"):void 0)||"default"===m.spaceStyle,k=0;k<b.length;k++){var R=b[k];if(R instanceof Element){var I=Object(l.a)(R,"div"),M=i()({},A,Object(f.a)(v,[R].concat(I),y,w)),N=R.getAttribute("xml:space"),C=Object(s.a)(N)?"default"===N:x,D=g(R,t,y,w,M,m,C);null!==D&&n.push(D)}}}return n};t.default=y},function(e,t,n){"use strict";n.d(t,"a",(function(){return u}));var r=n(8),i=n(51),a=n(59),o=n(31);function u(e,t,n,s){return Object(a.a)(n)&&(s=n,n=void 0),s?u(e,t,n).pipe(Object(o.a)((function(e){return Object(i.a)(e)?s.apply(void 0,e):s(e)}))):new r.a((function(r){!function e(t,n,r,i,a){var o;if(function(e){return e&&"function"==typeof e.addEventListener&&"function"==typeof e.removeEventListener}(t)){var u=t;t.addEventListener(n,r,a),o=function(){return u.removeEventListener(n,r,a)}}else if(function(e){return e&&"function"==typeof e.on&&"function"==typeof e.off}(t)){var s=t;t.on(n,r),o=function(){return s.off(n,r)}}else if(function(e){return e&&"function"==typeof e.addListener&&"function"==typeof e.removeListener}(t)){var c=t;t.addListener(n,r),o=function(){return c.removeListener(n,r)}}else{if(!t||!t.length)throw new TypeError("Invalid event target");for(var l=0,f=t.length;l<f;l++)e(t[l],n,r,i,a)}i.add(o)}(e,t,(function(e){arguments.length>1?r.next(Array.prototype.slice.call(arguments)):r.next(e)}),r,n)}))}},function(e,t,n){"use strict";n.d(t,"a",(function(){return o}));var r=n(8),i=n(44),a=n(73);function o(e,t){return void 0===e&&(e=0),void 0===t&&(t=i.a),(!Object(a.a)(e)||e<0)&&(e=0),t&&"function"==typeof t.schedule||(t=i.a),new r.a((function(n){return n.add(t.schedule(u,e,{subscriber:n,counter:0,period:e})),n}))}function u(e){var t=e.subscriber,n=e.counter,r=e.period;t.next(n),this.schedule({subscriber:t,counter:n+1,period:r},r)}},function(e,t,n){"use strict";function r(e){var t="function"==typeof Map?new Map:void 0;return(r=function(e){if(null===e||(n=e,-1===Function.toString.call(n).indexOf("[native code]")))return e;var n;if("function"!=typeof e)throw new TypeError("Super expression must either be null or a function");if(void 0!==t){if(t.has(e))return t.get(e);t.set(e,r)}function r(){return i(e,arguments,o(this).constructor)}return r.prototype=Object.create(e.prototype,{constructor:{value:r,enumerable:!1,writable:!0,configurable:!0}}),a(r,e)})(e)}function i(e,t,n){return(i=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}()?Reflect.construct:function(e,t,n){var r=[null];r.push.apply(r,t);var i=new(Function.bind.apply(e,r));return n&&a(i,n.prototype),i}).apply(null,arguments)}function a(e,t){return(a=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function o(e){return(o=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}n.d(t,"a",(function(){return u}));var u=function(e){var t,n;function r(t){var n;return n=e.call(this)||this,Object.setPrototypeOf(function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(n),r.prototype),n.name="AssertionError",n.message=t,n}return n=e,(t=r).prototype=Object.create(n.prototype),t.prototype.constructor=t,t.__proto__=n,r}(r(Error))},function(e,t,n){"use strict";n.d(t,"a",(function(){return u}));var r=n(4),i=n(28),a=n(53),o=n(27);function u(e){return function(t){var n=new s(e),r=t.lift(n);return n.caught=r}}var s=function(){function e(e){this.selector=e}return e.prototype.call=function(e,t){return t.subscribe(new c(e,this.selector,this.caught))},e}(),c=function(e){function t(t,n,r){var i=e.call(this,t)||this;return i.selector=n,i.caught=r,i}return r.a(t,e),t.prototype.error=function(t){if(!this.isStopped){var n=void 0;try{n=this.selector(t,this.caught)}catch(t){return void e.prototype.error.call(this,t)}this._unsubscribeAndRecycle();var r=new a.a(this,void 0,void 0);this.add(r),Object(o.a)(this,n,void 0,void 0,r)}},t}(i.a)},function(e,t,n){"use strict";n.d(t,"a",(function(){return o}));var r=n(76),i=n(21),a=n(142);function o(e,t){return Object(r.a)((function(){return Object(i.a)(function(e,t){return t instanceof a.b?t._setVideo(e):"function"==typeof e.setMediaKeys?e.setMediaKeys(t):null!==t?e.WebkitSetMediaKeys?e.WebkitSetMediaKeys(t):e.mozSetMediaKeys?e.mozSetMediaKeys(t):e.msSetMediaKeys?e.msSetMediaKeys(t):void 0:void 0}(e,t))}))}},function(e,t,n){"use strict";var r=n(4),i=n(8),a=n(91),o=n(73),u=function(e){function t(t,n,r){void 0===n&&(n=0),void 0===r&&(r=a.a);var i=e.call(this)||this;return i.source=t,i.delayTime=n,i.scheduler=r,(!Object(o.a)(n)||n<0)&&(i.delayTime=0),r&&"function"==typeof r.schedule||(i.scheduler=a.a),i}return r.a(t,e),t.create=function(e,n,r){return void 0===n&&(n=0),void 0===r&&(r=a.a),new t(e,n,r)},t.dispatch=function(e){var t=e.source,n=e.subscriber;return this.add(t.subscribe(n))},t.prototype._subscribe=function(e){var n=this.delayTime,r=this.source;return this.scheduler.schedule(t.dispatch,n,{source:r,subscriber:e})},t}(i.a);function s(e,t){return void 0===t&&(t=0),function(n){return n.lift(new c(e,t))}}n.d(t,"a",(function(){return s}));var c=function(){function e(e,t){this.scheduler=e,this.delay=t}return e.prototype.call=function(e,t){return new u(t,this.delay,this.scheduler).subscribe(e)},e}()},,,,function(e,t,n){"use strict";n.d(t,"a",(function(){return l}));var r=n(4),i=n(49),a=n(51),o=n(28),u=n(27),s=n(68),c={};function l(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var n=null,r=null;return Object(i.a)(e[e.length-1])&&(r=e.pop()),"function"==typeof e[e.length-1]&&(n=e.pop()),1===e.length&&Object(a.a)(e[0])&&(e=e[0]),Object(s.a)(e,r).lift(new f(n))}var f=function(){function e(e){this.resultSelector=e}return e.prototype.call=function(e,t){return t.subscribe(new d(e,this.resultSelector))},e}(),d=function(e){function t(t,n){var r=e.call(this,t)||this;return r.resultSelector=n,r.active=0,r.values=[],r.observables=[],r}return r.a(t,e),t.prototype._next=function(e){this.values.push(c),this.observables.push(e)},t.prototype._complete=function(){var e=this.observables,t=e.length;if(0===t)this.destination.complete();else{this.active=t,this.toRespond=t;for(var n=0;n<t;n++){var r=e[n];this.add(Object(u.a)(this,r,r,n))}}},t.prototype.notifyComplete=function(e){0==(this.active-=1)&&this.destination.complete()},t.prototype.notifyNext=function(e,t,n,r,i){var a=this.values,o=a[n],u=this.toRespond?o===c?--this.toRespond:this.toRespond:0;a[n]=t,0===u&&(this.resultSelector?this._tryResultSelector(a):this.destination.next(a.slice()))},t.prototype._tryResultSelector=function(e){var t;try{t=this.resultSelector.apply(this,e)}catch(e){return void this.destination.error(e)}this.destination.next(t)},t}(o.a)},function(e,t,n){"use strict";n.d(t,"a",(function(){return s}));var r=n(4),i=n(51),a=n(68),o=n(28),u=n(27);function s(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];if(1===e.length){if(!Object(i.a)(e[0]))return e[0];e=e[0]}return Object(a.a)(e,void 0).lift(new c)}var c=function(){function e(){}return e.prototype.call=function(e,t){return t.subscribe(new l(e))},e}(),l=function(e){function t(t){var n=e.call(this,t)||this;return n.hasFirst=!1,n.observables=[],n.subscriptions=[],n}return r.a(t,e),t.prototype._next=function(e){this.observables.push(e)},t.prototype._complete=function(){var e=this.observables,t=e.length;if(0===t)this.destination.complete();else{for(var n=0;n<t&&!this.hasFirst;n++){var r=e[n],i=Object(u.a)(this,r,r,n);this.subscriptions&&this.subscriptions.push(i),this.add(i)}this.observables=null}},t.prototype.notifyNext=function(e,t,n,r,i){if(!this.hasFirst){this.hasFirst=!0;for(var a=0;a<this.subscriptions.length;a++)if(a!==n){var o=this.subscriptions[a];o.unsubscribe(),this.remove(o)}this.subscriptions=null}this.destination.next(t)},t}(o.a)},function(e,t,n){"use strict";n.d(t,"a",(function(){return u}));var r=n(8),i=n(44),a=n(73),o=n(49);function u(e,t,n){void 0===e&&(e=0);var u=-1;return Object(a.a)(t)?u=Number(t)<1?1:Number(t):Object(o.a)(t)&&(n=t),Object(o.a)(n)||(n=i.a),new r.a((function(t){var r=Object(a.a)(e)?e:+e-n.now();return n.schedule(s,r,{index:0,period:u,subscriber:t})}))}function s(e){var t=e.index,n=e.period,r=e.subscriber;if(r.next(t),!r.closed){if(-1===n)return r.complete();e.index=t+1,this.schedule(e,n)}}},function(e,t,n){"use strict";n.d(t,"a",(function(){return c}));var r=n(0),i=n(1),a=n(38),o=n(104),u=n(105);function s(e){for(var t=new Uint8Array,n=new o.a,s=0;s<e.length;){if(e.length<s+8||Object(i.d)(e,s+4)!==u.a)return r.a.warn("Compat: Unrecognized initialization data. Use as is."),e;var c=Object(i.d)(new Uint8Array(e),s);if(s+c>e.length)return r.a.warn("Compat: Unrecognized initialization data. Use as is."),e;var l=e.subarray(s,s+c),f=Object(a.a)(l);n.test(f)?r.a.warn("Compat: Duplicated PSSH found in initialization data, removing it."):(n.add(f),t=Object(i.i)(t,l)),s+=c}return s!==e.length?(r.a.warn("Compat: Unrecognized initialization data. Use as is."),e):t}function c(e){var t=e.initData,n=e.initDataType;return null==t?(r.a.warn("Compat: No init data found on media encrypted event."),{initData:t,initDataType:n}):{initData:s(new Uint8Array(t)),initDataType:e.initDataType}}},function(e,t,n){"use strict";n.d(t,"a",(function(){return c}));var r=n(76),i=n(0),a=n(1),o=n(21),u=n(24),s=n(105);function c(e,t,n){return Object(r.a)((function(){var r;if(i.a.debug("Compat: Calling generateRequest on the MediaKeySession"),u.c)try{r=function(e){var t=e.byteLength;i.a.info("Compat: Trying to move CENC PSSH from init data at the end of it.");for(var n=new Uint8Array,r=new Uint8Array,o=0;o<e.length;){if(e.length<o+8||Object(a.d)(e,o+4)!==s.a)throw i.a.warn("Compat: unrecognized initialization data. Cannot patch it."),new Error("Compat: unrecognized initialization data. Cannot patch it.");var u=Object(a.d)(new Uint8Array(e),o);if(o+u>e.length)throw i.a.warn("Compat: unrecognized initialization data. Cannot patch it."),new Error("Compat: unrecognized initialization data. Cannot patch it.");var c=e.subarray(o,o+u);16===e[o+12]&&119===e[o+13]&&239===e[o+14]&&236===e[o+15]&&192===e[o+16]&&178===e[o+17]&&77===e[o+18]&&2===e[o+19]&&172===e[o+20]&&227===e[o+21]&&60===e[o+22]&&30===e[o+23]&&82===e[o+24]&&226===e[o+25]&&251===e[o+26]&&75===e[o+27]?(i.a.info("Compat: CENC PSSH found."),n=Object(a.i)(n,c)):r=Object(a.i)(r,c),o+=u}if(o!==e.length)throw i.a.warn("Compat: unrecognized initialization data. Cannot patch it."),new Error("Compat: unrecognized initialization data. Cannot patch it.");if(r.byteLength===t)throw i.a.warn("Compat: CENC PSSH not found. Cannot patch it"),new Error("Compat: unrecognized initialization data. Cannot patch it.");return Object(a.i)(r,n)}(t)}catch(e){r=t}else r=t;return Object(o.a)(e.generateRequest(null==n?"":n,r))}))}},function(e,t,n){"use strict";n.d(t,"a",(function(){return i}));var r=n(0),i=function(){function e(e){this._mediaURL=e.media}var t=e.prototype;return t.getInitSegment=function(){return null},t.getSegments=function(){return[{id:"0",isInit:!1,number:0,time:0,duration:Number.MAX_VALUE,timescale:1,mediaURL:this._mediaURL}]},t.getFirstPosition=function(){},t.getLastPosition=function(){},t.shouldRefresh=function(){return!1},t.checkDiscontinuity=function(){return-1},t.isSegmentStillAvailable=function(){return!0},t.canBeOutOfSyncError=function(){return!1},t.isFinished=function(){return!0},t._addSegments=function(){r.a.warn("Tried add Segments to a static RepresentationIndex")},t._update=function(){r.a.warn("Tried to update a static RepresentationIndex")},e}()},function(e,t,n){"use strict";n.d(t,"a",(function(){return o}));var r=n(0),i=n(1),a=n(56);function o(e){var t=0,n=Object(a.b)(e,1836019574);if(null===n)return[];for(var i=[];t<n.length;){var o=void 0;try{o=Object(a.c)(n,1886614376)}catch(e){return r.a.warn(e),i}if(null==o)return i;var s=n.slice(o[0],o[1]),c=u(s);null!==c&&i.push({systemID:c,data:s}),n[o[0]+4]=102,n[o[0]+5]=114,n[o[0]+6]=101,n[o[0]+7]=101,t=o[1]}return i}function u(e){if(e[9]>1)return r.a.warn("ISOBMFF: un-handled PSSH version"),null;if(28>e.length)return null;var t=e.slice(12,28);return Object(i.f)(t)}},function(e,t,n){"use strict";n.d(t,"b",(function(){return l})),n.d(t,"d",(function(){return s})),n.d(t,"a",(function(){return c})),n.d(t,"c",(function(){return u}));var r=n(0),i=(n(35),n(1)),a=(n(171),n(132));function o(e,t){for(var n=e.length,a=0;a+8<n;){var o=Object(i.d)(e,a);if(o<=0)return r.a.error("ISOBMFF: size out of range"),-1;if(Object(i.d)(e,a+4)===t)return a+o<=n?a:(r.a.error("ISOBMFF: box out of range"),-1);a+=o}return-1}function u(e,t){var n=o(e,1936286840);if(-1===n)return null;var r=t,a=Object(i.d)(e,n),u=n+4+4,s=e[u];u+=8;var c,l=Object(i.d)(e,u);if(u+=4,0===s)c=Object(i.d)(e,u),u+=4,r+=Object(i.d)(e,u)+a,u+=4;else{if(1!==s)return null;c=Object(i.e)(e,u),u+=8,r+=Object(i.e)(e,u)+a,u+=8}var f=[];u+=2;var d=Object(i.b)(e,u);for(u+=2;--d>=0;){var p=Object(i.d)(e,u);u+=4;var h=2147483647&p;if(1===(2147483648&p)>>>31)throw new Error("sidx with reference_type `1` not yet implemented");var v=Object(i.d)(e,u);u+=4,u+=4,f.push({time:c,duration:v,count:0,timescale:l,range:[r,r+h-1]}),c+=v,r+=h}return f}function s(e){var t=Object(a.c)(e);if(null===t)return-1;var n=o(t,1952867444);if(-1===n)return-1;var r=n+4+4,u=t[r];return r+=4,u>1?-1:0!==u?Object(i.e)(t,r):Object(i.d)(t,r)}function c(e){var t=Object(a.c)(e);if(null===t)return-1;var n=o(t,1953658222);if(-1===n)return-1;var r=n+4+4,u=t[r];if(r+=1,u>1)return-1;var s=Object(i.c)(t,r);r+=3;var c=256&s,l=0;if(0===c&&(l=function(e){var t=o(e,1952868452);if(-1===t)return-1;var n=t+4+4+1,r=Object(i.c)(e,n);return n+=3,0===(8&r)?-1:(n+=4,0!==(1&r)&&(n+=8),0!==(2&r)&&(n+=4),Object(i.d)(e,n))}(t))<0)return-1;var f=1&s,d=4&s,p=512&s,h=1024&s,v=2048&s,b=Object(i.d)(t,r);r+=4,0!==f&&(r+=4),0!==d&&(r+=4);for(var m=b,g=0;m-- >0;)0!==c?(g+=Object(i.d)(t,r),r+=4):g+=l,0!==p&&(r+=4),0!==h&&(r+=4),0!==v&&(r+=4);return g}function l(e){var t=Object(a.b)(e);if(null===t)return-1;var n=o(t,1835296868);if(-1===n)return-1;var r=n+4+4,u=t[r];return r+=4,1===u?(r+=16,Object(i.d)(t,r)):0===u?(r+=8,Object(i.d)(t,r)):-1}},function(e,t,n){"use strict";n.d(t,"a",(function(){return a}));var r=n(4),i=n(10);function a(e,t){var n=!1;return arguments.length>=2&&(n=!0),function(r){return r.lift(new o(e,t,n))}}var o=function(){function e(e,t,n){void 0===n&&(n=!1),this.accumulator=e,this.seed=t,this.hasSeed=n}return e.prototype.call=function(e,t){return t.subscribe(new u(e,this.accumulator,this.seed,this.hasSeed))},e}(),u=function(e){function t(t,n,r,i){var a=e.call(this,t)||this;return a.accumulator=n,a._seed=r,a.hasSeed=i,a.index=0,a}return r.a(t,e),Object.defineProperty(t.prototype,"seed",{get:function(){return this._seed},set:function(e){this.hasSeed=!0,this._seed=e},enumerable:!0,configurable:!0}),t.prototype._next=function(e){if(this.hasSeed)return this._tryNext(e);this.seed=e,this.destination.next(e)},t.prototype._tryNext=function(e){var t,n=this.index++;try{t=this.accumulator(this.seed,e,n)}catch(e){this.destination.error(e)}this.seed=t,this.destination.next(t)},t}(i.a)},function(e,t,n){"use strict";n.d(t,"a",(function(){return i}));var r=n(131);function i(e,t){return t?Object(r.a)((function(){return e}),t):Object(r.a)((function(){return e}))}}]).default}));