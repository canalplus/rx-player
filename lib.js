!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t():"function"==typeof define&&define.amd?define([],t):"object"==typeof exports?exports.RxPlayer=t():e.RxPlayer=t()}(window,function(){return function(n){var r={};function i(e){if(r[e])return r[e].exports;var t=r[e]={i:e,l:!1,exports:{}};return n[e].call(t.exports,t,t.exports,i),t.l=!0,t.exports}return i.m=n,i.c=r,i.d=function(e,t,n){i.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},i.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},i.t=function(t,e){if(1&e&&(t=i(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var n=Object.create(null);if(i.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var r in t)i.d(n,r,function(e){return t[e]}.bind(null,r));return n},i.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return i.d(t,"a",t),t},i.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},i.p="",i(i.s=137)}([function(e,t,n){"use strict";var r=n(26),i=new(function(){function e(){this.error=r.a,this.warn=r.a,this.info=r.a,this.debug=r.a,this.LEVELS={NONE:0,ERROR:1,WARNING:2,INFO:3,DEBUG:4},this.currentLevel="NONE"}var t=e.prototype;return t.setLevel=function(e){var t,n=this.LEVELS[e];this.currentLevel=n?(t=n,e):(t=0,"NONE"),this.error=t>=this.LEVELS.ERROR?console.error.bind(console):r.a,this.warn=t>=this.LEVELS.WARNING?console.warn.bind(console):r.a,this.info=t>=this.LEVELS.INFO?console.info.bind(console):r.a,this.debug=t>=this.LEVELS.DEBUG?console.log.bind(console):r.a},t.getLevel=function(){return this.currentLevel},e}());t.a=i},function(e,t,n){"use strict";n.d(t,"p",function(){return h}),n.d(t,"f",function(){return r}),n.d(t,"g",function(){return i}),n.d(t,"j",function(){return a}),n.d(t,"e",function(){return v}),n.d(t,"h",function(){return o}),n.d(t,"a",function(){return u}),n.d(t,"b",function(){return s}),n.d(t,"c",function(){return c}),n.d(t,"d",function(){return l}),n.d(t,"n",function(){return b}),n.d(t,"o",function(){return g}),n.d(t,"k",function(){return f}),n.d(t,"l",function(){return d}),n.d(t,"m",function(){return m}),n.d(t,"i",function(){return y});var p=n(13);function h(e){for(var t=e.length,n=new Uint8Array(t),r=0;r<t;r++)n[r]=255&e.charCodeAt(r);return n}function r(e){return String.fromCharCode.apply(null,e)}function i(e){for(var t="",n=e.length,r=0;r<n;r+=2)t+=String.fromCharCode(e[r]);return t}function a(e){for(var t=e.length,n=new Uint8Array(t/2),r=0,i=0;r<t;r+=2,i++)n[i]=255&parseInt(e.substring(r,r+2),16);return n}function v(e,t){void 0===t&&(t="");for(var n="",r=0;r<e.byteLength;r++)n+=(e[r]>>>4).toString(16),n+=(15&e[r]).toString(16),t.length&&r<e.byteLength-1&&(n+=t);return n}function o(){for(var e,t=arguments.length,n=-1,r=0;++n<t;)r+="number"==typeof(e=n<0||arguments.length<=n?void 0:arguments[n])?e:e.length;var i=new Uint8Array(r),a=0;for(n=-1;++n<t;)"number"==typeof(e=n<0||arguments.length<=n?void 0:arguments[n])?a+=e:0<e.length&&(i.set(e,a),a+=e.length);return i}function u(e,t){return(e[t+0]<<8)+(e[t+1]<<0)}function s(e,t){return 65536*e[t+0]+256*e[t+1]+e[t+2]}function c(e,t){return 16777216*e[t+0]+65536*e[t+1]+256*e[t+2]+e[t+3]}function l(e,t){return 4294967296*(16777216*e[t+0]+65536*e[t+1]+256*e[t+2]+e[t+3])+16777216*e[t+4]+65536*e[t+5]+256*e[t+6]+e[t+7]}function f(e){return new Uint8Array([e>>>8&255,255&e])}function d(e){return new Uint8Array([e>>>24&255,e>>>16&255,e>>>8&255,255&e])}function m(e){var t=e%4294967296,n=(e-t)/4294967296;return new Uint8Array([n>>>24&255,n>>>16&255,n>>>8&255,255&n,t>>>24&255,t>>>16&255,t>>>8&255,255&t])}function b(e,t){return(e[t+0]<<0)+(e[t+1]<<8)}function g(e,t){return e[t+0]+256*e[t+1]+65536*e[t+2]+16777216*e[t+3]}function y(e){Object(p.b)(16===e.length,"UUID length should be 16");var t=h(e),n=t[0],r=t[1],i=t[2],a=t[3],o=t[4],u=t[5],s=t[6],c=t[7],l=t.subarray(8,10),f=t.subarray(10,16),d=new Uint8Array(16);return d[0]=a,d[1]=i,d[2]=r,d[3]=n,d[4]=u,d[5]=o,d[6]=c,d[7]=s,d.set(l,8),d.set(f,10),v(d)}},function(e,t,n){"use strict";t.a={DEFAULT_UNMUTED_VOLUME:.1,DEFAULT_REQUEST_TIMEOUT:3e4,DEFAULT_TEXT_TRACK_MODE:"native",DEFAULT_MANUAL_BITRATE_SWITCHING_MODE:"seamless",DEFAULT_AUTO_PLAY:!1,DEFAULT_SHOW_NATIVE_SUBTITLE:!0,DEFAULT_STOP_AT_END:!0,DEFAULT_WANTED_BUFFER_AHEAD:30,DEFAULT_MAX_BUFFER_AHEAD:1/0,DEFAULT_MAX_BUFFER_BEHIND:1/0,MAXIMUM_MAX_BUFFER_AHEAD:{text:18e3},MAXIMUM_MAX_BUFFER_BEHIND:{text:18e3},DEFAULT_INITIAL_BITRATES:{audio:0,video:0,other:0},DEFAULT_MAX_BITRATES:{audio:1/0,video:1/0,other:1/0},INACTIVITY_DELAY:6e4,DEFAULT_THROTTLE_WHEN_HIDDEN:!1,DEFAULT_LIMIT_VIDEO_WIDTH:!1,DEFAULT_LIVE_GAP:10,DEFAULT_SUGGESTED_PRESENTATION_DELAY:{SMOOTH:10,DASH:10},DISCONTINUITY_THRESHOLD:1,BITRATE_REBUFFERING_RATIO:1.5,BUFFER_GC_GAPS:{CALM:240,BEEFY:30},DEFAULT_MAX_MANIFEST_REQUEST_RETRY:4,DEFAULT_MAX_PIPELINES_RETRY_ON_ERROR:4,DEFAULT_MAX_PIPELINES_RETRY_ON_OFFLINE:1/0,INITIAL_BACKOFF_DELAY_BASE:200,MAX_BACKOFF_DELAY_BASE:3e3,SAMPLING_INTERVAL_MEDIASOURCE:1e3,SAMPLING_INTERVAL_NO_MEDIASOURCE:500,ABR_MINIMUM_TOTAL_BYTES:15e4,ABR_MINIMUM_CHUNK_SIZE:16e3,ABR_STARVATION_FACTOR:.72,ABR_REGULAR_FACTOR:.9,ABR_STARVATION_GAP:5,OUT_OF_STARVATION_GAP:7,ABR_STARVATION_DURATION_DELTA:.1,ABR_FAST_EMA:2,ABR_SLOW_EMA:10,RESUME_GAP_AFTER_SEEKING:1.5,RESUME_GAP_AFTER_NOT_ENOUGH_DATA:.5,RESUME_GAP_AFTER_BUFFERING:5,STALL_GAP:.5,MAX_TIME_MISSING_FROM_COMPLETE_SEGMENT:.12,MAX_BUFFERED_DISTANCE:.1,MINIMUM_SEGMENT_SIZE:.2,MAXIMUM_HTML_TEXT_TRACK_UPDATE_INTERVAL:50,BUFFER_PADDING:{audio:{high:1,low:1},video:{high:3,low:2},other:{high:1,low:1}},SEGMENT_PRIORITIES_STEPS:[6,14],EME_DEFAULT_WIDEVINE_ROBUSTNESSES:["HW_SECURE_ALL","HW_SECURE_DECODE","HW_SECURE_CRYPTO","SW_SECURE_DECODE","SW_SECURE_CRYPTO"],EME_KEY_SYSTEMS:{clearkey:["webkit-org.w3.clearkey","org.w3.clearkey"],widevine:["com.widevine.alpha"],playready:["com.microsoft.playready","com.chromecast.playready","com.youtube.playready"]},EME_MAX_SIMULTANEOUS_MEDIA_KEY_SESSIONS:50,FORCED_ENDED_THRESHOLD:.001,ADAPTATION_SWITCH_BUFFER_PADDINGS:{video:{before:.5,after:1},audio:{before:.5,after:2},text:{before:0,after:0},image:{before:0,after:0}}}},function(e,t,n){"use strict";n.d(t,"a",function(){return i});
/*! *****************************************************************************
Copyright (c) Microsoft Corporation. All rights reserved.
Licensed under the Apache License, Version 2.0 (the "License"); you may not use
this file except in compliance with the License. You may obtain a copy of the
License at http://www.apache.org/licenses/LICENSE-2.0

THIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
KIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED
WARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,
MERCHANTABLITY OR NON-INFRINGEMENT.

See the Apache Version 2.0 License for specific language governing permissions
and limitations under the License.
***************************************************************************** */
var r=function(e,t){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)};function i(e,t){function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}},,function(e,t,n){"use strict";var a=n(9);var o=n(60),u=n(65);var r=n(46),i=n(37);function s(t){return t?1===t.length?t[0]:function(e){return t.reduce(function(e,t){return t(e)},e)}:i.a}var c=n(33);n.d(t,"a",function(){return l});var l=function(){function n(e){this._isScalar=!1,e&&(this._subscribe=e)}return n.prototype.lift=function(e){var t=new n;return t.source=this,t.operator=e,t},n.prototype.subscribe=function(e,t,n){var r=this.operator,i=function(e,t,n){if(e){if(e instanceof a.a)return e;if(e[o.a])return e[o.a]()}return e||t||n?new a.a(e,t,n):new a.a(u.a)}(e,t,n);if(r?r.call(i,this.source):i.add(this.source||c.a.useDeprecatedSynchronousErrorHandling&&!i.syncErrorThrowable?this._subscribe(i):this._trySubscribe(i)),c.a.useDeprecatedSynchronousErrorHandling&&i.syncErrorThrowable&&(i.syncErrorThrowable=!1,i.syncErrorThrown))throw i.syncErrorValue;return i},n.prototype._trySubscribe=function(t){try{return this._subscribe(t)}catch(e){c.a.useDeprecatedSynchronousErrorHandling&&(t.syncErrorThrown=!0,t.syncErrorValue=e),!function(e){for(;e;){var t=e,n=t.closed,r=t.destination,i=t.isStopped;if(n||i)return!1;e=r&&r instanceof a.a?r:null}return!0}(t)?console.warn(e):t.error(e)}},n.prototype.forEach=function(r,e){var i=this;return new(e=f(e))(function(e,t){var n;n=i.subscribe(function(e){try{r(e)}catch(e){t(e),n&&n.unsubscribe()}},t,e)})},n.prototype._subscribe=function(e){var t=this.source;return t&&t.subscribe(e)},n.prototype[r.a]=function(){return this},n.prototype.pipe=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return 0===e.length?this:s(e)(this)},n.prototype.toPromise=function(e){var r=this;return new(e=f(e))(function(e,t){var n;r.subscribe(function(e){return n=e},function(e){return t(e)},function(){return e(n)})})},n.create=function(e){return new n(e)},n}();function f(e){if(e||(e=c.a.Promise||Promise),!e)throw new Error("no Promise impl found");return e}},,function(e,t,n){"use strict";
/*
object-assign
(c) Sindre Sorhus
@license MIT
*/var s=Object.getOwnPropertySymbols,c=Object.prototype.hasOwnProperty,l=Object.prototype.propertyIsEnumerable;e.exports=function(){try{if(!Object.assign)return!1;var e=new String("abc");if(e[5]="de","5"===Object.getOwnPropertyNames(e)[0])return!1;for(var t={},n=0;n<10;n++)t["_"+String.fromCharCode(n)]=n;if("0123456789"!==Object.getOwnPropertyNames(t).map(function(e){return t[e]}).join(""))return!1;var r={};return"abcdefghijklmnopqrst".split("").forEach(function(e){r[e]=e}),"abcdefghijklmnopqrst"===Object.keys(Object.assign({},r)).join("")}catch(e){return!1}}()?Object.assign:function(e,t){for(var n,r,i=function(e){if(null==e)throw new TypeError("Object.assign cannot be called with null or undefined");return Object(e)}(e),a=1;a<arguments.length;a++){for(var o in n=Object(arguments[a]))c.call(n,o)&&(i[o]=n[o]);if(s){r=s(n);for(var u=0;u<r.length;u++)l.call(n,r[u])&&(i[r[u]]=n[r[u]])}}return i}},function(e,t,n){"use strict";var r=n(54),i=n(59),a=n.n(i),o=n(31);n.d(t,"a",function(){return r}),function(){if(window.WebKitSourceBuffer&&!window.WebKitSourceBuffer.prototype.addEventListener){var e=window.WebKitSourceBuffer.prototype;for(var t in o.a.prototype)o.a.prototype.hasOwnProperty(t)&&(e[t]=o.a.prototype[t]);e._listeners=[],e.__emitUpdate=function(e,t){var n=this;a()(function(){n.trigger(e,t),n.updating=!1,n.trigger("updateend")})},e.appendBuffer=function(e){if(this.updating)throw new Error("updating");this.trigger("updatestart"),this.updating=!0;try{this.append(e)}catch(e){return void this.__emitUpdate("error",e)}this.__emitUpdate("update")}}}()},function(e,t,n){"use strict";n.d(t,"a",function(){return u});var r=n(3),s=n(51),c=n(65),i=n(15),o=n(60),a=n(33),l=n(53),u=function(i){function a(e,t,n){var r=i.call(this)||this;switch(r.syncErrorValue=null,r.syncErrorThrown=!1,r.syncErrorThrowable=!1,r.isStopped=!1,r._parentSubscription=null,arguments.length){case 0:r.destination=c.a;break;case 1:if(!e){r.destination=c.a;break}if("object"==typeof e){e instanceof a?(r.syncErrorThrowable=e.syncErrorThrowable,(r.destination=e).add(r)):(r.syncErrorThrowable=!0,r.destination=new f(r,e));break}default:r.syncErrorThrowable=!0,r.destination=new f(r,e,t,n)}return r}return r.a(a,i),a.prototype[o.a]=function(){return this},a.create=function(e,t,n){var r=new a(e,t,n);return r.syncErrorThrowable=!1,r},a.prototype.next=function(e){this.isStopped||this._next(e)},a.prototype.error=function(e){this.isStopped||(this.isStopped=!0,this._error(e))},a.prototype.complete=function(){this.isStopped||(this.isStopped=!0,this._complete())},a.prototype.unsubscribe=function(){this.closed||(this.isStopped=!0,i.prototype.unsubscribe.call(this))},a.prototype._next=function(e){this.destination.next(e)},a.prototype._error=function(e){this.destination.error(e),this.unsubscribe()},a.prototype._complete=function(){this.destination.complete(),this.unsubscribe()},a.prototype._unsubscribeAndRecycle=function(){var e=this._parent,t=this._parents;return this._parent=null,this._parents=null,this.unsubscribe(),this.closed=!1,this.isStopped=!1,this._parent=e,this._parents=t,this._parentSubscription=null,this},a}(i.a),f=function(u){function e(e,t,n,r){var i,a=u.call(this)||this;a._parentSubscriber=e;var o=a;return Object(s.a)(t)?i=t:t&&(i=t.next,n=t.error,r=t.complete,t!==c.a&&(o=Object.create(t),Object(s.a)(o.unsubscribe)&&a.add(o.unsubscribe.bind(o)),o.unsubscribe=a.unsubscribe.bind(a))),a._context=o,a._next=i,a._error=n,a._complete=r,a}return r.a(e,u),e.prototype.next=function(e){if(!this.isStopped&&this._next){var t=this._parentSubscriber;a.a.useDeprecatedSynchronousErrorHandling&&t.syncErrorThrowable?this.__tryOrSetError(t,this._next,e)&&this.unsubscribe():this.__tryOrUnsub(this._next,e)}},e.prototype.error=function(e){if(!this.isStopped){var t=this._parentSubscriber,n=a.a.useDeprecatedSynchronousErrorHandling;if(this._error)n&&t.syncErrorThrowable?this.__tryOrSetError(t,this._error,e):this.__tryOrUnsub(this._error,e),this.unsubscribe();else if(t.syncErrorThrowable)n?(t.syncErrorValue=e,t.syncErrorThrown=!0):Object(l.a)(e),this.unsubscribe();else{if(this.unsubscribe(),n)throw e;Object(l.a)(e)}}},e.prototype.complete=function(){var e=this;if(!this.isStopped){var t=this._parentSubscriber;if(this._complete){var n=function(){return e._complete.call(e._context)};a.a.useDeprecatedSynchronousErrorHandling&&t.syncErrorThrowable?this.__tryOrSetError(t,n):this.__tryOrUnsub(n),this.unsubscribe()}else this.unsubscribe()}},e.prototype.__tryOrUnsub=function(e,t){try{e.call(this._context,t)}catch(e){if(this.unsubscribe(),a.a.useDeprecatedSynchronousErrorHandling)throw e;Object(l.a)(e)}},e.prototype.__tryOrSetError=function(t,e,n){if(!a.a.useDeprecatedSynchronousErrorHandling)throw new Error("bad call");try{e.call(this._context,n)}catch(e){return a.a.useDeprecatedSynchronousErrorHandling?(t.syncErrorValue=e,t.syncErrorThrown=!0):(Object(l.a)(e),!0)}return!1},e.prototype._unsubscribe=function(){var e=this._parentSubscriber;this._context=null,this._parentSubscriber=null,e.unsubscribe()},e}(u)},function(e,t,n){"use strict";t.a={transports:{},imageBuffer:null,imageParser:null,nativeTextTracksBuffer:null,nativeTextTracksParsers:{},htmlTextTracksBuffer:null,htmlTextTracksParsers:{},emeManager:null,directfile:null}},function(e,t,n){"use strict";function r(e,t,n){if("function"==typeof Array.prototype.find)return e.find(t,n);for(var r=e.length>>>0,i=0;i<r;i++){var a=e[i];if(t.call(n,a,i,e))return a}}n.d(t,"a",function(){return r})},function(e,t,n){"use strict";function r(e,t,n){if("function"==typeof Array.prototype.includes)return e.includes(t,n);var r=e.length>>>0;if(0===r)return!1;for(var i,a,o=0|n,u=0<=o?Math.min(o,r-1):Math.max(r+o,0);u<r;){if((i=e[u])===(a=t)||"number"==typeof i&&"number"==typeof a&&isNaN(i)&&isNaN(a))return!0;u++}return!1}n.d(t,"a",function(){return r})},function(e,t,n){"use strict";function i(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function a(e){var r="function"==typeof Map?new Map:void 0;return(a=function(e){if(null===e||(t=e,-1===Function.toString.call(t).indexOf("[native code]")))return e;var t;if("function"!=typeof e)throw new TypeError("Super expression must either be null or a function");if(void 0!==r){if(r.has(e))return r.get(e);r.set(e,n)}function n(){return o(e,arguments,s(this).constructor)}return n.prototype=Object.create(e.prototype,{constructor:{value:n,enumerable:!1,writable:!0,configurable:!0}}),u(n,e)})(e)}function o(e,t,n){return(o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(e){return!1}}()?Reflect.construct:function(e,t,n){var r=[null];r.push.apply(r,t);var i=new(Function.bind.apply(e,r));return n&&u(i,n.prototype),i}).apply(null,arguments)}function u(e,t){return(u=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function s(e){return(s=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var r=function(n){var e,t;function r(e){var t;return t=n.call(this)||this,Object.setPrototypeOf(i(i(t)),r.prototype),t.name="AssertionError",t.message=e,Error.captureStackTrace&&Error.captureStackTrace(i(i(t)),r),t}return t=n,(e=r).prototype=Object.create(t.prototype),(e.prototype.constructor=e).__proto__=t,r}(a(Error));function c(e,t){if(!e)throw new r(t||"invalid assertion")}function l(e,t,n){for(var r in void 0===n&&(n="object"),c(null!=e,n+" should be an object"),t)t.hasOwnProperty(r)&&c(typeof e[r]===t[r],n+" should have property "+r+" as a "+t[r])}n.d(t,"b",function(){return c}),n.d(t,"a",function(){return l})},function(e,t,n){"use strict";n.d(t,"a",function(){return o}),n.d(t,"b",function(){return p}),n.d(t,"c",function(){return m}),n.d(t,"d",function(){return d}),n.d(t,"e",function(){return v}),n.d(t,"f",function(){return f}),n.d(t,"g",function(){return h}),n.d(t,"h",function(){return b}),n.d(t,"i",function(){return a}),n.d(t,"j",function(){return y});var r=1/60;function i(e,t){return Math.abs(e-t)<r}function u(e,t){return{start:Math.min(e.start,t.start),end:Math.max(e.end,t.end)}}function s(e,t){return e.end<=t.start}function a(e,t){var n=e.start,r=e.end;return n<=t&&t<r}function c(e,t){return a(e,t.start)||e.start<t.end&&t.end<e.end||a(t,e.start)}function l(e,t){return i(t.start,e.end)||i(t.end,e.start)}function o(e){for(var t=[],n=0;n<e.length;n++)t.push({start:e.start(n),end:e.end(n)});return t}function f(e,t){for(var n=e.length-1;0<=n;n--){var r=e.start(n);if(r<=t){var i=e.end(n);if(t<i)return{start:r,end:i}}}return null}function d(e,t){for(var n=e.length,r=0;r<n;r++){var i=e.start(r);if(t<i)return i-t}return 1/0}function p(e,t){for(var n=null,r=[],i=0;i<e.length;i++){var a=e.start(i),o=e.end(i);t<a||o<=t?r.push({start:a,end:o}):n={start:a,end:o}}return{outerRanges:r,innerRange:n}}function h(e,t){var n=f(e,t);return n?n.end-n.start:0}function v(e,t){var n=f(e,t);return n?t-n.start:0}function m(e,t){var n=f(e,t);return n?n.end-t:1/0}function b(e,t){if(t.start===t.end)return e;for(var n=t,r=0;r<e.length;r++){var i=e[r],a=c(n,i),o=l(n,i);if(a||o)n=u(n,i),e.splice(r--,1);else if(0===r){if(s(n,e[0]))break}else if(s(e[r-1],n)&&s(n,i))break}return e.splice(r,0,n),function(e){for(var t=1;t<e.length;t++){var n=e[t-1],r=e[t];if(l(n,r)){var i=u(n,r);e.splice(--t,2,i)}}return e}(function(e){for(var t=0;t<e.length;t++){var n=e[t];n.start===n.end&&e.splice(t++,1)}return e}(e))}function g(e,t){for(var n=[],r=0;r<t.length;r++)c(e,t[r])&&n.push(t[r]);return n}function y(e,t){for(var n=[],r=0;r<e.length;r++){var i=e[r],a=g(i,t);if(a.length)for(var o=0;o<a.length;o++){var u=a[o];n.push({start:Math.max(i.start,u.start),end:Math.min(i.end,u.end)})}}return n}},function(e,t,n){"use strict";var l=n(45),f=n(78),d=n(51),p=n(66),h=n(29);function r(e){return Error.call(this),this.message=e?e.length+" errors occurred during unsubscription:\n"+e.map(function(e,t){return t+1+") "+e.toString()}).join("\n  "):"",this.name="UnsubscriptionError",this.errors=e,this}r.prototype=Object.create(Error.prototype);var v=r;n.d(t,"a",function(){return i});var i=function(){function r(e){this.closed=!1,this._parent=null,this._parents=null,this._subscriptions=null,e&&(this._unsubscribe=e)}var e;return r.prototype.unsubscribe=function(){var e,t=!1;if(!this.closed){var n=this._parent,r=this._parents,i=this._unsubscribe,a=this._subscriptions;this.closed=!0,this._parent=null,this._parents=null,this._subscriptions=null;for(var o=-1,u=r?r.length:0;n;)n.remove(this),n=++o<u&&r[o]||null;if(Object(d.a)(i))Object(p.a)(i).call(this)===h.a&&(t=!0,e=e||(h.a.e instanceof v?m(h.a.e.errors):[h.a.e]));if(Object(l.a)(a))for(o=-1,u=a.length;++o<u;){var s=a[o];if(Object(f.a)(s))if(Object(p.a)(s.unsubscribe).call(s)===h.a){t=!0,e=e||[];var c=h.a.e;c instanceof v?e=e.concat(m(c.errors)):e.push(c)}}if(t)throw new v(e)}},r.prototype.add=function(e){if(!e||e===r.EMPTY)return r.EMPTY;if(e===this)return this;var t=e;switch(typeof e){case"function":t=new r(e);case"object":if(t.closed||"function"!=typeof t.unsubscribe)return t;if(this.closed)return t.unsubscribe(),t;if("function"!=typeof t._addParent){var n=t;(t=new r)._subscriptions=[n]}break;default:throw new Error("unrecognized teardown "+e+" added to Subscription.")}return(this._subscriptions||(this._subscriptions=[])).push(t),t._addParent(this),t},r.prototype.remove=function(e){var t=this._subscriptions;if(t){var n=t.indexOf(e);-1!==n&&t.splice(n,1)}},r.prototype._addParent=function(e){var t=this._parent,n=this._parents;t&&t!==e?n?-1===n.indexOf(e)&&n.push(e):this._parents=[e]:this._parent=e},r.EMPTY=((e=new r).closed=!0,e),r}();function m(e){return e.reduce(function(e,t){return e.concat(t instanceof v?t.errors:t)},[])}},,function(e,t,n){"use strict";var r=n(5),i=n(43),a=n(39);t.a=function(e){if(e instanceof r.a)return e;if(e&&"function"==typeof e.subscribe){var n=e;return new r.a(function(t){var e=n.subscribe(function(e){t.next(e)},function(e){t.error(e)},function(){t.complete()});return function(){e&&e.dispose?e.dispose():e&&e.unsubscribe&&e.unsubscribe()}})}return e&&"function"==typeof e.then?Object(i.a)(e):Object(a.a)(e)}},function(e,t,n){"use strict";n.d(t,"c",function(){return c}),n.d(t,"d",function(){return i}),n.d(t,"e",function(){return r}),n.d(t,"f",function(){return a}),n.d(t,"g",function(){return o}),n.d(t,"h",function(){return s}),n.d(t,"i",function(){return u}),n.d(t,"a",function(){return f}),n.d(t,"b",function(){return l});var r=/^(\d{2,}):(\d{2}):(\d{2}):(\d{2})\.?(\d+)?$/,i=/^(?:(\d{2,}):)?(\d{2}):(\d{2})$/,a=/^(?:(\d{2,}):)?(\d{2}):(\d{2}\.\d{2,})$/,o=/^(\d*\.?\d*)f$/,u=/^(\d*\.?\d*)t$/,s=/^(?:(\d*\.?\d*)h)?(?:(\d*\.?\d*)m)?(?:(\d*\.?\d*)s)?(?:(\d*\.?\d*)ms)?$/,c=/^(\d{1,2}|100)% (\d{1,2}|100)%$/,l=/^#([0-9A-f]{2})([0-9A-f]{2})([0-9A-f]{2})([0-9A-f]{2})$/,f=/^#([0-9A-f])([0-9A-f])([0-9A-f])([0-9A-f])$/},function(e,t,n){"use strict";n.d(t,"a",function(){return a}),n.d(t,"b",function(){return s}),n.d(t,"c",function(){return u}),n.d(t,"d",function(){return o});var r=n(110),i=window,a=i.HTMLElement,o=i.VTTCue||i.TextTrackCue,u=i.MediaSource||i.MozMediaSource||i.WebKitMediaSource||i.MSMediaSource,s=i.MediaKeys||i.MozMediaKeys||i.WebKitMediaKeys||i.MSMediaKeys||function(){return function(){var e=function(){throw new r.a("MEDIA_KEYS_NOT_SUPPORTED",null,!0)};this.create=e,this.createSession=e,this.isTypeSupported=e,this.setServerCertificate=e}}()},function(e,t,n){"use strict";n.d(t,"b",function(){return r}),n.d(t,"c",function(){return i}),n.d(t,"a",function(){return a});var r={NETWORK_ERROR:"NETWORK_ERROR",MEDIA_ERROR:"MEDIA_ERROR",ENCRYPTED_MEDIA_ERROR:"ENCRYPTED_MEDIA_ERROR",OTHER_ERROR:"OTHER_ERROR"},i={TIMEOUT:"TIMEOUT",ERROR_EVENT:"ERROR_EVENT",ERROR_HTTP_CODE:"ERROR_HTTP_CODE",PARSE_ERROR:"PARSE_ERROR"},a={PIPELINE_RESOLVE_ERROR:"PIPELINE_RESOLVE_ERROR",PIPELINE_LOAD_ERROR:"PIPELINE_LOAD_ERROR",PIPELINE_PARSING_ERROR:"PIPELINE_PARSING_ERROR",MANIFEST_PARSE_ERROR:"MANIFEST_PARSE_ERROR",MANIFEST_INCOMPATIBLE_CODECS_ERROR:"MANIFEST_INCOMPATIBLE_CODECS_ERROR",MANIFEST_UNSUPPORTED_ADAPTATION_TYPE:"MANIFEST_UNSUPPORTED_ADAPTATION_TYPE",MEDIA_STARTING_TIME_NOT_FOUND:"MEDIA_STARTING_TIME_NOT_FOUND",MEDIA_TIME_BEFORE_MANIFEST:"MEDIA_TIME_BEFORE_MANIFEST",MEDIA_TIME_AFTER_MANIFEST:"MEDIA_TIME_AFTER_MANIFEST",MEDIA_TIME_NOT_FOUND:"MEDIA_TIME_NOT_FOUND",MEDIA_IS_ENCRYPTED_ERROR:"MEDIA_IS_ENCRYPTED_ERROR",KEY_ERROR:"KEY_ERROR",KEY_STATUS_CHANGE_ERROR:"KEY_STATUS_CHANGE_ERROR",KEY_UPDATE_ERROR:"KEY_UPDATE_ERROR",KEY_LOAD_ERROR:"KEY_LOAD_ERROR",KEY_LOAD_TIMEOUT:"KEY_LOAD_TIMEOUT",KEY_GENERATE_REQUEST_ERROR:"KEY_GENERATE_REQUEST_ERROR",INCOMPATIBLE_KEYSYSTEMS:"INCOMPATIBLE_KEYSYSTEMS",LICENSE_SERVER_CERTIFICATE_ERROR:"LICENSE_SERVER_CERTIFICATE_ERROR",BUFFER_APPEND_ERROR:"BUFFER_APPEND_ERROR",BUFFER_FULL_ERROR:"BUFFER_FULL_ERROR",BUFFER_TYPE_UNKNOWN:"BUFFER_TYPE_UNKNOWN",MEDIA_ERR_BLOCKED_AUTOPLAY:"MEDIA_ERR_BLOCKED_AUTOPLAY",MEDIA_ERR_PLAY_NOT_ALLOWED:"MEDIA_ERR_PLAY_NOT_ALLOWED",MEDIA_ERR_NOT_LOADED_METADATA:"MEDIA_ERR_NOT_LOADED_METADATA",MEDIA_ERR_ABORTED:"MEDIA_ERR_ABORTED",MEDIA_ERR_NETWORK:"MEDIA_ERR_NETWORK",MEDIA_ERR_DECODE:"MEDIA_ERR_DECODE",MEDIA_ERR_SRC_NOT_SUPPORTED:"MEDIA_ERR_SRC_NOT_SUPPORTED",MEDIA_ERR_UNKNOWN:"MEDIA_ERR_UNKNOWN",MEDIA_SOURCE_NOT_SUPPORTED:"MEDIA_SOURCE_NOT_SUPPORTED",MEDIA_KEYS_NOT_SUPPORTED:"MEDIA_KEYS_NOT_SUPPORTED"}},function(e,t,n){"use strict";var r={loaded:function(){return{type:"loaded",value:!0}},manifestReady:function(e,t){return{type:"manifestReady",value:{abrManager:e,manifest:t}}},nullRepresentation:function(e,t){return{type:"representationChange",value:{type:e,representation:null,period:t}}},reloadingMediaSource:function(){return{type:"reloading-media-source",value:void 0}},speedChanged:function(e){return{type:"speedChanged",value:e}},stalled:function(e){return{type:"stalled",value:e}},warning:function(e){return{type:"warning",value:e}}};t.a=r},function(e,t,n){"use strict";var r=n(5),i=n(2),p=n(20),h=n(177),u=i.a.DEFAULT_REQUEST_TIMEOUT;var a=function(a){var o={url:a.url,headers:a.headers,responseType:null==a.responseType?"json":a.responseType,timeout:null==a.timeout?u:a.timeout};return r.a.create(function(c){var l=o.url,e=o.headers,t=o.responseType,n=o.timeout,f=new XMLHttpRequest;if(f.open("GET",l,!0),0<=n&&(f.timeout=n),f.responseType=t,"document"===f.responseType&&f.overrideMimeType("text/xml"),e){var r=e;for(var i in r)r.hasOwnProperty(i)&&f.setRequestHeader(i,r[i])}var d=performance.now();return f.onerror=function(){var e=p.c.ERROR_EVENT;c.error(new h.a(f,l,e))},f.ontimeout=function(){var e=p.c.TIMEOUT;c.error(new h.a(f,l,e))},a.ignoreProgressEvents||(f.onprogress=function(e){var t=performance.now();c.next({type:"progress",value:{url:l,duration:t-d,sendingTime:d,currentTime:t,size:e.loaded,totalSize:e.total}})}),f.onload=function(e){if(4===f.readyState)if(200<=f.status&&f.status<300){var t,n=performance.now(),r=f.response instanceof ArrayBuffer?f.response.byteLength:e.total,i=f.status,a=f.responseType,o=f.responseURL||l;if(null==(t="json"===a?"string"!==f.response?f.response:function(e){try{return JSON.parse(e)}catch(e){return null}}(f.responseText):f.response)){var u=p.c.PARSE_ERROR;return void c.error(new h.a(f,o,u))}c.next({type:"response",value:{status:i,url:o,responseType:a,sendingTime:d,receivedTime:n,duration:n-d,size:r,responseData:t}}),c.complete()}else{var s=p.c.ERROR_HTTP_CODE;c.error(new h.a(f,l,s))}},f.send(),function(){f&&4!==f.readyState&&f.abort()}})};t.a=a},function(e,t,n){"use strict";n.d(t,"a",function(){return r});var a=n(47),o=n(79);function r(e,t,n,r,i){if(void 0===i&&(i=new a.a(e,n,r)),!i.closed)return Object(o.a)(t)(i)}},function(e,t,n){"use strict";n.d(t,"a",function(){return i});var r=n(3),i=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return r.a(t,e),t.prototype.notifyNext=function(e,t,n,r,i){this.destination.next(t)},t.prototype.notifyError=function(e,t){this.destination.error(e)},t.prototype.notifyComplete=function(e){this.destination.complete()},t}(n(9).a)},function(e,t,n){"use strict";n.d(t,"b",function(){return r}),n.d(t,"c",function(){return i}),n.d(t,"a",function(){return a}),n.d(t,"d",function(){return o});var r=!!window.MSInputMethodContext&&!!document.documentMode,i="Microsoft Internet Explorer"===navigator.appName||"Netscape"===navigator.appName&&/(Trident|Edge)\//.test(navigator.userAgent),a=-1!==navigator.userAgent.toLowerCase().indexOf("firefox"),o=/SamsungBrowser/.test(navigator.userAgent)},function(e,t,n){"use strict";t.a=function(){}},function(e,t,n){"use strict";var r=n(130),i=n.n(r);t.a="function"==typeof Promise?Promise:i.a},function(e,t,n){"use strict";var g=n(11),y=n(12);function a(e,t,n){if("function"==typeof String.prototype.startsWith)return e.startsWith(t,n);var r="number"==typeof n?Math.max(n,0):0;return e.substring(r,r+t.length)===t}function r(e,t,p,h){for(var v={},m=e.slice(),n=0;n<=t.length-1;n++){var b=t[n];if(b){var r=function(){var t=void 0,n=void 0;if(b.nodeType===Node.ELEMENT_NODE)for(var e=b,r=0;r<=e.attributes.length-1;r++){var i=e.attributes[r],a=i.name;if("style"===a)t=i.value;else if("region"===a)n=i.value;else{var o=a.substring(4);if(Object(y.a)(m,o)&&(v[o]=i.value,m.splice(r,1),!m.length))return{v:v}}}if(t){var u=Object(g.a)(p,function(e){return e.id===t});if(u)for(var s=0;s<=m.length-1;s++){var c=m[s];if(!v[c]&&u.style[c]){if(v[c]=u.style[c],m.splice(s,1),!m.length)return{v:v};s--}}}if(n){var l=Object(g.a)(h,function(e){return e.id===n});if(l)for(var f=0;f<=m.length-1;f++){var d=m[f];if(!v[d]&&l.style[d]){if(v[d]=l.style[d],m.splice(f,1),!m.length)return{v:v};f--}}}}();if("object"==typeof r)return r.v}}return v}function i(e){if(e.nodeType!==Node.ELEMENT_NODE)return{};for(var t=e,n={},r=0;r<=t.attributes.length-1;r++){var i=t.attributes[r];if(a(i.name,"tts"))n[i.name.substring(4)]=i.value}return n}n.d(t,"a",function(){return r}),n.d(t,"b",function(){return i})},function(e,t,n){"use strict";n.d(t,"a",function(){return r});var r={e:{}}},function(e,t,n){"use strict";n.d(t,"a",function(){return r}),n.d(t,"b",function(){return o});var i=/^(?:[a-z]+:)?\/\//i,a=/\/\.{1,2}\//;function r(){var e=arguments.length;if(0===e)return"";for(var t="",n=0;n<e;n++){var r=n<0||arguments.length<=n?void 0:arguments[n];"string"==typeof r&&""!==r&&(t=i.test(r)?r:("/"===r[0]&&(r=r.substring(1)),"/"===t[t.length-1]&&(t=t.substring(0,t.length-1)),t+"/"+r))}return function(e){if(!a.test(e))return e;for(var t=[],n=e.split("/"),r=0,i=n.length;r<i;r++)if(".."===n[r])t.pop();else{if("."===n[r])continue;t.push(n[r])}return t.join("/")}(t)}function o(e){var t=e.lastIndexOf("/");return 0<=t?e.substring(0,t+1):e}},function(e,t,n){"use strict";n.d(t,"a",function(){return a}),n.d(t,"b",function(){return o});var i=n(5),r=n(0),a=function(){function e(){this._listeners={}}var t=e.prototype;return t.addEventListener=function(e,t){var n=this._listeners[e];n?n.push(t):this._listeners[e]=[t]},t.removeEventListener=function(e,t){if(null!=e){var n=this._listeners[e];if(n)if(null!=t){var r=n.indexOf(t);~r&&n.splice(r,1),n.length||delete this._listeners[e]}else delete this._listeners[e]}else this._listeners={}},t.trigger=function(e,t){var n=this._listeners[e];n&&n.slice().forEach(function(e){try{e(t)}catch(e){r.a.error(e,e.stack)}})},e}();function o(n,r){return i.a.create(function(t){function e(e){t.next(e)}return n.addEventListener(r,e),function(){n.removeEventListener(r,e)}})}},function(e,t,n){"use strict";n.d(t,"a",function(){return a});var r=n(3),i=n(9);function a(t,n){return function(e){if("function"!=typeof t)throw new TypeError("argument is not a function. Are you looking for `mapTo()`?");return e.lift(new o(t,n))}}var o=function(){function e(e,t){this.project=e,this.thisArg=t}return e.prototype.call=function(e,t){return t.subscribe(new u(e,this.project,this.thisArg))},e}(),u=function(i){function e(e,t,n){var r=i.call(this,e)||this;return r.project=t,r.count=0,r.thisArg=n||r,r}return r.a(e,i),e.prototype._next=function(e){var t;try{t=this.project.call(this.thisArg,e,this.count++)}catch(e){return void this.destination.error(e)}this.destination.next(t)},e}(i.a)},function(e,t,n){"use strict";n.d(t,"a",function(){return i});var r=!1,i={Promise:void 0,set useDeprecatedSynchronousErrorHandling(e){e&&(new Error).stack;r=e},get useDeprecatedSynchronousErrorHandling(){return r}}},function(e,t,n){"use strict";function r(e){return e&&"function"==typeof e.schedule}n.d(t,"a",function(){return r})},function(e,t,n){"use strict";n.d(t,"a",function(){return r});var a=n(5),o=n(15),u=n(82);function r(r,i){return i?new a.a(function(e){var t=new o.a,n=0;return t.add(i.schedule(function(){n!==r.length?(e.next(r[n++]),e.closed||t.add(this.schedule())):e.complete()})),t}):new a.a(Object(u.a)(r))}},function(e,t,n){"use strict";n.d(t,"a",function(){return a});var r=n(12),i=[];function a(e){Object(r.a)(i,e)||(console.warn(e),i.push(e))}},function(e,t,n){"use strict";function r(){}n.d(t,"a",function(){return r})},function(e,t,n){"use strict";n.d(t,"a",function(){return i}),n.d(t,"b",function(){return a});var r=n(5),i=new r.a(function(e){return e.complete()});function a(e){return e?(t=e,new r.a(function(e){return t.schedule(function(){return e.complete()})})):i;var t}},function(e,t,n){"use strict";n.d(t,"a",function(){return u});var r=n(34),i=n(35),a=n(38),o=n(86);function u(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var n=e[e.length-1];switch(Object(r.a)(n)?e.pop():n=void 0,e.length){case 0:return Object(a.b)(n);case 1:return n?Object(i.a)(e,n):Object(o.a)(e[0]);default:return Object(i.a)(e,n)}}},function(e,t,n){"use strict";n.d(t,"a",function(){return i});var r=n(108),i=new(n(107).a)(r.a)},function(e,t,n){"use strict";n.d(t,"b",function(){return l}),n.d(t,"a",function(){return f});var i=n(3),r=n(5),a=n(9),o=n(15),u=n(49),s=n(87),c=n(60),l=function(n){function e(e){var t=n.call(this,e)||this;return t.destination=e,t}return i.a(e,n),e}(a.a),f=function(t){function e(){var e=t.call(this)||this;return e.observers=[],e.closed=!1,e.isStopped=!1,e.hasError=!1,e.thrownError=null,e}return i.a(e,t),e.prototype[c.a]=function(){return new l(this)},e.prototype.lift=function(e){var t=new d(this,this);return t.operator=e,t},e.prototype.next=function(e){if(this.closed)throw new u.a;if(!this.isStopped)for(var t=this.observers,n=t.length,r=t.slice(),i=0;i<n;i++)r[i].next(e)},e.prototype.error=function(e){if(this.closed)throw new u.a;this.hasError=!0,this.thrownError=e,this.isStopped=!0;for(var t=this.observers,n=t.length,r=t.slice(),i=0;i<n;i++)r[i].error(e);this.observers.length=0},e.prototype.complete=function(){if(this.closed)throw new u.a;this.isStopped=!0;for(var e=this.observers,t=e.length,n=e.slice(),r=0;r<t;r++)n[r].complete();this.observers.length=0},e.prototype.unsubscribe=function(){this.isStopped=!0,this.closed=!0,this.observers=null},e.prototype._trySubscribe=function(e){if(this.closed)throw new u.a;return t.prototype._trySubscribe.call(this,e)},e.prototype._subscribe=function(e){if(this.closed)throw new u.a;return this.hasError?(e.error(this.thrownError),o.a.EMPTY):this.isStopped?(e.complete(),o.a.EMPTY):(this.observers.push(e),new s.a(this,e))},e.prototype.asObservable=function(){var e=new r.a;return e.source=this,e},e.create=function(e,t){return new d(e,t)},e}(r.a),d=function(r){function e(e,t){var n=r.call(this)||this;return n.destination=e,n.source=t,n}return i.a(e,r),e.prototype.next=function(e){var t=this.destination;t&&t.next&&t.next(e)},e.prototype.error=function(e){var t=this.destination;t&&t.error&&this.destination.error(e)},e.prototype.complete=function(){var e=this.destination;e&&e.complete&&this.destination.complete()},e.prototype._subscribe=function(e){return this.source?this.source.subscribe(e):o.a.EMPTY},e}(f)},function(e,t,n){"use strict";n.d(t,"a",function(){return i});var r=n(73);function i(e,t){try{return e(t)}catch(e){return Object(r.a)(e)}}},function(e,t,n){"use strict";var s=n(5),c=n(83),l=n(81),f=n(46);var d=n(56);var p=n(35),h=n(15),v=n(84);var m=n(85);var b=n(80);var g=n(79);function r(e,t){if(!t)return e instanceof s.a?e:new s.a(Object(g.a)(e));if(null!=e){if((u=e)&&"function"==typeof u[f.a])return a=e,(o=t)?new s.a(function(t){var n=new h.a;return n.add(o.schedule(function(){var e=a[f.a]();n.add(e.subscribe({next:function(e){n.add(o.schedule(function(){return t.next(e)}))},error:function(e){n.add(o.schedule(function(){return t.error(e)}))},complete:function(){n.add(o.schedule(function(){return t.complete()}))}}))})),n}):new s.a(Object(b.a)(a));if(Object(c.a)(e))return r=e,(i=t)?new s.a(function(t){var n=new h.a;return n.add(i.schedule(function(){return r.then(function(e){n.add(i.schedule(function(){t.next(e),n.add(i.schedule(function(){return t.complete()}))}))},function(e){n.add(i.schedule(function(){return t.error(e)}))})})),n}):new s.a(Object(v.a)(r));if(Object(l.a)(e))return Object(p.a)(e,t);if((n=e)&&"function"==typeof n[d.a]||"string"==typeof e)return function(t,n){if(!t)throw new Error("Iterable cannot be null");return n?new s.a(function(r){var i,e=new h.a;return e.add(function(){i&&"function"==typeof i.return&&i.return()}),e.add(n.schedule(function(){i=t[d.a](),e.add(n.schedule(function(){if(!r.closed){var e,t;try{var n=i.next();e=n.value,t=n.done}catch(e){return void r.error(e)}t?r.complete():(r.next(e),this.schedule())}}))})),e}):new s.a(Object(m.a)(t))}(e,t)}var n,r,i,a,o,u;throw new TypeError((null!==e&&typeof e||e)+" is not observable")}n.d(t,"a",function(){return r})},function(e,t,n){"use strict";n.d(t,"a",function(){return c});var r=n(3),a=n(23),i=n(24),o=n(47),u=n(32),s=n(43);function c(t,i,n){return void 0===n&&(n=Number.POSITIVE_INFINITY),"function"==typeof i?function(e){return e.pipe(c(function(n,r){return Object(s.a)(t(n,r)).pipe(Object(u.a)(function(e,t){return i(n,e,r,t)}))},n))}:("number"==typeof i&&(n=i),function(e){return e.lift(new l(t,n))})}var l=function(){function e(e,t){void 0===t&&(t=Number.POSITIVE_INFINITY),this.project=e,this.concurrent=t}return e.prototype.call=function(e,t){return t.subscribe(new f(e,this.project,this.concurrent))},e}(),f=function(i){function e(e,t,n){void 0===n&&(n=Number.POSITIVE_INFINITY);var r=i.call(this,e)||this;return r.project=t,r.concurrent=n,r.hasCompleted=!1,r.buffer=[],r.active=0,r.index=0,r}return r.a(e,i),e.prototype._next=function(e){this.active<this.concurrent?this._tryNext(e):this.buffer.push(e)},e.prototype._tryNext=function(e){var t,n=this.index++;try{t=this.project(e,n)}catch(e){return void this.destination.error(e)}this.active++,this._innerSub(t,e,n)},e.prototype._innerSub=function(e,t,n){var r=new o.a(this,void 0,void 0);this.destination.add(r),Object(a.a)(this,e,t,n,r)},e.prototype._complete=function(){this.hasCompleted=!0,0===this.active&&0===this.buffer.length&&this.destination.complete(),this.unsubscribe()},e.prototype.notifyNext=function(e,t,n,r,i){this.destination.next(t)},e.prototype.notifyComplete=function(e){var t=this.buffer;this.remove(e),this.active--,0<t.length?this._next(t.shift()):0===this.active&&this.hasCompleted&&this.destination.complete()},e}(i.a)},function(e,t,n){"use strict";n.d(t,"a",function(){return r});var r=Array.isArray||function(e){return e&&"number"==typeof e.length}},function(e,t,n){"use strict";n.d(t,"a",function(){return r});var r="function"==typeof Symbol&&Symbol.observable||"@@observable"},function(e,t,n){"use strict";n.d(t,"a",function(){return i});var r=n(3),i=function(i){function e(e,t,n){var r=i.call(this)||this;return r.parent=e,r.outerValue=t,r.outerIndex=n,r.index=0,r}return r.a(e,i),e.prototype._next=function(e){this.parent.notifyNext(this.outerValue,e,this.outerIndex,this.index++,this)},e.prototype._error=function(e){this.parent.notifyError(e,this),this.unsubscribe()},e.prototype._complete=function(){this.parent.notifyComplete(this),this.unsubscribe()},e}(n(9).a)},function(e,t,n){"use strict";function r(){var e=0;return function(){return""+e++}}n.d(t,"a",function(){return r})},function(e,t,n){"use strict";function r(){return Error.call(this),this.message="object unsubscribed",this.name="ObjectUnsubscribedError",this}n.d(t,"a",function(){return i}),r.prototype=Object.create(Error.prototype);var i=r},function(e,t,n){"use strict";function r(e){return e.getElementsByTagName("body")[0]}function i(e){return e.getElementsByTagName("style")}function a(e){return e.getElementsByTagName("region")}function o(e){return e.getElementsByTagName("p")}n.d(t,"a",function(){return r}),n.d(t,"c",function(){return i}),n.d(t,"b",function(){return a}),n.d(t,"d",function(){return o})},function(e,t,n){"use strict";function r(e){return"function"==typeof e}n.d(t,"a",function(){return r})},function(e,t,n){"use strict";function r(e){for(var t=0;t<e.length;){if(""===e[t])return t+1;t++}return t}function s(e,t){return!!e[t]&&/^STYLE( .*)?$/g.test(e[t])&&(!e[t+1]||e[t+1].indexOf("--\x3e")<0)}function i(e,t){var n,r,i,a,o=e[t];if(!o||s(e,t)||(i=e)[a=t]&&/^REGION( .*)?$/g.test(i[a])&&(!i[a+1]||i[a+1].indexOf("--\x3e")<0)||(n=e)[r=t]&&/^NOTE( .*)?$/g.test(n[r])&&(!n[r+1]||n[r+1].indexOf("--\x3e")<0))return!1;if(0<=o.indexOf("--\x3e"))return!0;var u=e[t+1];return!!u&&0<=u.indexOf("--\x3e")}function a(e,t){for(var n=t+1;e[n];)n++;return n}n.d(t,"b",function(){return r}),n.d(t,"c",function(){return i}),n.d(t,"d",function(){return s}),n.d(t,"a",function(){return a})},function(e,t,n){"use strict";function r(e){setTimeout(function(){throw e})}n.d(t,"a",function(){return r})},function(e,t,n){"use strict";n.r(t);var a=n(159),r=n(5),i=n(37),o=new r.a(i.a);var u=n(160),s=n(171),c=n(32),l=n(161),f=n(3),d=n(9),p=n(40);function h(t,n){return void 0===n&&(n=p.a),function(e){return e.lift(new v(t,n))}}var v=function(){function e(e,t){this.dueTime=e,this.scheduler=t}return e.prototype.call=function(e,t){return t.subscribe(new m(e,this.dueTime,this.scheduler))},e}(),m=function(i){function e(e,t,n){var r=i.call(this,e)||this;return r.dueTime=t,r.scheduler=n,r.debouncedSubscription=null,r.lastValue=null,r.hasValue=!1,r}return f.a(e,i),e.prototype._next=function(e){this.clearDebounce(),this.lastValue=e,this.hasValue=!0,this.add(this.debouncedSubscription=this.scheduler.schedule(b,this.dueTime,this))},e.prototype._complete=function(){this.debouncedNext(),this.destination.complete()},e.prototype.debouncedNext=function(){if(this.clearDebounce(),this.hasValue){var e=this.lastValue;this.lastValue=null,this.hasValue=!1,this.destination.next(e)}},e.prototype.clearDebounce=function(){var e=this.debouncedSubscription;null!==e&&(this.remove(e),e.unsubscribe(),this.debouncedSubscription=null)},e}(d.a);function b(e){e.debouncedNext()}var g=n(170),y=n(162),_=n(2),O=n(19);n.d(t,"isInBackground$",function(){return k}),n.d(t,"videoWidth$",function(){return I}),n.d(t,"onPlayPause$",function(){return L}),n.d(t,"onTextTrackChanges$",function(){return U}),n.d(t,"onLoadedMetadata$",function(){return M}),n.d(t,"onSeeking$",function(){return N}),n.d(t,"onSeeked$",function(){return D}),n.d(t,"onEnded$",function(){return C}),n.d(t,"onTimeUpdate$",function(){return P}),n.d(t,"onFullscreenChange$",function(){return B}),n.d(t,"onSourceOpen$",function(){return F}),n.d(t,"onUpdate$",function(){return $}),n.d(t,"onRemoveSourceBuffers$",function(){return V}),n.d(t,"onEncrypted$",function(){return z}),n.d(t,"onKeyMessage$",function(){return H}),n.d(t,"onKeyAdded$",function(){return K}),n.d(t,"onKeyError$",function(){return G}),n.d(t,"onKeyStatusesChange$",function(){return W});var E=["","webkit","moz","ms"],w=_.a.INACTIVITY_DELAY,T=window.devicePixelRatio||1;function j(a,e){return e.filter(function(e){return t=a,n=e,r=document.createElement(t.tagName),(i="on"+n)in r||(r.setAttribute(i,"return;"),"function"==typeof r[i]);var t,n,r,i})[0]}function S(e,t){var n,r,i=(r=t,e.reduce(function(e,t){return e.concat((r||E).map(function(e){return e+t}))},[]));return function(t){return t instanceof O.a?(void 0===n&&(n=j(t,i)),n?Object(a.a)(t,n):o):u.a.apply(void 0,i.map(function(e){return Object(a.a)(t,e)}))}}function x(){var e,t=document;null!=t.hidden?e="":null!=t.mozHidden?e="moz":null!=t.msHidden?e="ms":null!=t.webkitHidden&&(e="webkit");var n=e?e+"Hidden":"hidden",r=e+"visibilitychange";return Object(a.a)(document,r).pipe(Object(c.a)(function(){return document[n]}))}var A=x().pipe(Object(l.a)(function(e){return!e})),R=x().pipe(h(w),Object(l.a)(function(e){return e}));function k(){return Object(u.a)(A,R).pipe(Object(g.a)(!1))}function I(e){return Object(u.a)(Object(s.a)(2e4),Object(a.a)(window,"resize").pipe(h(500))).pipe(Object(g.a)(null),Object(c.a)(function(){return e.clientWidth*T}),Object(y.a)())}var M=S(["loadedmetadata"]),N=S(["seeking"]),D=S(["seeked"]),C=S(["ended"]),P=S(["timeupdate"]),B=S(["fullscreenchange","FullscreenChange"],E.concat("MS")),L=function(e){return Object(u.a)(S(["play"])(e),S(["pause"])(e))},U=function(e){return Object(u.a)(S(["addtrack"])(e),S(["removetrack"])(e))},F=S(["sourceopen","webkitsourceopen"]),$=S(["update"]),V=S(["onremovesourcebuffer"]),z=S(["encrypted","needkey"]),H=S(["keymessage","message"]),K=S(["keyadded","ready"]),G=S(["keyerror","error"]),W=S(["keystatuseschange"])},function(e,t,n){"use strict";function r(e,t,n){return null==n?e+" ("+t+")":"string"==typeof n?e+" ("+t+") "+n:e+" ("+t+") "+(n instanceof Event?n.type:n.message)}n.d(t,"a",function(){return r})},function(e,t,n){"use strict";function r(){return"function"==typeof Symbol&&Symbol.iterator?Symbol.iterator:"@@iterator"}n.d(t,"a",function(){return i});var i=r()},function(e,t,n){"use strict";function r(e){var t=e[0],n=e[1];return n===1/0?"bytes="+ +t+"-":"bytes="+ +t+"-"+ +n}n.d(t,"a",function(){return r})},,function(e,t,n){"use strict";var a,r;a=function(e){if("function"!=typeof e)throw new TypeError(e+" is not a function");return e},r=function(e){var t,n,r=document.createTextNode(""),i=0;return new e(function(){var e;if(t)n&&(t=n.concat(t));else{if(!n)return;t=n}if(n=t,t=null,"function"==typeof n)return e=n,n=null,void e();for(r.data=i=++i%2;n;)e=n.shift(),n.length||(n=null),e()}).observe(r,{characterData:!0}),function(e){a(e),t?"function"==typeof t?t=[t,e]:t.push(e):(t=e,r.data=i=++i%2)}},e.exports=function(){if("object"==typeof process&&process&&"function"==typeof process.nextTick)return process.nextTick;if("object"==typeof document&&document){if("function"==typeof MutationObserver)return r(MutationObserver);if("function"==typeof WebKitMutationObserver)return r(WebKitMutationObserver)}return"function"==typeof setImmediate?function(e){setImmediate(a(e))}:"function"==typeof setTimeout||"object"==typeof setTimeout?function(e){setTimeout(a(e),0)}:null}()},function(e,t,n){"use strict";n.d(t,"a",function(){return r});var r="function"==typeof Symbol?Symbol("rxSubscriber"):"@@rxSubscriber_"+Math.random()},function(e,t,n){"use strict";n.d(t,"a",function(){return r});var r=function(){function e(){this._hashes={}}var t=e.prototype;return t.add=function(e){this._hashes[e]=!0},t.remove=function(e){delete this._hashes[e]},t.test=function(e){return!!this._hashes[e]},t.isEmpty=function(){return!Object.keys(this._hashes).length},e}()},function(e,t,n){"use strict";var i=n(3),r=n(41),a=n(5),o=n(9),u=n(15),s=n(67),c=function(r){function e(e,t){var n=r.call(this)||this;return n.source=e,n.subjectFactory=t,n._refCount=0,n._isComplete=!1,n}return i.a(e,r),e.prototype._subscribe=function(e){return this.getSubject().subscribe(e)},e.prototype.getSubject=function(){var e=this._subject;return e&&!e.isStopped||(this._subject=this.subjectFactory()),this._subject},e.prototype.connect=function(){var e=this._connection;return e||(this._isComplete=!1,(e=this._connection=new u.a).add(this.source.subscribe(new f(this.getSubject(),this))),e.closed?(this._connection=null,e=u.a.EMPTY):this._connection=e),e},e.prototype.refCount=function(){return Object(s.a)()(this)},e}(a.a).prototype,l={operator:{value:null},_refCount:{value:0,writable:!0},_subject:{value:null,writable:!0},_connection:{value:null,writable:!0},_subscribe:{value:c._subscribe},_isComplete:{value:c._isComplete,writable:!0},getSubject:{value:c.getSubject},connect:{value:c.connect},refCount:{value:c.refCount}},f=function(r){function e(e,t){var n=r.call(this,e)||this;return n.connectable=t,n}return i.a(e,r),e.prototype._error=function(e){this._unsubscribe(),r.prototype._error.call(this,e)},e.prototype._complete=function(){this.connectable._isComplete=!0,this._unsubscribe(),r.prototype._complete.call(this)},e.prototype._unsubscribe=function(){var e=this.connectable;if(e){this.connectable=null;var t=e._connection;e._refCount=0,e._subject=null,e._connection=null,t&&t.unsubscribe()}},e}(r.b);o.a;function d(r,i){return function(e){var t;if(t="function"==typeof r?r:function(){return r},"function"==typeof i)return e.lift(new p(t,i));var n=Object.create(e,l);return n.source=e,n.subjectFactory=t,n}}n.d(t,"a",function(){return d});var p=function(){function e(e,t){this.subjectFactory=e,this.selector=t}return e.prototype.call=function(e,t){var n=this.selector,r=this.subjectFactory(),i=n(r).subscribe(e);return i.add(t.subscribe(r)),i},e}()},function(e,t,n){"use strict";function r(e,i){if(!(e.parentNode instanceof Element))return[];return function e(t){var n=[];t.tagName.toLowerCase()===i.toLowerCase()&&n.push(t);var r=t.parentNode;return r instanceof Element&&n.push.apply(n,e(r)),n}(e.parentNode)}n.d(t,"a",function(){return r})},function(e,t,n){"use strict";var r=n(59),a=n.n(r),o=n(39),i=n(31),u=n(42),s=n(14),c=function(){function e(){this._ranges=[],this.length=0}var t=e.prototype;return t.insert=function(e,t){Object(s.h)(this._ranges,{start:e,end:t}),this.length=this._ranges.length},t.remove=function(e,t){var n=[];0<e&&n.push({start:0,end:e}),t<1/0&&n.push({start:t,end:1/0}),this._ranges=Object(s.j)(this._ranges,n),this.length=this._ranges.length},t.start=function(e){if(e>=this._ranges.length)throw new Error("INDEX_SIZE_ERROR");return this._ranges[e].start},t.end=function(e){if(e>=this._ranges.length)throw new Error("INDEX_SIZE_ERROR");return this._ranges[e].end},e}();n.d(t,"a",function(){return l});var l=function(t){var e,n;function r(){var e;return(e=t.call(this)||this).updating=!1,e.readyState="opened",e.buffered=new c,e.timestampOffset=0,e}n=t,(e=r).prototype=Object.create(n.prototype),(e.prototype.constructor=e).__proto__=n;var i=r.prototype;return i.appendBuffer=function(e){var t=this;this._lock(function(){return t._append(e)})},i.remove=function(e,t){var n=this;this._lock(function(){return n._remove(e,t)})},i.abort=function(){this.remove(0,1/0),this.updating=!1,this.readyState="closed",this._abort()},i._lock=function(e){var t=this;if(this.updating)throw new Error("SourceBuffer: SourceBuffer already updating.");this.updating=!0,this.trigger("updatestart",void 0),Object(u.a)(function(){return e(),Object(o.a)(void 0)},void 0).subscribe(function(){return a()(function(){t.updating=!1,t.trigger("update",void 0),t.trigger("updateend",void 0)})},function(e){return a()(function(){t.updating=!1,t.trigger("error",e),t.trigger("updateend",void 0)})})},r}(i.a)},function(e,t,n){"use strict";n.d(t,"a",function(){return a});var r=n(33),i=n(53),a={closed:!0,next:function(e){},error:function(e){if(r.a.useDeprecatedSynchronousErrorHandling)throw e;Object(i.a)(e)},complete:function(){}}},function(e,t,n){"use strict";n.d(t,"a",function(){return o});var r,i=n(29);function a(){try{return r.apply(this,arguments)}catch(e){return i.a.e=e,i.a}}function o(e){return r=e,a}},function(e,t,n){"use strict";n.d(t,"a",function(){return a});var i=n(3),r=n(9);function a(){return function(e){return e.lift(new o(e))}}var o=function(){function e(e){this.connectable=e}return e.prototype.call=function(e,t){var n=this.connectable;n._refCount++;var r=new u(e,n),i=t.subscribe(r);return r.closed||(r.connection=n.connect()),i},e}(),u=function(r){function e(e,t){var n=r.call(this,e)||this;return n.connectable=t,n}return i.a(e,r),e.prototype._unsubscribe=function(){var e=this.connectable;if(e){this.connectable=null;var t=e._refCount;if(t<=0)this.connection=null;else if(e._refCount=t-1,1<t)this.connection=null;else{var n=this.connection,r=e._connection;this.connection=null,!r||n&&r!==n||r.unsubscribe()}}else this.connection=null},e}(r.a)},,function(e,t,n){"use strict";var m=n(163),b=n(38),r=n(174),g=n(160),y=n(75),_=n(39),O=n(132),E=n(44),w=n(32),s=n(120),T=n(164),c=n(161),i=n(8),a=n(122),j=n(0),u=n(1),v=n(17),o=n(25),l=Object(u.c)(Object(u.p)("pssh"),0);function f(n,r,i){return Object(m.a)(function(){return j.a.debug("Compat: Calling generateRequest on the MediaKeySession"),Object(v.a)(n.generateRequest(i||"",r)).pipe(Object(T.a)(function(t){if(o.c){var e;try{e=function(e){var t=e.byteLength;j.a.info("Compat: Trying to remove CENC PSSH from init data.");for(var n=new Uint8Array,r=0;r<e.length;){if(e.length<r+8||Object(u.c)(e,r+4)!==l)throw j.a.warn("Compat: unrecognized initialization data. Cannot patch it."),new Error("Compat: unrecognized initialization data. Cannot patch it.");var i=Object(u.c)(new Uint8Array(e),r);if(r+i>e.length)throw j.a.warn("Compat: unrecognized initialization data. Cannot patch it."),new Error("Compat: unrecognized initialization data. Cannot patch it.");if(16===e[r+12]&&119===e[r+13]&&239===e[r+14]&&236===e[r+15]&&192===e[r+16]&&178===e[r+17]&&77===e[r+18]&&2===e[r+19]&&172===e[r+20]&&227===e[r+21]&&60===e[r+22]&&30===e[r+23]&&82===e[r+24]&&226===e[r+25]&&251===e[r+26]&&75===e[r+27])j.a.info("Compat: CENC PSSH found. Removing it.");else{var a=e.subarray(r,r+i);n=Object(u.h)(n,a)}r+=i}if(r!==e.length)throw j.a.warn("Compat: unrecognized initialization data. Cannot patch it."),new Error("Compat: unrecognized initialization data. Cannot patch it.");if(n.byteLength===t)throw j.a.warn("Compat: CENC PSSH not found. Cannot patch it"),new Error("Compat: unrecognized initialization data. Cannot patch it.");return n}(r)}catch(e){throw t}return Object(v.a)(n.generateRequest(i||"",e))}throw t}))})}var d=n(119),p=n(26),h=n(118);function S(n,r){return Object(m.a)(function(){return Object(v.a)((e=n,(t=r)instanceof h.b?t._setVideo(e):e.setMediaKeys?e.setMediaKeys(t):null!==t?e.WebkitSetMediaKeys?e.WebkitSetMediaKeys(t):e.mozSetMediaKeys?e.mozSetMediaKeys(t):e.msSetMediaKeys?e.msSetMediaKeys(t):void 0:void 0));var e,t})}var x=n(172);function A(n,r){return Object(m.a)(function(){var e=r.getState(n);if(!e)return Object(_.a)(null);j.a.debug("EME: Disposing of the current MediaKeys");var t=e.sessionsStore;return r.clearState(n),t.closeAllSessions().pipe(Object(x.a)(S(n,null)))})}var R=n(5),k=n(123),I=n(2),M=n(12),N=I.a.EME_DEFAULT_WIDEVINE_ROBUSTNESSES,D=I.a.EME_KEY_SYSTEMS;function C(n,r,i){return Object(m.a)(function(){var e=i.getState(n);if(e){var t=function(e,t,n){var r=t.getConfiguration();if(Object(k.a)()||!r)return null;var i=e.filter(function(e){return!(e.type!==n.type||e.persistentLicense&&"required"!==r.persistentState||e.distinctiveIdentifierRequired&&"required"!==r.distinctiveIdentifier)})[0];return i?{keySystemOptions:i,keySystemAccess:t}:null}(r,e.mediaKeySystemAccess,e.keySystemOptions);if(t)return j.a.debug("EME: Found cached compatible keySystem",t),Object(_.a)({type:"reuse-media-key-system-access",value:{mediaKeySystemAccess:t.keySystemAccess,options:t.keySystemOptions}})}var l=r.reduce(function(e,t){var n,r=D[t.type];null!=r?n=r.map(function(e){return{keyName:t.type,keyType:e,keySystemOptions:t}}):n=[{keyName:function(e){for(var t=Object.keys(D),n=0;n<t.length;n++){var r=t[n];if(Object(M.a)(D[r],e))return r}}(t.type)||"",keyType:t.type,keySystemOptions:t}];return e.concat(n)},[]);return R.a.create(function(u){var s,c=!1;return function e(t){if(!c)if(t>=l.length)u.error(new d.a("INCOMPATIBLE_KEYSYSTEMS",null,!0));else{var n=l[t],r=n.keyName,i=n.keyType,a=n.keySystemOptions,o=function(e,t){var n=["temporary"],r="optional",i="optional";t.persistentLicense&&(r="required",n.push("persistent-license")),t.persistentStateRequired&&(r="required"),t.distinctiveIdentifierRequired&&(i="required");var a=t.videoRobustnesses||("widevine"===e?N:[]),o=t.audioRobustnesses||("widevine"===e?N:[]);return a.length||a.push(void 0),o.length||o.push(void 0),[{initDataTypes:["cenc"],videoCapabilities:a.map(function(e){return{contentType:'video/mp4;codecs="avc1.4d401e"',robustness:e}}),audioCapabilities:o.map(function(e){return{contentType:'audio/mp4;codecs="mp4a.40.2"',robustness:e}}),distinctiveIdentifier:i,persistentState:r,sessionTypes:n}]}(r,a);if(j.a.debug("EME: Request keysystem access "+i+","+(t+1)+" of "+l.length,o),null==h.c)throw new Error("requestMediaKeySystemAccess is not implemented in your browser.");s=Object(h.c)(i,o).subscribe(function(e){j.a.info("EME: Found compatible keysystem",i,o),u.next({type:"create-media-key-system-access",value:{options:a,mediaKeySystemAccess:e}}),u.complete()},function(){j.a.debug("EME: Rejected access to keysystem",i,o),s=null,e(t+1)})}}(0),function(){c=!0,s&&s.unsubscribe()}})})}var P=n(11);function B(e){for(var t=0,n=0;n<e.length;n++)t=(t<<5)-t+e[n],t&=t;return t}var L=function(){function e(e){this._mediaKeys=e,this._entries=[]}var t=e.prototype;return t.getAll=function(){return this._entries.map(function(e){return{session:e.session,sessionType:e.sessionType}})},t.get=function(e,t){var n=B(e),r=Object(P.a)(this._entries,function(e){return e.initData===n&&e.initDataType===t});return r?{session:r.session,sessionType:r.sessionType}:null},t.createSession=function(e,t,n){var r=this;if(this.get(e,t)){var i=new Error("This initialization data was already stored.");throw new d.a("MULTIPLE_SESSIONS_SAME_INIT_DATA",i,!0)}var a=Object(h.a)(this._mediaKeys,n),o={session:a,sessionType:n,initData:B(e),initDataType:t};return null!==a.closed&&a.closed.then(function(){r._delete(a)}).catch(function(e){j.a.warn("EME-MKSS: session.closed rejected: "+e)}),j.a.debug("EME-MKSS: Add session",o),this._entries.push(o),a},t.deleteAndCloseSession=function(e){var t=this;return Object(m.a)(function(){return t._delete(e),j.a.debug("EME-MKSS: Close session",e),Object(v.a)(e.close()).pipe(Object(T.a)(function(){return Object(_.a)(null)}))})},t.closeAllSessions=function(){var n=this;return Object(m.a)(function(){var e=n._entries;n._entries=[];var t=e.map(function(e){return n.deleteAndCloseSession(e.session)});return Object(y.a)(g.a.apply(void 0,t).pipe(Object(O.a)()),Object(_.a)(null))})},t._delete=function(t){var e=Object(P.a)(this._entries,function(e){return e.session===t});if(!e)return-1;j.a.debug("EME-MKSS: delete session",e);var n=this._entries.indexOf(e);return this._entries.splice(n,1),n},e}(),U=n(13);var F=function(){function e(e){var t;t=e,Object(U.b)(null!=t,"no licenseStorage given for keySystem with persistentLicense"),Object(U.a)(t,{save:"function",load:"function"},"licenseStorage"),this._entries=[],this._storage=e;try{this._entries=this._storage.load(),Object(U.b)(Array.isArray(this._entries))}catch(e){j.a.warn("EME-PSS: Could not get entries from license storage",e),this.dispose()}}var t=e.prototype;return t.get=function(e,t){var n=B(e);return Object(P.a)(this._entries,function(e){return e.initData===n&&e.initDataType===t})||null},t.add=function(e,t,n){var r=n&&n.sessionId;if(r){var i=this.get(e,t);i&&i.sessionId===r||(i&&this.delete(e,t),j.a.info("EME-PSS: Add new session",r,n),this._entries.push({sessionId:r,initData:B(e),initDataType:t}),this._save())}},t.delete=function(e,t){var n=B(e),r=Object(P.a)(this._entries,function(e){return e.initData===n&&e.initDataType===t});if(r){j.a.warn("EME-PSS: Delete session from store",r);var i=this._entries.indexOf(r);this._entries.splice(i,1),this._save()}},t.dispose=function(){this._entries=[],this._save()},t._save=function(){try{this._storage.save(this._entries)}catch(e){j.a.warn("EME-PSS: Could not save licenses in localStorage")}},e}();function $(s,e,c){return C(s,e,c).pipe(Object(E.a)(function(e){var t=e.value,n=t.options,r=t.mediaKeySystemAccess,i=c.getState(s),a=function(e){if(!e.persistentLicense)return null;var t=e.licenseStorage;if(t)return j.a.info("EME: Set the given license storage"),new F(t);var n=new Error("no license storage found for persistent license.");throw new d.a("INVALID_KEY_SYSTEM",n,!0)}(n);if(null==i||"reuse-media-key-system-access"!==e.type)return j.a.debug("EME: Calling createMediaKeys on the MediaKeySystemAccess"),Object(v.a)(r.createMediaKeys()).pipe(Object(w.a)(function(e){return{mediaKeys:e,sessionsStore:new L(e),mediaKeySystemAccess:r,keySystemOptions:n,sessionStorage:a}}));var o=i.mediaKeys,u=i.sessionsStore;return Object(_.a)({mediaKeys:o,sessionsStore:u,mediaKeySystemAccess:r,keySystemOptions:n,sessionStorage:a})}))}var V=n(61);function z(e){var t=e.initData;if(null!=t)return{initData:function(e){for(var t=new Uint8Array,n=new V.a,r=0;r<e.length;){if(e.length<r+8||Object(u.c)(e,r+4)!==l)return j.a.warn("Compat: Unrecognized initialization data. Use as is."),e;var i=Object(u.c)(new Uint8Array(e),r);if(r+i>e.length)return j.a.warn("Compat: Unrecognized initialization data. Use as is."),e;var a=e.subarray(r,r+i),o=B(a);n.test(o)?j.a.warn("Compat: Duplicated PSSH found in initialization data, removing it."):(n.add(o),t=Object(u.h)(t,a)),r+=i}return r!==e.length?(j.a.warn("Compat: Unrecognized initialization data. Use as is."),e):t}(new Uint8Array(t)),initDataType:e.initDataType};var n=new Error("Compat: No init data found on media encrypted event.");throw new d.a("INVALID_ENCRYPTED_EVENT",n,!0)}function H(e){if(""===e.sessionId)return!1;var t=e.keyStatuses,n=[];return t.forEach(function(e){n.push(e)}),0<n.length&&!Object(M.a)(n,"expired")&&!Object(M.a)(n,"internal-error")&&(j.a.debug("EME: Reuse loaded session",e.sessionId),!0)}function K(d,p,h){return Object(m.a)(function(){var e=h.keySystemOptions,t=h.mediaKeySystemAccess,n=h.sessionsStore,r=h.sessionStorage,i=t.getConfiguration().sessionTypes,a=i&&Object(M.a)(i,"persistent-license"),o=a&&r&&e.persistentLicense?"persistent-license":"temporary";j.a.debug("EME: Create a new "+o+" session");var u=n.createSession(d,p,o);if(!a||!r||!e.persistentLicense)return Object(_.a)({type:"created-session",value:{mediaKeySession:u,sessionType:o}});var s=r.get(d,p);if(!s)return Object(_.a)({type:"created-session",value:{mediaKeySession:u,sessionType:o}});var c,l,f=function(){return j.a.info("EME: Removing previous persistent session."),null!==r.get(d,p)&&r.delete(d,p),n.deleteAndCloseSession(u).pipe(Object(w.a)(function(){return{type:"created-session",value:{mediaKeySession:n.createSession(d,p,o),sessionType:o}}}))};return(c=s.sessionId,l=u,Object(m.a)(function(){return j.a.debug("EME: Load persisted session",c),Object(v.a)(l.load(c))})).pipe(Object(E.a)(function(e){return e?e&&H(u)?(r.add(d,p,u),j.a.info("EME: Succeeded to load persistent session."),Object(_.a)({type:"loaded-persistent-session",value:{mediaKeySession:u,sessionType:o}})):(j.a.warn("EME: Previous persistent session not usable anymore."),f()):(j.a.warn("EME: No data stored for the loaded session"),r.delete(d,p),Object(_.a)({type:"created-session",value:{mediaKeySession:u,sessionType:o}}))}),Object(T.a)(function(){return j.a.warn("EME: Unable to load persistent session."),f()}))})}var G=I.a.EME_MAX_SIMULTANEOUS_MEDIA_KEY_SESSIONS;var W=n(41);function q(){return Error.call(this),this.message="Timeout has occurred",this.name="TimeoutError",this}q.prototype=Object.create(Error.prototype);var Y=q,X=n(40),Q=n(3);var Z=n(24),J=n(23);function ee(i,a,o){return void 0===o&&(o=X.a),function(e){var t,n=(t=i)instanceof Date&&!isNaN(+t),r=n?+i-o.now():Math.abs(i);return e.lift(new te(r,n,a,o))}}var te=function(){function e(e,t,n,r){this.waitFor=e,this.absoluteTimeout=t,this.withObservable=n,this.scheduler=r}return e.prototype.call=function(e,t){return t.subscribe(new ne(e,this.absoluteTimeout,this.waitFor,this.withObservable,this.scheduler))},e}(),ne=function(o){function t(e,t,n,r,i){var a=o.call(this,e)||this;return a.absoluteTimeout=t,a.waitFor=n,a.withObservable=r,a.scheduler=i,a.action=null,a.scheduleTimeout(),a}return Q.a(t,o),t.dispatchTimeout=function(e){var t=e.withObservable;e._unsubscribeAndRecycle(),e.add(Object(J.a)(e,t))},t.prototype.scheduleTimeout=function(){var e=this.action;e?this.action=e.schedule(this,this.waitFor):this.add(this.action=this.scheduler.schedule(t.dispatchTimeout,this.waitFor,this))},t.prototype._next=function(e){this.absoluteTimeout||this.scheduleTimeout(),o.prototype._next.call(this,e)},t.prototype._unsubscribe=function(){this.action=null,this.scheduler=null,this.withObservable=null},t}(Z.a),re=n(73);var ie=n(133),ae=n(173),oe=n(175),ue=n(20),se=n(176),ce=n(88);function le(e,t){var r,n,i,a,o=t.retryDelay,u=t.totalRetry,s=t.shouldRetry,c=t.resetDelay,l=t.errorSelector,f=t.onRetry,d=0;return null!=c&&0<c&&(n=function(){d=0},i=c,a=0,r=function(){a&&clearTimeout(a),a=window.setTimeout(n,i)}),e.pipe(Object(T.a)(function(e,t){if(!(!s||s(e))||d++>=u)throw l?l(e,d):e;f&&f(e,d);var n=Object(ce.a)(o,d);return Object(se.a)(n).pipe(Object(E.a)(function(){return r&&r(),t}))}))}var fe=n(42),de=n(70),pe=i.a.onKeyError$,he=i.a.onKeyMessage$,ve=i.a.onKeyStatusesChange$,me="expired";function be(e,t){return Object(oe.a)(e)&&e.type===ue.b.ENCRYPTED_MEDIA_ERROR?(e.fatal=t,e):new d.a("KEY_LOAD_ERROR",e,t)}function ge(a,o){j.a.debug("EME: Handle message events",a);var e,t,n=new W.a,u={totalRetry:2,retryDelay:200,errorSelector:function(e){return be(e,!0)},onRetry:function(e){return n.next({type:"warning",value:be(e,!1)})}},r=pe(a).pipe(Object(w.a)(function(e){throw new d.a("KEY_ERROR",e,!0)})),i=ve(a).pipe(Object(E.a)(function(e){j.a.debug("EME: keystatuseschange event",a,e);var i=[];a.keyStatuses.forEach(function(e,t){if(e===me||t===me){var n=o.throwOnLicenseExpiration,r=new d.a("KEY_STATUS_CHANGE_ERROR","expired",!1);if(!1!==n)throw r;i.push({type:"warning",value:r})}if(de.a[t])throw new d.a("KEY_STATUS_CHANGE_ERROR",t,!0);if(de.a[e])throw new d.a("KEY_STATUS_CHANGE_ERROR",e,!0)});var t=i.length?_.a.apply(void 0,i):b.a,n=Object(fe.a)(function(){return o&&o.onKeyStatusesChange?Object(v.a)(o.onKeyStatusesChange(e,a)):b.a},void 0).pipe().pipe(Object(T.a)(function(e){throw new d.a("KEY_STATUS_CHANGE_ERROR",e,!0)}),Object(w.a)(function(e){return{type:"key-status-change",value:{license:e}}}));return Object(y.a)(t,n)})),s=he(a).pipe(Object(E.a)(function(e){var r=new Uint8Array(e.message),i=e.messageType||"license-request";return j.a.debug("EME: Event message type "+i,a,e),le(Object(m.a)(function(){var e,t,n=o.getLicense(r,i);return Object(v.a)(n).pipe((e=1e4,void 0===t&&(t=X.a),ee(e,Object(re.a)(new Y),t)),Object(T.a)(function(e){throw e instanceof Y?new d.a("KEY_LOAD_TIMEOUT",null,!1):e}))}),u).pipe(Object(w.a)(function(e){return{type:i,value:{license:e}}}))})),c=Object(g.a)(s,i).pipe((e=function(e){if("warning"===e.type)return Object(_.a)(e);var t=e.value.license;return null==t?(j.a.info("EME: No license given, skipping session.update"),b.a):(j.a.debug("EME: Update session",e),Object(v.a)(a.update(t)).pipe(Object(T.a)(function(e){throw new d.a("KEY_UPDATE_ERROR",e,!0)}),Object(ie.a)({type:e.type,value:{session:a,license:t}})))},Object(E.a)(e,t,1))),l=Object(g.a)(c,r,n);return a.closed?l.pipe(Object(ae.a)(Object(v.a)(a.closed))):l}var ye=function(){function e(){this._state=new WeakMap}var t=e.prototype;return t.setState=function(e,t){this._state.set(e,t)},t.getState=function(e){return this._state.get(e)||null},t.clearState=function(e){this._state.set(e,null)},e}();function _e(e,t){return"function"==typeof e.setServerCertificate?(j.a.debug("EME: Setting server certificate on the MediaKeys"),(n=e,r=t,Object(m.a)(function(){return Object(v.a)(n.setServerCertificate(r)).pipe(Object(T.a)(function(e){throw j.a.warn("EME: mediaKeys.setServerCertificate returned an error",e),new d.a("LICENSE_SERVER_CERTIFICATE_ERROR",e,!0)}))})).pipe(Object(O.a)(),Object(T.a)(function(e){return e.fatal=!1,Object(_.a)({type:"warning",value:e})}))):(j.a.warn("EME: Could not set the server certificate. mediaKeys.setServerCertificate is not a function"),b.a);var n,r}var Oe=function(){function e(){this._namedTypeData={},this._unnamedTypeData=new V.a}var t=e.prototype;return t.has=function(e,t){return t?!!this._namedTypeData[t]&&this._namedTypeData[t].test(B(e)):this._unnamedTypeData.test(B(e))},t.add=function(e,t){this.has(e,t)||(t?(this._namedTypeData[t]||(this._namedTypeData[t]=new V.a),this._namedTypeData[t].add(B(e))):this._unnamedTypeData.add(B(e)))},t.remove=function(e,t){if(t){if(!this._namedTypeData[t])return!1;var n=B(e),r=this._namedTypeData[t];return!!r.test(n)&&(r.remove(n),!0)}var i=B(e);return!!this._unnamedTypeData.test(i)&&(this._unnamedTypeData.remove(i),!0)},e}();n.d(t,"b",function(){return je}),n.d(t,"a",function(){return Te}),n.d(t,"c",function(){return Se}),n.d(t,"d",function(){return xe});var Ee=i.a.onEncrypted$,we=new ye;function Te(t){return Object(m.a)(function(){if(Object(a.a)())return A(t,we).pipe(Object(O.a)());var e=we.getState(t);return e&&e.keySystemOptions.closeSessionsOnStop?e.sessionsStore.closeAllSessions().pipe(Object(O.a)()):b.a})}function je(h,e){var v=new Oe;return Object(r.a)(Ee(h),$(h,e,we)).pipe(Object(E.a)(function(e,t){var n=e[0],r=e[1];j.a.debug("EME: encrypted event received",n);var o,u,s,a,c,l,i=r.keySystemOptions,f=r.mediaKeys,d=i.serverCertificate,p=(o=n,u=v,s=r,Object(m.a)(function(){var e=z(o),r=e.initData,i=e.initDataType;if(u.has(r,i))return j.a.debug("EME: Init data already received. Skipping it."),b.a;u.add(r,i);var t=null,a=s.sessionsStore,n=a.get(r,i);if(null!=n){if(H(t=n.session))return j.a.debug("EME: Reuse loaded session",t.sessionId),Object(_.a)({type:"loaded-open-session",value:{mediaKeySession:t,sessionType:n.sessionType,initData:r,initDataType:i}});s.sessionStorage&&s.sessionStorage.delete(new Uint8Array(r),i)}return(t?a.deleteAndCloseSession(t):Object(_.a)(null)).pipe(Object(E.a)(function(){var e=[],t=a.getAll().slice();if(0<G&&G<=t.length)for(var n=0;n<G-t.length+1;n++)e.push(a.deleteAndCloseSession(t[n].session));return Object(y.a)(g.a.apply(void 0,e).pipe(Object(O.a)()),K(r,i,s).pipe(Object(w.a)(function(e){return{type:e.type,value:{mediaKeySession:e.value.mediaKeySession,sessionType:e.value.sessionType,initData:r,initDataType:i}}})))}))})).pipe(Object(w.a)(function(e){return{type:e.type,value:{initData:e.value.initData,initDataType:e.value.initDataType,mediaKeySession:e.value.mediaKeySession,sessionType:e.value.sessionType,keySystemOptions:r.keySystemOptions,sessionStorage:r.sessionStorage}}}));return 0===t?Object(g.a)(null!=d?Object(y.a)(_e(f,d),p):p,(a=r,c=h,l=we,Object(m.a)(function(){var e=l.getState(c),t=a.keySystemOptions,n=a.mediaKeySystemAccess,r=a.mediaKeys,i=a.sessionsStore;return l.setState(c,{keySystemOptions:t,mediaKeySystemAccess:n,mediaKeys:r,sessionsStore:i}),(e&&e.sessionsStore!==i?e.sessionsStore.closeAllSessions():Object(_.a)(null)).pipe(Object(E.a)(function(){return c.mediaKeys===r?Object(_.a)(null):(j.a.debug("EME: Setting MediaKeys"),S(c,r))}))})).pipe(Object(O.a)())):p}),Object(E.a)(function(e){if("warning"===e.type)return Object(_.a)(e);var t=e.value,n=t.initData,r=t.initDataType,i=t.mediaKeySession,a=t.sessionType,o=t.keySystemOptions,u=t.sessionStorage;return Object(g.a)(ge(i,o),"created-session"===e.type?f(i,n,r).pipe(Object(s.a)(function(){"persistent-license"===a&&null!=u&&u.add(n,r,i)}),Object(T.a)(function(e){throw new d.a("KEY_GENERATE_REQUEST_ERROR",e,!1)}),Object(O.a)()):b.a).pipe(Object(c.a)(function(e){return"warning"===e.type}))}))}function Se(e){A(e,we).subscribe(p.a)}function xe(e){var t=we.getState(e);return t&&t.keySystemOptions.type}},function(e,t,n){"use strict";n.d(t,"a",function(){return r});var r={"internal-error":!0,expired:!1,released:!1,"output-restricted":!1,"output-downscaled":!1,"status-pending":!1}},function(e,t,n){"use strict";function r(e){e.src="",e.removeAttribute("src")}n.d(t,"a",function(){return r})},function(e,t,n){"use strict";n.d(t,"a",function(){return i});var r=n(45);function i(e){return!Object(r.a)(e)&&0<=e-parseFloat(e)+1}},function(e,t,n){"use strict";n.d(t,"a",function(){return i});var r=n(5);function i(t,n){return n?new r.a(function(e){return n.schedule(a,0,{error:t,subscriber:e})}):new r.a(function(e){return e.error(t)})}function a(e){var t=e.error;e.subscriber.error(t)}},function(e,t,n){"use strict";n.d(t,"a",function(){return a});var r=n(0),i=n(19);function a(e,t,n){if(!i.d)throw new Error("VTT cues not supported in your target");return t<=e?(r.a.warn("Invalid cue times: "+e+" - "+t),null):new i.d(e,t,n)}},function(e,t,n){"use strict";n.d(t,"a",function(){return u});var r=n(34),i=n(39),a=n(43),o=n(129);function u(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return 1===e.length||2===e.length&&Object(r.a)(e[1])?Object(a.a)(e[0]):Object(o.a)()(i.a.apply(void 0,e))}},function(e,t,n){"use strict";function r(e){if(!a()){var t=e;t.requestFullscreen?t.requestFullscreen():t.msRequestFullscreen?t.msRequestFullscreen():t.mozRequestFullScreen?t.mozRequestFullScreen():t.webkitRequestFullscreen&&t.webkitRequestFullscreen(Element.ALLOW_KEYBOARD_INPUT)}}function i(){if(a()){var e=document;e.exitFullscreen?e.exitFullscreen():e.msExitFullscreen?e.msExitFullscreen():e.mozCancelFullScreen?e.mozCancelFullScreen():e.webkitExitFullscreen&&e.webkitExitFullscreen()}}function a(){var e=document;return!!(e.fullscreenElement||e.mozFullScreenElement||e.webkitFullscreenElement||e.msFullscreenElement)}n.d(t,"c",function(){return r}),n.d(t,"a",function(){return i}),n.d(t,"b",function(){return a})},function(e,t,n){"use strict";var r={aa:"aar",ab:"abk",ae:"ave",af:"afr",ak:"aka",am:"amh",an:"arg",ar:"ara",as:"asm",av:"ava",ay:"aym",az:"aze",ba:"bak",be:"bel",bg:"bul",bi:"bis",bm:"bam",bn:"ben",bo:"bod",br:"bre",bs:"bos",ca:"cat",ce:"che",ch:"cha",co:"cos",cr:"cre",cs:"ces",cu:"chu",cv:"chv",cy:"cym",da:"dan",de:"deu",dv:"div",dz:"dzo",ee:"ewe",el:"ell",en:"eng",eo:"epo",es:"spa",et:"est",eu:"eus",fa:"fas",ff:"ful",fi:"fin",fj:"fij",fo:"fao",fr:"fra",fy:"fry",ga:"gle",gd:"gla",gl:"glg",gn:"grn",gu:"guj",gv:"glv",ha:"hau",he:"heb",hi:"hin",ho:"hmo",hr:"hrv",ht:"hat",hu:"hun",hy:"hye",hz:"her",ia:"ina",id:"ind",ie:"ile",ig:"ibo",ii:"iii",ik:"ipk",io:"ido",is:"isl",it:"ita",iu:"iku",ja:"jpn",jv:"jav",ka:"kat",kg:"kon",ki:"kik",kj:"kua",kk:"kaz",kl:"kal",km:"khm",kn:"kan",ko:"kor",kr:"kau",ks:"kas",ku:"kur",kv:"kom",kw:"cor",ky:"kir",la:"lat",lb:"ltz",lg:"lug",li:"lim",ln:"lin",lo:"lao",lt:"lit",lu:"lub",lv:"lav",mg:"mlg",mh:"mah",mi:"mri",mk:"mkd",ml:"mal",mn:"mon",mr:"mar",ms:"msa",mt:"mlt",my:"mya",na:"nau",nb:"nob",nd:"nde",ne:"nep",ng:"ndo",nl:"nld",nn:"nno",no:"nor",nr:"nbl",nv:"nav",ny:"nya",oc:"oci",oj:"oji",om:"orm",or:"ori",os:"oss",pa:"pan",pi:"pli",pl:"pol",ps:"pus",pt:"por",qu:"que",rm:"roh",rn:"run",ro:"ron",ru:"rus",rw:"kin",sa:"san",sc:"srd",sd:"snd",se:"sme",sg:"sag",si:"sin",sk:"slk",sl:"slv",sm:"smo",sn:"sna",so:"som",sq:"sqi",sr:"srp",ss:"ssw",st:"sot",su:"sun",sv:"swe",sw:"swa",ta:"tam",te:"tel",tg:"tgk",th:"tha",ti:"tir",tk:"tuk",tl:"tgl",tn:"tsn",to:"ton",tr:"tur",ts:"tso",tt:"tat",tw:"twi",ty:"tah",ug:"uig",uk:"ukr",ur:"urd",uz:"uzb",ve:"ven",vi:"vie",vo:"vol",wa:"wln",wo:"wol",xh:"xho",yi:"yid",yo:"yor",za:"zha",zh:"zho",zu:"zul"},i={alb:"sqi",arm:"hye",baq:"eus",bur:"mya",chi:"zho",cze:"ces",dut:"nld",fre:"fra",geo:"kat",ger:"deu",gre:"ell",ice:"isl",mac:"mkd",mao:"mri",may:"msa",per:"fas",slo:"slk",rum:"ron",tib:"bod",wel:"cym"};function a(e){if(null==e||""===e)return"";var t=function(e){var t;switch(e.length){case 2:t=r[e];break;case 3:t=i[e]}return t}((""+e).toLowerCase().split("-")[0]);return t||e}function o(e){return null==e?e:(n="string"==typeof e?(t=e,!1):(t=e.language,!!e.closedCaption),{language:t,closedCaption:n,normalized:a(t)});var t,n}function u(e){return null==e?e:(n="string"==typeof e?(t=e,!1):(t=e.language,!!e.audioDescription),{language:t,audioDescription:n,normalized:a(t)});var t,n}n.d(t,"b",function(){return u}),n.d(t,"c",function(){return o});t.a=a},function(e,t,n){"use strict";function r(e){return null!=e&&"object"==typeof e}n.d(t,"a",function(){return r})},function(e,t,n){"use strict";n.d(t,"a",function(){return p});var r=n(5),i=n(82),a=n(84),o=n(85),u=n(80),s=n(81),c=n(83),l=n(78),f=n(56),d=n(46),p=function(t){if(t instanceof r.a)return function(e){return t._isScalar?(e.next(t.value),void e.complete()):t.subscribe(e)};if(t&&"function"==typeof t[d.a])return Object(u.a)(t);if(Object(s.a)(t))return Object(i.a)(t);if(Object(c.a)(t))return Object(a.a)(t);if(t&&"function"==typeof t[f.a])return Object(o.a)(t);var e=Object(l.a)(t)?"an invalid object":"'"+t+"'";throw new TypeError("You provided "+e+" where a stream was expected. You can provide an Observable, Promise, Array, or Iterable.")}},function(e,t,n){"use strict";n.d(t,"a",function(){return i});var r=n(46),i=function(n){return function(e){var t=n[r.a]();if("function"!=typeof t.subscribe)throw new TypeError("Provided object does not correctly implement Symbol.observable");return t.subscribe(e)}}},function(e,t,n){"use strict";n.d(t,"a",function(){return r});var r=function(e){return e&&"number"==typeof e.length&&"function"!=typeof e}},function(e,t,n){"use strict";n.d(t,"a",function(){return r});var r=function(r){return function(e){for(var t=0,n=r.length;t<n&&!e.closed;t++)e.next(r[t]);e.closed||e.complete()}}},function(e,t,n){"use strict";function r(e){return e&&"function"!=typeof e.subscribe&&"function"==typeof e.then}n.d(t,"a",function(){return r})},function(e,t,n){"use strict";n.d(t,"a",function(){return i});var r=n(53),i=function(e){return function(t){return e.then(function(e){t.closed||(t.next(e),t.complete())},function(e){return t.error(e)}).then(null,r.a),t}}},function(e,t,n){"use strict";n.d(t,"a",function(){return r});var i=n(56),r=function(r){return function(e){for(var t=r[i.a]();;){var n=t.next();if(n.done){e.complete();break}if(e.next(n.value),e.closed)break}return"function"==typeof t.return&&e.add(function(){t.return&&t.return()}),e}}},function(e,t,n){"use strict";n.d(t,"a",function(){return i});var r=n(5);function i(t){var e=new r.a(function(e){e.next(t),e.complete()});return e._isScalar=!0,e.value=t,e}},function(e,t,n){"use strict";n.d(t,"a",function(){return r});var i=n(3),r=function(r){function e(e,t){var n=r.call(this)||this;return n.subject=e,n.subscriber=t,n.closed=!1,n}return i.a(e,r),e.prototype.unsubscribe=function(){if(!this.closed){this.closed=!0;var e=this.subject,t=e.observers;if(this.subject=null,t&&0!==t.length&&!e.isStopped&&!e.closed){var n=t.indexOf(this.subscriber);-1!==n&&t.splice(n,1)}}},e}(n(15).a)},function(e,t,n){"use strict";n.d(t,"b",function(){return i}),n.d(t,"a",function(){return a});var r=.3;function i(e){return e*((2*Math.random()-1)*r+1)}function a(e,t){return void 0===t&&(t=1),i(e*Math.pow(2,t-1))}},function(e,t,n){"use strict";n.d(t,"a",function(){return c});var u=n(0),s=n(12);function c(a){var o=[];a.periods.forEach(function(e){var t=e.id;if(Object(s.a)(o,t)){u.a.warn("Two periods with the same ID found. Updating.");var n=t+"-dup";e.id=n,c(a),o.push(n)}else o.push(t);var r=e.adaptations,i=[];Object.keys(r).forEach(function(e){(r[e]||[]).forEach(function(e){var t=e.id;if(Object(s.a)(i,t)){u.a.warn("Two adaptations with the same ID found. Updating.",t);var n=t+"-dup";e.id=n,c(a),i.push(n)}else i.push(t);var r=[];e.representations.forEach(function(e){var t=e.id;if(Object(s.a)(r,t)){u.a.warn("Two representations with the same ID found. Updating.",t);var n=t+"-dup";e.id=n,c(a),r.push(n)}else r.push(t)})})})})}},function(e,t,n){"use strict";var r=n(5),i=n(22);function o(e,t){return Object(i.a)({url:e,responseType:"document",ignoreProgressEvents:t})}t.a=function(t){return function(i){var a=t.customManifestLoader,e=t.ignoreProgressEvents;return a?r.a.create(function(t){var n=!1,r=!1,e=a(i,{reject:function(e){void 0===e&&(e={}),r||(n=!0,t.error(e))},resolve:function(e){r||(n=!0,t.next({type:"response",value:{responseData:e.data,size:e.size,duration:e.duration}}),t.complete())},fallback:function(){r=!0,o(i).subscribe(t)}});return function(){n||r||"function"!=typeof e||e()}}):o(i,e)}}},function(e,t,n){"use strict";function r(e){if(!e)return"";var t=new Uint8Array(e);239===t[0]&&187===t[1]&&191===t[2]&&(t=t.subarray(3));var n=function(e){for(var t="",n=0;n<e.length;n+=16e3){var r=e.subarray(n,n+16e3);t+=String.fromCharCode.apply(null,r)}return t}(t),r=escape(n);return decodeURIComponent(r)}n.d(t,"a",function(){return r})},function(e,t,n){"use strict";n.d(t,"a",function(){return r});var a=n(52);function r(e,t){for(var n=[],r=t;r<e.length;r++)if(Object(a.c)(e,r)){var i=Object(a.a)(e,r);n.push(e.slice(r,i)),r=i}else if(e[r])for(;e[r];)r++;return n}},function(e,t,n){"use strict";function r(e){var t=e.getAttribute("ttp:frameRate"),n=e.getAttribute("ttp:subFramRate"),r=e.getAttribute("ttp:tickRate"),i=e.getAttribute("ttp:frameRateMultiplier"),a=e.getAttribute("xml:space");if(a&&"default"!==a&&"preserve"!==a)throw new Error("Invalid spacing style");var o=Number(t)||30,u=Number(n)||1,s=Number(r)||0,c=s,l=o,f=null!=u?u:1,d=a||"default";if(0===s&&(c=t?o*u:1),i){var p=/^(\d+) (\d+)$/g.exec(i);if(p)l=o*(Number(p[1])/Number(p[2]))}return{tickRate:c,frameRate:l,subFrameRate:f,spaceStyle:d}}n.d(t,"a",function(){return r})},function(e,t,n){"use strict";n.d(t,"a",function(){return i});var o=n(75),u=n(39),s=n(134),c=n(161),l=n(165),f=n(133),d=n(164),p=n(120),h=n(62),v=n(67),m=n(44),r=n(8),b=n(95),g=n(113),y=n(0),_=r.a.onLoadedMetadata$;function i(n,r,e,i){var t=_(r).pipe(Object(p.a)(function(){y.a.info("Init: Set initial time",e),r.currentTime="function"==typeof e?e():e}),Object(h.a)(function(){return new s.a(1)}),Object(v.a)()),a=t.pipe(Object(m.a)(function(){return(e=n,a=r,t=e.pipe(Object(c.a)(function(e){var t=e.seeking,n=e.stalled,r=e.readyState,i=e.currentRange;return!t&&null==n&&(4===r||3===r&&null!=i)&&(!Object(b.a)()||0<a.duration)}),Object(l.a)(1),Object(f.a)("can-play")),Object(b.a)()&&0===a.duration?Object(o.a)(Object(u.a)("not-loaded-metadata"),t):t).pipe(Object(p.a)(function(){return y.a.info("Init: Can begin to play content")}),Object(m.a)(function(e){return"can-play"===e?i?(t=r,Object(g.a)(t).pipe(Object(f.a)("autoplay"),Object(d.a)(function(e){if("NotAllowedError"===e.name)return y.a.warn("Init: Media element can't play. It may be due to browser auto-play policies."),Object(u.a)("autoplay-blocked");throw e}))):Object(u.a)("loaded"):Object(u.a)(e);var t}));var e,a,t}),Object(h.a)(function(){return new s.a(1)}),Object(v.a)());return{seek$:t,load$:a}}},function(e,t,n){"use strict";n.d(t,"a",function(){return i});var r=n(25);function i(){return r.d}},function(e,t,n){"use strict";function r(){return Error.call(this),this.message="argument out of range",this.name="ArgumentOutOfRangeError",this}n.d(t,"a",function(){return i}),r.prototype=Object.create(Error.prototype);var i=r},function(e,t,n){"use strict";n.d(t,"a",function(){return l});var r=n(32),i=n(8),a=n(114),o=n(119),u=n(10),s=n(0),c=i.a.onEncrypted$;function l(e,t){return null==u.a.emeManager?c(e).pipe(Object(r.a)(function(){throw s.a.error("Init: Encrypted event but EME feature not activated"),new o.a("MEDIA_IS_ENCRYPTED_ERROR",null,!0)})):t&&t.length?Object(a.a)()?(s.a.debug("Init: Creating EMEManager"),u.a.emeManager(e,t)):c(e).pipe(Object(r.a)(function(){throw s.a.error("Init: Encrypted event but no EME API available"),new o.a("MEDIA_IS_ENCRYPTED_ERROR",null,!0)})):c(e).pipe(Object(r.a)(function(){throw s.a.error("Init: Ciphered media and no keySystem passed"),new o.a("MEDIA_IS_ENCRYPTED_ERROR",null,!0)}))}},function(e,t,n){"use strict";n.d(t,"a",function(){return u});var r=n(159),i=n(44),a=n(110),o=n(0);function u(t){return Object(r.a)(t,"error").pipe(Object(i.a)(function(){var e;switch(t.error&&t.error.code){case 1:e="MEDIA_ERR_ABORTED";break;case 2:e="MEDIA_ERR_NETWORK";break;case 3:e="MEDIA_ERR_DECODE";break;case 4:e="MEDIA_ERR_SRC_NOT_SUPPORTED";break;default:e="MEDIA_ERR_UNKNOWN"}throw o.a.error("Init: Media element MEDIA_ERR("+e+")"),new a.a(e,null,!0)}))}},function(e,t,n){"use strict";n.d(t,"a",function(){return d});var r=n(120),i=n(166),o=n(32),u=n(162),s=n(115),a=n(2),c=n(0),l=n(14),f=a.a.DISCONTINUITY_THRESHOLD;function d(a,e){return e.pipe(Object(r.a)(function(e){if(e.stalled){var t=e.buffered,n=e.currentTime,r=Object(l.d)(t,n);if(Object(s.a)(e.currentTime,e.currentRange,e.state,!!e.stalled))c.a.warn("Init: After freeze seek",n,e.currentRange),a.currentTime=n;else if(r<f){var i=n+r+1/60;c.a.warn("Init: Discontinuity seek",n,r,i),a.currentTime=i}}}),Object(i.a)(),Object(o.a)(function(e){return e.stalled}),Object(u.a)(function(e,t){return!e&&!t||!!e&&!!t&&e.reason===t.reason}))}},function(e,t,n){"use strict";var l=n(0),f=n(11),r=n(31),i=n(48),a=n(36),o=n(7),s=n.n(o),c=n(125),d=n(110),p=n(111);var u="function"==typeof window.Set?function(e){return Array.from(new Set(e))}:function(e){return e.filter(function(e,t,n){return n.indexOf(e)===t})},h=function(){function e(e){this.id=e.id,this.bitrate=e.bitrate,this.codec=e.codecs,null!=e.height&&(this.height=e.height),null!=e.width&&(this.width=e.width),null!=e.mimeType&&(this.mimeType=e.mimeType),e.contentProtections&&(this.contentProtections=e.contentProtections),e.frameRate&&(this.frameRate=e.frameRate),this.index=e.index}return e.prototype.getMimeTypeString=function(){return this.mimeType+';codecs="'+this.codec+'"'},e}(),v=["audio","video","text","image"],m=function(){function e(e,t){var n=this;this.parsingErrors=[],this.id=e.id,this.type=e.type;var r,i,a=!!e.representations.length,o=(r=e.type,i=e.representations,"audio"!==r&&"video"!==r?i:i.filter(function(e){return Object(c.a)((n=(t=e).codecs,r=void 0===n?"":n,(void 0===(i=t.mimeType)?"":i)+';codecs="'+r+'"'));var t,n,r,i}));if(a&&0===o.length){l.a.warn("Incompatible codecs for adaptation",e);var u=new d.a("MANIFEST_INCOMPATIBLE_CODECS_ERROR",null,!1);this.parsingErrors.push(u)}null!=e.language&&(this.language=e.language,this.normalizedLanguage=Object(p.a)(e.language)),null!=e.closedCaption&&(this.isClosedCaption=e.closedCaption),null!=e.audioDescription&&(this.isAudioDescription=e.audioDescription),this.representations=o.map(function(e){return new h(s()({rootId:n.id},e))}).sort(function(e,t){return e.bitrate-t.bitrate}).filter(function(e){return null==t||t(e,{bufferType:n.type,language:n.language,normalizedLanguage:n.normalizedLanguage,isClosedCaption:n.isClosedCaption,isAudioDescription:n.isAudioDescription})}),this.manuallyAdded=!!e.manuallyAdded}var t=e.prototype;return t.getAvailableBitrates=function(){var e=this.representations.map(function(e){return e.bitrate});return u(e)},t.getRepresentation=function(n){return Object(f.a)(this.representations,function(e){var t=e.id;return n===t})},t.getRepresentationsForBitrate=function(t){return this.representations.filter(function(e){return e.bitrate===t})||null},e}();var b=n(12),g=function(){function e(a,o){var u=this;if(this.parsingErrors=[],this.id=a.id,this.adaptations=Object.keys(a.adaptations).reduce(function(e,t){if(a.adaptations[t]){var n=a.adaptations[t];if(n){var r=n.filter(function(e){return!!Object(b.a)(v,e.type)||(l.a.info("not supported adaptation type",e.type),u.parsingErrors.push(new d.a("MANIFEST_UNSUPPORTED_ADAPTATION_TYPE",null,!1)),!1)}).map(function(e){var t,n=new m(e,o);return(t=u.parsingErrors).push.apply(t,n.parsingErrors),n}).filter(function(e){return e.representations.length});if(0===r.length&&0<n.length&&("video"===t||"audio"===t)){var i=new Error("No supported "+t+" adaptations");throw new d.a("MANIFEST_PARSE_ERROR",i,!0)}e[t]=r}}return e},{}),!(this.adaptations.video&&this.adaptations.video.length||this.adaptations.audio&&this.adaptations.audio.length)){var e=new Error("No supported audio and video tracks.");throw new d.a("MANIFEST_PARSE_ERROR",e,!0)}this.duration=a.duration,this.start=a.start,null!=this.duration&&null!=this.start&&(this.end=this.start+this.duration)}var t=e.prototype;return t.getAdaptations=function(){var e=this.adaptations,t=[];for(var n in e)if(e.hasOwnProperty(n)){var r=e[n];t.push.apply(t,r)}return t},t.getAdaptationsForType=function(e){return this.adaptations[e]||[]},t.getAdaptation=function(n){return Object(f.a)(this.getAdaptations(),function(e){var t=e.id;return n===t})},e}(),y=function(){function e(e){this._media=e.media}var t=e.prototype;return t.getInitSegment=function(){return null},t.getSegments=function(){return[{id:"0",isInit:!1,number:0,time:0,duration:Number.MAX_VALUE,timescale:1,mediaURL:this._media}]},t.getFirstPosition=function(){},t.getLastPosition=function(){},t.shouldRefresh=function(){return!1},t.checkDiscontinuity=function(){return-1},t._addSegments=function(){0},t._update=function(){l.a.warn("Tried to update a static RepresentationIndex")},e}();var _=Object(i.a)(),O=function(s){var e,t;function n(e,t){var r;r=s.call(this)||this;var n=t.supplementaryTextTracks,i=void 0===n?[]:n,a=t.supplementaryImageTracks,o=void 0===a?[]:a,u=t.representationFilter;return r.parsingErrors=[],r.id=e.id,r.transport=e.transportType||"",r.periods=e.periods.map(function(e){var t,n=new g(e,u);return(t=r.parsingErrors).push.apply(t,n.parsingErrors),n}),r.adaptations=r.periods[0]&&r.periods[0].adaptations||{},r.minimumTime=e.minimumTime,r.isLive=e.isLive,r.uris=e.uris||[],r.lifetime=e.lifetime,r.suggestedPresentationDelay=e.suggestedPresentationDelay,r.availabilityStartTime=e.availabilityStartTime,r.presentationLiveGap=e.presentationLiveGap,r.timeShiftBufferDepth=e.timeShiftBufferDepth,r.baseURL=e.baseURL,e.isLive&&null==e.duration&&l.a.warn("Manifest: non live content and duration is null."),r._duration=e.duration,o.length&&r.addSupplementaryImageAdaptations(o),i.length&&r.addSupplementaryTextAdaptations(i),r}t=s,(e=n).prototype=Object.create(t.prototype),(e.prototype.constructor=e).__proto__=t;var r=n.prototype;return r.getPeriodForTime=function(t){return Object(f.a)(this.periods,function(e){return t>=e.start&&(null==e.end||e.end>t)})},r.getPeriodAfter=function(e){var t=e.end;return null==t?null:Object(f.a)(this.periods,function(e){return null==e.end||t<e.end})||null},r.getDuration=function(){return this._duration},r.getUrl=function(){return this.uris[0]},r.getAdaptations=function(){Object(a.a)("manifest.getAdaptations() is deprecated. Please use manifest.period[].getAdaptations() instead");var e=this.periods[0];if(!e)return[];var t=e.adaptations,n=[];for(var r in t)if(t.hasOwnProperty(r)){var i=t[r];n.push.apply(n,i)}return n},r.getAdaptationsForType=function(e){Object(a.a)("manifest.getAdaptationsForType(type) is deprecated. Please use manifest.period[].getAdaptationsForType(type) instead");var t=this.periods[0];return t&&t.adaptations[e]||[]},r.getAdaptation=function(n){return Object(a.a)("manifest.getAdaptation(id) is deprecated. Please use manifest.period[].getAdaptation(id) instead"),Object(f.a)(this.getAdaptations(),function(e){var t=e.id;return n===t})},r.updateLiveGap=function(e){this.isLive&&(this.presentationLiveGap?this.presentationLiveGap+=e:this.presentationLiveGap=e)},r.update=function(e){this._duration=e.getDuration(),this.availabilityStartTime=e.availabilityStartTime,this.lifetime=e.lifetime,this.minimumTime=e.minimumTime,this.parsingErrors=e.parsingErrors,this.suggestedPresentationDelay=e.suggestedPresentationDelay,this.timeShiftBufferDepth=e.timeShiftBufferDepth,this.uris=e.uris;for(var r=this.periods,i=e.periods,t=function(e){var t=r[e],n=Object(f.a)(i,function(e){return e.id===t.id});n?function(e,t){e.start=t.start,e.end=t.end,e.duration=t.duration;for(var u=e.getAdaptations(),s=t.getAdaptations(),n=function(e){var t=u[e],n=Object(f.a)(s,function(e){return e.id===t.id});if(n)for(var r=u[e].representations,i=n.representations,a=function(e){var t=r[e],n=Object(f.a)(i,function(e){return e.id===t.id});n?r[e].index._update(n.index):l.a.warn('manifest: representation "'+r[e].id+'" not found when merging.')},o=0;o<r.length;o++)a(o);else l.a.warn('manifest: adaptation "'+u[e].id+'" not found when merging.')},r=0;r<u.length;r++)n(r)}(n,t):(l.a.info("Period "+t.id+" not found after update. Removing."),r.splice(e,1),e--),a=e},a=0;a<r.length;a++)t(a);if(i.length>r.length){var n=r[r.length-1];if(n)for(var o=0;o<i.length-1;o++){var u=i[o];u.start>n.start&&(l.a.info("Adding new period "+u.id),this.periods.push(u))}else for(var s=0;s<i.length-1;s++){var c=i[s];l.a.info("Adding new period "+c.id),this.periods.push(c)}}this.trigger("manifestUpdate",null)},r.getMinimumPosition=function(){return this.getCurrentPositionLimits()[0]},r.getMaximumPosition=function(){if(!this.isLive){var e=this.getDuration();return null==e?1/0:e}var t=this.availabilityStartTime||0,n=this.presentationLiveGap||0;return Date.now()/1e3-t-n},r.getCurrentPositionLimits=function(){var e=this.availabilityStartTime||0,t=null!=this.minimumTime?this.minimumTime:e;if(!this.isLive){var n=this.getDuration();return[t,null==n?1/0:n]}var r=this.presentationLiveGap||0,i=this.timeShiftBufferDepth||0,a=Date.now()/1e3-e-r;return[Math.min(a,Math.max(t,a-i+5)),a]},r.addSupplementaryImageAdaptations=function(e){var u=this,t=(Array.isArray(e)?e:[e]).map(function(e){var t,n=e.mimeType,r=e.url,i="gen-image-ada-"+_(),a="gen-image-rep-"+_(),o=new m({id:i,type:"image",manuallyAdded:!0,representations:[{bitrate:0,id:a,mimeType:n,index:new y({media:r})}]});return(t=u.parsingErrors).push.apply(t,o.parsingErrors),o});if(t.length&&this.periods.length){var n=this.periods[0].adaptations;n.image=n.image?n.image.concat(t):t}},r.addSupplementaryTextAdaptations=function(e){var c=this,t=(Array.isArray(e)?e:[e]).reduce(function(e,t){var a=t.mimeType,o=t.codecs,u=t.url,n=t.language,r=t.languages,s=t.closedCaption,i=n?[n]:r||[];return e.concat(i.map(function(e){var t,n="gen-text-ada-"+_(),r="gen-text-rep-"+_(),i=new m({id:n,type:"text",language:e,closedCaption:s,manuallyAdded:!0,representations:[{bitrate:0,id:r,mimeType:a,codecs:o,index:new y({media:u})}]});return(t=c.parsingErrors).push.apply(t,i.parsingErrors),i}))},[]);if(t.length&&this.periods.length){var n=this.periods[0].adaptations;n.text=n.text?n.text.concat(t):t}},n}(r.a);t.a=O},function(e,t,n){"use strict";function u(e){var t=e.split(":").reverse();if(t[2]||t[1]){var n=t[2]?parseInt(t[2],10):0,r=parseInt(t[1],10),i=parseFloat(t[0].replace(",","."));if(isNaN(n)||isNaN(r)||isNaN(i))return;return 60*n*60+60*r+i}}function r(e,t){var n,r,i,a=/-->/;if(a.test(e[0]))n=e[0],r=e.slice(1,e.length);else{if(!a.test(e[1]))return null;i=e[0],n=e[1],r=e.slice(2,e.length)}if(!n)return null;var o=function(e){var t=e.match(/^([\d:.]+)[ |\t]+-->[ |\t]+([\d:.]+)[ |\t]*(.*)$/);if(!t)return null;var n=u(t[1]),r=u(t[2]);return null==n||null==r?null:{start:n,end:r,settings:t[3].split(/ |\t/).reduce(function(e,t){var n=t.split(":");return 2===n.length&&(e[n[0]]=n[1]),e},{})}}(n);return o?{start:o.start+t,end:o.end+t,settings:o.settings,payload:r,header:i}:null}n.d(t,"a",function(){return r})},function(e,t,n){"use strict";function a(e,t){for(var n=t+1;e[n];)n++;return n}function r(e){for(var t=[],n=0;n<e.length;n++)if(e[n]){var r=a(e,n),i=e.slice(n,r);0<i.length&&(1===i.length?0<=i[0].indexOf("--\x3e")&&t.push(i):(0<=i[1].indexOf("--\x3e")||0<=i[0].indexOf("--\x3e"))&&t.push(i)),n=r}return t}n.d(t,"a",function(){return r})},function(e,t,n){"use strict";function c(e){var t=e.split(":");if(t[2]){var n=parseInt(t[0],10),r=parseInt(t[1],10),i=parseFloat(t[2].replace(",","."));if(isNaN(n)||isNaN(r)||isNaN(i))return;return 60*n*60+60*r+i}}function r(e,t){if(0===e.length)return null;var n,r,i=[];if(e[1]&&e[1].indexOf("--\x3e")){var a=e[1].split("--\x3e").map(function(e){return e.trim()});n=a[0],r=a[1],i=e.slice(2,e.length)}if(!n||!r){var o=e[0].split("--\x3e").map(function(e){return e.trim()});n=o[0],r=o[1],i=e.slice(1,e.length)}if(!n||!r)return null;var u=c(n),s=c(r);return null==u||null==s?null:{start:u+t,end:s+t,payload:i}}n.d(t,"a",function(){return r})},function(e,t,n){"use strict";var o=n(39),u=n(163),r=n(3),i=n(9);var s=function(){function e(){}return e.prototype.call=function(e,t){return t.subscribe(new a(e))},e}(),a=function(n){function e(e){var t=n.call(this,e)||this;return t.hasPrev=!1,t}return r.a(e,n),e.prototype._next=function(e){this.hasPrev?this.destination.next([this.prev,e]):this.hasPrev=!0,this.prev=e},e}(i.a),c=n(32),l=n(161),f=n(170),d=n(117),p=n(120),h=n(0);function v(t,n,e,r){var i,a=r.pauseWhenStalled;void 0===a||a?i=e.pipe(function(e){return e.lift(new s)}).pipe(Object(c.a)(function(e){var t=e[0],n=e[1].stalled,r=t.stalled;if(!r!=!n||r&&n&&r.reason!==n.reason)return!r}),Object(l.a)(function(e){return null!=e}),Object(f.a)(!1)):i=Object(o.a)(!1);return i.pipe(Object(d.a)(function(e){return e?Object(u.a)(function(){return h.a.info("Init: Pause playback to build buffer"),t.playbackRate=0,Object(o.a)(0)}):n.pipe(Object(p.a)(function(e){h.a.info("Init: Resume playback speed",e),t.playbackRate=e}))}))}n.d(t,"a",function(){return v})},function(e,t,n){"use strict";var r=n(44);function i(e){return e}function a(e){return void 0===e&&(e=Number.POSITIVE_INFINITY),Object(r.a)(i,e)}n.d(t,"a",function(){return a})},function(e,t,n){"use strict";var m=n(18);function b(e,t){var n=e.exec(t);if(null===n||""===n[0])return null;var r=Number(n[1])||0,i=Number(n[2])||0,a=Number(n[3])||0;return(Number(n[4])||0)/1e3+a+60*i+3600*r}var s=function(e,t){return m.e.test(e)?(s=t,c=e,l=m.e.exec(c),f=Number(l[1]),d=Number(l[2]),p=Number(l[3]),h=Number(l[4]),v=Number(l[5])||0,h+=v/s.subFrameRate,(p+=h/s.frameRate)+60*d+3600*f):m.d.test(e)?b(m.d,e):m.f.test(e)?b(m.f,e):m.g.test(e)?(a=t,o=e,u=m.g.exec(o),Number(u[1])/a.frameRate):m.i.test(e)?(n=t,r=e,i=m.i.exec(r),Number(i[1])/n.tickRate):m.h.test(e)?b(m.h,e):void 0;var n,r,i,a,o,u,s,c,l,f,d,p,h,v};function r(e,t){var n=e.getAttribute("begin"),r=e.getAttribute("dur"),i=e.getAttribute("end"),a=n?s(n,t):null,o=r?s(r,t):null,u=i?s(i,t):null;if(null==a||null==u&&null==o)throw new Error("Invalid text cue");return{start:a,end:null==u?a+o:u}}n.d(t,"a",function(){return r})},function(e,t,n){"use strict";var a=n(3),o=function(){function n(e,t){void 0===t&&(t=n.now),this.SchedulerAction=e,this.now=t}return n.prototype.schedule=function(e,t,n){return void 0===t&&(t=0),new this.SchedulerAction(this,e).schedule(n,t)},n.now=function(){return Date.now()},n}();n.d(t,"a",function(){return r});var r=function(r){function i(e,t){void 0===t&&(t=o.now);var n=r.call(this,e,function(){return i.delegate&&i.delegate!==n?i.delegate.now():t()})||this;return n.actions=[],n.active=!1,n.scheduled=void 0,n}return a.a(i,r),i.prototype.schedule=function(e,t,n){return void 0===t&&(t=0),i.delegate&&i.delegate!==this?i.delegate.schedule(e,t,n):r.prototype.schedule.call(this,e,t,n)},i.prototype.flush=function(e){var t=this.actions;if(this.active)t.push(e);else{var n;this.active=!0;do{if(n=e.execute(e.state,e.delay))break}while(e=t.shift());if(this.active=!1,n){for(;e=t.shift();)e.unsubscribe();throw n}}},i}(o)},function(e,t,n){"use strict";var i=n(3),r=function(n){function e(e,t){return n.call(this)||this}return i.a(e,n),e.prototype.schedule=function(e,t){return void 0===t&&(t=0),this},e}(n(15).a);n.d(t,"a",function(){return a});var a=function(r){function e(e,t){var n=r.call(this,e,t)||this;return n.scheduler=e,n.work=t,n.pending=!1,n}return i.a(e,r),e.prototype.schedule=function(e,t){if(void 0===t&&(t=0),this.closed)return this;this.state=e;var n=this.id,r=this.scheduler;return null!=n&&(this.id=this.recycleAsyncId(r,n,t)),this.pending=!0,this.delay=t,this.id=this.id||this.requestAsyncId(r,this.id,t),this},e.prototype.requestAsyncId=function(e,t,n){return void 0===n&&(n=0),setInterval(e.flush.bind(e,this),n)},e.prototype.recycleAsyncId=function(e,t,n){if(void 0===n&&(n=0),null!==n&&this.delay===n&&!1===this.pending)return t;clearInterval(t)},e.prototype.execute=function(e,t){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;var n=this._execute(e,t);if(n)return n;!1===this.pending&&null!=this.id&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))},e.prototype._execute=function(e,t){var n=!1,r=void 0;try{this.work(e)}catch(e){n=!0,r=!!e&&e||new Error(e)}if(n)return this.unsubscribe(),r},e.prototype._unsubscribe=function(){var e=this.id,t=this.scheduler,n=t.actions,r=n.indexOf(this);this.work=null,this.state=null,this.pending=!1,this.scheduler=null,-1!==r&&n.splice(r,1),null!=e&&(this.id=this.recycleAsyncId(t,e,null)),this.delay=null},e}(r)},function(e,t,n){"use strict";n.d(t,"c",function(){return i}),n.d(t,"a",function(){return a}),n.d(t,"b",function(){return s});var o=n(13),u=n(1);function r(e,t){for(var n,r=e.length,i=0,a=0;i+8<r&&(a=Object(u.c)(e,i),n=Object(u.c)(e,i+4),Object(o.b)(0<a,"out of range size"),n!==t);)i+=a;return i<r?e.subarray(i+8,i+a):null}function i(e){var t=r(e,1836019558);return t?r(t,1953653094):null}function a(e){return r(e,1835295092)}function s(e){var t=r(e,1836019574);if(!t)return null;var n=r(t,1953653099);return n?r(n,1835297121):null}},function(e,t,n){"use strict";n.d(t,"a",function(){return r});var o=n(20),u=n(55);function s(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function i(e){var r="function"==typeof Map?new Map:void 0;return(i=function(e){if(null===e||(t=e,-1===Function.toString.call(t).indexOf("[native code]")))return e;var t;if("function"!=typeof e)throw new TypeError("Super expression must either be null or a function");if(void 0!==r){if(r.has(e))return r.get(e);r.set(e,n)}function n(){return a(e,arguments,l(this).constructor)}return n.prototype=Object.create(e.prototype,{constructor:{value:n,enumerable:!1,writable:!0,configurable:!0}}),c(n,e)})(e)}function a(e,t,n){return(a=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(e){return!1}}()?Reflect.construct:function(e,t,n){var r=[null];r.push.apply(r,t);var i=new(Function.bind.apply(e,r));return n&&c(i,n.prototype),i}).apply(null,arguments)}function c(e,t){return(c=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function l(e){return(l=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var r=function(i){var e,t;function a(e,t,n){var r;return r=i.call(this)||this,Object.setPrototypeOf(s(s(r)),a.prototype),r.name="MediaError",r.type=o.b.MEDIA_ERROR,r.reason=t,r.code=o.a.hasOwnProperty(e)?o.a[e]:"",r.fatal=!!n,r.message=Object(u.a)(r.name,r.code,r.reason),r}return t=i,(e=a).prototype=Object.create(t.prototype),(e.prototype.constructor=e).__proto__=t,a}(i(Error))},function(e,t,n){"use strict";var r=n(77);t.a=r.a},function(e,t,n){"use strict";function r(e){return"function"==typeof window.VTTCue&&e instanceof window.VTTCue}n.d(t,"a",function(){return r})},function(e,t,n){"use strict";n.d(t,"a",function(){return o});var r=n(163),i=n(17),a=n(42);function o(e){return Object(r.a)(function(){return Object(a.a)(function(){return Object(i.a)(e.play())},void 0)})}},function(e,t,n){"use strict";n.d(t,"a",function(){return i});var r=n(118);function i(){return"function"==typeof r.c}},function(e,t,n){"use strict";n.d(t,"a",function(){return r});var i=n(25);function r(e,t,n,r){return i.a&&r&&"timeupdate"===n&&!!t&&10<t.end-e}},function(e,t,n){"use strict";n.d(t,"a",function(){return o});var r=n(5),i=n(0),a=n(71);function o(t,n){return r.a.create(function(e){return i.a.info("Setting URL to Element",n,t),t.src=n,e.next(void 0),function(){Object(a.a)(t)}})}},function(e,t,n){"use strict";n.d(t,"a",function(){return c});var i=n(3),r=n(24),a=n(47),o=n(23),u=n(32),s=n(43);function c(t,i){return"function"==typeof i?function(e){return e.pipe(c(function(n,r){return Object(s.a)(t(n,r)).pipe(Object(u.a)(function(e,t){return i(n,e,r,t)}))}))}:function(e){return e.lift(new l(t))}}var l=function(){function e(e){this.project=e}return e.prototype.call=function(e,t){return t.subscribe(new f(e,this.project))},e}(),f=function(r){function e(e,t){var n=r.call(this,e)||this;return n.project=t,n.index=0,n}return i.a(e,r),e.prototype._next=function(e){var t,n=this.index++;try{t=this.project(e,n)}catch(e){return void this.destination.error(e)}this._innerSub(t,e,n)},e.prototype._innerSub=function(e,t,n){var r=this.innerSubscription;r&&r.unsubscribe();var i=new a.a(this,void 0,void 0);this.destination.add(i),this.innerSubscription=Object(o.a)(this,e,t,n,i)},e.prototype._complete=function(){var e=this.innerSubscription;e&&!e.closed||r.prototype._complete.call(this),this.unsubscribe()},e.prototype._unsubscribe=function(){this.innerSubscription=null},e.prototype.notifyComplete=function(e){this.destination.remove(e),this.innerSubscription=null,this.isStopped&&r.prototype._complete.call(this)},e.prototype.notifyNext=function(e,t,n,r,i){this.destination.next(t)},e}(r.a)},function(e,t,n){"use strict";var r=n(41),i=n(160),h=n(73),v=n(39),a=n(173),u=n(1),o=n(17),s=n(31),c=n(27),l=n(19),f=n(25),d=n(54);function p(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var m=function(){function e(e,t,n){this._keyType=e,this._mediaKeys=t,this._configuration=n}var t,n,r,i=e.prototype;return i.createMediaKeys=function(){var t=this;return new c.a(function(e){return e(t._mediaKeys)})},i.getConfiguration=function(){return this._configuration},t=e,(n=[{key:"keySystem",get:function(){return this._keyType}}])&&p(t.prototype,n),r&&p(t,r),e}();function b(e,t){e.prototype=Object.create(t.prototype),(e.prototype.constructor=e).__proto__=t}n.d(t,"a",function(){return y}),n.d(t,"c",function(){return g});var g=null,y=function(e,t){return e.createSession(t)},_=function(){function e(){}var t=e.prototype;return t._setVideo=function(){throw new Error("MediaKeys is not implemented in your browser")},t.createSession=function(){throw new Error("MediaKeys is not implemented in your browser")},t.setServerCertificate=function(){throw new Error("MediaKeys is not implemented in your browser")},e}();if(navigator.requestMediaKeySystemAccess)g=function(e,t){return Object(o.a)(navigator.requestMediaKeySystemAccess(e,t))};else{var O=function(a){return function(n,r){var i=this;return new c.a(function(e,t){try{a.call(i,n,r||""),e()}catch(e){t(e)}})}},E=function(e){return"function"==typeof e.webkitGenerateKeyRequest};if(E(HTMLVideoElement.prototype)){var w=function(n){function e(e,t){var o;return(o=n.call(this)||this)._closeSession$=new r.a,o._vid=e,o._key=t,o.sessionId="",o.closed=new c.a(function(e){o._closeSession$.subscribe(e)}),o.keyStatuses=new Map,o.expiration=NaN,Object(i.a)(d.onKeyMessage$(e),d.onKeyAdded$(e),d.onKeyError$(e)).pipe(Object(a.a)(o._closeSession$)).subscribe(function(e){return o.trigger(e.type,e)}),o.update=O(function(e,t){if(!E(o._vid))throw new Error("impossible to add a new key");if(0<=o._key.indexOf("clearkey")){var n=e instanceof ArrayBuffer?new Uint8Array(e):e,r=JSON.parse(Object(u.f)(n)),i=Object(u.p)(atob(r.keys[0].k)),a=Object(u.p)(atob(r.keys[0].kid));o._vid.webkitAddKey(o._key,i,a,t)}else o._vid.webkitAddKey(o._key,e,null,t);o.sessionId=t}),o}b(e,n);var t=e.prototype;return t.generateRequest=function(e,t){var n=this;return new c.a(function(e){if(!E(n._vid))throw new Error("impossible to generate a key request");n._vid.webkitGenerateKeyRequest(n._key,t),e()})},t.close=function(){var t=this;return new c.a(function(e){t._closeSession$.next(),t._closeSession$.complete(),e()})},t.load=function(){return c.a.resolve(!1)},t.remove=function(){return c.a.resolve()},e}(s.a);_=function(){function e(e){this.ks_=e}var t=e.prototype;return t._setVideo=function(e){this._vid=e},t.createSession=function(){if(!this._vid)throw new Error("Video not attached to the MediaKeys");return new w(this._vid,this.ks_)},t.setServerCertificate=function(){throw new Error("Server certificate is not implemented in your browser")},e}();g=function(e,t){if(n=e,!((r=document.querySelector("video")||document.createElement("video"))&&r.canPlayType&&r.canPlayType("video/mp4",n)))return Object(h.a)(void 0);for(var n,r,i=0;i<t.length;i++){var a=t[i],o=a.videoCapabilities,u=a.audioCapabilities,s=a.initDataTypes,c=a.sessionTypes,l=a.distinctiveIdentifier,f=a.persistentState,d=!0;if(d=(d=(d=(d=d&&(!s||!!s.filter(function(e){return"cenc"===e})[0]))&&(!c||c.filter(function(e){return"temporary"===e}).length===c.length))&&"required"!==l)&&"required"!==f){var p={videoCapabilities:o,audioCapabilities:u,initDataTypes:["cenc"],sessionTypes:["temporary"],distinctiveIdentifier:"not-allowed",persistentState:"not-allowed"};return Object(v.a)(new m(e,new _(e),p))}}return Object(h.a)(void 0)}}else if(l.b&&l.b.prototype&&"function"==typeof l.b.isTypeSupported&&(g=function(e,t){if(!l.b.isTypeSupported(e))return Object(h.a)(void 0);for(var n=0;n<t.length;n++){var r=t[n],i=r.videoCapabilities,a=r.audioCapabilities,o=r.initDataTypes,u=r.distinctiveIdentifier,s=!0;if(s=(s=s&&(!o||!!o.filter(function(e){return"cenc"===e})[0]))&&"required"!==u){var c={videoCapabilities:i,audioCapabilities:a,initDataTypes:["cenc"],distinctiveIdentifier:"not-allowed",persistentState:"required",sessionTypes:["temporary","persistent-license"]};return Object(v.a)(new m(e,new l.b(e),c))}}return Object(h.a)(void 0)},f.b&&"function"==typeof l.b.prototype.createSession)){var T=function(t){function e(e){var n;return(n=t.call(this)||this).sessionId="",n.expiration=NaN,n.keyStatuses=new Map,n._mk=e,n._closeSession$=new r.a,n.closed=new c.a(function(e){n._closeSession$.subscribe(e)}),n.update=O(function(e,t){if(!n._ss)throw new Error("MediaKeySession not set");n._ss.update(e,t),n.sessionId=t}),n}b(e,t);var n=e.prototype;return n.generateRequest=function(e,t){var n=this;return new c.a(function(e){n._ss=n._mk.createSession("video/mp4",t),Object(i.a)(d.onKeyMessage$(n._ss),d.onKeyAdded$(n._ss),d.onKeyError$(n._ss)).pipe(Object(a.a)(n._closeSession$)).subscribe(function(e){return n.trigger(e.type,e)}),e()})},n.close=function(){var t=this;return new c.a(function(e){t._ss&&(t._ss.close(),t._ss=void 0),t._closeSession$.next(),t._closeSession$.complete(),e()})},n.load=function(){return c.a.resolve(!1)},n.remove=function(){return c.a.resolve()},e}(s.a);y=function(e){return new T(e)}}}t.b=_},function(e,t,n){"use strict";n.d(t,"a",function(){return r});var o=n(20),u=n(55);function s(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function i(e){var r="function"==typeof Map?new Map:void 0;return(i=function(e){if(null===e||(t=e,-1===Function.toString.call(t).indexOf("[native code]")))return e;var t;if("function"!=typeof e)throw new TypeError("Super expression must either be null or a function");if(void 0!==r){if(r.has(e))return r.get(e);r.set(e,n)}function n(){return a(e,arguments,l(this).constructor)}return n.prototype=Object.create(e.prototype,{constructor:{value:n,enumerable:!1,writable:!0,configurable:!0}}),c(n,e)})(e)}function a(e,t,n){return(a=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(e){return!1}}()?Reflect.construct:function(e,t,n){var r=[null];r.push.apply(r,t);var i=new(Function.bind.apply(e,r));return n&&c(i,n.prototype),i}).apply(null,arguments)}function c(e,t){return(c=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function l(e){return(l=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var r=function(i){var e,t;function a(e,t,n){var r;return r=i.call(this)||this,Object.setPrototypeOf(s(s(r)),a.prototype),r.name="EncryptedMediaError",r.type=o.b.ENCRYPTED_MEDIA_ERROR,r.reason=t,r.code=o.a.hasOwnProperty(e)?o.a[e]:"",r.fatal=!!n,r.message=Object(u.a)(r.name,r.code,r.reason),r}return t=i,(e=a).prototype=Object.create(t.prototype),(e.prototype.constructor=e).__proto__=t,a}(i(Error))},function(e,t,n){"use strict";n.d(t,"a",function(){return a});var r=n(3),i=n(9),o=n(37),u=n(51);function a(t,n,r){return function(e){return e.lift(new s(t,n,r))}}var s=function(){function e(e,t,n){this.nextOrObserver=e,this.error=t,this.complete=n}return e.prototype.call=function(e,t){return t.subscribe(new c(e,this.nextOrObserver,this.error,this.complete))},e}(),c=function(a){function e(e,t,n,r){var i=a.call(this,e)||this;return i._tapNext=o.a,i._tapError=o.a,i._tapComplete=o.a,i._tapError=n||o.a,i._tapComplete=r||o.a,Object(u.a)(t)?(i._context=i)._tapNext=t:t&&(i._context=t,i._tapNext=t.next||o.a,i._tapError=t.error||o.a,i._tapComplete=t.complete||o.a),i}return r.a(e,a),e.prototype._next=function(e){try{this._tapNext.call(this._context,e)}catch(e){return void this.destination.error(e)}this.destination.next(e)},e.prototype._error=function(e){try{this._tapError.call(this._context,e)}catch(e){return void this.destination.error(e)}this.destination.error(e)},e.prototype._complete=function(){try{this._tapComplete.call(this._context)}catch(e){return void this.destination.error(e)}return this.destination.complete()},e}(i.a)},function(e,t,n){"use strict";n.r(t);var r=n(69);n.d(t,"clearEMESession",function(){return r.a}),n.d(t,"disposeEME",function(){return r.c}),n.d(t,"getCurrentKeySystem",function(){return r.d});var i=n(70);n.d(t,"KEY_STATUS_ERRORS",function(){return i.a}),t.default=r.b},function(e,t,n){"use strict";n.d(t,"a",function(){return i});var r=n(25);function i(){return r.b}},function(e,t,n){"use strict";n.d(t,"a",function(){return i});var r=n(25);function i(){return r.b}},function(e,t,n){"use strict";n.d(t,"a",function(){return i});var r=n(25);function i(){return!r.c}},function(e,t,n){"use strict";n.d(t,"a",function(){return i});var r=n(19);function i(e){return!!r.c&&("function"!=typeof r.c.isTypeSupported||r.c.isTypeSupported(e))}},function(e,t,n){"use strict";n.d(t,"a",function(){return r});var o=n(25);function r(e,t){var n,r,i="subtitles";if(o.c){var a=e.textTracks.length;(n=0<a?e.textTracks[a-1]:e.addTextTrack(i)).mode=t?n.HIDDEN:n.SHOWING}else r=document.createElement("track"),e.appendChild(r),n=r.track,r.kind=i,n.mode=t?"hidden":"showing";return{track:n,trackElement:r}}},function(e,t,n){"use strict";function r(){return!1===navigator.onLine}n.d(t,"a",function(){return r})},function(e,t,n){"use strict";n.d(t,"a",function(){return i});var r=n(0);function i(e,t){if("function"!=typeof e.changeType)return!1;try{e.changeType(t)}catch(e){return r.a.warn("Could not call 'changeType' on the given SourceBuffer:",e),!1}return!0}},function(e,t,n){"use strict";n.d(t,"a",function(){return i});var r=n(105);function i(){return Object(r.a)(1)}},function(e,t,n){"use strict";(function(t){var n,r="pending",i="settled",o="fulfilled",u="rejected",a=function(){},s=void 0!==t&&void 0!==t.process&&"function"==typeof t.process.emit,c="undefined"==typeof setImmediate?setTimeout:setImmediate,l=[];function f(){for(var e=0;e<l.length;e++)l[e][0](l[e][1]);n=!(l=[])}function d(e,t){l.push([e,t]),n||(n=!0,c(f,0))}function p(e){var t=e.owner,n=t._state,r=t._data,i=e[n],a=e.then;if("function"==typeof i){n=o;try{r=i(r)}catch(e){b(a,e)}}h(a,r)||(n===o&&v(a,r),n===u&&b(a,r))}function h(t,n){var r;try{if(t===n)throw new TypeError("A promises callback cannot return that same promise.");if(n&&("function"==typeof n||"object"==typeof n)){var e=n.then;if("function"==typeof e)return e.call(n,function(e){r||(r=!0,n===e?m(t,e):v(t,e))},function(e){r||(r=!0,b(t,e))}),!0}}catch(e){return r||b(t,e),!0}return!1}function v(e,t){e!==t&&h(e,t)||m(e,t)}function m(e,t){e._state===r&&(e._state=i,e._data=t,d(y,e))}function b(e,t){e._state===r&&(e._state=i,e._data=t,d(_,e))}function g(e){e._then=e._then.forEach(p)}function y(e){e._state=o,g(e)}function _(e){e._state=u,g(e),!e._handled&&s&&t.process.emit("unhandledRejection",e._data,e)}function O(e){t.process.emit("rejectionHandled",e)}function E(e){if("function"!=typeof e)throw new TypeError("Promise resolver "+e+" is not a function");if(this instanceof E==!1)throw new TypeError("Failed to construct 'Promise': Please use the 'new' operator, this object constructor cannot be called as a function.");this._then=[],function(e,t){function n(e){b(t,e)}try{e(function(e){v(t,e)},n)}catch(e){n(e)}}(e,this)}E.prototype={constructor:E,_state:r,_then:null,_data:void 0,_handled:!1,then:function(e,t){var n={owner:this,then:new this.constructor(a),fulfilled:e,rejected:t};return!t&&!e||this._handled||(this._handled=!0,this._state===u&&s&&d(O,this)),this._state===o||this._state===u?d(p,n):this._then.push(n),n.then},catch:function(e){return this.then(null,e)}},E.all=function(u){if(!Array.isArray(u))throw new TypeError("You must pass an array to Promise.all().");return new E(function(n,e){var r=[],i=0;function t(t){return i++,function(e){r[t]=e,--i||n(r)}}for(var a,o=0;o<u.length;o++)(a=u[o])&&"function"==typeof a.then?a.then(t(o),e):r[o]=a;i||n(r)})},E.race=function(i){if(!Array.isArray(i))throw new TypeError("You must pass an array to Promise.race().");return new E(function(e,t){for(var n,r=0;r<i.length;r++)(n=i[r])&&"function"==typeof n.then?n.then(e,t):e(n)})},E.resolve=function(t){return t&&"object"==typeof t&&t.constructor===E?t:new E(function(e){e(t)})},E.reject=function(n){return new E(function(e,t){t(n)})},e.exports=E}).call(this,n(140))},function(e,t,n){var u=Array.prototype.slice,s=n(148),c=n(149),l=e.exports=function(e,t,n){return n||(n={}),e===t||(e instanceof Date&&t instanceof Date?e.getTime()===t.getTime():!e||!t||"object"!=typeof e&&"object"!=typeof t?n.strict?e===t:e==t:function(e,t,n){var r,i;if(f(e)||f(t))return!1;if(e.prototype!==t.prototype)return!1;if(c(e))return!!c(t)&&(e=u.call(e),t=u.call(t),l(e,t,n));if(d(e)){if(!d(t))return!1;if(e.length!==t.length)return!1;for(r=0;r<e.length;r++)if(e[r]!==t[r])return!1;return!0}try{var a=s(e),o=s(t)}catch(e){return!1}if(a.length!=o.length)return!1;for(a.sort(),o.sort(),r=a.length-1;0<=r;r--)if(a[r]!=o[r])return!1;for(r=a.length-1;0<=r;r--)if(i=a[r],!l(e[i],t[i],n))return!1;return typeof e==typeof t}(e,t,n))};function f(e){return null==e}function d(e){return!(!e||"object"!=typeof e||"number"!=typeof e.length)&&("function"==typeof e.copy&&"function"==typeof e.slice&&!(0<e.length&&"number"!=typeof e[0]))}},function(e,t,n){"use strict";n.d(t,"a",function(){return a});var r=n(3),i=n(9);function a(){return function(e){return e.lift(new o)}}var o=function(){function e(){}return e.prototype.call=function(e,t){return t.subscribe(new u(e))},e}(),u=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return r.a(t,e),t.prototype._next=function(e){},t}(i.a)},function(e,t,n){"use strict";n.d(t,"a",function(){return a});var i=n(3),r=n(9);function a(t){return function(e){return e.lift(new o(t))}}var o=function(){function e(e){this.value=e}return e.prototype.call=function(e,t){return t.subscribe(new u(e,this.value))},e}(),u=function(r){function e(e,t){var n=r.call(this,e)||this;return n.value=t,n}return i.a(e,r),e.prototype._next=function(e){this.destination.next(this.value)},e}(r.a)},function(e,t,n){"use strict";var a=n(3),r=n(41),i=function(r){function e(e,t){var n=r.call(this,e,t)||this;return n.scheduler=e,n.work=t,n}return a.a(e,r),e.prototype.schedule=function(e,t){return void 0===t&&(t=0),0<t?r.prototype.schedule.call(this,e,t):(this.delay=t,this.state=e,this.scheduler.flush(this),this)},e.prototype.execute=function(e,t){return 0<t||this.closed?r.prototype.execute.call(this,e,t):this._execute(e,t)},e.prototype.requestAsyncId=function(e,t,n){return void 0===n&&(n=0),null!==n&&0<n||null===n&&0<this.delay?r.prototype.requestAsyncId.call(this,e,t,n):e.flush(this)},e}(n(108).a),o=new(function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return a.a(t,e),t}(n(107).a))(i),u=n(15),s=n(9),c=n(38),l=n(39),f=n(73),d=function(){function t(e,t,n){this.kind=e,this.value=t,this.error=n,this.hasValue="N"===e}return t.prototype.observe=function(e){switch(this.kind){case"N":return e.next&&e.next(this.value);case"E":return e.error&&e.error(this.error);case"C":return e.complete&&e.complete()}},t.prototype.do=function(e,t,n){switch(this.kind){case"N":return e&&e(this.value);case"E":return t&&t(this.error);case"C":return n&&n()}},t.prototype.accept=function(e,t,n){return e&&"function"==typeof e.next?this.observe(e):this.do(e,t,n)},t.prototype.toObservable=function(){switch(this.kind){case"N":return Object(l.a)(this.value);case"E":return Object(f.a)(this.error);case"C":return Object(c.b)()}throw new Error("unexpected notification kind value")},t.createNext=function(e){return void 0!==e?new t("N",e):t.undefinedValueNotification},t.createError=function(e){return new t("E",void 0,e)},t.createComplete=function(){return t.completeNotification},t.completeNotification=new t("C"),t.undefinedValueNotification=new t("N",void 0),t}();var p=function(i){function t(e,t,n){void 0===n&&(n=0);var r=i.call(this,e)||this;return r.scheduler=t,r.delay=n,r}return a.a(t,i),t.dispatch=function(e){var t=e.notification,n=e.destination;t.observe(n),this.unsubscribe()},t.prototype.scheduleMessage=function(e){this.destination.add(this.scheduler.schedule(t.dispatch,this.delay,new h(e,this.destination)))},t.prototype._next=function(e){this.scheduleMessage(d.createNext(e))},t.prototype._error=function(e){this.scheduleMessage(d.createError(e)),this.unsubscribe()},t.prototype._complete=function(){this.scheduleMessage(d.createComplete()),this.unsubscribe()},t}(s.a),h=function(){return function(e,t){this.notification=e,this.destination=t}}(),v=n(49),m=n(87);n.d(t,"a",function(){return b});var b=function(i){function e(e,t,n){void 0===e&&(e=Number.POSITIVE_INFINITY),void 0===t&&(t=Number.POSITIVE_INFINITY);var r=i.call(this)||this;return r.scheduler=n,r._events=[],r._infiniteTimeWindow=!1,r._bufferSize=e<1?1:e,r._windowTime=t<1?1:t,t===Number.POSITIVE_INFINITY?(r._infiniteTimeWindow=!0,r.next=r.nextInfiniteTimeWindow):r.next=r.nextTimeWindow,r}return a.a(e,i),e.prototype.nextInfiniteTimeWindow=function(e){var t=this._events;t.push(e),t.length>this._bufferSize&&t.shift(),i.prototype.next.call(this,e)},e.prototype.nextTimeWindow=function(e){this._events.push(new g(this._getNow(),e)),this._trimBufferThenGetEvents(),i.prototype.next.call(this,e)},e.prototype._subscribe=function(e){var t,n=this._infiniteTimeWindow,r=n?this._events:this._trimBufferThenGetEvents(),i=this.scheduler,a=r.length;if(this.closed)throw new v.a;if(t=this.isStopped||this.hasError?u.a.EMPTY:(this.observers.push(e),new m.a(this,e)),i&&e.add(e=new p(e,i)),n)for(var o=0;o<a&&!e.closed;o++)e.next(r[o]);else for(o=0;o<a&&!e.closed;o++)e.next(r[o].value);return this.hasError?e.error(this.thrownError):this.isStopped&&e.complete(),t},e.prototype._getNow=function(){return(this.scheduler||o).now()},e.prototype._trimBufferThenGetEvents=function(){for(var e=this._getNow(),t=this._bufferSize,n=this._windowTime,r=this._events,i=r.length,a=0;a<i&&!(e-r[a].time<n);)a++;return t<i&&(a=Math.max(a,i-t)),0<a&&r.splice(0,a),r},e}(r.a),g=function(){return function(e,t){this.time=e,this.value=t}}()},,,function(e,t,n){"use strict";e.exports=n(150).default},,,function(e,t){var n;n=function(){return this}();try{n=n||new Function("return this")()}catch(e){"object"==typeof window&&(n=window)}e.exports=n},function(e,t,n){"use strict";n.r(t);var j=n(1);t.default=function(e){var t=0,n=e.length,r=Object(j.f)(e.subarray(t,t+8)),i=e[t+=8],a=e[t+=1],o=e[t+=1],u=e[t+=1];t+=1;var s=[i,a,o,u].join("."),c=e[t]+Object(j.o)(e,t+1);t+=4;var l=Object(j.o)(e,t);t+=4;var f=Object(j.f)(e.subarray(t,t+4));t+=4;var d=Object(j.n)(e,t);t+=2;var p=Object(j.n)(e,t),h=[e[t+=2],e[t+1]].join(":"),v=1===e[t+=2];t+=1,t=64;var m,b=[],g=0;if(!c)throw new Error("bif: no images to parse");for(;t<n;){var y=Object(j.o)(e,t);t+=4;var _=Object(j.o)(e,t);if(t+=4,m){var O=m.index,E=l,w=g,T=e.subarray(m.offset,_);b.push({index:O,duration:E,ts:w,data:T}),g+=l}if(4294967295===y)break;m={index:y,offset:_}}return{fileFormat:r,version:s,imageCount:c,timescale:l,format:f,width:d,height:p,aspectRatio:h,isVod:v,thumbs:b}}},function(e,t,n){"use strict";n.r(t),n.d(t,"default",function(){return r});var h=n(112),v=n(74),o=n(12),m=n(92),b=n(101),g=n(52);function r(e,t){var n=e.split(/\r\n|\n|\r/);if(!/^WEBVTT($| |\t)/.test(n[0]))throw new Error("Can't parse WebVTT: Invalid file.");for(var r,i,a,o,u,s=Object(g.b)(n),c=Object(m.a)(n,s),l=[],f=0;f<c.length;f++){var d=Object(b.a)(c[f],t);if(null!=d){var p=(o=void 0,i=(r=d).start,a=r.end,o=r.payload,u=o.join("\n"),Object(v.a)(i,a,u));null!=p&&(Object(h.a)(p)&&y(d.settings,p),l.push(p))}}return l}function y(e,t){if(!e.vertical||"rl"!==e.vertical&&"lr"!==e.vertical||(t.vertical=e.vertical),e.line){var n=e.line.match(/^(\d+(\.\d+)?)%(,([a-z]+))?/);if(n)t.line=Number(n[1]),t.snapToLines=!1,Object(o.a)(["start","center","end"],n[4])&&(t.lineAlign=n[4]);else{var r=e.line.match(/^(-?\d+)(,([a-z]+))?/);r&&(t.line=Number(r[1]),t.snapToLines=!0,Object(o.a)(["start","center","end"],r[3])&&(t.lineAlign=r[3]))}}if(e.position){var i=/^([\d\.]+)%(?:,(line-left|line-right|center))?$/.exec(e.position);if(i&&2<=i.length){var a=parseInt(i[1],10);isNaN(a)||(t.position=a,null!=i[2]&&(t.positionAlign=i[2]))}}e.size&&(t.size=e.size),e.align&&Object(o.a)(["start","center","end","left"],e.align)&&(t.align=e.align)}},function(e,t,n){"use strict";n.r(t);var m=n(74),b=n(13),g=/&#([0-9]+);/g,y=/<br>/gi,_=/<style[^>]*>([\s\S]*?)<\/style[^>]*>/i,O=/\s*<p class=([^>]+)>(.*)/i,E=/<sync[^>]+?start="?([0-9]*)"?[^0-9]/i;t.default=function(e,s,t){var n,r,i=/<sync[ >]/gi,a=/<sync[ >]|<\/body>/gi,c=[],o=e.match(_),u=o?o[1]:"";a.exec(e);var l=function(e){for(var t,n,r,i,a=/\.(\S+)\s*{([^}]*)}/gi,o={};t=a.exec(e);){var u=t[1],s=(n=t[2],r="lang",(i=n.match(new RegExp("\\s*"+r+":\\s*(\\S+);","i")))?i[1]:null);null!=u&&null!=s&&(o[s]=u)}return o}(u),f=t&&l[t];for(Object(b.b)(!!f,"sami: could not find lang "+t+" in CSS");n=i.exec(e),r=a.exec(e),n||r;){if(!n||!r||n.index>=r.index)throw new Error("parse error");var d=e.slice(n.index,r.index),p=d.match(E);if(!p)throw new Error("parse error (sync time attribute)");var h=+p[1];if(isNaN(h))throw new Error("parse error (sync time attribute NaN)");v(d.split("\n"),h/1e3)}return function(e){for(var t=[],n=0;n<e.length;n++){var r=e[n],i=r.start,a=r.end,o=r.text;if(o&&null!=a){var u=Object(m.a)(i,a,o);null!=u&&t.push(u)}}return t}(c);function v(e,t){for(var n,r,i=e.length;0<=--i;)if(n=e[i].match(O)){var a=n,o=a[1],u=a[2];f===o&&("&nbsp;"===u?c[c.length-1].end=t:c.push({text:(r=u,r.replace(y,"\n").replace(g,function(e,t){return String.fromCharCode(t)})),start:t+s}))}}}},function(e,t,n){"use strict";n.r(t),n.d(t,"default",function(){return r});var p=n(74),h=n(102),v=n(103);function r(e,t){for(var n,r,i,a,o,u=e.split(/\r\n|\n|\r/),s=Object(h.a)(u),c=[],l=0;l<s.length;l++){var f=Object(v.a)(s[l],t);if(f){var d=(a=void 0,r=(n=f).start,i=n.end,a=n.payload,o=a.join("\n"),Object(p.a)(r,i,o));d&&c.push(d)}}return c}},function(e,t,n){"use strict";n.r(t);var g=n(13),y=/&#([0-9]+);/g,_=/<br>/gi,O=/<style[^>]*>([\s\S]*?)<\/style[^>]*>/i,E=/\s*<p class=([^>]+)>(.*)/i,w=/<sync[^>]+?start="?([0-9]*)"?[^0-9]/i;t.default=function(e,d,t){var n,r,i=/<sync[ >]/gi,a=/<sync[ >]|<\/body>/gi,p=[],o=e.match(O),u=o?o[1]:"";a.exec(e);var s,c=function(e){for(var t,n,r,i,a=/\.(\S+)\s*{([^}]*)}/gi,o={};t=a.exec(e);){var u=t[1],s=(n=t[2],r="lang",(i=n.match(new RegExp("\\s*"+r+":\\s*(\\S+);","i")))?i[1]:null);null!=u&&null!=s&&(o[s]=u)}return o}(u),h=(s=/p\s*{([^}]*)}/gi.exec(u))?s[1]:"",v=t&&c[t];for(Object(g.b)(!!v,"sami: could not find lang "+t+" in CSS");n=i.exec(e),r=a.exec(e),n||r;){if(!n||!r||n.index>=r.index)throw new Error("parse error");var l=e.slice(n.index,r.index),f=l.match(w);if(!f)throw new Error("parse error (sync time attribute)");var m=+f[1];if(isNaN(m))throw new Error("parse error (sync time attribute NaN)");b(l.split("\n"),m/1e3)}return p;function b(e,t){for(var n=e.length;0<=--n;){var r=e[n].match(E);if(r){var i=r[1],a=r[2];if(v===i)if("&nbsp;"===a)p[p.length-1].end=t;else{var o=document.createElement("DIV");o.className="rxp-texttrack-region";var u=document.createElement("DIV");u.className="rxp-texttrack-div",u.style.position="absolute",u.style.bottom="0",u.style.width="100%",u.style.color="#fff",u.style.textShadow="-1px -1px 0 #000,1px -1px 0 #000,-1px 1px 0 #000,1px 1px 0 #000";var s=document.createElement("div");s.className="rxp-texttrack-p",h&&(s.style.cssText=h);for(var c=a.split(_),l=0;l<c.length;l++){l&&s.appendChild(document.createElement("BR"));var f=document.createElement("SPAN");f.className="rxp-texttrack-span",f.textContent=c[l].replace(y,function(e,t){return String.fromCharCode(t)}),s.appendChild(f)}u.appendChild(s),o.appendChild(u),p.push({element:o,start:t+d,end:-1})}}}}}},function(e,t,n){"use strict";n.r(t),n.d(t,"default",function(){return r});var s=n(102),c=n(103);function r(e,t){for(var n=e.split(/\r\n|\n|\r/),r=Object(s.a)(n),i=[],a=0;a<r.length;a++){var o=Object(c.a)(r[a],t);if(null!=o){var u=l(o);null!=u&&i.push(u)}}return i}function l(e){var t=e.start,n=e.end,r=e.payload,i=document.createElement("div");i.className="rxp-texttrack-p",i.style.fontSize="28px",i.style.position="absolute",i.style.bottom="5%",i.style.width="100%",i.style.textAlign="center",i.style.color="#fff",i.style.textShadow="-1px -1px 2px #000,1px -1px 2px #000,-1px 1px 2px #000,1px 1px 2px #000";for(var a=0;a<r.length;a++){a&&i.appendChild(document.createElement("br"));var o=u(r[a]);i.appendChild(o)}return{start:t,end:n,element:i}}function u(e){var t=document.createElement("div");t.innerHTML=e;return function e(t){var n=t.childNodes,r=document.createElement("span");r.className="rxp-texttrack-span";for(var i=0;i<n.length;i++){var a=n[i];if("#text"===a.nodeName){for(var o=a.wholeText.split("\n"),u=0;u<o.length;u++)if(u&&r.appendChild(document.createElement("br")),0<o[u].length){var s=document.createTextNode(o[u]);r.appendChild(s)}}else if("B"===a.nodeName){var c=e(a);c.style.fontWeight="bold",r.appendChild(c)}else if("I"===a.nodeName){var l=e(a);l.style.fontStyle="italic",r.appendChild(l)}else if("U"===a.nodeName){var f=e(a);f.style.textDecoration="underline",r.appendChild(f)}else if("FONT"===a.nodeName&&null!=a.color){var d=e(a);d.style.color=a.color,r.appendChild(d)}else{var p=e(a);r.appendChild(p)}}return r}(t)}},function(e,t,n){"use strict";n.r(t),n.d(t,"default",function(){return r});var y=n(39),_=n(160),O=n(32),E=n(44),w=n(132),T=n(71),j=n(116),S=n(110),x=n(0),A=n(97),R=n(21),k=n(99),I=n(94),M=n(98),N=n(104);function r(e){var t=e.autoPlay,n=e.clock$,r=e.keySystems,i=e.mediaElement,a=e.speed$,o=e.startAt,u=e.url;Object(T.a)(i),x.a.debug("Init: Calculating initial time");var s=function(){return function(e,t){if(!t)return 0;if(null!=t.position)return t.position;if(null!=t.wallClockTime)return t.wallClockTime;if(null!=t.fromFirstPosition)return t.fromFirstPosition;var n=e.duration;if(!n||!isFinite(n))return x.a.warn("startAt.fromLastPosition set but no known duration, beginning at 0."),0;if(t.fromLastPosition)return Math.max(0,n+t.fromLastPosition);if(null==t.percentage)return 0;var r=t.percentage;return 100<=r?n:r<=0?0:n*(+r/100)}(i,o)};x.a.debug("Init: Initial time calculated:",s);var c=Object(I.a)(n,i,s,t),l=c.seek$,f=c.load$,d=Object(A.a)(i,r),p=Object(M.a)(i),h=Object(N.a)(i,a,n,{pauseWhenStalled:!0}).pipe(Object(O.a)(R.a.speedChanged)),v=Object(k.a)(i,n).pipe(Object(O.a)(R.a.stalled)),m=f.pipe(Object(E.a)(function(e){if("autoplay-blocked"===e){var t=new S.a("MEDIA_ERR_BLOCKED_AUTOPLAY",null,!1);return Object(y.a)(R.a.warning(t),R.a.loaded())}if("not-loaded-metadata"!==e)return Object(y.a)(R.a.loaded());var n=new S.a("MEDIA_ERR_NOT_LOADED_METADATA",null,!1);return Object(y.a)(R.a.warning(n))})),b=Object(j.a)(i,u).pipe(Object(w.a)()),g=l.pipe(Object(w.a)());return Object(_.a)(m,g,d,p,h,v,b)}},function(e,t){function n(e){var t=[];for(var n in e)t.push(n);return t}(e.exports="function"==typeof Object.keys?Object.keys:n).shim=n},function(e,t){var n="[object Arguments]"==function(){return Object.prototype.toString.call(arguments)}();function r(e){return"[object Arguments]"==Object.prototype.toString.call(e)}function i(e){return e&&"object"==typeof e&&"number"==typeof e.length&&Object.prototype.hasOwnProperty.call(e,"callee")&&!Object.prototype.propertyIsEnumerable.call(e,"callee")||!1}(t=e.exports=n?r:i).supported=r,t.unsupported=i},function(e,t,n){"use strict";n.r(t);var r=n(131),u=n.n(r),i=n(7),N=n.n(i),D=n(41),C=n(134),a=n(3),o=n(49),v=function(n){function e(e){var t=n.call(this)||this;return t._value=e,t}return a.a(e,n),Object.defineProperty(e.prototype,"value",{get:function(){return this.getValue()},enumerable:!0,configurable:!0}),e.prototype._subscribe=function(e){var t=n.prototype._subscribe.call(this,e);return t&&!t.closed&&e.next(this._value),t},e.prototype.getValue=function(){if(this.hasError)throw this.thrownError;if(this.closed)throw new o.a;return this._value},e.prototype.next=function(e){n.prototype.next.call(this,this._value=e)},e}(D.a),P=n(160),B=n(38),L=n(174),U=n(75),F=n(39),$=n(173),V=n(32),z=n(162),H=n(165),_=n(62);function K(e){return e?Object(_.a)(function(){return new D.a},e):Object(_.a)(new D.a)}var G=n(161),W=n(166),q=n(170),Y=n(133),s=n(9);var X=function(){function e(e){this.predicate=e}return e.prototype.call=function(e,t){return t.subscribe(new c(e,this.predicate))},e}(),c=function(r){function e(e,t){var n=r.call(this,e)||this;return n.predicate=t,n.skipping=!0,n.index=0,n}return a.a(e,r),e.prototype._next=function(e){var t=this.destination;this.skipping&&this.tryCallPredicate(e),this.skipping||t.next(e)},e.prototype.tryCallPredicate=function(e){try{var t=this.predicate(e,this.index++);this.skipping=Boolean(t)}catch(e){this.destination.error(e)}},e}(s.a),Q=n(179),Z=n(172),R=n(164),h=n(2),J=n(0),l=n(31),ee=n(26),f=n(27),te=n(14),d=n(36),p=n(8),m=n(76),ne=n(110),b=n(20),re=n(10),g=n(69),x=n(176),ie=n(44),ae=n(120),oe=n(132),ue=n(117),A=n(5);var y=n(11);var O="function"==typeof Object.values?Object.values:function(t){return Object.keys(t).map(function(e){return t[e]})},E=function(){function e(e){this._alpha=Math.exp(Math.log(.5)/e),this._lastEstimate=0,this._totalWeight=0}var t=e.prototype;return t.addSample=function(e,t){var n=Math.pow(this._alpha,e),r=t*(1-n)+n*this._lastEstimate;isNaN(r)||(this._lastEstimate=r,this._totalWeight+=e)},t.getEstimate=function(){var e=1-Math.pow(this._alpha,this._totalWeight);return this._lastEstimate/e},e}(),w=h.a.ABR_MINIMUM_TOTAL_BYTES,T=h.a.ABR_MINIMUM_CHUNK_SIZE,j=h.a.ABR_FAST_EMA,S=h.a.ABR_SLOW_EMA,k=function(){function e(){this._fastEWMA=new E(j),this._slowEWMA=new E(S),this._bytesSampled=0}var t=e.prototype;return t.addSample=function(e,t){if(!(t<T)){var n=8e3*t/e,r=e/1e3;this._bytesSampled+=t,this._fastEWMA.addSample(r,n),this._slowEWMA.addSample(r,n)}},t.getEstimate=function(){if(!(this._bytesSampled<w))return Math.min(this._fastEWMA.getEstimate(),this._slowEWMA.getEstimate())},t.reset=function(){this._fastEWMA=new E(j),this._slowEWMA=new E(S),this._bytesSampled=0},e}();function I(e,t,n){if("function"==typeof Array.prototype.findIndex)return e.findIndex(t,n);for(var r=e.length>>>0,i=0;i<r;i++)if(t.call(n,e[i],i,e))return i;return-1}function M(e,t){var n=I(e,function(e){return e.bitrate>t});return-1===n?e[e.length-1]:e[n-1]}var se=h.a.ABR_REGULAR_FACTOR,ce=h.a.ABR_STARVATION_DURATION_DELTA,le=h.a.ABR_STARVATION_FACTOR,fe=h.a.ABR_STARVATION_GAP,de=h.a.OUT_OF_STARVATION_GAP;function pe(e){if(!(e.progress.length<2)){for(var t=new E(2),n=e.progress,r=1;r<n.length;r++){var i=n[r].size-n[r-1].size,a=n[r].timestamp-n[r-1].timestamp,o=8*i/(a/1e3);t.addSample(a/1e3,o)}return t.getEstimate()}}function he(e,t){var n,r,i,a=e;return null!=t.bitrate&&(n=a,r=t.bitrate,a=-1===(i=I(n,function(e){return e.bitrate>r}))?n:n.slice(0,i)),null!=t.width&&(a=function(e,t){var n=e.slice().sort(function(e,t){return(e.width||0)-(t.width||0)}),r=Object(y.a)(n,function(e){return(e.width||0)>=t});if(r){var i=r.width||0;return e.filter(function(e){return(e.width||0)<=i})}return e}(a,t.width)),a}function ve(e,t){var n=8*(e.totalSize-e.size);return Math.max(n/t,0)}function me(e,t,n){var r=function(e,t){for(var n=Object.keys(e),r=n.length,i=0;i<r;i++){var a=e[n[i]];if(null!=a&&0<a.duration&&t<a.time+a.duration&&-.3<t-a.time)return a}}(e,t.currentTime+t.bufferGap);if(r){var i=r.duration,a=performance.now(),o=r.progress?r.progress[r.progress.length-1]:null,u=pe(r);if(null!=o&&null!=u){var s=1.2*ve(o,u);if((a-o.timestamp)/1e3<=s&&s>t.bufferGap/t.speed)return u}var c=(a-r.requestTimestamp)/1e3,l=t.downloadBitrate;if(!(null==l||c<=(1.5*i+1)/t.speed)){var f=.7*l;return null==n||f<n?f:void 0}}}var be=function(){function e(e){this._dispose$=new D.a,this.manualBitrate$=new v(null!=e.manualBitrate?e.manualBitrate:-1),this.maxAutoBitrate$=new v(null!=e.maxAutoBitrate?e.maxAutoBitrate:1/0),this.estimator=new k,this._currentRequests={},this._initialBitrate=e.initialBitrate||0,this._limitWidth$=e.limitWidth$,this._throttle$=e.throttle$,this._reEstimate$=new D.a}var t=e.prototype;return t.get$=function(t,d){var p=this;if(!d.length)throw new Error("ABRManager: no representation choice given");if(1===d.length)return Object(F.a)({bitrate:void 0,representation:d[0],manual:!1,urgent:!0});var e=this.manualBitrate$,n=this.maxAutoBitrate$,h=this._initialBitrate,r=[];this._limitWidth$&&r.push(this._limitWidth$.pipe(Object(V.a)(function(e){return{width:e}}))),this._throttle$&&r.push(this._throttle$.pipe(Object(V.a)(function(e){return{bitrate:e}})));var v,i=r.length?L.a.apply(void 0,r).pipe(Object(V.a)(function(e){return N.a.apply(void 0,[{}].concat(e))})):Object(F.a)({});return e.pipe(Object(ue.a)(function(e){if(0<=e)return Object(F.a)({bitrate:void 0,representation:M(d,e)||d[0],manual:!0,urgent:!0});var f=!1;return Object(L.a)(t,n,i,p._reEstimate$.pipe(Object(q.a)(null))).pipe(Object(V.a)(function(e){var t,n,r,i=e[0],a=e[1],o=e[2],u=i.bufferGap;if(u+i.currentTime<i.duration-ce?!f&&u<=fe?(J.a.info("ABR: enter starvation mode."),f=!0):f&&de<=u&&(J.a.info("ABR: exit starvation mode."),f=!1):f&&(J.a.info("ABR: exit starvation mode."),f=!1),f&&null!=(n=me(p._currentRequests,i,v))){J.a.info("ABR: starvation mode emergency estimate:",n),p.estimator.reset();var s=i.downloadBitrate;t=null==s?Math.min(n,a):Math.min(n,a,s)}null==t&&(r=null!=(n=p.estimator.getEstimate())?f?n*le:n*se:null!=v?f?v*le:v*se:h,t=Math.min(r,a));1<i.speed&&(t/=i.speed);var c=M(he(d,o),t)||d[0],l=null==i.downloadBitrate||c.bitrate!==i.downloadBitrate&&(c.bitrate>i.downloadBitrate?!f:function(e,t){var n=t.currentTime+t.bufferGap,r=O(e).filter(function(e){return!!e}).sort(function(e,t){return e.time-t.time}),i=Object(y.a)(r,function(e){return e.time+e.duration>n});if(!i)return!0;var a=performance.now(),o=i.progress?i.progress[i.progress.length-1]:null,u=pe(i);if(null==o||null==u)return!0;var s=ve(o,u);return!((a-o.timestamp)/1e3<=1.2*s&&s<t.bufferGap/t.speed+fe)}(p._currentRequests,i));return{bitrate:n,representation:c,manual:!1,urgent:l}}),Object(ae.a)(function(e){var t=e.bitrate;null!=t&&(v=t)}),Object($.a)(p._dispose$))}))},t.addEstimate=function(e,t){null!=e&&null!=t&&(this.estimator.addSample(e,t),this._reEstimate$.next())},t.addPendingRequest=function(e,t){if(this._currentRequests[e])J.a.warn("ABR: request already added.");else{var n=t.value,r=n.time,i=n.duration,a=n.requestTimestamp;this._currentRequests[e]={time:r,duration:i,requestTimestamp:a,progress:[]}}},t.addRequestProgress=function(e,t){var n=this._currentRequests[e];n?n.progress.push(t.value):J.a.warn("ABR: progress for a request not added")},t.removePendingRequest=function(e){this._currentRequests[e]||J.a.warn("ABR: can't remove unknown request"),delete this._currentRequests[e]},t.dispose=function(){this._dispose$.next(),this._dispose$.complete(),this._reEstimate$.next(),this._reEstimate$.complete(),this.manualBitrate$.complete(),this.maxAutoBitrate$.complete()},e}(),ge={limitWidth:{},throttle:{},initialBitrates:{},manualBitrates:{},maxAutoBitrates:{}},ye=function(){function e(e,t,n){var o=this;void 0===n&&(n=ge),this._dispose$=new D.a,this._choosers={},this._chooserInstanceOptions={initialBitrates:n.initialBitrates||{},manualBitrates:n.manualBitrates||{},maxAutoBitrates:n.maxAutoBitrates||{},throttle:n.throttle||{},limitWidth:n.limitWidth||{}},t.pipe(Object($.a)(this._dispose$)).subscribe(function(e){var t=e.type,n=e.value,r=o._lazilyCreateChooser(t),i=n.duration,a=n.size;r.addEstimate(i,a)}),e.pipe(Object(ie.a)(function(e){return e}),Object($.a)(this._dispose$)).subscribe(function(e){var t=e.type,n=e.value,r=o._lazilyCreateChooser(t);switch(e.event){case"requestBegin":r.addPendingRequest(n.id,e);break;case"requestEnd":r.removePendingRequest(n.id);break;case"progress":r.addRequestProgress(n.id,e)}})}var t=e.prototype;return t.get$=function(e,t,n){return void 0===n&&(n=[]),this._lazilyCreateChooser(e).get$(t,n)},t.setManualBitrate=function(e,t){J.a.info("ABR: Setting manual bitrate");var n=this._choosers[e];n?n.manualBitrate$.next(t):this._chooserInstanceOptions.initialBitrates[e]=t},t.setMaxAutoBitrate=function(e,t){J.a.info("ABR: Setting maximum auto bitrate");var n=this._choosers[e];n?n.maxAutoBitrate$.next(t):this._chooserInstanceOptions.maxAutoBitrates[e]=t},t.getManualBitrate=function(e){var t=this._choosers[e];return t?t.manualBitrate$.getValue():this._chooserInstanceOptions.manualBitrates[e]},t.getMaxAutoBitrate=function(e){var t=this._choosers[e];return t?t.maxAutoBitrate$.getValue():this._chooserInstanceOptions.maxAutoBitrates[e]},t.dispose=function(){var t=this;J.a.debug("ABR: Freeing up ressources"),Object.keys(this._choosers).forEach(function(e){t._choosers[e].dispose()}),this._chooserInstanceOptions=ge,this._choosers={},this._dispose$.next(),this._dispose$.complete()},t._lazilyCreateChooser=function(e){var t,n;return this._choosers[e]||(J.a.debug("ABR: Creating new buffer for ",e),this._choosers[e]=(t=e,n=this._chooserInstanceOptions,new be({limitWidth$:n.limitWidth[t],throttle$:n.throttle[t],initialBitrate:n.initialBitrates[t],manualBitrate:n.manualBitrates[t],maxAutoBitrate:n.maxAutoBitrates[t]}))),this._choosers[e]},e}(),_e=n(175),Oe=n(177),Ee=n(55);function we(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Te(e){var r="function"==typeof Map?new Map:void 0;return(Te=function(e){if(null===e||(t=e,-1===Function.toString.call(t).indexOf("[native code]")))return e;var t;if("function"!=typeof e)throw new TypeError("Super expression must either be null or a function");if(void 0!==r){if(r.has(e))return r.get(e);r.set(e,n)}function n(){return je(e,arguments,xe(this).constructor)}return n.prototype=Object.create(e.prototype,{constructor:{value:n,enumerable:!1,writable:!0,configurable:!0}}),Se(n,e)})(e)}function je(e,t,n){return(je=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(e){return!1}}()?Reflect.construct:function(e,t,n){var r=[null];r.push.apply(r,t);var i=new(Function.bind.apply(e,r));return n&&Se(i,n.prototype),i}).apply(null,arguments)}function Se(e,t){return(Se=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function xe(e){return(xe=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var Ae=function(i){var e,t;function a(e,t,n){var r;return r=i.call(this)||this,Object.setPrototypeOf(we(we(r)),a.prototype),r.name="NetworkError",r.type=b.b.NETWORK_ERROR,r.xhr=t.xhr,r.url=t.url,r.status=t.status,r.errorType=t.type,r.reason=t,r.code=b.a.hasOwnProperty(e)?b.a[e]:"",r.fatal=!!n,r.message=Object(Ee.a)(r.name,r.code,r.reason),r}return t=i,(e=a).prototype=Object.create(t.prototype),(e.prototype.constructor=e).__proto__=t,a.prototype.isHttpError=function(e){return this.errorType===b.c.ERROR_HTTP_CODE&&this.status===e},a}(Te(Error));function Re(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function ke(e){var r="function"==typeof Map?new Map:void 0;return(ke=function(e){if(null===e||(t=e,-1===Function.toString.call(t).indexOf("[native code]")))return e;var t;if("function"!=typeof e)throw new TypeError("Super expression must either be null or a function");if(void 0!==r){if(r.has(e))return r.get(e);r.set(e,n)}function n(){return Ie(e,arguments,Ne(this).constructor)}return n.prototype=Object.create(e.prototype,{constructor:{value:n,enumerable:!1,writable:!0,configurable:!0}}),Me(n,e)})(e)}function Ie(e,t,n){return(Ie=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(e){return!1}}()?Reflect.construct:function(e,t,n){var r=[null];r.push.apply(r,t);var i=new(Function.bind.apply(e,r));return n&&Me(i,n.prototype),i}).apply(null,arguments)}function Me(e,t){return(Me=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function Ne(e){return(Ne=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var De=function(i){var e,t;function a(e,t,n){var r;return r=i.call(this)||this,Object.setPrototypeOf(Re(Re(r)),a.prototype),r.name="OtherError",r.type=b.b.OTHER_ERROR,r.reason=t,r.code=b.a.hasOwnProperty(e)?b.a[e]:"",r.fatal=!!n,r.message=Object(Ee.a)(r.name,r.code,r.reason),r}return t=i,(e=a).prototype=Object.create(t.prototype),(e.prototype.constructor=e).__proto__=t,a}(ke(Error)),Ce=n(42),Pe=n(127),Be=n(88);var Le=function(e,t){var o=t.baseDelay,u=t.maxDelay,s=t.maxRetryRegular,c=t.maxRetryOffline,l=t.onRetry,f=0,d=1,p=2,h=0;return e.pipe(Object(R.a)(function(e,t){if(!((n=e)instanceof Oe.a&&(n.type===b.c.ERROR_HTTP_CODE?500<=n.status||404===n.status:n.type===b.c.TIMEOUT||n.type===b.c.ERROR_EVENT)))throw e;var n,r=e instanceof Oe.a&&e.type===b.c.ERROR_EVENT&&Object(Pe.a)()?p:d;if(r!==h&&(f=0,h=r),++f>(r===p?c:s))throw e;l&&l(e,f);var i=Math.min(o*Math.pow(2,f-1),u),a=Object(Be.b)(i);return Object(x.a)(a).pipe(Object(ie.a)(function(){return t}))}))},Ue=n(15);function Fe(t){return function(e){return e.lift(new $e(t))}}var $e=function(){function e(e){this.callback=e}return e.prototype.call=function(e,t){return t.subscribe(new Ve(e,this.callback))},e}(),Ve=function(r){function e(e,t){var n=r.call(this,e)||this;return n.add(new Ue.a(t)),n}return a.a(e,r),e}(s.a),ze=n(17),He=h.a.MAX_BACKOFF_DELAY_BASE,Ke=h.a.INITIAL_BACKOFF_DELAY_BASE;function Ge(e,t,n){return Object(_e.a)(t)?t:t instanceof Oe.a?new Ae(e,t,n):new De(e,t,n)}function We(e,t){var i=t.cache,n=t.maxRetry,r=t.maxRetryOffline,a=e.loader,o=null!=e.resolver?e.resolver:F.a.bind(A.a),u=new D.a,s={baseDelay:Ke,maxDelay:He,maxRetryRegular:n,maxRetryOffline:r,onRetry:function(e){u.next(Ge("PIPELINE_LOAD_ERROR",e,!1))}};return function(e){var t,n=(t=e,Object(Ce.a)(o,t).pipe().pipe(Object(R.a)(function(e){throw Ge("PIPELINE_RESOLVE_ERROR",e,!0)}))).pipe(Object(ie.a)(function(r){return function(t){function e(){var e=Le(Object(Ce.a)(a,t),s).pipe(Object(R.a)(function(e){throw Ge("PIPELINE_LOAD_ERROR",e,!0)}),Object(ae.a)(function(e){"response"===e.type&&i&&i.add(t,e.value)}));return Object(U.a)(Object(F.a)({type:"request",value:t}),e)}var n=i?i.get(t):null;return null!=n?Object(ze.a)(n).pipe(Object(V.a)(function(e){return{type:"cache",value:e}}),Object(R.a)(e)):e()}(r).pipe(Object(ie.a)(function(e){switch(e.type){case"cache":case"data":case"response":var t=Object(F.a)({type:"response",value:N()({},r,{url:"response"===e.type?e.value.url:void 0,responseData:e.value.responseData,sendingTime:"response"===e.type?e.value.sendingTime:void 0,receivedTime:"response"===e.type?e.value.receivedTime:void 0})}),n="response"!==e.type?B.a:Object(F.a)({type:"metrics",value:{size:e.value.size,duration:e.value.duration}});return Object(U.a)(t,n);default:return Object(F.a)(e)}}))}),Fe(function(){u.complete()})),r=u.pipe(Object(V.a)(function(e){return{type:"error",value:e}}));return Object(P.a)(n,r)}}var qe=h.a.MAX_BACKOFF_DELAY_BASE,Ye=h.a.INITIAL_BACKOFF_DELAY_BASE;function Xe(e,t,n){return Object(_e.a)(t)?t:t instanceof Oe.a?new Ae(e,t,n):new De(e,t,n)}var Qe=function(e,i,a){var t=We(e.manifest,i),r=e.manifest.parser;function o(e){var t=i.maxRetry,n=i.maxRetryOffline,r={baseDelay:Ye,maxDelay:qe,maxRetryRegular:t,maxRetryOffline:n,onRetry:function(e){a.next(Xe("PIPELINE_LOAD_ERROR",e,!1))}};return Le(Object(Ce.a)(e,void 0),r).pipe(Object(R.a)(function(e){throw Xe("PIPELINE_LOAD_ERROR",e,!0)}))}return function(n){return t({url:n}).pipe(Object(ae.a)(function(e){"error"===e.type&&a.next(e.value)}),Object(G.a)(function(e){return"response"===e.type}),Object(ie.a)(function(e){var t=e.value,i=t.sendingTime;return r({response:t,url:n,scheduleRequest:o}).pipe(Object(R.a)(function(e){throw Object(_e.a)(e)?e:new De("PIPELINE_PARSING_ERROR",e,!0)}),Object(V.a)(function(e){for(var t=e.manifest,n=t.parsingErrors,r=0;r<n.length;r++)a.next(n[r]);return{manifest:t,sendingTime:i}}))}),Object(W.a)())}};var Ze=n(163),Je=function(){function e(){this._pendingPriority=null,this._numberOfPendingObservables=0,this._queue=[]}var t=e.prototype;return t.create=function(t,n){var r=this,i=Object(Ze.a)(function(){if(null==r._pendingPriority||r._pendingPriority>=n)return r._pendingPriority=n,r._startObservable(t);var e=new D.a;return r._queue.push({observable:i,priority:n,trigger:e}),e.pipe(Object(ie.a)(function(){return r._startObservable(t)}))});return i},t.updatePriority=function(t,e){var n=I(this._queue,function(e){return e.observable===t});if(!(n<0)){var r=this._queue[n];r.priority=e,(null==this._pendingPriority||this._pendingPriority>=e)&&(this._queue.splice(n,1),r.trigger.next(),r.trigger.complete())}},t._startObservable=function(e){var n=this;return this._numberOfPendingObservables++,e.pipe(Fe(function(){if(n._numberOfPendingObservables--,!(0<n._numberOfPendingObservables)&&(n._pendingPriority=null,0!==n._queue.length)){n._pendingPriority=n._queue.reduce(function(e,t){return null==e||e>t.priority?t.priority:e},null);for(var e=0;e<n._queue.length;e++){var t=n._queue[e];t.priority===n._pendingPriority&&(n._queue.splice(e,1),e--,t.trigger.next(),t.trigger.complete())}}}))},e}(),et=n(48),tt=Object(et.a)();var nt=function(){function e(e,t,n,r){this._transport=e,this._metrics$=n,this._requestsInfos$=t,this._warning$=r,this._prioritizer=new Je}return e.prototype.createPipeline=function(e,t){var c,n,l,f,d,r,p,h,i,a,o,u,s=(c=e,n=this._transport,l=this._metrics$,f=this._requestsInfos$,d=this._warning$,r=t,i=We(n[c],r),a=n[c].parser,function(r){return i(r).pipe(Object(ae.a)(function(e){switch(e.type){case"error":d.next(N()(e.value,{pipelineType:c}));break;case"metrics":var t=e.value,n=t.size,r=t.duration;null!=n&&null!=r&&l.next({type:c,value:{size:n,duration:r}});break;case"request":var i=e.value,a=i&&i.segment;if(null!=a&&null!=a.duration){p=new D.a,f.next(p);var o=a.duration/a.timescale,u=a.time/a.timescale;h=tt(),p.next({type:c,event:"requestBegin",value:{duration:o,time:u,requestTimestamp:performance.now(),id:h}})}break;case"progress":var s=e.value;null!=s.totalSize&&s.size<s.totalSize&&null!=h&&null!=p&&p.next({type:c,event:"progress",value:{duration:s.duration,size:s.size,totalSize:s.totalSize,timestamp:performance.now(),id:h}})}}),Object(G.a)(function(e){return"response"===e.type}),Fe(function(){null!=p&&(null!=h&&p.next({type:c,event:"requestEnd",value:{id:h}}),p.complete())}),Object(V.a)(function(n){return{parse:function(e){var t=N()({response:n.value,init:e},r);return a(t).pipe(Object(R.a)(function(e){throw Object(_e.a)(e)?e:new De("PIPELINE_PARSING_ERROR",e,!0)}))}}}),Object(W.a)())});return o=this._prioritizer,u=s,{createRequest:function(e,t){return void 0===t&&(t=0),o.create(u(e),t)},updatePriority:function(e,t){o.updatePriority(e,t)}}},e}(),rt=n(97),it=n(71),at=n(19),ot=p.a.onSourceOpen$;function ut(e,t,n){if(t&&"closed"!==t.readyState){for(var r=t.readyState,i=t.sourceBuffers,a=i.length-1;0<=a;a--){var o=i[a];try{"open"===r&&(J.a.info("Init: Removing SourceBuffer from mediaSource",o),o.abort()),t.removeSourceBuffer(o)}catch(e){J.a.warn("Init: Error while disposing SourceBuffer",e)}}i.length&&J.a.warn("Init: Not all SourceBuffers could have been removed.")}if(Object(it.a)(e),n)try{J.a.debug("Init: Revoking previous URL"),URL.revokeObjectURL(n)}catch(e){J.a.warn("Init: Error while revoking the media source URL",e)}}function st(e){return(r=e,A.a.create(function(e){if(!at.c)throw new ne.a("MEDIA_SOURCE_NOT_SUPPORTED",null,!0);ut(r,null,r.src||null),J.a.info("Init: Creating MediaSource");var t=new at.c,n=URL.createObjectURL(t);return J.a.info("Init: Attaching MediaSource URL to the media element",n),r.src=n,e.next(t),function(){ut(r,t,n)}})).pipe(Object(ie.a)(function(e){return ot(e).pipe(Object(H.a)(1),Object(Y.a)(e))}));var r}var ct=n(21),lt=h.a.DEFAULT_LIVE_GAP;var ft=n(24),dt=n(47),pt=n(23),ht=n(43);var vt=function(){function e(e){this.project=e}return e.prototype.call=function(e,t){return t.subscribe(new mt(e,this.project))},e}(),mt=function(r){function e(e,t){var n=r.call(this,e)||this;return n.project=t,n.hasSubscription=!1,n.hasCompleted=!1,n.index=0,n}return a.a(e,r),e.prototype._next=function(e){this.hasSubscription||this.tryNext(e)},e.prototype.tryNext=function(e){var t,n=this.index++;try{t=this.project(e,n)}catch(e){return void this.destination.error(e)}this.hasSubscription=!0,this._innerSub(t,e,n)},e.prototype._innerSub=function(e,t,n){var r=new dt.a(this,void 0,void 0);this.destination.add(r),Object(pt.a)(this,e,t,n,r)},e.prototype._complete=function(){this.hasCompleted=!0,this.hasSubscription||this.destination.complete(),this.unsubscribe()},e.prototype.notifyNext=function(e,t,n,r,i){this.destination.next(t)},e.prototype.notifyError=function(e){this.destination.error(e)},e.prototype.notifyComplete=function(e){this.destination.remove(e),this.hasSubscription=!1,this.hasCompleted&&this.destination.complete()},e}(ft.a),bt=n(12),gt=function(){function e(e){this._array=[],this._sortingFn=e}var t=e.prototype;return t.add=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];t.sort(this._sortingFn);for(var r=0,i=0;i<t.length;i++){for(var a=t[i],o=!1;!o&&r<this._array.length;)this._sortingFn(a,this._array[r])<0?(this._array.splice(r,0,a),o=!0):r++;o||this._array.push(a)}},t.length=function(){return this._array.length},t.get=function(e){if(e<0||e>=this._array.length)throw new Error("Invalid index.");return this._array[e]},t.findFirst=function(e){return Object(y.a)(this._array,e)},t.has=function(e){return Object(bt.a)(this._array,e)},t.removeElement=function(e){var t=this._array.indexOf(e);if(0<=t)return this._array.splice(t,1),t},t.head=function(){return this._array[0]},t.last=function(){return this._array[this._array.length-1]},t.shift=function(){return this._array.shift()},t.pop=function(){return this._array.pop()},e}(),yt=function(){function e(e){this._weakMap=new WeakMap,this._fn=e}var t=e.prototype;return t.get=function(e){var t=this._weakMap.get(e);if(void 0!==t)return t;var n=this._fn(e);return this._weakMap.set(e,n),n},t.destroy=function(e){this._weakMap.delete(e)},e}(),_t=n(129);function Ot(e){var i=e.queuedSourceBuffer,t=e.clock$,n=e.maxBufferBehind$,r=e.maxBufferAhead$;return Object(L.a)(t,n,r).pipe(Object(ie.a)(function(e){var t=e[0],n=e[1],r=e[2];return function(t,n,r,i){if(!isFinite(r)&&!isFinite(i))return B.a;var a=[],e=Object(te.b)(t.getBuffered(),n),o=e.innerRange,u=e.outerRanges;return function(){if(isFinite(r)){for(var e=0;e<u.length;e++){var t=u[e];n-r>=t.end?a.push(t):n>=t.end&&n-r>t.start&&n-r<t.end&&a.push({start:t.start,end:n-r})}o&&n-r>o.start&&a.push({start:o.start,end:n-r})}}(),function(){if(isFinite(i)){for(var e=0;e<u.length;e++){var t=u[e];n+i<=t.start?a.push(t):n<=t.start&&n+i<t.end&&n+i>t.start&&a.push({start:n+i,end:t.end})}o&&n+i<o.end&&a.push({start:n+i,end:o.end})}}(),Object(ht.a)(a.map(function(e){return J.a.debug("GC: cleaning range from SourceBuffer",e),t.removeBuffer(e.start,e.end)})).pipe(Object(_t.a)(),Object(oe.a)())}(i,t,n,r)}))}var Et,wt,Tt=n(128);function jt(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}(wt=Et||(Et={}))[wt.Append=0]="Append",wt[wt.Remove=1]="Remove";var St=function(){function e(e,t,n){this.bufferType=e,this._sourceBuffer=n,this._queue=[],this._currentOrder=null,this._lastInitSegment=null,this._currentCodec=t,this.__onError=this._onError.bind(this),this.__onUpdateEnd=this._onUpdateEnd.bind(this),this._sourceBuffer.addEventListener("error",this.__onError),this._sourceBuffer.addEventListener("updateend",this.__onUpdateEnd)}var t,n,r,i=e.prototype;return i.appendBuffer=function(e){return this._addToQueue({type:Et.Append,value:e})},i.removeBuffer=function(e,t){return this._addToQueue({type:Et.Remove,value:{start:e,end:t}})},i.getBuffered=function(){return this._sourceBuffer.buffered},i.dispose=function(){for(this._sourceBuffer.removeEventListener("error",this.__onError),this._sourceBuffer.removeEventListener("updateend",this.__onUpdateEnd),null!=this._currentOrder&&(this._currentOrder.subject.complete(),this._currentOrder=null);this._queue.length;){var e=this._queue.shift();null!=e&&e.subject.complete()}},i.abort=function(){this._sourceBuffer.abort()},i._onUpdateEnd=function(){this._flush()},i._onError=function(e){(this._lastInitSegment=null)!=this._currentOrder&&this._currentOrder.subject.error(e)},i._addToQueue=function(l){var f=this;return A.a.create(function(e){var t,n=0===f._queue.length&&null==f._currentOrder,r=new D.a;if(l.type===Et.Append){var i=l.value,a=i.segment,o=i.initSegment,u=i.timestampOffset,s=i.codec;if(null===o&&null===a)return J.a.warn("QSB: no segment to append.",f.bufferType),e.next(null),void e.complete();t={type:Et.Append,value:{initSegment:o,segment:a,timestampOffset:u,codec:s},subject:r}}else{if(l.type!==Et.Remove)throw new Error("QSB: unrecognized order");t={type:Et.Remove,value:l.value,subject:r}}f._queue.push(t);var c=r.subscribe(e);return n&&f._flush(),function(){c.unsubscribe();var e=f._queue.indexOf(t);0<=e&&f._queue.splice(e,1)}})},i._flush=function(){if(!this._sourceBuffer.updating){if(null==this._currentOrder){if(0===this._queue.length)return;var e=this._queue.shift(),t=[];e.type===Et.Append?(null!==e.value.initSegment?t.push({type:Et.Append,value:{isInit:!0,segment:e.value.initSegment,codec:e.value.codec,timestampOffset:e.value.timestampOffset}}):null===e.value.segment&&(e.subject.next(),e.subject.complete()),null!==e.value.segment&&t.push({type:Et.Append,value:{segment:e.value.segment,isInit:!1,codec:e.value.codec,timestampOffset:e.value.timestampOffset}})):t.push({type:Et.Remove,value:e.value}),this._currentOrder={tasks:t,subject:e.subject}}var n=this._currentOrder.tasks.shift();if(null==n){var r=this._currentOrder.subject;return this._currentOrder=null,r.next(),r.complete(),void(0<this._queue.length&&this._flush())}try{switch(n.type){case Et.Append:var i=n.value,a=i.segment,o=i.isInit,u=i.timestampOffset,s=void 0===u?0:u,c=i.codec;if(o&&this._lastInitSegment===a)return void this._flush();if(this._currentCodec!==c)J.a.debug("QSB: updating codec"),Object(Tt.a)(this._sourceBuffer,c)?this._currentCodec=c:J.a.warn("QSB: could not update codec",c,this._currentCodec);if(this._sourceBuffer.timestampOffset!==s){var l=s||0;J.a.debug("QSB: updating timestampOffset",this.bufferType,this._sourceBuffer.timestampOffset,l),this._sourceBuffer.timestampOffset=l}J.a.debug("QSB: pushing new data to SourceBuffer",this.bufferType),o&&(this._lastInitSegment=a),this._sourceBuffer.appendBuffer(a);break;case Et.Remove:var f=n.value,d=f.start,p=f.end;J.a.debug("QSB: removing data from SourceBuffer",this.bufferType,d,p),this._sourceBuffer.remove(d,p)}}catch(e){this._onError(e)}}},t=e,(n=[{key:"codec",get:function(){return this._currentCodec}}])&&jt(t.prototype,n),r&&jt(t,r),e}(),xt=["audio","video","text","image"];var At=function(){function e(e,t){this._mediaElement=e,this._mediaSource=t,this._initializedSourceBuffers={}}e.isNative=function(e){return Rt(e)};var t=e.prototype;return t.get=function(e){return this._initializedSourceBuffers[e]||null},t.createSourceBuffer=function(e,t,n){void 0===n&&(n={});var r,i,a,o,u=this._initializedSourceBuffers[e];if(Rt(e)){if(u)return u.codec!==t?J.a.warn("SB: Reusing native SourceBuffer with codec",u.codec,"for codec",t):J.a.info("SB: Reusing native SourceBuffer with codec",t),u;J.a.info("SB: Adding native SourceBuffer with codec",t);var s=(r=e,i=this._mediaSource,a=t,o=i.addSourceBuffer(a),new St(r,a,o));return this._initializedSourceBuffers[e]=s}if(u)return J.a.info("SB: Reusing a previous custom SourceBuffer for the type",e),u;if("text"===e){var c;if(J.a.info("SB: Creating a new text SourceBuffer with codec",t),"html"===n.textTrackMode){if(null==re.a.htmlTextTracksBuffer)throw new Error("HTML Text track feature not activated");c=new re.a.htmlTextTracksBuffer(this._mediaElement,n.textTrackElement)}else{if(null==re.a.nativeTextTracksBuffer)throw new Error("Native Text track feature not activated");c=new re.a.nativeTextTracksBuffer(this._mediaElement,!!n.hideNativeSubtitle)}var l=new St("text",t,c);return this._initializedSourceBuffers.text=l}if("image"!==e)throw J.a.error("SB: Unknown buffer type:",e),new ne.a("BUFFER_TYPE_UNKNOWN",null,!0);if(null==re.a.imageBuffer)throw new Error("Image buffer feature not activated");J.a.info("SB: Creating a new image SourceBuffer with codec",t);var f=new re.a.imageBuffer,d=new St("image",t,f);return this._initializedSourceBuffers.image=d},t.disposeSourceBuffer=function(t){var e=this._initializedSourceBuffers[t];if(null!=e){if(J.a.info("SB: Aborting SourceBuffer",t),e.dispose(),!Rt(t)||"open"===this._mediaSource.readyState)try{e.abort()}catch(e){J.a.warn("SB: Failed to abort a "+t+" SourceBuffer:",e)}delete this._initializedSourceBuffers[t]}else J.a.warn("SB: Trying to dispose a SourceBuffer that does not exist")},t.disposeAll=function(){var t=this;xt.forEach(function(e){null!=t.get(e)&&t.disposeSourceBuffer(e)})},e}();function Rt(e){return"audio"===e||"video"===e}var kt={activeBuffer:function(e){return{type:"active-buffer",value:{bufferType:e}}},activePeriodChanged:function(e){return{type:"activePeriodChanged",value:{period:e}}},adaptationChange:function(e,t,n){return{type:"adaptationChange",value:{type:e,adaptation:t,period:n}}},addedSegment:function(e,t,n){return{type:"added-segment",value:{bufferType:e,segment:t,segmentData:n}}},bitrateEstimationChange:function(e,t){return{type:"bitrateEstimationChange",value:{type:e,bitrate:t}}},bufferComplete:function(e){return{type:"complete-buffer",value:{type:e}}},discontinuityEncountered:function(e,t){return{type:"discontinuity-encountered",value:{bufferType:e,nextTime:t}}},endOfStream:function(){return{type:"end-of-stream",value:void 0}},fullBuffer:function(e){return{type:"full-buffer",value:{bufferType:e}}},needsManifestRefresh:function(e){return{type:"needs-manifest-refresh",value:{bufferType:e}}},needsMediaSourceReload:function(){return{type:"needs-media-source-reload",value:void 0}},periodBufferReady:function(e,t,n){return{type:"periodBufferReady",value:{type:e,period:t,adaptation$:n}}},periodBufferCleared:function(e,t){return{type:"periodBufferCleared",value:{type:e,period:t}}},representationChange:function(e,t,n){return{type:"representationChange",value:{type:e,period:t,representation:n}}},resumeStream:function(){return{type:"resume-stream",value:void 0}},warning:function(e){return{type:"warning",value:e}}},It=function(){function e(){this._cache=new WeakMap}var t=e.prototype;return t.add=function(e,t){var n=e.representation;e.segment.isInit&&this._cache.set(n,t)},t.get=function(e){var t=e.representation;if(e.segment.isInit){var n=this._cache.get(t);if(null!=n)return n}return null},e}(),Mt=At,Nt=n(67);var Dt=n(59),Ct=n.n(Dt);var Pt=function(){function e(e){this.predicate=e}return e.prototype.call=function(e,t){return t.subscribe(new Bt(e,this.predicate))},e}(),Bt=function(r){function e(e,t){var n=r.call(this,e)||this;return n.predicate=t,n.index=0,n}return a.a(e,r),e.prototype._next=function(e){var t,n=this.destination;try{t=this.predicate(e,this.index++)}catch(e){return void n.error(e)}this.nextOrComplete(e,t)},e.prototype.nextOrComplete=function(e,t){var n=this.destination;Boolean(t)?n.next(e):n.complete()},e}(s.a),Lt=n(61),Ut=h.a.BUFFER_GC_GAPS.CALM,Ft=h.a.BUFFER_GC_GAPS.BEEFY;function $t(e,t,n){for(var r=Object(te.b)(t,e),i=r.innerRange,a=r.outerRanges,o=[],u=0;u<a.length;u++){var s=a[u];e-n<s.end?o.push(s):e+n>s.start&&o.push(s)}return i&&(J.a.debug("Buffer: GC removing part of inner range",o),e-n>i.start&&o.push({start:i.start,end:e-n}),e+n<i.end&&o.push({start:e+n,end:i.end})),o}function Vt(n,i,e){var a=i.appendBuffer(e);return a.pipe(Object(R.a)(function(e){if(!e||"QuotaExceededError"!==e.name)throw new ne.a("BUFFER_APPEND_ERROR",e,!0);return(t=n,r=i,t.pipe(Object(H.a)(1),Object(ie.a)(function(e){J.a.warn("Buffer: Running garbage collector");var t=r.getBuffered(),n=$t(e.currentTime,t,Ut);return 0===n.length&&(n=$t(e.currentTime,t,Ft)),J.a.debug("Buffer: GC cleaning",n),Object(ht.a)(n.map(function(e){var t=e.start,n=e.end;return r.removeBuffer(t,n)})).pipe(Object(_t.a)())}))).pipe(Object(Z.a)(a),Object(R.a)(function(e){throw new ne.a("BUFFER_FULL_ERROR",e,!0)}));var t,r}))}var zt=h.a.BUFFER_PADDING;var Ht=h.a.SEGMENT_PRIORITIES_STEPS;function Kt(e,t){for(var n=t.currentTime+t.wantedTimeOffset,r=e.time/e.timescale-n,i=0;i<Ht.length;i++)if(r<Ht[i])return i;return Ht.length}var Gt=h.a.BITRATE_REBUFFERING_RATIO,Wt=h.a.MINIMUM_SEGMENT_SIZE;var qt=function(e){var t,a=e.clock$,j=e.content,s=e.queuedSourceBuffer,S=e.segmentBookkeeper,u=e.segmentFetcher,n=e.terminate$,r=e.wantedBufferAhead$,x=j.manifest,A=j.period,c=j.adaptation,R=j.representation,l=R.getMimeTypeString(),f=c.type,k=R.index.getInitSegment(),I=function(e){switch(e.type){case"audio":case"video":return zt[e.type];default:return zt.other}}(c),M=null==k?{segmentData:null,segmentInfos:null,segmentOffset:0}:null,o=new C.a(1),d=[],p=new D.a,h=null,N=new Lt.a,i=Object(L.a)(a,r,n.pipe(Object(H.a)(1),Object(Y.a)(!0),Object(q.a)(!1)),p.pipe(Object(q.a)(void 0))).pipe(Object(V.a)(function(e){var t=e[0],n=e[1],r=e[2],i=t.buffered;S.synchronizeBuffered(i);var a,o,u,s,c,l,f,d,p,h,v,m,b,g,y,_,O=(a=A,o=i,s=n,c=I,l=(u=t).currentTime+u.wantedTimeOffset,f=null==u.liveGap?a.end:Math.min(a.end||1/0,u.currentTime+u.liveGap),d={start:Math.max(a.start||0,l),end:f},p=c.low,h=c.high,v=Object(te.c)(o,l),m=p<v&&v<1/0?Math.min(v,h):0,{start:Math.min(Math.max(l+m,d.start),d.end||1/0),end:Math.min(Math.max(l+s,d.start),d.end||1/0)}),E=t.stalled&&x.isLive?R.index.checkDiscontinuity(t.currentTime):-1,w=R.index.shouldRefresh(O.start,O.end),T=(b=R,g=O,y=g.start,_=g.end-y,b.index.getSegments(y,_)).filter(function(e){return function(e,t,n,r,i){var a=t.period,o=t.adaptation,u=t.representation;if(i.test(e.id))return!1;if(e.isInit||e.time<0)return!0;var s=e.time,c=e.duration,l=e.timescale;if(!c)return!0;if(c/l<Wt)return!1;var f=n.hasPlayableSegment(r,{time:s,duration:c,timescale:l});if(!f)return!0;if(f.infos.period.id!==a.id)return a.start>=f.infos.period.start;if(f.infos.adaptation.id!==o.id)return!0;var d=f.infos.representation.bitrate*Gt;return u.bitrate>d}(e,j,S,O,N)}).map(function(e){return{priority:Kt(e,t),segment:e}});return null!=k&&null==M&&(T=[{segment:k,priority:Kt(k,t)}].concat(T)),{discontinuity:E,isFull:!T.length&&null!=A.end&&O.end>=A.end,terminate:r,neededSegments:T,shouldRefreshManifest:w}}),Object(ie.a)(function(e){var t=e.neededSegments,n=t[0];if(e.terminate){if(d=[],null==h)return J.a.debug("Buffer: no request, terminate.",f),o.complete(),Object(F.a)({type:"terminated"});if(null==n||h.segment.id!==n.segment.id)return J.a.debug("Buffer: cancel request and terminate.",f),o.next(),o.complete(),Object(F.a)({type:"terminated"});if(h.priority!==n.priority){var r=h.request$;u.updatePriority(r,n.priority),h.priority=n.priority}return J.a.debug("Buffer: terminate after request.",f),B.a}var i=[];if(1<e.discontinuity&&i.push(kt.discontinuityEncountered(f,e.discontinuity+1)),e.shouldRefreshManifest&&i.push(kt.needsManifestRefresh(f)),null==n)return h&&J.a.debug("Buffer: interrupt segment request.",f),d=[],o.next(),Object(U.a)(F.a.apply(void 0,i),e.isFull?Object(F.a)(kt.fullBuffer(f)):B.a);if(h)if(h.segment.id!==n.segment.id)J.a.debug("Buffer: restart download queue.",f),d=t,o.next();else if(h.priority!==n.priority){J.a.debug("Buffer: update request priority.",f);var a=h.request$;u.updatePriority(a,n.priority),h.priority=n.priority}else J.a.debug("Buffer: update downloading queue",f),d=t.slice().splice(1,t.length);else J.a.debug("Buffer: start downloading queue.",f),d=t,o.next();return Object(U.a)(F.a.apply(void 0,i),Object(F.a)(kt.activeBuffer(f)))}),(t=function(e){return"terminated"!==e.type},function(e){return e.lift(new Pt(t))})),v=o.pipe(Object(ue.a)(function(){return d.length?(o=Object(Ze.a)(function(){var e=d.shift();if(null==e)return Ct()(function(){p.next()}),B.a;var t=e.segment,n=e.priority,r={manifest:x,period:A,adaptation:c,representation:R,segment:t},i=u.createRequest(r,n);h={segment:t,priority:n,request$:i};var a=i.pipe(Object(ie.a)(function(e){h=null;var t=M&&M.segmentInfos||void 0;return e.parse(t)}),Object(V.a)(function(e){return{segment:t,value:e}}));return Object(U.a)(a,o)})).pipe(Fe(function(){h=null})):B.a;var o}),Object(ie.a)(function(i){return Object(Ze.a)(function(){var o=i.segment;o.isInit&&(M=i.value);var e=i.value,u=e.segmentInfos,t=e.segmentData,n=e.segmentOffset;if(null==t)return B.a;var r=Vt(a,s,{initSegment:M&&M.segmentData,segment:o.isInit?null:t,timestampOffset:n,codec:l});return N.add(o.id),r.pipe(Object(Y.a)(kt.addedSegment(f,o,t)),Object(ae.a)(function(){if(!o.isInit){var e=null!=u?u:o,t=e.time,n=e.duration,r=e.timescale,i=t/r,a=n&&(t+n)/r;S.insert(A,c,R,o,i,a)}}),Fe(function(){N.remove(o.id)}))})}));return Object(P.a)(i,v).pipe(Object(W.a)())};var Yt=function(o,u,s,c,l,e,t,n){var f,d="direct"===n.manualBitrateSwitchingMode,p=e.manifest,h=e.period,v=e.adaptation,m=null,r=o.pipe(Object(V.a)(function(e){var t=m?m.bitrate:void 0;return N()({downloadBitrate:t},e)})),i=t.get$(v.type,r,v.representations).pipe(Object(_.a)(function(){return new C.a(1)}),Object(Nt.a)()),b=new D.a,g=new D.a,a=i.pipe(Object(G.a)(function(e){return null!=e.bitrate}),Object(z.a)(function(e,t){return e.bitrate===t.bitrate}),Object(V.a)(function(e){var t=e.bitrate;return J.a.debug("Buffer: new "+v.type+" bitrate estimation",t),kt.bitrateEstimationChange(v.type,t)})),y=i.pipe(Object(z.a)(function(e,t){return e.manual===t.manual&&e.representation.id===t.representation.id}),Object(ae.a)(function(e){e.urgent?(J.a.info("Buffer: urgent Representation switch",v.type),b.next()):(J.a.info("Buffer: slow Representation switch",v.type),g.next())}),(f=function(e,t){var n=e.representation;if(m=n,d&&e.manual&&0!==t)return Object(F.a)(kt.needsMediaSourceReload());var r,i=Object(F.a)(kt.representationChange(v.type,h,n)),a=(r=n,Object(Ze.a)(function(){return J.a.info("Buffer: changing representation",v.type,r),qt({clock$:o,content:{representation:r,adaptation:v,period:h,manifest:p},queuedSourceBuffer:u,segmentBookkeeper:s,segmentFetcher:c,terminate$:g,wantedBufferAhead$:l})})).pipe(Object($.a)(b));return Object(U.a)(i,a)},function(e){return Object(Ze.a)(function(){var n,r=0,i=!1,a=!1;return e.pipe(Object(ie.a)(function t(e){return Object(Ze.a)(function(){return a?(n=e,i=!0,B.a):(a=!(i=!1),f(e,r++).pipe(Object(ae.a)({complete:function(){return a=!1}}),function(e){return Object(U.a)(e,Object(Ze.a)(function(){return i?t(n):B.a}))}))})}))})}));return Object(P.a)(y,a)};function Xt(e,t,n,r){var i=r.period;return Object(L.a)(e,t).pipe(Object(G.a)(function(e){var t=e[0],n=e[1];return null!=i.end&&t.currentTime+n>=i.end}),Object(V.a)(function(){return J.a.debug("Buffer: full FakeBuffer",n),{type:"full-buffer",value:{bufferType:n}}}))}var Qt=h.a.ADAPTATION_SWITCH_BUFFER_PADDINGS;var Zt=h.a.DEFAULT_MAX_PIPELINES_RETRY_ON_ERROR,Jt=h.a.DEFAULT_MAX_PIPELINES_RETRY_ON_OFFLINE;var en=function(e){var g=e.abrManager,y=e.bufferType,_=e.clock$,O=e.content,E=e.garbageCollectors,w=e.segmentBookkeepers,T=e.segmentPipelinesManager,j=e.sourceBuffersManager,S=e.options,x=O.period,A=S.wantedBufferAhead$,t=new C.a(1);return t.pipe(Object(ue.a)(function(b){if(null==b){J.a.info("Buffer: Set no "+y+" Adaptation",x);var e,t=j.get(y);return e=null!=t?(J.a.info("Buffer: Clearing previous "+y+" SourceBuffer"),t.removeBuffer(x.start,x.end||1/0)):Object(F.a)(null),Object(U.a)(e.pipe(Object(Y.a)(kt.adaptationChange(y,null,x))),Xt(_,A,y,{period:x}))}J.a.info("Buffer: Updating "+y+" adaptation",b,x);var n=_.pipe(Object(H.a)(1),Object(ie.a)(function(e){var r=function(e,t,n,r){var i=e.get(t);if(null!=i)return J.a.info("Buffer: Reusing a previous SourceBuffer for the type",t),i;var a,o=(a=n.representations)[0]&&a[0].getMimeTypeString()||"",u="text"===t?r.textTrackOptions:void 0;return e.createSourceBuffer(t,o,u)}(j,y,b,S),t=function(e,t,n,r){if(!e.length)return{type:"continue",value:void 0};var i=Object(te.a)(e),a=t.start,o=t.end||1/0;if(!Object(te.j)(i,[{start:a,end:o}]).length)return{type:"continue",value:void 0};var u=r.currentTime;if("video"===n&&1<r.readyState&&Object(te.i)({start:a,end:o},u))return{type:"needs-reload",value:void 0};var s=Qt[n].before||0,c=Qt[n].after||0;return!c&&!s||o<=u-s||u+c<=a?{type:"clean-buffer",value:[{start:a,end:o}]}:u-s<=a?{type:"clean-buffer",value:[{start:u+c,end:o}]}:o<=u+c?{type:"clean-buffer",value:[{start:a,end:u-s}]}:{type:"clean-buffer",value:[{start:a,end:u-s},{start:u+c,end:o}]}}(r.getBuffered(),x,y,e);if("needs-reload"===t.type)return Object(F.a)(kt.needsMediaSourceReload());var n,i,a,o,u,s,c,l,f,d,p,h="clean-buffer"===t.type?U.a.apply(void 0,t.value.map(function(e){var t=e.start,n=e.end;return r.removeBuffer(t,n)})).pipe(Object(oe.a)()):B.a,v=E.get(r),m=(n=b,i=r,a=O.manifest,o=w.get(i),l=y,f=S.segmentRetry,d=S.offlineRetry,p=Object(bt.a)(["audio","video"],l)?new It:void 0,u={cache:p,maxRetry:"image"===l?0:null!=f?f:Zt,maxRetryOffline:null!=d?d:Jt},s=T.createPipeline(y,u),c=_.pipe(Object(V.a)(function(e){var t=i.getBuffered();return N()({},e,{buffered:t,bufferGap:Object(te.c)(t,e.currentTime)})})),Yt(c,i,o,s,A,{manifest:a,period:x,adaptation:n},g,S).pipe(Object(R.a)(function(e){if(!Mt.isNative(y))return J.a.error("Buffer: Custom "+y+" buffer crashed. Aborting it.",e),j.disposeSourceBuffer(y),Object(U.a)(Object(F.a)(kt.warning(e)),Xt(_,A,y,{period:x}));throw J.a.error("Buffer: Native "+y+" buffer crashed. Stopping playback.",e),e})));return Object(U.a)(h,Object(P.a)(m,v))}));return Object(U.a)(Object(F.a)(kt.adaptationChange(y,b,x)),n)}),Object(q.a)(kt.periodBufferReady(y,x,t)))};function tn(){for(var e=0,t=arguments.length;e<t;){if(null!=(e<0||arguments.length<=e?void 0:arguments[e]))return e<0||arguments.length<=e?void 0:arguments[e];e++}}var nn=h.a.MAX_TIME_MISSING_FROM_COMPLETE_SEGMENT,rn=h.a.MAX_BUFFERED_DISTANCE,an=h.a.MINIMUM_SEGMENT_SIZE,on=function(){function e(){this.inventory=[]}var t=e.prototype;return t.synchronizeBuffered=function(e){for(var t=this.inventory,n=Object(te.a)(e),r=0,i=t[0],a=n.length,o=0;o<a;o++){if(null==i)return;var u=n[o],s=u.start,c=u.end;if(!(c-s<an)){for(var l=r;i&&tn(i.bufferedEnd,i.end)-s<an;)i=t[++r];var f=-1,d=r-l;if(0<d){var p=t[l+d-1];f=tn(p.bufferedEnd,p.end),t.splice(l,d),r=l}if(null==i)return;if(c-tn(i.bufferedStart,i.start)>=an)for(null!=i.bufferedStart&&i.bufferedStart<s?i.bufferedStart=s:null==i.bufferedStart&&(-1!==f&&s<f&&i.start-f<=rn?i.bufferedStart=f:i.start-s<=rn?i.bufferedStart=s:i.bufferedStart=i.start),i=t[++r];i&&c-tn(i.bufferedStart,i.start)>=an;){var h=t[r-1];null==h.bufferedEnd&&(h.bufferedEnd=h.end),i.bufferedStart=h.bufferedEnd,i=t[++r]}var v=t[r-1];v&&(null!=v.bufferedEnd&&v.bufferedEnd>c?v.bufferedEnd=c:null==v.bufferedEnd&&(v.bufferedEnd=c-v.end<=rn?c:v.end))}}i&&t.splice(r,t.length-r)},t.insert=function(e,t,n,r,i,a){if(null!=a){for(var o=this.inventory,u={start:i,end:a,bufferedStart:void 0,bufferedEnd:void 0,infos:{segment:r,period:e,adaptation:t,representation:n}},s=o.length-1;0<=s;s--){var c=o[s];if(c.start<=i)return c.end<=i?void this.inventory.splice(s+1,0,u):c.start>=i?void this.inventory.splice(s,1,u):(null!=c.end&&(c.end=i),void this.inventory.splice(s+1,0,u))}var l=this.inventory[0];l?null!=a?l.start>=a?this.inventory.splice(0,0,u):l.end<=a?this.inventory.splice(0,1,u):(l.start=a,this.inventory.splice(0,0,u)):l.start===i?this.inventory.splice(0,1,u):this.inventory.splice(0,0,u):this.inventory.push(u)}else J.a.warn("SB: ending time of the segment not defined")},t.hasPlayableSegment=function(e,t){for(var n=t.time,r=t.duration,i=t.timescale,a=this.inventory,o=a.length-1;0<=o;o--){var u=a[o],s=a[o-1],c=a[o+1],l=u.infos.segment,f=n,d=r;if(l.timescale!==i&&(f=n*l.timescale/i,d=r*l.timescale/i),l.time===f&&l.duration===d&&p(u,s,c)&&h(e,u,s,c))return u}return null;function p(e,t,n){return!(t&&null==t.bufferedEnd||null==e.bufferedStart)&&!(n&&null==n.bufferedStart||null==e.bufferedEnd)}function h(e,t,n,r){if(!n||null==n.bufferedEnd||null==t.bufferedStart||n.bufferedEnd<t.bufferedStart){if(null==t.bufferedStart)return!1;var i=t.bufferedStart-t.start;if(e.start>t.start){if(0<t.bufferedStart-e.start&&nn<i)return J.a.debug("SB: The wanted segment has been garbage collected",t),!1}else if(nn<i)return J.a.debug("SB: The wanted segment has been garbage collected",t),!1}if(null===t.end)return!1;if(!r||null==r.bufferedStart||null==t.bufferedEnd||r.bufferedStart>t.bufferedEnd){if(null==t.bufferedEnd)return!1;var a=t.end-t.bufferedEnd;if(e.end<t.end){if(0<e.end-t.bufferedEnd&&nn<a)return J.a.debug("SB: The wanted segment has been garbage collected",t),!1}else if(nn<a)return J.a.debug("SB: The wanted segment has been garbage collected",t),!1}return!0}},t.reset=function(){this.inventory=[]},e}(),un=h.a.MAXIMUM_MAX_BUFFER_AHEAD,sn=h.a.MAXIMUM_MAX_BUFFER_BEHIND;var cn=function(e,f,d,p,h,v){var t,n,r,i,a,o,u,m=e.manifest,s=e.initialPeriod,c=v.maxBufferAhead$,l=v.maxBufferBehind$,b=new yt(function(e){var t=e.bufferType,n=null!=sn[t]?sn[t]:1/0,r=null!=un[t]?un[t]:1/0;return Ot({queuedSourceBuffer:e,clock$:f.pipe(Object(V.a)(function(e){return e.currentTime})),maxBufferBehind$:l.pipe(Object(V.a)(function(e){return Math.min(e,n)})),maxBufferAhead$:c.pipe(Object(V.a)(function(e){return Math.min(e,r)}))})}),g=new yt(function(){return new on}),y=new D.a,_=new D.a,O=(t=["audio","video"],null==re.a.nativeTextTracksBuffer&&null==re.a.htmlTextTracksBuffer||t.push("text"),null!=re.a.imageBuffer&&t.push("image"),t),E=O.map(function(e){return function i(a,e){var r=new gt(function(e,t){return e.start-t.start});function o(e){var t=r.head(),n=r.last();return null==t||null==n||t.start>e||(n.end||1/0)<e}var u=new D.a,t=f.pipe(Object(ie.a)(function(e){var t=e.currentTime,n=e.wantedTimeOffset,r=n+t;if(r<m.getMinimumPosition()){var i=new ne.a("MEDIA_TIME_BEFORE_MANIFEST",null,!1);return Object(F.a)(kt.warning(i))}if(r>m.getMaximumPosition()){var a=new ne.a("MEDIA_TIME_AFTER_MANIFEST",null,!1);return Object(F.a)(kt.warning(a))}return B.a})),n=f.pipe(Object(G.a)(function(e){var t=e.currentTime,n=e.wantedTimeOffset;return!!m.getPeriodForTime(n+t)&&o(n+t)}),Object(H.a)(1),Object(ae.a)(function(e){var t=e.currentTime,n=e.wantedTimeOffset;J.a.info("Buffer: Current position out of the bounds of the active periods,re-creating buffers.",a,t+n),u.next()}),Object(ie.a)(function(e){var t=e.currentTime,n=e.wantedTimeOffset,r=m.getPeriodForTime(t+n);if(null==r)throw new ne.a("MEDIA_TIME_NOT_FOUND",null,!0);return i(a,r)})),s=j(a,e,u).pipe(Object(ae.a)(function(e){"periodBufferReady"===e.type?r.add(e.value.period):"periodBufferCleared"===e.type&&r.removeElement(e.value.period)}),Object(W.a)());return Object(P.a)(s,n,t)}(e,s).pipe(Object(ae.a)(function(e){"periodBufferReady"===e.type?y.next(e.value):"periodBufferCleared"===e.type&&_.next(e.value)}),Object(W.a)())}),w=(n=O,r=y,i=_,a=new gt(function(e,t){return e.period.start-t.period.start}),o=r.pipe(Object(ae.a)(function(e){var t=e.period,n=e.type,r=a.findFirst(function(e){return e.period===t});r||(r={period:t,buffers:new Set},a.add(r)),r.buffers.has(n)&&J.a.warn("ActivePeriodEmitter: Buffer type "+n+" already added to the period"),r.buffers.add(n)})),u=i.pipe(Object(ae.a)(function(e){var t=e.period,n=e.type;if(a&&0!==a.length()){var r=a.findFirst(function(e){return e.period===t});r?(r.buffers.delete(n),r.buffers.size||a.removeElement(r)):J.a.error("ActivePeriodEmitter: cannot remove, unknown period.")}else J.a.error("ActivePeriodEmitter: cannot remove, no period is active.")})),Object(P.a)(o,u).pipe(Object(V.a)(function(){if(!a.head())return null;var e=a.findFirst(function(e){return t=n,e.buffers.size>=t.length;var t});return null!=e?e.period:null}),Object(z.a)())).pipe(Object(G.a)(function(e){return!!e}),Object(V.a)(function(e){return J.a.info("Buffer: New active period",e),kt.activePeriodChanged(e)})),T=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];var r=t.map(function(e){return e.pipe(Object(G.a)(function(e){return"complete-buffer"===e.type||"active-buffer"===e.type}),Object(V.a)(function(e){return"complete-buffer"===e.type}),Object(q.a)(!1),Object(z.a)())});return L.a.apply(void 0,r).pipe(Object(V.a)(function(e){return e.every(function(e){return e})}),Object(z.a)())}.apply(void 0,E).pipe(Object(V.a)(function(e){return e?kt.endOfStream():kt.resumeStream()}));return P.a.apply(void 0,[w].concat(E,[T]));function j(r,i,e){J.a.info("Buffer: Creating new Buffer for",r,i);var a=new D.a,o=new D.a,t=f.pipe(Object(G.a)(function(e){var t=e.currentTime,n=e.wantedTimeOffset;return!!i.end&&t+n>=i.end})),n=a.pipe(function t(i,a){return a?function(e){return e.pipe(t(function(n,r){return Object(ht.a)(i(n,r)).pipe(Object(V.a)(function(e,t){return a(n,e,r,t)}))}))}:function(e){return e.lift(new vt(i))}}(function(e){return j(r,e,o)})),u=e.pipe(Object(H.a)(1),Object(ae.a)(function(){a.complete(),o.next(),o.complete()}),Object(W.a)()),s=Object(P.a)(t,u),c=en({abrManager:d,bufferType:r,clock$:f,content:{manifest:m,period:i},garbageCollectors:b,segmentBookkeepers:g,segmentPipelinesManager:h,sourceBuffersManager:p,options:v}).pipe(Object(ie.a)(function(e){var t=e.type;if("full-buffer"===t){var n=m.getPeriodAfter(i);if(null==n)return Object(F.a)(kt.bufferComplete(r));a.next(n)}else"active-buffer"===t&&o.next();return Object(F.a)(e)}),Object(W.a)()),l=Object(U.a)(c.pipe(Object($.a)(s)),Object(F.a)(kt.periodBufferCleared(r,i)).pipe(Object(ae.a)(function(){J.a.info("Buffer: Destroying buffer for",r,i)})));return Object(P.a)(l,n,u.pipe(Object(oe.a)()))}};var ln=n(45),fn=n(35);var dn=function(){function e(){}return e.prototype.call=function(e,t){return t.subscribe(new pn(e))},e}(),pn=function(n){function e(e){var t=n.call(this,e)||this;return t.hasFirst=!1,t.observables=[],t.subscriptions=[],t}return a.a(e,n),e.prototype._next=function(e){this.observables.push(e)},e.prototype._complete=function(){var e=this.observables,t=e.length;if(0===t)this.destination.complete();else{for(var n=0;n<t&&!this.hasFirst;n++){var r=e[n],i=Object(pt.a)(this,r,r,n);this.subscriptions&&this.subscriptions.push(i),this.add(i)}this.observables=null}},e.prototype.notifyNext=function(e,t,n,r,i){if(!this.hasFirst){this.hasFirst=!0;for(var a=0;a<this.subscriptions.length;a++)if(a!==n){var o=this.subscriptions[a];o.unsubscribe(),this.remove(o)}this.subscriptions=null}this.destination.next(t)},e}(ft.a),hn=n(96);var vn=function(){function e(e){if(this.total=e,this.total<0)throw new hn.a}return e.prototype.call=function(e,t){return t.subscribe(new mn(e,this.total))},e}(),mn=function(r){function e(e,t){var n=r.call(this,e)||this;return n.total=t,n.ring=new Array,n.count=0,n}return a.a(e,r),e.prototype._next=function(e){var t=this.ring,n=this.total,r=this.count++;t.length<n?t.push(e):t[r%n]=e},e.prototype._complete=function(){var e=this.destination,t=this.count;if(0<t)for(var n=this.count>=this.total?this.total:this.count,r=this.ring,i=0;i<n;i++){var a=t++%n;e.next(r[a])}e.complete()},e}(s.a),bn=p.a.onRemoveSourceBuffers$,gn=p.a.onSourceOpen$,yn=p.a.onUpdate$;function _n(i){return Object(Ze.a)(function(){if(J.a.debug("Init: Trying to call endOfStream"),"open"!==i.readyState)return J.a.debug("Init: MediaSource not open, cancel endOfStream"),Object(F.a)(null);var e=i.sourceBuffers,t=function(e){for(var t=[],n=0;n<e.length;n++){var r=e[n];r.updating&&t.push(r)}return t}(e);if(!t.length)return J.a.info("Init: Triggering end of stream"),i.endOfStream(),Object(F.a)(null);J.a.debug("Init: Waiting SourceBuffers to be updated before calling endOfStream.");var n,r=t.map(function(e){return yn(e).pipe(Object(H.a)(1))});return function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];if(1===e.length){if(!Object(ln.a)(e[0]))return e[0];e=e[0]}return Object(fn.a)(e,void 0).lift(new dn)}(P.a.apply(void 0,r).pipe((n=1,function(e){return 0===n?Object(B.b)():e.lift(new vn(n))})),bn(e).pipe(Object(H.a)(1))).pipe(Object(ie.a)(function(){return _n(i)}))})}var On=n(99),En=n(94),wn=n(104);function Tn(e){var S=e.mediaElement,x=e.manifest,A=e.clock$,R=e.speed$,k=e.bufferOptions,I=e.abrManager,M=e.segmentPipelinesManager;return function(n,e,t){var r,i,a,o=x.getDuration();r=n,a=(i=null==o?1/0:o)===1/0?Number.MAX_VALUE:i,r.duration!==a&&(J.a.info("Init: Setting duration",a),r.duration=a);var u=x.getPeriodForTime(e);if(null==u)throw new ne.a("MEDIA_STARTING_TIME_NOT_FOUND",null,!0);var s,c,l=new Mt(S,n);s=l,c=u,Object.keys(c.adaptations).forEach(function(e){if(Mt.isNative(e)){var t=c.adaptations[e]||[],n=null!=t&&t.length?t[0].representations:[];if(n.length){var r=n[0].getMimeTypeString();s.createSourceBuffer(e,r)}}});var f,d,p,h,v,m,b=Object(En.a)(A,S,e,t),g=b.seek$,y=b.load$,_=(f=x,d=A,p=R,h=e,v=g.pipe(Object(H.a)(1),Object(ae.a)(function(){h=0}),Object(oe.a)()),m=Object(L.a)(d,p).pipe(Object(V.a)(function(e){var t=e[0],n=e[1];return N()({isLive:f.isLive,liveGap:f.isLive?f.getMaximumPosition()-t.currentTime:1/0,wantedTimeOffset:h,speed:n},t)})),Object(P.a)(m,v)),O=new D.a,E=cn({manifest:x,initialPeriod:u},_,I,l,M,k).pipe(Object(ie.a)(function(e){switch(e.type){case"end-of-stream":return J.a.debug("Init: end-of-stream order received."),(t=n,gn(t).pipe(Object(q.a)(null),Object(ue.a)(function(){return _n(t)}))).pipe(Object(oe.a)(),Object($.a)(O));case"resume-stream":return J.a.debug("Init: resume-stream order received."),O.next(null),B.a;case"discontinuity-encountered":return Mt.isNative(e.value.bufferType)&&(J.a.warn("Init: Explicit discontinuity seek",e.value.nextTime),S.currentTime=e.value.nextTime),B.a;default:return Object(F.a)(e)}var t})),w=Object(wn.a)(S,R,A,{pauseWhenStalled:!0}).pipe(Object(V.a)(ct.a.speedChanged)),T=Object(On.a)(S,A).pipe(Object(V.a)(ct.a.stalled)),j=y.pipe(Object(ie.a)(function(e){if("autoplay-blocked"===e){var t=new ne.a("MEDIA_ERR_BLOCKED_AUTOPLAY",null,!1);return Object(F.a)(ct.a.warning(t),ct.a.loaded())}if("not-loaded-metadata"!==e)return J.a.debug("Init: The current content is loaded."),Object(F.a)(ct.a.loaded());var n=new ne.a("MEDIA_ERR_NOT_LOADED_METADATA",null,!1);return Object(F.a)(ct.a.warning(n))}));return Object(P.a)(j,w,T,E).pipe(Fe(function(){l.disposeAll()}))}}var jn=n(98);var Sn=function(e){var i,a,t,n=e.adaptiveOptions,v=e.autoPlay,m=e.bufferOptions,b=e.clock$,r=e.keySystems,g=e.mediaElement,y=e.networkConfig,_=e.speed$,O=e.startAt,E=e.textTrackOptions,o=e.pipelines,u=e.url,s=new D.a,w=(i=Qe(o,{maxRetry:null!=(t=y).manifestRetry?t.manifestRetry:h.a.DEFAULT_MAX_MANIFEST_REQUEST_RETRY,maxRetryOffline:null!=t.offlineRetry?t.offlineRetry:h.a.DEFAULT_MAX_PIPELINES_RETRY_ON_ERROR},s),a=!1,function(){for(var e=arguments.length,r=new Array(e),t=0;t<e;t++)r[t]=arguments[t];return A.a.create(function(t){var n=!1;return a?(n=!0,void t.complete()):(a=!0,i.apply(void 0,r).subscribe(function(e){t.next(e)},function(e){a=!(n=!0),t.error(e)},function(){a=!(n=!0),t.complete()}),function(){n||(a=!1)})})}),c=new D.a,l=new D.a,T=new nt(o,l,c,s),j=new ye(l,c,n),f=Object(rt.a)(g,r),d=Object(jn.a)(g),S=new C.a(1),p=Object(L.a)(st(g),w(u)).pipe(Object(ie.a)(function(e){var t=e[0],n=e[1],r=n.manifest,i=n.sendingTime;function a(){var e=r.getUrl();return e?w(e).pipe(Object(ae.a)(function(e){var t=e.manifest,n=e.sendingTime;r.update(t),S.next({manifest:r,sendingTime:n})}),Object(oe.a)(),Object(W.a)()):(J.a.warn("Init: Cannot refresh the manifest: no url"),B.a)}var o=Tn({mediaElement:g,manifest:r,clock$:b,speed$:_,abrManager:j,segmentPipelinesManager:T,bufferOptions:N()({textTrackOptions:E,offlineRetry:y.offlineRetry,segmentRetry:y.segmentRetry},m)});J.a.debug("Init: Calculating initial time");var u=function(e,t){if(t){var n=e.getCurrentPositionLimits(),r=n[0],i=n[1];if(null!=t.position)return Math.max(Math.min(t.position,i),r);if(null!=t.wallClockTime){var a=e.isLive?t.wallClockTime-(e.availabilityStartTime||0):t.wallClockTime;return Math.max(Math.min(a,i),r)}if(null!=t.fromFirstPosition){var o=t.fromFirstPosition;return o<=0?r:Math.min(r+o,i)}if(null!=t.fromLastPosition){var u=t.fromLastPosition;return 0<=u?i:Math.max(r,i+u)}if(null!=t.percentage){var s=t.percentage;return 100<s?i:s<0?r:r+ +s/100*(i-r)}}if(e.isLive){var c=e.suggestedPresentationDelay;return e.getMaximumPosition()-(null==c?lt:c)}return e.getMinimumPosition()}(r,O);J.a.debug("Init: Initial time calculated:",u);var s,c,l=new D.a,f=(s=l,c=a,function(e){switch(e.type){case"needs-media-source-reload":s.next();break;case"needs-manifest-refresh":return c()}return Object(F.a)(e)}),d=l.pipe(Object(ue.a)(function(){var t=g.currentTime,n=g.paused;return st(g).pipe(Object(ie.a)(function(e){return o(e,t,!n)}),Object(ie.a)(f),Object(q.a)(ct.a.reloadingMediaSource()))})),p=Object(U.a)(Object(F.a)(ct.a.manifestReady(j,r)),o(t,u,v).pipe(Object($.a)(l),Object(ie.a)(f))),h=S.pipe(Object(q.a)({manifest:r,sendingTime:i}),Object(ue.a)(function(e){var t=e.manifest,n=e.sendingTime;if(t.lifetime){var r=null==n?0:performance.now()-n,i=1e3*t.lifetime-r;return Object(x.a)(i)}return B.a})).pipe(Object(ie.a)(a));return Object(P.a)(p,d,h)}));return Object(P.a)(p,d,f,s.pipe(Object(V.a)(ct.a.warning)))};var xn=h.a.SAMPLING_INTERVAL_MEDIASOURCE,An=h.a.SAMPLING_INTERVAL_NO_MEDIASOURCE,Rn=h.a.RESUME_GAP_AFTER_SEEKING,kn=h.a.RESUME_GAP_AFTER_NOT_ENOUGH_DATA,In=h.a.RESUME_GAP_AFTER_BUFFERING,Mn=h.a.STALL_GAP,Nn=["canplay","play","progress","seeking","seeked","loadedmetadata","ratechange"];function Dn(e){if(!e)return 0;switch(e.reason){case"seeking":return Rn;case"not-ready":return kn;default:return In}}function Cn(e,t){var n=e.buffered,r=e.currentTime,i=e.duration,a=e.ended,o=e.paused,u=e.playbackRate,s=e.readyState,c=e.seeking;return{bufferGap:Object(te.c)(n,r),buffered:n,currentRange:Object(te.f)(n,r),currentTime:r,duration:i,ended:a,paused:o,playbackRate:u,readyState:s,seeking:c,state:t}}function Pn(e,t,n){var r,i,a,o,u=t.state,s=t.currentTime,c=t.bufferGap,l=t.currentRange,f=t.duration,d=t.paused,p=t.readyState,h=t.ended,v=e.stalled,m=e.state,b=e.currentTime,g=(i=f,null!=(r=l)&&i-r.end<=Mn),y=1<=p&&"loadedmetadata"!==u&&!v&&!(g||h);return n?y&&(c<=Mn||c===1/0||1===p)?a=!0:v&&1<p&&c<1/0&&(c>Dn(v)||g||h)&&(o=!0):y&&(!d&&"timeupdate"===u&&"timeupdate"===m&&s===b||"seeking"===u&&c===1/0)?a=!0:v&&("seeking"!==u&&s!==b||"canplay"===u||c<1/0&&(c>Dn(v)||g||h))&&(o=!0),a?{reason:"seeking"===u||t.seeking?"seeking":1===p?"not-ready":"buffering",timestamp:performance.now()}:o?null:v}var Bn=function(u,e){var s=e.withMediaSource;return A.a.create(function(a){var o=N()(Cn(u,"init"),{stalled:null});function t(e){var t,n=!e||"init"!==(t=e.type)&&"canplay"!==t&&"play"!==t&&"progress"!==t&&"seeking"!==t&&"seeked"!==t&&"loadedmetadata"!==t&&"ratechange"!==t&&"timeupdate"!==t?"timeupdate":e.type,r=Cn(u,n),i=Pn(o,r,s);o=N()(r,{stalled:i}),J.a.debug("API: new clock tick",o),a.next(o)}var e=setInterval(t,s?xn:An);return Nn.forEach(function(e){return u.addEventListener(e,t)}),a.next(o),function(){clearInterval(e),Nn.forEach(function(e){return u.removeEventListener(e,t)})}}).pipe(Object(_.a)(function(){return new C.a(1)}),Object(Nt.a)())};function Ln(e,t){return function(e,t){if(!t.isLive)return+e;var n=t.suggestedPresentationDelay||0,r=t.presentationLiveGap||0,i=t.timeShiftBufferDepth,a=Date.now(),o=a-1e3*(r+n),u=null==i?t.minimumTime||t.availabilityStartTime||0:a-1e3*i;return Math.max(Math.min(e,o),u)}(e,t)/1e3-(t.availabilityStartTime||0)}var Un=h.a.FORCED_ENDED_THRESHOLD,Fn="STOPPED",$n="LOADED",Vn="LOADING",zn="PLAYING",Hn="PAUSED",Kn="ENDED",Gn="BUFFERING",Wn="SEEKING",qn="RELOADING";var Yn=n(77),Xn=h.a.DEFAULT_AUTO_PLAY,Qn=h.a.DEFAULT_INITIAL_BITRATES,Zn=h.a.DEFAULT_LIMIT_VIDEO_WIDTH,Jn=h.a.DEFAULT_MANUAL_BITRATE_SWITCHING_MODE,er=h.a.DEFAULT_MAX_BITRATES,tr=h.a.DEFAULT_MAX_BUFFER_AHEAD,nr=h.a.DEFAULT_MAX_BUFFER_BEHIND,rr=h.a.DEFAULT_SHOW_NATIVE_SUBTITLE,ir=h.a.DEFAULT_STOP_AT_END,ar=h.a.DEFAULT_TEXT_TRACK_MODE,or=h.a.DEFAULT_THROTTLE_WHEN_HIDDEN,ur=h.a.DEFAULT_WANTED_BUFFER_AHEAD;var sr=function(){function e(e){void 0===e&&(e={});var t=e,n=t.preferredAudioTracks,r=t.preferredTextTracks;this._periods=new gt(function(e,t){return e.period.start-t.period.start}),this._audioChoiceMemory=new WeakMap,this._textChoiceMemory=new WeakMap,this._videoChoiceMemory=new WeakMap,this._preferredAudioTracks=n||[],this._preferredTextTracks=r||[]}var t=e.prototype;return t.addPeriod=function(e,t,n){var r=fr(this._periods,t);if(null!=r){if(null!=r[e])return void J.a.warn("TrackManager: "+e+" already added for period",t);r[e]={adaptations:t.adaptations[e]||[],adaptation$:n}}else{var i;this._periods.add(((i={period:t})[e]={adaptations:t.adaptations[e]||[],adaptation$:n},i))}},t.removePeriod=function(e,t){var n=function(e,t){for(var n=0;n<e.length();n++){var r=e.get(n);if(r.period.id===t.id)return n}}(this._periods,t);if(null!=n){var r=this._periods.get(n);null!=r[e]?(delete r[e],null==r.audio&&null==r.text&&this._periods.removeElement(r)):J.a.warn("TrackManager: "+e+" already removed for period",t)}else J.a.warn("TrackManager: "+e+" not found for period",t)},t.resetPeriods=function(){for(;0<this._periods.length();)this._periods.pop()},t.update=function(){this._updateAudioTrackChoices(),this._updateTextTrackChoices(),this._updateVideoTrackChoices()},t.setInitialAudioTrack=function(e){var t=fr(this._periods,e),n=t&&t.audio;if(!n||!t)throw new Error("TrackManager: Given Period not found.");var r=this._preferredAudioTracks,i=e.adaptations.audio||[],a=this._audioChoiceMemory.get(e);if(void 0!==a&&Object(bt.a)(i,a))n.adaptation$.next(a);else{var o=cr(i,r);this._audioChoiceMemory.set(e,o),n.adaptation$.next(o)}},t.setInitialTextTrack=function(e){var t=fr(this._periods,e),n=t&&t.text;if(!n||!t)throw new Error("TrackManager: Given Period not found.");var r=this._preferredTextTracks,i=e.adaptations.text||[],a=this._textChoiceMemory.get(e);if(void 0!==a&&Object(bt.a)(i,a))n.adaptation$.next(a);else{var o=lr(i,r);this._textChoiceMemory.set(e,o),n.adaptation$.next(o)}},t.setInitialVideoTrack=function(e){var t=fr(this._periods,e),n=t&&t.video;if(!n||!t)throw new Error("TrackManager: Given Period not found.");var r=e.adaptations.video||[],i=this._videoChoiceMemory.get(e);if(void 0!==i&&Object(bt.a)(r,i))n.adaptation$.next(i);else{var a=r[0];this._videoChoiceMemory.set(e,a),n.adaptation$.next(a)}},t.setAudioTrackByID=function(e,t){var n=fr(this._periods,e),r=n&&n.audio;if(!r)throw new Error("TrackManager: Given Period not found.");var i=Object(y.a)(r.adaptations,function(e){return e.id===t});if(void 0===i)throw new Error("Audio Track not found.");this._audioChoiceMemory.get(e)!==i&&(this._audioChoiceMemory.set(e,i),r.adaptation$.next(i))},t.setTextTrackByID=function(e,t){var n=fr(this._periods,e),r=n&&n.text;if(!r)throw new Error("TrackManager: Given Period not found.");var i=Object(y.a)(r.adaptations,function(e){return e.id===t});if(void 0===i)throw new Error("Text Track not found.");this._textChoiceMemory.get(e)!==i&&(this._textChoiceMemory.set(e,i),r.adaptation$.next(i))},t.setVideoTrackByID=function(e,t){var n=fr(this._periods,e),r=n&&n.video;if(!r)throw new Error("LanguageManager: Given Period not found.");var i=Object(y.a)(r.adaptations,function(e){return e.id===t});if(void 0===i)throw new Error("Video Track not found.");this._videoChoiceMemory.get(e)!==i&&(this._videoChoiceMemory.set(e,i),r.adaptation$.next(i))},t.disableAudioTrack=function(e){var t=fr(this._periods,e),n=t&&t.audio;if(!n)throw new Error("TrackManager: Given Period not found.");null!==this._audioChoiceMemory.get(e)&&(this._audioChoiceMemory.set(e,null),n.adaptation$.next(null))},t.disableTextTrack=function(e){var t=fr(this._periods,e),n=t&&t.text;if(!n)throw new Error("TrackManager: Given Period not found.");null!==this._textChoiceMemory.get(e)&&(this._textChoiceMemory.set(e,null),n.adaptation$.next(null))},t.getChosenAudioTrack=function(e){var t=fr(this._periods,e);if(null==(t&&t.audio))return null;var n=this._audioChoiceMemory.get(e);return n?{language:n.language||"",normalized:n.normalizedLanguage||"",audioDescription:!!n.isAudioDescription,id:n.id}:null},t.getChosenTextTrack=function(e){var t=fr(this._periods,e);if(null==(t&&t.text))return null;var n=this._textChoiceMemory.get(e);return n?{language:n.language||"",normalized:n.normalizedLanguage||"",closedCaption:!!n.isClosedCaption,id:n.id}:null},t.getChosenVideoTrack=function(e){var t=fr(this._periods,e);if(null==(t&&t.video))return null;var n=this._videoChoiceMemory.get(e);return n?{id:n.id,representations:n.representations.map(dr)}:null},t.getAvailableAudioTracks=function(e){var t=fr(this._periods,e),n=t&&t.audio;if(null==n)return[];var r=this._audioChoiceMemory.get(e),i=r&&r.id;return n.adaptations.map(function(e){return{language:e.language||"",normalized:e.normalizedLanguage||"",audioDescription:!!e.isAudioDescription,id:e.id,active:null!=i&&i===e.id}})},t.getAvailableTextTracks=function(e){var t=fr(this._periods,e),n=t&&t.text;if(null==n)return[];var r=this._textChoiceMemory.get(e),i=r&&r.id;return n.adaptations.map(function(e){return{language:e.language||"",normalized:e.normalizedLanguage||"",closedCaption:!!e.isClosedCaption,id:e.id,active:null!=i&&i===e.id}})},t.getAvailableVideoTracks=function(e){var t=fr(this._periods,e),n=t&&t.video;if(null==n)return[];var r=this._videoChoiceMemory.get(e),i=r&&r.id;return n.adaptations.map(function(e){return{id:e.id,active:null!=i&&i===e.id,representations:e.representations.map(dr)}})},t._updateAudioTrackChoices=function(){var s=this,c=this._preferredAudioTracks;!function e(t){if(!(t>=s._periods.length())){var n=s._periods.get(t);if(null!=n.audio){var r=n.period,i=n.audio,a=r.adaptations.audio||[],o=s._audioChoiceMemory.get(r);if(null===o||void 0!==o&&Object(bt.a)(a,o))e(t+1);else{var u=cr(a,c);s._audioChoiceMemory.set(r,u),i.adaptation$.next(u),e(0)}}else e(t+1)}}(0)},t._updateTextTrackChoices=function(){var s=this,c=this._preferredTextTracks;!function e(t){if(!(t>=s._periods.length())){var n=s._periods.get(t);if(null!=n.text){var r=n.period,i=n.text,a=r.adaptations.text||[],o=s._textChoiceMemory.get(r);if(null===o||void 0!==o&&Object(bt.a)(a,o))e(t+1);else{var u=lr(a,c);s._textChoiceMemory.set(r,u),i.adaptation$.next(u),e(0)}}else e(t+1)}}(0)},t._updateVideoTrackChoices=function(){var s=this;!function e(t){if(!(t>=s._periods.length())){var n=s._periods.get(t);if(null!=n.video){var r=n.period,i=n.video,a=r.adaptations.video||[],o=s._videoChoiceMemory.get(r);if(null===o||void 0!==o&&Object(bt.a)(a,o))e(t+1);else{var u=a[0];s._videoChoiceMemory.set(r,u),i.adaptation$.next(u),e(0)}}else e(t+1)}}(0)},e}();function cr(r,i){if(!r.length)return null;for(var e=function(e){var t=i[e];if(null===t)return{v:null};var n=Object(y.a)(r,function(e){return(e.normalizedLanguage||"")===t.normalized&&!!e.isAudioDescription===t.audioDescription});return void 0!==n?{v:n}:void 0},t=0;t<i.length;t++){var n=e(t);if("object"==typeof n)return n.v}return r[0]}function lr(r,i){if(!r.length)return null;for(var e=function(e){var t=i[e];if(null===t)return{v:null};var n=Object(y.a)(r,function(e){return(e.normalizedLanguage||"")===t.normalized&&!!e.isClosedCaption===t.closedCaption});return void 0!==n?{v:n}:void 0},t=0;t<i.length;t++){var n=e(t);if("object"==typeof n)return n.v}return null}function fr(e,t){for(var n=0;n<e.length();n++){var r=e.get(n);if(r.period.id===t.id)return r}}function dr(e){return{id:e.id,bitrate:e.bitrate,frameRate:e.frameRate,width:e.width,height:e.height,codec:e.codec}}function pr(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var hr=h.a.DEFAULT_UNMUTED_VOLUME,vr=p.a.isInBackground$,mr=p.a.onEnded$,br=p.a.onFullscreenChange$,gr=p.a.onPlayPause$,yr=p.a.onSeeking$,_r=p.a.onTextTrackChanges$,Or=p.a.videoWidth$,Er=function(h){var e,t;function n(e){var t;void 0===e&&(e={}),t=h.call(this)||this;var n=function(e){var t,n,r,i,a,o,u,s,c,l;if(null==e.maxBufferAhead)t=tr;else if(t=Number(e.maxBufferAhead),isNaN(t))throw new Error("Invalid maxBufferAhead parameter. Should be a number.");if(null==e.maxBufferBehind)n=nr;else if(n=Number(e.maxBufferBehind),isNaN(n))throw new Error("Invalid maxBufferBehind parameter. Should be a number.");if(null==e.wantedBufferAhead)r=ur;else if(r=Number(e.wantedBufferAhead),isNaN(r))throw new Error("Invalid wantedBufferAhead parameter. Should be a number.");if(i=null==e.limitVideoWidth?Zn:!!e.limitVideoWidth,a=null==e.throttleWhenHidden?or:!!e.throttleWhenHidden,null==e.videoElement)o=document.createElement("video");else{if(!(e.videoElement instanceof HTMLMediaElement))throw new Error("Invalid videoElement parameter. Should be a HTMLMediaElement.");o=e.videoElement}if(null==e.initialVideoBitrate)u=Qn.video;else if(u=Number(e.initialVideoBitrate),isNaN(u))throw new Error("Invalid initialVideoBitrate parameter. Should be a number.");if(null==e.initialAudioBitrate)s=Qn.audio;else if(s=Number(e.initialAudioBitrate),isNaN(s))throw new Error("Invalid initialAudioBitrate parameter. Should be a number.");if(null==e.maxVideoBitrate)l=er.video;else if(l=Number(e.maxVideoBitrate),isNaN(l))throw new Error("Invalid maxVideoBitrate parameter. Should be a number.");if(null==e.maxAudioBitrate)c=er.audio;else if(c=Number(e.maxAudioBitrate),isNaN(c))throw new Error("Invalid maxAudioBitrate parameter. Should be a number.");return{maxBufferAhead:t,maxBufferBehind:n,limitVideoWidth:i,videoElement:o,wantedBufferAhead:r,throttleWhenHidden:a,initialAudioBitrate:s,initialVideoBitrate:u,maxAudioBitrate:c,maxVideoBitrate:l,stopAtEnd:null==e.stopAtEnd?ir:!!e.stopAtEnd}}(e),r=n.initialAudioBitrate,i=n.initialVideoBitrate,a=n.limitVideoWidth,o=n.maxAudioBitrate,u=n.maxBufferAhead,s=n.maxBufferBehind,c=n.maxVideoBitrate,l=n.throttleWhenHidden,f=n.videoElement,d=n.wantedBufferAhead,p=n.stopAtEnd;return f.preload="auto",t.version="3.10.1",t.log=J.a,t.state="STOPPED",t.videoElement=f,t._priv_destroy$=new D.a,br(f).pipe(Object($.a)(t._priv_destroy$)).subscribe(function(){return t.trigger("fullscreenChange",t.isFullscreen())}),_r(f.textTracks).pipe(Object($.a)(t._priv_destroy$),Object(V.a)(function(e){for(var t=e.target,n=[],r=0;r<t.length;r++){var i=t[r];n.push(i)}return n}),Object(z.a)(function(e,t){if(e.length!==t.length)return!1;for(var n=0;n<e.length;n++)if(e[n]!==t[n])return!1;return!0})).subscribe(function(e){return t._priv_onNativeTextTracksNext(e)}),t._priv_playing$=new C.a(1),t._priv_speed$=new v(f.playbackRate),t._priv_stopCurrentContent$=new D.a,t._priv_contentLock$=new v(!1),t._priv_bufferOptions={wantedBufferAhead$:new v(d),maxBufferAhead$:new v(u),maxBufferBehind$:new v(s)},t._priv_bitrateInfos={lastBitrates:{audio:r,video:i},initialMaxAutoBitrates:{audio:o,video:c},manualBitrates:{audio:-1,video:-1}},t._priv_throttleWhenHidden=l,t._priv_limitVideoWidth=a,t._priv_mutedMemory=hr,t._priv_trackManager=null,t._priv_abrManager=null,t._priv_currentError=null,t._priv_contentInfos=null,t._priv_contentEventsMemory={period:null,videoTrack:null,audioTrack:null,textTrack:null,videoBitrate:null,audioBitrate:null,bitrateEstimation:void 0},t._priv_stopAtEnd=p,t._priv_setPlayerState(Fn),t}t=h,(e=n).prototype=Object.create(t.prototype),(e.prototype.constructor=e).__proto__=t;var r,i,a,o=n.prototype;return o.stop=function(){this.state!==Fn&&(this._priv_stopCurrentContent$.next(),this._priv_cleanUpCurrentContentState(),this._priv_setPlayerState(Fn))},o.dispose=function(){this.stop(),this.videoElement&&Object(g.c)(this.videoElement),this._priv_destroy$.next(),this._priv_destroy$.complete(),this._priv_stopCurrentContent$.complete(),this._priv_playing$.complete(),this._priv_speed$.complete(),this._priv_contentLock$.complete(),this._priv_bufferOptions.wantedBufferAhead$.complete(),this._priv_bufferOptions.maxBufferAhead$.complete(),this._priv_bufferOptions.maxBufferBehind$.complete(),this.videoElement=null},o.loadVideo=function(e){var t=this,n=function(e){var t,n,r,i,a,o,u,s;if(!e||null==e.url)throw new Error("No url set on loadVideo");if(t=String(e.url),null==e.transport)throw new Error("No transport set on loadVideo");n=String(e.transport);var c=null==e.autoPlay?Xn:!!e.autoPlay;if(null==e.keySystems)r=[];else{var l=r=Array.isArray(e.keySystems)?e.keySystems:[e.keySystems],f=Array.isArray(l),d=0;for(l=f?l:l[Symbol.iterator]();;){var p;if(f){if(d>=l.length)break;p=l[d++]}else{if((d=l.next()).done)break;p=d.value}var h=p;if("string"!=typeof h.type||"function"!=typeof h.getLicense)throw new Error("Invalid key system given: Missing type string or getLicense callback")}}var v=e.transportOptions||{};if(null==e.supplementaryTextTracks)i=[];else{var m=i=Array.isArray(e.supplementaryTextTracks)?e.supplementaryTextTracks:[e.supplementaryTextTracks],b=Array.isArray(m),g=0;for(m=b?m:m[Symbol.iterator]();;){var y;if(b){if(g>=m.length)break;y=m[g++]}else{if((g=m.next()).done)break;y=g.value}var _=y;if("boolean"!=typeof _.closedCaption&&(_.closedCaption=!!_.closedCaption),"string"!=typeof _.language||"string"!=typeof _.mimeType||"string"!=typeof _.url)throw new Error("Invalid supplementary text track given. Missing either language, mimetype or url")}}if(null==e.supplementaryImageTracks)a=[];else{var O=a=Array.isArray(e.supplementaryImageTracks)?e.supplementaryImageTracks:[e.supplementaryImageTracks],E=Array.isArray(O),w=0;for(O=E?O:O[Symbol.iterator]();;){var T;if(E){if(w>=O.length)break;T=O[w++]}else{if((w=O.next()).done)break;T=w.value}var j=T;if("string"!=typeof j.mimeType||"string"!=typeof j.url)throw new Error("Invalid supplementary image track given. Missing either mimetype or url")}}if(null==e.textTrackMode)o=ar;else{if("native"!==e.textTrackMode&&"html"!==e.textTrackMode)throw new Error("Invalid textTrackMode.");o=e.textTrackMode}var S=Object(Yn.b)(e.defaultAudioTrack),x=Object(Yn.c)(e.defaultTextTrack),A=null==e.hidenativeSubtitle?!rr:!!e.hideNativeSubtitle,R=null==e.manualBitrateSwitchingMode?!Jn:e.manualBitrateSwitchingMode;if("html"===o){if(null==e.textTrackElement)throw new Error('You have to provide a textTrackElement in "html" textTrackMode.');if(!(e.textTrackElement instanceof HTMLElement))throw new Error("textTrackElement should be an HTMLElement.");u=e.textTrackElement}else null!=e.textTrackElement&&J.a.warn('API: You have set a textTrackElement without being in an "html" textTrackMode. It will be ignored.');if(null!=e.startAt)if(e.startAt.wallClockTime instanceof Date){var k=e.startAt.wallClockTime.getTime()/1e3;s=N()({},e.startAt,{wallClockTime:k})}else s=e.startAt;return{autoPlay:c,defaultAudioTrack:S,defaultTextTrack:x,hideNativeSubtitle:A,keySystems:r,manualBitrateSwitchingMode:R,networkConfig:null==e.networkConfig?{}:{manifestRetry:e.networkConfig.manifestRetry,offlineRetry:e.networkConfig.offlineRetry,segmentRetry:e.networkConfig.segmentRetry},startAt:s,supplementaryImageTracks:a,supplementaryTextTracks:i,textTrackElement:u,textTrackMode:o,transport:n,transportOptions:v,url:t}}(e);J.a.info("API: Calling loadvideo",n);var r=n.autoPlay,i=n.defaultAudioTrack,a=n.defaultTextTrack,o=n.keySystems,u=n.manualBitrateSwitchingMode,s=n.networkConfig,c=n.startAt,l=n.supplementaryImageTracks,f=n.supplementaryTextTracks,d=n.transport,p=n.transportOptions,h=n.url;if(!this.videoElement)throw new Error("the attached video element is disposed");this.stop();var v="directfile"===d;this._priv_currentError=null,this._priv_contentInfos={url:h,isDirectFile:v,thumbnails:null,manifest:null,currentPeriod:null,activeAdaptations:null,activeRepresentations:null,initialAudioTrack:i,initialTextTrack:a},this._priv_playing$.next(!1);var m,b=this.videoElement,g=Bn(b,{withMediaSource:!v}),y=Object(P.a)(this._priv_stopCurrentContent$,this._priv_stopAtEnd?mr(b):B.a).pipe(Object(H.a)(1));if(v){if(null==re.a.directfile)throw new Error("DirectFile feature not activated in your build.");m=re.a.directfile({autoPlay:r,clock$:g,keySystems:o,mediaElement:b,speed$:this._priv_speed$,startAt:c,url:h}).pipe(Object($.a)(y)).pipe(K())}else{var _=re.a.transports[d];if(!_)throw new Error('transport "'+d+'" not supported');var O=_(N()({supplementaryTextTracks:f,supplementaryImageTracks:l},p)),E={initialBitrates:this._priv_bitrateInfos.lastBitrates,manualBitrates:this._priv_bitrateInfos.manualBitrates,maxAutoBitrates:this._priv_bitrateInfos.initialMaxAutoBitrates,throttle:this._priv_throttleWhenHidden?{video:vr().pipe(Object(V.a)(function(e){return e?0:1/0}),Object($.a)(this._priv_stopCurrentContent$))}:{},limitWidth:this._priv_limitVideoWidth?{video:Or(b).pipe(Object($.a)(this._priv_stopCurrentContent$))}:{}},w="native"===n.textTrackMode?{textTrackMode:"native",hideNativeSubtitle:n.hideNativeSubtitle}:{textTrackMode:"html",textTrackElement:n.textTrackElement};m=Sn({adaptiveOptions:E,autoPlay:r,bufferOptions:N()({manualBitrateSwitchingMode:u},this._priv_bufferOptions),clock$:g,keySystems:o,mediaElement:b,networkConfig:s,pipelines:O,speed$:this._priv_speed$,startAt:c,textTrackOptions:w,url:h}).pipe(Object($.a)(y)).pipe(K())}var T,j,S=m.pipe(Object(G.a)(function(e){return"stalled"===e.type}),Object(V.a)(function(e){return e.value})),x=m.pipe(Object(G.a)(function(e){return"loaded"===e.type}),Object(W.a)()),A=m.pipe(Object(G.a)(function(e){return"reloading-media-source"===e.type}),Object(W.a)()),R=mr(b),k=yr(b),I=Object(L.a)(this._priv_playing$,S.pipe(Object(q.a)(null)),R.pipe(Object(q.a)(null)),k.pipe(Object(q.a)(null))).pipe(Object($.a)(this._priv_stopCurrentContent$),Object(V.a)(function(e){var t=e[0],n=e[1];return function(e,t,n){if(e.ended)return Kn;if(n){var r=Math.abs(e.duration-e.currentTime);return null!=Un&&r<Un?Kn:"seeking"===n.reason?Wn:Gn}return t?zn:Hn}(b,t,n)})),M=Object(U.a)(Object(F.a)(Vn),x.pipe(Object(H.a)(1),Object(Y.a)($n)),Object(P.a)(I.pipe(Object($.a)(A),(T=function(e){return e===Hn},function(e){return e.lift(new X(T))})),A.pipe(Object(Q.a)(x.pipe(Object(H.a)(1),Object(Z.a)(I),Object(q.a)(qn)))))).pipe(Object(z.a)());this._priv_stopCurrentContent$.pipe(Object(H.a)(1)).subscribe(function(){j&&j.unsubscribe()}),gr(b).pipe(Object($.a)(this._priv_stopCurrentContent$)).subscribe(function(e){return t._priv_onPlayPauseNext("play"===e.type)},ee.a),g.pipe(Object($.a)(this._priv_stopCurrentContent$)).subscribe(function(e){return t._priv_triggerTimeChange(e)},ee.a),M.pipe(Object($.a)(this._priv_stopCurrentContent$)).subscribe(function(e){return t._priv_setPlayerState(e)},ee.a),m.subscribe(function(e){return t._priv_onPlaybackEvent(e)},function(e){return t._priv_onPlaybackError(e)},function(){return t._priv_onPlaybackFinished()}),this._priv_contentLock$.pipe(Object(G.a)(function(e){return!e}),Object(H.a)(1),Object($.a)(this._priv_stopCurrentContent$)).subscribe(function(){j=m.connect()})},o.getError=function(){return this._priv_currentError},o.getManifest=function(){return this._priv_contentInfos&&this._priv_contentInfos.manifest},o.getCurrentAdaptations=function(){if(!this._priv_contentInfos)return null;var e=this._priv_contentInfos,t=e.currentPeriod,n=e.activeAdaptations;return t&&n&&n[t.id]||null},o.getCurrentRepresentations=function(){if(!this._priv_contentInfos)return null;var e=this._priv_contentInfos,t=e.currentPeriod,n=e.activeRepresentations;return t&&n&&n[t.id]||null},o.getVideoElement=function(){return this.videoElement},o.getNativeTextTrack=function(){if(Object(d.a)("getNativeTextTrack is deprecated. Please open an issue if you used this API."),!this.videoElement)throw new Error("Disposed player");var e=this.videoElement;return 0<e.textTracks.length?e.textTracks[0]:null},o.getPlayerState=function(){return this.state},o.isLive=function(){if(!this._priv_contentInfos)return!1;var e=this._priv_contentInfos,t=e.isDirectFile,n=e.manifest;return!t&&null!=n&&n.isLive},o.getUrl=function(){if(this._priv_contentInfos){var e=this._priv_contentInfos,t=e.isDirectFile,n=e.manifest,r=e.url;return t?r:null!=n?n.getUrl():void 0}},o.getVideoDuration=function(){if(!this.videoElement)throw new Error("Disposed player");return this.videoElement.duration},o.getVideoBufferGap=function(){if(!this.videoElement)throw new Error("Disposed player");var e=this.videoElement;return Object(te.c)(e.buffered,e.currentTime)},o.getVideoLoadedTime=function(){if(!this.videoElement)throw new Error("Disposed player");var e=this.videoElement;return Object(te.g)(e.buffered,e.currentTime)},o.getVideoPlayedTime=function(){if(!this.videoElement)throw new Error("Disposed player");var e=this.videoElement;return Object(te.e)(e.buffered,e.currentTime)},o.getWallClockTime=function(){if(!this.videoElement)throw new Error("Disposed player");if(!this._priv_contentInfos)return this.videoElement.currentTime;var e=this._priv_contentInfos,t=e.isDirectFile,n=e.manifest;if(t)return this.videoElement.currentTime;if(null==n)return 0;var r=this.videoElement.currentTime;return this.isLive()?r+(n.availabilityStartTime||0):r},o.getPosition=function(){if(!this.videoElement)throw new Error("Disposed player");return this.videoElement.currentTime},o.getPlaybackRate=function(){return this._priv_speed$.getValue()},o.setPlaybackRate=function(e){this._priv_speed$.next(e)},o.getAvailableVideoBitrates=function(){if(!this._priv_contentInfos)return[];var e=this._priv_contentInfos,t=e.currentPeriod,n=e.activeAdaptations;if(!t||!n)return[];var r=n[t.id],i=r&&r.video;return i?i.getAvailableBitrates():[]},o.getAvailableAudioBitrates=function(){if(!this._priv_contentInfos)return[];var e=this._priv_contentInfos,t=e.currentPeriod,n=e.activeAdaptations;if(!t||!n)return[];var r=n[t.id],i=r&&r.audio;return i?i.getAvailableBitrates():[]},o.getManualAudioBitrate=function(){return this._priv_bitrateInfos.manualBitrates.audio},o.getManualVideoBitrate=function(){return this._priv_bitrateInfos.manualBitrates.video},o.getVideoBitrate=function(){var e=this.getCurrentRepresentations();if(e&&e.video)return e.video.bitrate},o.getAudioBitrate=function(){var e=this.getCurrentRepresentations();if(e&&e.audio)return e.audio.bitrate},o.getMaxVideoBitrate=function(){return this._priv_abrManager?this._priv_abrManager.getMaxAutoBitrate("video"):this._priv_bitrateInfos.initialMaxAutoBitrates.video},o.getMaxAudioBitrate=function(){return this._priv_abrManager?this._priv_abrManager.getMaxAutoBitrate("audio"):this._priv_bitrateInfos.initialMaxAutoBitrates.audio},o.play=function(){var n=this;if(!this.videoElement)throw new Error("Disposed player");var e=this.videoElement.play();return null==e||"function"!=typeof e.catch?f.a.resolve():e.catch(function(e){if("NotAllowedError"===e.name){var t=new ne.a("MEDIA_ERR_PLAY_NOT_ALLOWED",e,!1);n.trigger("warning",t)}throw e})},o.pause=function(){if(!this.videoElement)throw new Error("Disposed player");this.videoElement.pause()},o.seekTo=function(e){if(!this.videoElement)throw new Error("Disposed player");if(!this._priv_contentInfos)throw new Error("player: no content loaded");var t,n=this._priv_contentInfos,r=n.isDirectFile,i=n.manifest;if(!r&&null==i)throw new Error("player: the content did not load yet");var a=typeof e;if("number"===a)t=e;else if("object"===a){var o=this.videoElement.currentTime;if(null!=e.relative)t=o+e.relative;else if(null!=e.position)t=e.position;else{if(null==e.wallClockTime)throw new Error('invalid time object. You must set one of the following properties: "relative", "position" or "wallClockTime"');t=r?e.wallClockTime:Ln(1e3*e.wallClockTime,i)}}if(void 0===t)throw new Error("invalid time given");return this.videoElement.currentTime=t},o.isFullscreen=function(){return Object(d.a)("isFullscreen is deprecated. Fullscreen management should now be managed by the application"),Object(m.b)()},o.setFullscreen=function(e){if(void 0===e&&(e=!0),Object(d.a)("setFullscreen is deprecated. Fullscreen management should now be managed by the application"),!this.videoElement)throw new Error("Disposed player");e?Object(m.c)(this.videoElement):Object(m.a)()},o.exitFullscreen=function(){Object(d.a)("exitFullscreen is deprecated. Fullscreen management should now be managed by the application"),Object(m.a)()},o.getVolume=function(){if(!this.videoElement)throw new Error("Disposed player");return this.videoElement.volume},o.setVolume=function(e){if(!this.videoElement)throw new Error("Disposed player");var t=this.videoElement;e!==t.volume&&(t.volume=e,this.trigger("volumeChange",e))},o.isMute=function(){return!this.getVolume()},o.mute=function(){this._priv_mutedMemory=this.getVolume(),this.setVolume(0)},o.unMute=function(){0===this.getVolume()&&this.setVolume(this._priv_mutedMemory||hr)},o.setVideoBitrate=function(e){this._priv_bitrateInfos.manualBitrates.video=e,this._priv_abrManager&&this._priv_abrManager.setManualBitrate("video",e)},o.setAudioBitrate=function(e){this._priv_bitrateInfos.manualBitrates.audio=e,this._priv_abrManager&&this._priv_abrManager.setManualBitrate("audio",e)},o.setMaxVideoBitrate=function(e){this._priv_bitrateInfos.initialMaxAutoBitrates.video=e,this._priv_abrManager&&this._priv_abrManager.setMaxAutoBitrate("video",e)},o.setMaxAudioBitrate=function(e){this._priv_bitrateInfos.initialMaxAutoBitrates.audio=e,this._priv_abrManager&&this._priv_abrManager.setMaxAutoBitrate("audio",e)},o.setMaxBufferBehind=function(e){this._priv_bufferOptions.maxBufferBehind$.next(e)},o.setMaxBufferAhead=function(e){this._priv_bufferOptions.maxBufferAhead$.next(e)},o.setWantedBufferAhead=function(e){this._priv_bufferOptions.wantedBufferAhead$.next(e)},o.getMaxBufferBehind=function(){return this._priv_bufferOptions.maxBufferBehind$.getValue()},o.getMaxBufferAhead=function(){return this._priv_bufferOptions.maxBufferAhead$.getValue()},o.getWantedBufferAhead=function(){return this._priv_bufferOptions.wantedBufferAhead$.getValue()},o.getCurrentKeySystem=function(){if(!this.videoElement)throw new Error("Disposed player");return Object(g.d)(this.videoElement)},o.getAvailableAudioTracks=function(){if(!this._priv_contentInfos)return[];var e=this._priv_contentInfos.currentPeriod;return this._priv_trackManager&&e?this._priv_trackManager.getAvailableAudioTracks(e):[]},o.getAvailableTextTracks=function(){if(!this._priv_contentInfos)return[];var e=this._priv_contentInfos.currentPeriod;return this._priv_trackManager&&e?this._priv_trackManager.getAvailableTextTracks(e):[]},o.getAvailableVideoTracks=function(){if(!this._priv_contentInfos)return[];var e=this._priv_contentInfos.currentPeriod;return this._priv_trackManager&&e?this._priv_trackManager.getAvailableVideoTracks(e):[]},o.getAudioTrack=function(){if(this._priv_contentInfos){var e=this._priv_contentInfos.currentPeriod;if(this._priv_trackManager&&e)return this._priv_trackManager.getChosenAudioTrack(e)}},o.getTextTrack=function(){if(this._priv_contentInfos){var e=this._priv_contentInfos.currentPeriod;if(this._priv_trackManager&&e)return this._priv_trackManager.getChosenTextTrack(e)}},o.getVideoTrack=function(){if(this._priv_contentInfos){var e=this._priv_contentInfos.currentPeriod;if(this._priv_trackManager&&e)return this._priv_trackManager.getChosenVideoTrack(e)}},o.setAudioTrack=function(e){if(!this._priv_contentInfos)throw new Error("No content loaded");var t=this._priv_contentInfos.currentPeriod;if(!this._priv_trackManager||!t)throw new Error("No compatible content launched.");try{this._priv_trackManager.setAudioTrackByID(t,e)}catch(e){throw new Error("player: unknown audio track")}},o.setTextTrack=function(e){if(!this._priv_contentInfos)throw new Error("No content loaded");var t=this._priv_contentInfos.currentPeriod;if(!this._priv_trackManager||!t)throw new Error("No compatible content launched.");try{this._priv_trackManager.setTextTrackByID(t,e)}catch(e){throw new Error("player: unknown text track")}},o.disableTextTrack=function(){if(this._priv_contentInfos){var e=this._priv_contentInfos.currentPeriod;if(this._priv_trackManager&&e)return this._priv_trackManager.disableTextTrack(e)}},o.setVideoTrack=function(e){if(!this._priv_contentInfos)throw new Error("No content loaded");var t=this._priv_contentInfos.currentPeriod;if(!this._priv_trackManager||!t)throw new Error("No compatible content launched.");try{this._priv_trackManager.setVideoTrackByID(t,e)}catch(e){throw new Error("player: unknown video track")}},o.getImageTrackData=function(){return this._priv_contentInfos&&this._priv_contentInfos.thumbnails},o.getMinimumPosition=function(){if(!this._priv_contentInfos)return null;if(this._priv_contentInfos.isDirectFile)return 0;var e=this._priv_contentInfos.manifest;return null!=e?e.getMinimumPosition():null},o.getMaximumPosition=function(){if(!this._priv_contentInfos)return null;var e=this._priv_contentInfos,t=e.isDirectFile,n=e.manifest;if(t){if(!this.videoElement)throw new Error("Disposed player");return this.videoElement.duration}return null!=n?n.getMaximumPosition():null},o._priv_cleanUpCurrentContentState=function(){var e=this;this._priv_contentLock$.next(!0),this._priv_contentInfos=null,this._priv_trackManager=null,this._priv_abrManager&&(this._priv_abrManager.dispose(),this._priv_abrManager=null),this._priv_contentEventsMemory={period:null,videoTrack:null,audioTrack:null,textTrack:null,videoBitrate:null,audioBitrate:null,bitrateEstimation:void 0};var t=function(){e._priv_contentLock$.next(!1)};this.videoElement?Object(g.a)(this.videoElement).pipe(Object(R.a)(function(){return B.a})).subscribe(ee.a,t,t):t()},o._priv_triggerContentEvent=function(e,t){var n=this._priv_contentEventsMemory[e];u()(n,t)||(this._priv_contentEventsMemory[e]=t,this.trigger(e+"Change",t))},o._priv_onPlaybackEvent=function(e){switch(e.type){case"activePeriodChanged":this._priv_onActivePeriodChanged(e.value);break;case"periodBufferReady":this._priv_onPeriodBufferReady(e.value);break;case"periodBufferCleared":this._priv_onPeriodBufferCleared(e.value);break;case"reloading-media-source":this._priv_onReloadingMediaSource();break;case"representationChange":this._priv_onRepresentationChange(e.value);break;case"adaptationChange":this._priv_onAdaptationChange(e.value);break;case"bitrateEstimationChange":this._priv_onBitrateEstimationChange(e.value);break;case"manifestReady":this._priv_onManifestReady(e.value);break;case"warning":this._priv_onPlaybackWarning(e.value);break;case"added-segment":if(!this._priv_contentInfos)return void J.a.error("API: Added segment while no content is loaded");var t=e.value,n=t.bufferType,r=t.segmentData;if("image"===n&&null!=r&&"bif"===r.type){var i=r.data;this._priv_contentInfos.thumbnails=i,this.trigger("imageTrackUpdate",{data:this._priv_contentInfos.thumbnails})}}},o._priv_onPlaybackError=function(e){this._priv_stopCurrentContent$.next(),this._priv_cleanUpCurrentContentState(),this._priv_currentError=e,J.a.error("API: The player stopped because of an error:",e),this._priv_setPlayerState(Fn),this._priv_currentError===e&&this.trigger("error",e)},o._priv_onPlaybackFinished=function(){this._priv_stopCurrentContent$.next(),this._priv_cleanUpCurrentContentState(),this._priv_setPlayerState(Kn)},o._priv_onPlaybackWarning=function(e){J.a.warn("API: Sending warning:",e),this.trigger("warning",e)},o._priv_onManifestReady=function(e){var t=this;if(this._priv_contentInfos){var n=e.manifest,r=e.abrManager;this._priv_contentInfos.manifest=n,this._priv_abrManager=r;var i=this._priv_contentInfos,a=i.initialAudioTrack,o=i.initialTextTrack;this._priv_trackManager=new sr({preferredAudioTracks:void 0===a?void 0:[a],preferredTextTracks:void 0===o?void 0:[o]}),Object(l.b)(n,"manifestUpdate").pipe(Object($.a)(this._priv_stopCurrentContent$)).subscribe(function(){t._priv_trackManager&&t._priv_trackManager.update()})}else J.a.error("API: The manifest is loaded but no content is.")},o._priv_onActivePeriodChanged=function(e){var t=e.period;if(this._priv_contentInfos){if(this._priv_contentInfos.currentPeriod=t,this._priv_triggerContentEvent("period",t),this._priv_trackManager){var n=this._priv_trackManager.getChosenAudioTrack(t),r=this._priv_trackManager.getChosenTextTrack(t),i=this._priv_trackManager.getChosenVideoTrack(t);this._priv_triggerContentEvent("audioTrack",n),this._priv_triggerContentEvent("textTrack",r),this._priv_triggerContentEvent("videoTrack",i)}else this._priv_triggerContentEvent("audioTrack",null),this._priv_triggerContentEvent("textTrack",null),this._priv_triggerContentEvent("videoTrack",null);var a=this.getCurrentRepresentations();if(a&&null!=a.audio){var o=a.audio.bitrate;this._priv_triggerContentEvent("audioBitrate",null!=o?o:-1)}else this._priv_triggerContentEvent("audioBitrate",null);var u=this.getCurrentRepresentations();if(u&&null!=u.video){var s=u.video.bitrate;this._priv_triggerContentEvent("videoBitrate",null!=s?s:-1)}else this._priv_triggerContentEvent("videoBitrate",null)}else J.a.error("API: The active period changed but no content is loaded")},o._priv_onPeriodBufferReady=function(e){var t=e.type,n=e.period,r=e.adaptation$;switch(t){case"video":this._priv_trackManager?(this._priv_trackManager.addPeriod(t,n,r),this._priv_trackManager.setInitialVideoTrack(n)):(J.a.error("API: TrackManager not instanciated for a new video period"),r.next(null));break;case"audio":this._priv_trackManager?(this._priv_trackManager.addPeriod(t,n,r),this._priv_trackManager.setInitialAudioTrack(n)):(J.a.error("API: TrackManager not instanciated for a new "+t+" period"),r.next(null));break;case"text":this._priv_trackManager?(this._priv_trackManager.addPeriod(t,n,r),this._priv_trackManager.setInitialTextTrack(n)):(J.a.error("API: TrackManager not instanciated for a new "+t+" period"),r.next(null));break;default:var i=n.adaptations[t];i&&i.length?r.next(i[0]):r.next(null)}},o._priv_onPeriodBufferCleared=function(e){var t=e.type,n=e.period;switch(t){case"audio":case"text":case"video":this._priv_trackManager&&this._priv_trackManager.removePeriod(t,n)}if(null!=this._priv_contentInfos){var r=this._priv_contentInfos,i=r.activeAdaptations,a=r.activeRepresentations;i&&i[n.id]&&delete i[n.id],a&&a[n.id]&&delete a[n.id]}},o._priv_onReloadingMediaSource=function(){this._priv_trackManager&&this._priv_trackManager.resetPeriods()},o._priv_onAdaptationChange=function(e){var t=e.type,n=e.adaptation,r=e.period;if(this._priv_contentInfos){this._priv_contentInfos.activeAdaptations||(this._priv_contentInfos.activeAdaptations={});var i,a=this._priv_contentInfos,o=a.activeAdaptations,u=a.currentPeriod,s=o[r.id];if(s)s[t]=n;else o[r.id]=((i={})[t]=n,i);if(this._priv_trackManager&&null!=u&&null!=r&&r.id===u.id)switch(t){case"audio":var c=this._priv_trackManager.getChosenAudioTrack(u);this._priv_triggerContentEvent("audioTrack",c);break;case"text":var l=this._priv_trackManager.getChosenTextTrack(u);this._priv_triggerContentEvent("textTrack",l);break;case"video":var f=this._priv_trackManager.getChosenVideoTrack(u);this._priv_triggerContentEvent("videoTrack",f)}}else J.a.error("API: The adaptations changed but no content is loaded")},o._priv_onRepresentationChange=function(e){var t=e.type,n=e.period,r=e.representation;if(this._priv_contentInfos){this._priv_contentInfos.activeRepresentations||(this._priv_contentInfos.activeRepresentations={});var i,a=this._priv_contentInfos,o=a.activeRepresentations,u=a.currentPeriod,s=o[n.id];if(s)s[t]=r;else o[n.id]=((i={})[t]=r,i);var c=r&&r.bitrate;null!=c&&(this._priv_bitrateInfos.lastBitrates[t]=c),null!=n&&null!=u&&u.id===n.id&&("video"===t?this._priv_triggerContentEvent("videoBitrate",null!=c?c:-1):"audio"===t&&this._priv_triggerContentEvent("audioBitrate",null!=c?c:-1))}else J.a.error("API: The representations changed but no content is loaded")},o._priv_onBitrateEstimationChange=function(e){var t=e.type,n=e.bitrate;this._priv_triggerContentEvent("bitrateEstimation",{type:t,bitrate:n})},o._priv_onPlayPauseNext=function(e){if(!this.videoElement)throw new Error("Disposed player");this._priv_playing$.next(e)},o._priv_onNativeTextTracksNext=function(e){this.trigger("nativeTextTracksChange",e)},o._priv_setPlayerState=function(e){this.state!==e&&(this.state=e,J.a.info("API: playerStateChange event",e),this.trigger("playerStateChange",e))},o._priv_triggerTimeChange=function(e){if(this._priv_contentInfos){if(this.state!==qn){var t=this._priv_contentInfos,n=t.isDirectFile,r=t.manifest;if((n||null!=r)&&e){var i={position:e.currentTime,duration:e.duration,playbackRate:e.playbackRate,bufferGap:isFinite(e.bufferGap)?e.bufferGap:0};null!=r&&r.isLive&&0<e.currentTime&&(i.wallClockTime=e.currentTime+(r.availabilityStartTime||0),i.liveGap=r.getMaximumPosition()-e.currentTime),this.trigger("positionUpdate",i)}}}else J.a.warn("API: Cannot perform time update: no content loaded.")},r=n,a=[{key:"ErrorTypes",get:function(){return b.b}},{key:"ErrorCodes",get:function(){return b.a}},{key:"LogLevel",get:function(){return J.a.getLevel()},set:function(e){J.a.setLevel(e)}}],(i=null)&&pr(r.prototype,i),a&&pr(r,a),n}(l.a);Er.version="3.10.1";var wr=Er;re.a.emeManager=n(121).default,re.a.imageBuffer=n(157).default,re.a.imageParser=n(141).default,re.a.transports.smooth=n(152).default,re.a.transports.dash=n(151).default,re.a.nativeTextTracksBuffer=n(156).default,re.a.nativeTextTracksParsers.vtt=n(142).default,re.a.nativeTextTracksParsers.ttml=n(158).default,re.a.nativeTextTracksParsers.sami=n(143).default,re.a.nativeTextTracksParsers.srt=n(144).default,re.a.htmlTextTracksBuffer=n(154).default,re.a.htmlTextTracksParsers.sami=n(145).default,re.a.htmlTextTracksParsers.ttml=n(155).default,re.a.htmlTextTracksParsers.srt=n(146).default,re.a.htmlTextTracksParsers.vtt=n(153).default,re.a.directfile=n(147).default;t.default=wr},function(e,t,n){"use strict";n.r(t);var T=n(39),l=n(174),f=n(161),d=n(32),p=n(44),u=n(10),h=n(100),j=n(178),S=n(0),g=408125543,s=357149030,i=2807729,c=17545;function y(e,t,n,r){for(var i=r[0],a=r[1],o=i;o<a;){var u=v(n,o);if(null==u)return null;var s=u.value,c=o+u.length,l=m(n,c);if(null==l)return null;var f=c+l.length,d=f+l.value;if(s===e)return[f,d];if(t.length)for(var p=0;p<t.length;p++){if(s===t[p])return y(e,t.slice(p+1,t.length),n,[f,d])}o=d}return null}function _(e,t){var n=y(i,[g,s],e,[t,e.length]);if(null==n)return null;var r=n[1]-n[0];return 1e9/E(e,n[0],r)}function O(e,t){var n=y(c,[g,s],e,[t,e.length]);if(null==n)return null;var r,i,a,o,u=n[1]-n[0];return 4===u?(a=e,o=n[0],new DataView(a.buffer).getFloat32(o)):8===u?(r=e,i=n[0],new DataView(r.buffer).getFloat64(i)):null}function a(e,t){for(var n=1;n<=8;n++)if(e[t]>=Math.pow(2,8-n))return n}function v(e,t){var n=a(e,t);if(null==n)return S.a.warn("webm: unrepresentable length"),null;if(t+n>e.length)return S.a.warn("webm: impossible length"),null;for(var r=0,i=0;i<n;i++)r=e[t+i]*Math.pow(2,8*(n-i-1))+r;return{length:n,value:r}}function m(e,t){var n=a(e,t);if(null==n)return S.a.warn("webm: unrepresentable length"),null;if(t+n>e.length)return S.a.warn("webm: impossible length"),null;for(var r=(e[t]&(1<<8-n)-1)*Math.pow(2,8*(n-1)),i=1;i<n;i++)r=e[t+i]*Math.pow(2,8*(n-i-1))+r;return{length:n,value:r}}function E(e,t,n){for(var r=0,i=0;i<n;i++)r=e[t+i]*Math.pow(2,8*(n-i-1))+r;return r}var b=n(2),r=n(48),x=n(30),w=n(89);function A(e){if(0===e.periods.length)throw new Error("DASH Parser: no period available for a live content");var t=e.periods[e.periods.length-1].adaptations,n=t.video||t.audio;if(!n||!n.length)throw new Error("DASH Parser: Can't find first adaptation from last period");var r=function(e){if(e){var t=(e.representations||[]).map(function(e){var t=e.index.getLastPosition();return null!=t?t:void 0});if(!t.some(function(e){return null==e})){var n=Math.min.apply(Math,t);return isNaN(n)?void 0:n}}}(n[0]),i=e.availabilityStartTime||0;return null!=r?Date.now()/1e3-(r+i):10}var R=n(13),o=/^P(([\d.]*)Y)?(([\d.]*)M)?(([\d.]*)D)?T?(([\d.]*)H)?(([\d.]*)M)?(([\d.]*)S)?/,k=/([0-9]+)-([0-9]+)/;function I(e){return"true"===e}function M(e){return"true"===e||"false"!==e&&parseInt(e,10)}function N(e){return new Date(Date.parse(e)).getTime()/1e3}function D(e){if(!e)return 0;var t=o.exec(e);return Object(R.b)(!!t,e+" is not a valid ISO8601 duration"),365*parseFloat(t[2]||"0")*24*60*60+30*parseFloat(t[4]||"0")*24*60*60+24*parseFloat(t[6]||"0")*60*60+60*parseFloat(t[8]||"0")*60+60*parseFloat(t[10]||"0")+parseFloat(t[12]||"0")}function C(e){var t=k.exec(e);return t?[+t[1],+t[2]]:null}function P(e){for(var t,n,r=0;r<e.attributes.length;r++){var i=e.attributes[r];switch(i.name){case"schemeIdUri":t=i.value;break;case"value":n=i.value}}return{schemeIdUri:t,value:n}}function B(e){for(var t={},n=0;n<e.attributes.length;n++){var r=e.attributes[n];switch(r.name){case"id":t.id=r.value;break;case"lang":t.language=r.value;break;case"contentType":t.contentType=r.value;break;case"par":t.par=r.value}}return t}function L(e){for(var t,n,r,i=0;i<e.attributes.length;i++){var a=e.attributes[i];switch(a.name){case"schemeIdUri":t=a.value;break;case"value":n=a.value;break;case"cenc:default_KID":r=a.value.toString().split("-").join("").toUpperCase()}}return{schemeIdUri:t,value:n,keyId:r}}var U=n(7),F=n.n(U);function $(e){for(var t={},n=0;n<e.attributes.length;n++){var r=e.attributes[n];switch(r.name){case"range":var i=C(r.value)||void 0;i?t.range=i:S.a.warn('DASH: invalid range ("'+r.value+'")');break;case"sourceURL":t.media=r.value}}return t}function V(e){for(var t={},n=e.childNodes,r=0;r<n.length;r++)if(n[r].nodeType===Node.ELEMENT_NODE){var i=n[r];"Initialization"===i.nodeName&&(t.initialization=$(i))}for(var a=0;a<e.attributes.length;a++){var o=e.attributes[a];switch(o.name){case"timescale":var u=parseInt(o.value,10);isNaN(u)?S.a.warn('DASH: invalid timescale ("'+o.value+'")'):t.timescale=u;break;case"timeShiftBufferDepth":var s=D(o.value);isNaN(s)?S.a.warn('DASH: invalid timeShiftBufferDepth ("'+o.value+'")'):t.timeShiftBufferDepth=s;break;case"presentationTimeOffset":var c=parseFloat(o.value);isNaN(c)?S.a.warn('DASH: invalid presentationTimeOffset ("'+o.value+'")'):t.presentationTimeOffset=c;break;case"indexRange":t.indexRange=C(o.value)||void 0;break;case"indexRangeExact":t.indexRangeExact=I(o.value);break;case"availabilityTimeOffset":var l=parseFloat(o.value);isNaN(l)?S.a.warn('DASH: invalid availabilityTimeOffset ("'+o.value+'")'):t.availabilityTimeOffset=l;break;case"availabilityTimeComplete":t.availabilityTimeComplete=I(o.value);break;case"duration":var f=parseInt(o.value,10);isNaN(f)?S.a.warn('DASH: invalid duration ("'+o.value+'")'):t.duration=f;break;case"startNumber":var d=parseInt(o.value,10);isNaN(d)?S.a.warn('DASH: invalid startNumber ("'+o.value+'")'):t.startNumber=d}}var p=null==t.timescale?1:t.timescale,h=!!t.indexRangeExact,v=null==t.availabilityTimeComplete||t.availabilityTimeComplete;return F()(t,{availabilityTimeComplete:v,indexRangeExact:h,timeline:[],timescale:p})}function z(e){for(var t={},n=0;n<e.attributes.length;n++){var r=e.attributes[n];switch(r.name){case"media":t.media=r.value;break;case"indexRange":var i=C(r.value)||void 0;i?t.indexRange=i:S.a.warn('DASH: invalid indexRange ("'+r.value+'")');break;case"index":t.index=r.value;break;case"mediaRange":var a=C(r.value)||void 0;a?t.mediaRange=a:S.a.warn('DASH: invalid mediaRange ("'+r.value+'")')}}return t}function H(e){for(var t=V(e),n=[],r=e.childNodes,i=0;i<r.length;i++)if(r[i].nodeType===Node.ELEMENT_NODE){var a=r[i];if("SegmentURL"===a.nodeName){var o=z(a);n.push(o)}}var u=t.duration;if(null==u)throw new Error("Invalid SegmentList: no duration");return F()(t,{list:n,duration:u})}function K(e){for(var t,n,r,i=0;i<e.attributes.length;i++){var a=e.attributes[i];switch(a.name){case"t":t=parseInt(a.value,10);break;case"d":n=parseInt(a.value,10);break;case"r":r=parseInt(a.value,10)}}return{start:t,duration:n,repeatCount:r}}function G(e){for(var t=[],n=e.childNodes,r=0;r<n.length;r++)if(n[r].nodeType===Node.ELEMENT_NODE){var i=n[r];if("S"===i.nodeName){var a=K(i);a&&t.push(a)}}return t}function W(e){for(var t,n,r,i,a,o=V(e),u=0;u<e.childNodes.length;u++)if(e.childNodes[u].nodeType===Node.ELEMENT_NODE){var s=e.childNodes[u];"SegmentTimeline"===s.nodeName&&(a=G(s))}for(var c=0;c<e.attributes.length;c++){var l=e.attributes[c];switch(l.nodeName){case"initialization":null==o.initialization&&(o.initialization={media:l.value});break;case"index":n=l.value;break;case"media":r=l.value;break;case"bitstreamSwitching":i=I(l.value)}}if(null!=a)t=F()({},o,{indexType:"timeline",timeline:a});else{var f=o.duration;if(null==f)throw new Error("Invalid SegmentTemplate: no duration");t=F()({},o,{indexType:"template",duration:f})}return null!=n&&(t.index=n),null!=r&&(t.media=r),null!=i&&(t.bitstreamSwitching=i),t}function q(e){return{children:function(e){for(var t={baseURL:""},n=0;n<e.length;n++)if(e[n].nodeType===Node.ELEMENT_NODE){var r=e[n];switch(r.nodeName){case"BaseURL":t.baseURL=r.textContent||"";break;case"SegmentBase":t.segmentBase=V(r);break;case"SegmentList":t.segmentList=H(r);break;case"SegmentTemplate":t.segmentTemplate=W(r)}}return t}(e.childNodes),attributes:function(e){for(var t={},n=0;n<e.attributes.length;n++){var r=e.attributes[n];switch(r.name){case"audioSamplingRate":t.audioSamplingRate=r.value;break;case"bandwidth":var i=parseInt(r.value,10);isNaN(i)?S.a.warn('DASH: invalid bandwidth ("'+r.value+'")'):t.bitrate=i;break;case"codecs":t.codecs=r.value;break;case"codingDependency":t.codingDependency=I(r.value);break;case"frameRate":t.frameRate=r.value;break;case"height":var a=parseInt(r.value,10);isNaN(a)?S.a.warn('DASH: invalid height ("'+r.value+'")'):t.height=a;break;case"id":t.id=r.value;break;case"maxPlayoutRate":var o=parseFloat(r.value);isNaN(o)?S.a.warn('DASH: invalid maxPlayoutRate ("'+r.value+'")'):t.maxPlayoutRate=o;break;case"maximumSAPPeriod":var u=parseFloat(r.value);isNaN(u)?S.a.warn('DASH: invalid maximumSAPPeriod ("'+r.value+'")'):t.maximumSAPPeriod=u;break;case"mimeType":t.mimeType=r.value;break;case"profiles":t.profiles=r.value;break;case"qualityRanking":var s=parseInt(r.value,10);isNaN(s)?S.a.warn('DASH: invalid qualityRanking ("'+r.value+'")'):t.qualityRanking=s;break;case"segmentProfiles":t.segmentProfiles=r.value;break;case"width":var c=parseInt(r.value,10);isNaN(c)?S.a.warn('DASH: invalid width ("'+r.value+'")'):t.width=c}}return t}(e)}}function Y(e){return{children:function(e){for(var t={baseURL:"",representations:[]},n=[],r=0;r<e.length;r++)if(e[r].nodeType===Node.ELEMENT_NODE){var i=e[r];switch(i.nodeName){case"Accessibility":t.accessibility=P(i);break;case"BaseURL":t.baseURL=i.textContent||"";break;case"ContentComponent":t.contentComponent=B(i);break;case"Representation":var a=q(i);t.representations.push(a);break;case"Role":null==t.roles?t.roles=[P(i)]:t.roles.push(P(i));break;case"SupplementalProperty":null==t.supplementalProperties?t.supplementalProperties=[P(i)]:t.supplementalProperties.push(P(i));break;case"SegmentBase":t.segmentBase=V(i);break;case"SegmentList":t.segmentList=H(i);break;case"SegmentTemplate":t.segmentTemplate=W(i);break;case"ContentProtection":var o=L(i);o&&n.push(o)}}return n.length&&(t.contentProtections=n),t}(e.childNodes),attributes:function(e){for(var t={},n=0;n<e.attributes.length;n++){var r=e.attributes[n];switch(r.name){case"id":t.id=r.value;break;case"group":var i=parseInt(r.value,10);isNaN(i)?S.a.warn('DASH: invalid group ("'+r.value+'")'):t.group=i;break;case"lang":t.language=r.value;break;case"contentType":t.contentType=r.value;break;case"par":t.par=r.value;break;case"minBandwidth":var a=parseInt(r.value,10);isNaN(a)?S.a.warn('DASH: invalid minBandwidth ("'+r.value+'")'):t.minBitrate=a;break;case"maxBandwidth":var o=parseInt(r.value,10);isNaN(o)?S.a.warn('DASH: invalid maxBandwidth ("'+r.value+'")'):t.maxBitrate=o;break;case"minWidth":var u=parseInt(r.value,10);isNaN(u)?S.a.warn('DASH: invalid minWidth ("'+r.value+'")'):t.minWidth=u;break;case"maxWidth":var s=parseInt(r.value,10);isNaN(s)?S.a.warn('DASH: invalid maxWidth ("'+r.value+'")'):t.maxWidth=s;break;case"minHeight":var c=parseInt(r.value,10);isNaN(c)?S.a.warn('DASH: invalid minHeight ("'+r.value+'")'):t.minHeight=c;break;case"maxHeight":var l=parseInt(r.value,10);isNaN(l)?S.a.warn('DASH: invalid maxHeight ("'+r.value+'")'):t.maxHeight=l;break;case"minFrameRate":t.minFrameRate=r.value;break;case"maxFrameRate":t.maxFrameRate=r.value;break;case"segmentAlignment":var f=M(r.value);"number"==typeof f&&isNaN(f)?S.a.warn('DASH: invalid segmentAlignment ("'+r.value+'")'):t.segmentAlignment=f;break;case"subsegmentAlignment":var d=M(r.value);"number"==typeof d&&isNaN(d)?S.a.warn('DASH: invalid subsegmentAlignment ("'+r.value+'")'):t.subsegmentAlignment=d;break;case"bitstreamSwitching":t.bitstreamSwitching=I(r.value);break;case"audioSamplingRate":t.audioSamplingRate=r.value;break;case"codecs":t.codecs=r.value;break;case"codingDependency":t.codingDependency=I(r.value);break;case"frameRate":t.frameRate=r.value;break;case"height":var p=parseInt(r.value,10);isNaN(p)?S.a.warn('DASH: invalid height ("'+r.value+'")'):t.height=p;break;case"maxPlayoutRate":var h=parseFloat(r.value);isNaN(h)?S.a.warn('DASH: invalid maxPlayoutRate ("'+r.value+'")'):t.maxPlayoutRate=h;break;case"maximumSAPPeriod":var v=parseFloat(r.value);isNaN(v)?S.a.warn('DASH: invalid maximumSAPPeriod ("'+r.value+'")'):t.maximumSAPPeriod=v;break;case"mimeType":t.mimeType=r.value;break;case"profiles":t.profiles=r.value;break;case"segmentProfiles":t.segmentProfiles=r.value;break;case"width":var m=parseInt(r.value,10);isNaN(m)?S.a.warn('DASH: invalid width ("'+r.value+'")'):t.width=m}}return t}(e)}}function X(e){return{children:function(e){for(var t="",n=[],r=0;r<e.length;r++)if(e[r].nodeType===Node.ELEMENT_NODE){var i=e[r];switch(i.nodeName){case"BaseURL":t=i.textContent||"";break;case"AdaptationSet":var a=Y(i);n.push(a)}}return{baseURL:t,adaptations:n}}(e.childNodes),attributes:function(e){for(var t={},n=0;n<e.attributes.length;n++){var r=e.attributes[n];switch(r.name){case"id":t.id=r.value;break;case"start":var i=D(r.value);isNaN(i)?S.a.warn("DASH: Unrecognized start in the mpd:",r.value):t.start=i;break;case"duration":var a=D(r.value);isNaN(a)?S.a.warn("DASH: Unrecognized duration in the mpd:",r.value):t.duration=a;break;case"bitstreamSwitching":t.bitstreamSwitching=I(r.value);break;case"xlink:href":t.xlinkHref=r.value;break;case"xlink:actuate":t.xlinkActuate=r.value}}return t}(e)}}function Q(e){return{children:function(e){for(var t="",n=[],r=[],i=0;i<e.length;i++)if(e[i].nodeType===Node.ELEMENT_NODE){var a=e[i];switch(a.nodeName){case"BaseURL":t=a.textContent||"";break;case"Location":n.push(a.textContent||"");break;case"Period":var o=X(a);r.push(o)}}return{baseURL:t,locations:n,periods:r}}(e.childNodes),attributes:function(e){for(var t={},n=0;n<e.attributes.length;n++){var r=e.attributes[n];switch(r.name){case"id":t.id=r.value;break;case"profiles":t.profiles=r.value;break;case"type":t.type=r.value;break;case"availabilityStartTime":t.availabilityStartTime=+N(r.value);break;case"availabilityEndTime":t.availabilityEndTime=+N(r.value);break;case"publishTime":t.publishTime=+N(r.value);break;case"mediaPresentationDuration":t.duration=D(r.value);break;case"minimumUpdatePeriod":t.minimumUpdatePeriod=D(r.value);break;case"minBufferTime":t.minBufferTime=D(r.value);break;case"timeShiftBufferDepth":t.timeShiftBufferDepth=D(r.value);break;case"suggestedPresentationDelay":t.suggestedPresentationDelay=D(r.value);break;case"maxSegmentDuration":t.maxSegmentDuration=D(r.value);break;case"maxSubsegmentDuration":t.maxSubsegmentDuration=D(r.value)}}return t}(e)}}var Z=n(11),J=n(12),ee=["audio","video","text","image"],te=["subtitle","caption"];function ne(e,t,n){var r,i=e.repeatCount;return 0<=i?i:(r=null!=t?t.start:null!=n?n:Number.MAX_VALUE,Math.ceil((r-e.start)/e.duration)-1)}function re(e,t){return t*e.timescale+e.indexTimeOffset}function ie(e,t){return(t-e.indexTimeOffset)/e.timescale}function ae(e,t,n){var r=e.timescale||1;return{up:t*r,to:(t+n)*r}}function oe(e,t,n){var r=e.start,i=e.duration;return-1===i?r:r+(ne(e,t,n)+1)*i}function ue(e){var t=e.initialization;return{id:"init",isInit:!0,time:0,range:t&&t.range||void 0,indexRange:e.indexRange||void 0,mediaURL:t?t.mediaURL:null,timescale:e.timescale,timestampOffset:-e.indexTimeOffset/e.timescale}}function se(e,t,n){for(var r,i,a=re(e,t),o=re(e,t+n),u=e.timeline,s=e.timescale,c=e.mediaURL,l=e.startNumber,f=e.timelineEnd,d=null!=l?l:void 0,p=[],h=u.length,v=u.length&&u[0].duration||0,m=0;m<h;m++){var b=u[m],g=b.duration,y=b.start,_=b.range;if(v=Math.max(v,g),g<0){if(y+v<o){var O=null!=d?d:void 0,E={id:""+y,time:y-e.indexTimeOffset,isInit:!1,range:_,duration:void 0,timescale:s,mediaURL:fe(c,y,O),number:O,timestampOffset:-e.indexTimeOffset/s};p.push(E)}return p}for(var w=ne(b,u[m+1],f),T=(r=g,void 0,0<(i=a-y)?Math.floor(i/r):0),j=y+T*g;j<o&&T<=w;){var S=null!=d?d+T:void 0,x={id:""+j,time:j-e.indexTimeOffset,isInit:!1,range:_,duration:g,timescale:s,mediaURL:fe(c,j,S),number:S,timestampOffset:-e.indexTimeOffset/s};p.push(x),j=y+ ++T*g}if(o<=j)return p;null!=d&&(d+=w+1)}return p}function ce(o){return function(e,t,n){var r,i,a=n?parseInt(n,10):1;return r=a,(i=(""+o).toString()).length>=r?i:(new Array(r+1).join("0")+i).slice(-r)}}function le(e,t,n,r){return i=Object(x.a)(e,t),a=n,o=r,-1===i.indexOf("$")?i:i.replace(/\$\$/g,"$").replace(/\$RepresentationID\$/g,String(a)).replace(/\$Bandwidth(|\%0(\d+)d)\$/g,ce(o||0));var i,a,o}function fe(e,r,i){return-1===e.indexOf("$")?e:e.replace(/\$\$/g,"$").replace(/\$Number(|\%0(\d+)d)\$/g,function(e,t,n){if(null==i)throw new Error("Segment number not defined in a $Number$ scheme");return ce(i)(e,t,n)}).replace(/\$Time(|\%0(\d+)d)\$/g,function(e,t,n){if(null==r)throw new Error("Segment time not defined in a $Time$ scheme");return ce(r)(e,t,n)})}function de(e,t){if(t.timescale!==e.timescale){var n=e.timescale;e.timeline.push({start:t.time/t.timescale*n,duration:t.duration/t.timescale*n,repeatCount:t.count||0,range:t.range})}else e.timeline.push({start:t.time,duration:t.duration,repeatCount:t.count||0,range:t.range});return!0}var pe=function(){function e(e,t){var n=t.periodStart,r=t.periodEnd,i=t.representationBaseURL,a=t.representationId,o=t.representationBitrate,u=e.timescale,s=(null!=e.presentationTimeOffset?e.presentationTimeOffset:0)-n*u;this._index={duration:e.duration,indexRange:e.indexRange,indexTimeOffset:s,initialization:e.initialization&&{mediaURL:le(i,e.initialization.media,a,o),range:e.initialization.range},mediaURL:le(i,e.media,a,o),startNumber:e.startNumber,timeline:e.timeline,timelineEnd:null==r?void 0:r*u,timescale:u}}var t=e.prototype;return t.getInitSegment=function(){return ue(this._index)},t.getSegments=function(e,t){return se(this._index,e,t)},t.shouldRefresh=function(){return!1},t.getFirstPosition=function(){var e=this._index;if(0!==e.timeline.length)return ie(e,e.timeline[0].start)},t.getLastPosition=function(){var e=this._index,t=e.timeline,n=e.timelineEnd;if(0!==t.length){var r=oe(t[t.length-1],null,n);return ie(this._index,r)}},t.checkDiscontinuity=function(){return-1},t._addSegments=function(e){for(var t=0;t<e.length;t++)de(this._index,e[t])},t._update=function(e){this._index=e._index},e}(),he=function(){function e(e,t){var n=t.periodStart,r=t.representationBaseURL,i=t.representationId,a=t.representationBitrate;this._periodStart=n;var o=(null!=e.presentationTimeOffset?e.presentationTimeOffset:0)-n*e.timescale;this._index={list:e.list.map(function(e){return{mediaURL:le(r,e.media,i,a),mediaRange:e.mediaRange}}),timescale:e.timescale,duration:e.duration,indexTimeOffset:o,indexRange:e.indexRange,initialization:e.initialization&&{mediaURL:le(r,e.initialization.media,i,a),range:e.initialization.range}}}var t=e.prototype;return t.getInitSegment=function(){return ue(this._index)},t.getSegments=function(e,t){for(var n=this._index,r=ae(n,e+this._periodStart,t),i=r.up,a=r.to,o=n.duration,u=n.list,s=n.timescale,c=Math.min(u.length-1,Math.floor(a/o)),l=[],f=Math.floor(i/o);f<=c;){var d={id:""+f,time:f*o,isInit:!1,range:u[f].mediaRange,duration:o,timescale:s,mediaURL:u[f].mediaURL,timestampOffset:-n.indexTimeOffset/s};l.push(d),f++}return l},t.shouldRefresh=function(e,t){var n=this._index,r=n.timescale,i=n.duration,a=n.list,o=t*r,u=Math.floor(o/i);return!(0<=u&&u<a.length)},t.getFirstPosition=function(){return this._periodStart},t.getLastPosition=function(){var e=this._index,t=e.duration;return e.list.length*t/e.timescale+this._periodStart},t.checkDiscontinuity=function(){return-1},t._update=function(e){this._index=e._index},t._addSegments=function(){0},e}(),ve=function(){function e(e,t){var n=t.periodStart,r=t.representationBaseURL,i=t.representationId,a=t.representationBitrate;this._periodStart=n;var o=null!=e.presentationTimeOffset?e.presentationTimeOffset:0,u=o-n*e.timescale;this._index={duration:e.duration,timescale:e.timescale,indexRange:e.indexRange,indexTimeOffset:u,initialization:e.initialization&&{mediaURL:le(r,e.initialization.media,i,a),range:e.initialization.range},mediaURL:le(r,e.media,i,a),presentationTimeOffset:o,startNumber:e.startNumber}}var t=e.prototype;return t.getInitSegment=function(){return ue(this._index)},t.getSegments=function(e,t){var n=this._index,r=ae(n,e,t),i=r.up,a=r.to;if(a<=i)return[];for(var o=n.duration,u=n.startNumber,s=n.timescale,c=n.mediaURL,l=[],f=i;f<=a;f+=o){var d=f-this._periodStart*s,p=Math.floor(d/o),h=p+(null==u?1:u),v=p*o+(this._index.presentationTimeOffset||0),m={id:""+h,number:h,time:p*o+this._periodStart*this._index.timescale,isInit:!1,duration:o,timescale:s,mediaURL:fe(c,v,h),timestampOffset:-n.indexTimeOffset/s};l.push(m)}return l},t.getFirstPosition=function(){},t.getLastPosition=function(){},t.shouldRefresh=function(){return!1},t.checkDiscontinuity=function(){return-1},t._addSegments=function(){0},t._update=function(e){this._index=e._index},e}();function me(e,t,n,r){var i,a=e.timeline,o=e.timescale,u=a.length,s=a[u-1],c=t.timescale===o?{time:t.time,duration:t.duration}:{time:t.time/t.timescale*o,duration:t.duration/t.timescale*o};if(n&&n.timescale&&(i=(n.timescale===o?n.time:n.time/n.timescale*o)+e.indexTimeOffset),null==i||c.time!==i)return c.time>=oe(s,null,r)&&(s.duration===c.duration?s.repeatCount++:e.timeline.push({duration:c.duration,start:c.time,repeatCount:0}),!0);var l=c.time+c.duration,f=l-(s.start+s.duration*s.repeatCount);if(f<=0)return!1;if(-1===s.duration){var d=a[u-2];d&&d.duration===f?(d.repeatCount++,a.pop()):s.duration=f}return e.timeline.push({duration:-1,start:l,repeatCount:0}),!0}var be=function(){function e(e,t){for(var n,r,i,a,o,u,s,c=t.isDynamic,l=t.representationBaseURL,f=t.representationId,d=t.representationBitrate,p=t.periodStart,h=t.periodEnd,v=e.timescale,m=p*v,b=(null!=e.presentationTimeOffset?e.presentationTimeOffset:0)-m,g=e.timeline,y=[],_=0;_<g.length;_++){var O=g[_],E=y[y.length-1]||null,w=g[_+1]||null,T=(r=E,i=w,a=m,u=o=void 0,o=(n=O).start,u=n.duration,s=n.repeatCount,null==o&&(null==r?o=a:null!=r.duration&&(o=r.start+r.duration*(r.repeatCount+1))),null!=u&&!isNaN(u)||!i||null==i.start||isNaN(i.start)||null==o||isNaN(o)||(u=i.start-o),null==o||isNaN(o)||null==u||isNaN(u)||null!=s&&isNaN(s)?(S.a.warn('DASH: A "S" Element could not have been parsed.'),null):{start:o,duration:u,repeatCount:s||0});T&&y.push(T)}this._index={duration:e.duration,indexRange:e.indexRange,indexTimeOffset:b,initialization:e.initialization&&{mediaURL:le(l,e.initialization.media,f,d),range:e.initialization.range},isDynamic:c,mediaURL:le(l,e.media,f,d),startNumber:e.startNumber,timeline:y,timelineEnd:null==h?void 0:h*v,timescale:v}}var t=e.prototype;return t.getInitSegment=function(){return ue(this._index)},t.getSegments=function(e,t){return se(this._index,e,t)},t.shouldRefresh=function(e,t){if(!this._index.isDynamic||0===this._index.timeline.length)return!1;var n=this._index.timeline,r=re(this._index,t),i=n[n.length-1];return!(null==i||i.repeatCount<0)&&(i.duration<0&&(i={start:i.start,duration:0,repeatCount:i.repeatCount}),r>oe(i,null,this._index.timelineEnd))},t.getFirstPosition=function(){var e=this._index;if(0!==e.timeline.length)return ie(e,e.timeline[0].start)},t.getLastPosition=function(){var e=this._index,t=e.timeline,n=e.timelineEnd;if(0!==t.length){var r=oe(t[t.length-1],null,n);return ie(this._index,r)}},t.checkDiscontinuity=function(e){var t=this._index,n=t.timeline,r=t.timescale,i=t.timelineEnd,a=re(this._index,e);if(a<=0)return-1;var o=function(e,t){for(var n=e.timeline,r=0,i=n.length;r<i;){var a=r+i>>>1;n[a].start<t?r=a+1:i=a}return 0<r?r-1:r}(this._index,a);if(o<0||o>=n.length-1)return-1;var u=n[o];if(-1===u.duration)return-1;var s=n[o+1];if(null==s)return-1;var c=u.start,l=oe(u,s,i);return l!==s.start&&c<=a&&a<=l&&l-a<r?ie(this._index,s.start):-1},t._update=function(e){this._index=e._index},t._addSegments=function(e,t){for(var n=0;n<e.length;n++)me(this._index,e[n],t)},e}();function ge(e,p,h){return e.map(function(e){var t,n=e.children.baseURL,r=Object(x.a)(h.baseURL,n),i={periodStart:h.start,periodEnd:h.end,isDynamic:h.isDynamic,representationBaseURL:r,representationId:e.attributes.id,representationBitrate:e.attributes.bitrate};if(null!=e.children.segmentBase){var a=e.children.segmentBase;t=new pe(a,i)}else if(null!=e.children.segmentList){var o=e.children.segmentList;t=new he(o,i)}else if(null!=e.children.segmentTemplate){var u=e.children.segmentTemplate;t="timeline"===u.indexType?new be(u,i):new ve(u,i)}else t=function(e,t){var n,r=e.children;if(null!=r.segmentBase){var i=r.segmentBase;n=new pe(i,t)}else if(null!=r.segmentList){var a=r.segmentList;n=new he(a,t)}else if(null!=r.segmentTemplate){var o=r.segmentTemplate;n="timeline"===o.indexType?new be(o,t):new ve(o,t)}else n=new ve({duration:Number.MAX_VALUE,timescale:1,startNumber:0,initialization:{media:""},media:""},t);return n}(p,i);var s,c={bitrate:null==e.attributes.bitrate?(S.a.warn("DASH: No usable bitrate found in the Representation."),0):e.attributes.bitrate,index:t,id:null!=e.attributes.id?e.attributes.id:e.attributes.bitrate+(null!=e.attributes.height?"-"+e.attributes.height:"")+(null!=e.attributes.width?"-"+e.attributes.width:"")+(null!=e.attributes.mimeType?"-"+e.attributes.mimeType:"")+(null!=e.attributes.codecs?"-"+e.attributes.codecs:"")};if(null!=e.attributes.codecs?s=e.attributes.codecs:null!=p.attributes.codecs&&(s=p.attributes.codecs),null!=s&&(s="mp4a.40.02"===s?"mp4a.40.2":s,c.codecs=s),null!=e.attributes.frameRate?c.frameRate=e.attributes.frameRate:null!=p.attributes.frameRate&&(c.frameRate=p.attributes.frameRate),null!=e.attributes.height?c.height=e.attributes.height:null!=p.attributes.height&&(c.height=p.attributes.height),null!=e.attributes.mimeType?c.mimeType=e.attributes.mimeType:null!=p.attributes.mimeType&&(c.mimeType=p.attributes.mimeType),null!=e.attributes.width?c.width=e.attributes.width:null!=p.attributes.width&&(c.width=p.attributes.width),p.children.contentProtections){for(var l=[],f=0;f<p.children.contentProtections.length;f++){var d=p.children.contentProtections[f];null!=d.keyId&&l.push({keyId:d.keyId})}l.length&&(c.contentProtections=l)}return c})}function ye(e,j){return e.reduce(function(a,e){var o,t,n,r=e.children,i=a.adaptations,u=ge(e.children.representations,e,{isDynamic:j.isDynamic,start:j.start,end:j.end,baseURL:Object(x.a)(j.baseURL,r.baseURL)}),s=e.attributes.mimeType,c=e.attributes.codecs,l=function(e,t,n,r,i){function a(e,t){var n=e.split("/")[0];return Object(J.a)(ee,n)?n:"application/bif"===e?"image":"application/ttml+xml"===e?"text":"application/mp4"===e?null!=t&&null!=Object(Z.a)(t,function(e){return"urn:mpeg:dash:role:2011"===e.schemeIdUri&&Object(J.a)(te,e.value)})?"text":"metadata":void 0}function o(e){switch(e.substring(0,3)){case"avc":case"hev":case"hvc":case"vp8":case"vp9":case"av1":return"video";case"vtt":return"text";case"bif":return"image"}switch(e.substring(0,4)){case"mp4a":return"audio";case"wvtt":case"stpp":return"text"}}if(null!=e){var u=a(e,i);if(null!=u)return u}if(null!=n){var s=o(n);if(null!=s)return s}for(var c=0;c<t.length;c++){var l=t[c];if(null!=l){var f=a(l,i);if(null!=f)return f}}for(var d=0;d<r.length;d++){var p=r[d];if(null!=p){var h=o(p);if(null!=h)return h}}return"unknown"}(s||null,u.map(function(e){return e.mimeType}).filter(function(e){return null!=e}),c||null,u.map(function(e){return e.codecs}).filter(function(e){return null!=e}),r.roles||null),f=e.attributes.id,d=function(e){if(null!=e.children.supplementalProperties)for(var t=e.children.supplementalProperties,n=0;n<t.length;n++){var r=t[n];if("urn:mpeg:dash:adaptation-set-switching:2016"===r.schemeIdUri&&null!=r.value)return r.value.split(",").map(function(e){return e.trim()}).filter(function(e){return e})}return[]}(e),p=r.roles,h=!!p&&!!Object(Z.a)(p,function(e){return"main"===e.value})&&!!Object(Z.a)(p,function(e){return"urn:mpeg:dash:role:2011"===e.schemeIdUri}),v=a.videoMainAdaptation;if("video"===l&&null!==v&&h){var m;(m=v.representations).push.apply(m,u),o=v.id}else{var b=!("text"!==l||!r.accessibility||(!(n=r.accessibility)||"urn:tva:metadata:cs:AudioPurposeCS:2007"!==n.schemeIdUri||"2"!==n.value))||void 0,g=!("audio"!==l||!r.accessibility||(!(t=r.accessibility)||"urn:tva:metadata:cs:AudioPurposeCS:2007"!==t.schemeIdUri||"1"!==t.value))||void 0,y={id:o=function(e,t,n){if(e.attributes.id)return e.attributes.id;var r=n.type;return e.attributes.language&&(r+="-"+e.attributes.language),n.isClosedCaption&&(r+="-cc"),n.isAudioDescription&&(r+="-ad"),e.attributes.contentType&&(r+="-"+e.attributes.contentType),e.attributes.codecs&&(r+="-"+e.attributes.codecs),e.attributes.mimeType&&(r+="-"+e.attributes.mimeType),e.attributes.frameRate&&(r+="-"+e.attributes.frameRate),r.length===n.type.length&&(r+=t.length?"-"+t[0].id:"-empty"),"adaptation-"+r}(e,u,{isClosedCaption:b,isAudioDescription:g,type:l}),representations:u,type:l};null!=e.attributes.language&&(y.language=e.attributes.language),null!=b&&(y.closedCaption=b),null!=g&&(y.audioDescription=g);var _=i[l];if(_){for(var O=null,E=function(e){var t=d[e],n=a.adaptationSwitchingInfos[t];if(null!=n&&n.newID!==o&&Object(J.a)(n.adaptationSetSwitchingIDs,f)){var r,i=Object(Z.a)(_,function(e){return e.id===t});if(null!=i&&i.audioDescription===y.audioDescription&&i.closedCaption===y.closedCaption&&i.language===y.language)S.a.info('DASH Parser: merging "switchable" AdaptationSets',f,t),(r=i.representations).push.apply(r,y.representations),O=i}},w=0;w<d.length;w++)E(w);if(h&&"video"===l)if(null==O)_.unshift(y),a.videoMainAdaptation=y;else{var T=_.indexOf(O);T<0?_.unshift(y):0!==T&&(_.splice(T,1),_.unshift(O)),a.videoMainAdaptation=O}else null===O&&_.push(y)}else i[l]=[y],h&&"video"===l&&(a.videoMainAdaptation=y)}return null!=f&&null==a.adaptationSwitchingInfos[f]&&(a.adaptationSwitchingInfos[f]={newID:o,adaptationSetSwitchingIDs:d}),{adaptations:i,adaptationSwitchingInfos:a.adaptationSwitchingInfos,videoMainAdaptation:a.videoMainAdaptation}},{adaptations:{},videoMainAdaptation:null,adaptationSwitchingInfos:{}}).adaptations}var _e=Object(r.a)();function Oe(e,t){for(var n=[],r=0;r<e.length;r++){var i=e[r],a=Object(x.a)(t.baseURL,i.children.baseURL),o=void 0;o=null==i.attributes.id?(S.a.warn("DASH: No usable id found in the Period. Generating one."),"gen-dash-period-"+_e()):i.attributes.id;var u=void 0;if(null!=i.attributes.start)u=i.attributes.start;else if(0===r)u=t.isDynamic&&null!=t.availabilityStartTime?t.availabilityStartTime:0;else{var s=n[r-1];if(!s||null==s.duration||null==s.start)throw new Error("Missing start time when parsing periods.");u=s.start+s.duration}0<r&&void 0===n[r-1].duration&&(n[r-1].duration=u-n[r-1].start);var c=void 0;null!=i.attributes.duration?c=i.attributes.duration:0===r&&t.duration&&(c=t.duration);var l=null!=c?u+c:void 0,f={id:o,start:u,end:l,duration:c,adaptations:ye(i.children.adaptations,{isDynamic:t.isDynamic,start:u,end:l,baseURL:a})};n.push(f)}return function(e){if(0===e.length)return[];for(var t=[e[0]],n=1;n<e.length;n++){for(var r=e[n],i=t[t.length-1];null==i.duration||i.start+i.duration>r.start;)S.a.warn("DASH: Updating overlapping Periods.",i,r),i.duration=r.start-i.start,i.end=r.start,i.duration<=0&&(t.pop(),i=t[t.length-1]);t.push(r)}return t}(n)}var Ee=Object(r.a)();function we(e,t){return function l(f,d){var p=[];for(var e=0;e<f.children.periods.length;e++){var t=f.children.periods[e].attributes,n=t.xlinkHref,r=t.xlinkActuate;null!=n&&"onLoad"===r&&p.push({index:e,ressource:n})}if(0===p.length){var i=Te(f,d);return{type:"done",value:i}}return{type:"needs-ressources",value:{ressources:p.map(function(e){var t=e.ressource;return t}),continue:function(e){if(e.length!==p.length)throw new Error("DASH parser: wrong number of loaded ressources.");for(var t=e.length-1;0<=t;t--){var n,r=p[t].index,i=e[t],a="<root>"+i+"</root>",o=(new DOMParser).parseFromString(a,"text/xml");if(!o||0===o.children.length)throw new Error("DASH parser: Invalid external ressources");for(var u=o.children[0].children,s=[],c=0;c<u.length;c++)u[c].nodeType===Node.ELEMENT_NODE&&s.push(X(u[c]));(n=f.children.periods).splice.apply(n,[r,1].concat(s))}return l(f,d)}}}}(Q(e),t)}function Te(e,t){var n=e.children,r=e.attributes,i=Object(x.a)(Object(x.b)(t),n.baseURL),a="dynamic"===r.type,o="static"===r.type||null==r.availabilityStartTime?0:r.availabilityStartTime,u=Oe(n.periods,{availabilityStartTime:o,duration:r.duration,isDynamic:a,baseURL:i}),s={availabilityStartTime:o,baseURL:i,duration:function(){if(null!=r.duration)return r.duration;if(!a&&u.length){var e=u[u.length-1];if(null!=e.end)return e.end;if(null!=e.duration)return e.start+e.duration}}(),id:null!=r.id?r.id:"gen-dash-manifest-"+Ee(),periods:u,transportType:"dash",isLive:a,uris:[t].concat(n.locations),suggestedPresentationDelay:null!=r.suggestedPresentationDelay?r.suggestedPresentationDelay:b.a.DEFAULT_SUGGESTED_PRESENTATION_DELAY.DASH};return"static"!==r.type&&null!=r.availabilityEndTime&&(s.availabilityEndTime=r.availabilityEndTime),null!=r.timeShiftBufferDepth&&(s.timeShiftBufferDepth=r.timeShiftBufferDepth),Object(w.a)(s),s.isLive&&(s.presentationLiveGap=A(s)),s}var je=function(e,t){var n=e.documentElement;if(!n||"MPD"!==n.nodeName)throw new Error("DASH Parser: document root should be MPD");return we(n,t)},Se=n(22),xe=n(90);var Ae=function(e,t,n,r){var i,a,o,u,s,c=n||[],l=Object(j.d)(t),f=Object(j.a)(t),d=r&&r.timescale?r.timescale:e.timescale;if(u=d===e.timescale?(o=Math.min(.9*d,null!=e.duration?e.duration/4:.25),s=e.time,e.duration):(o=Math.min(.9*d,null!=e.duration?e.duration/e.timescale*d/4:.25),s=(e.time||0)/e.timescale*d,null!=e.duration?e.duration/e.timescale*d:void 0),0<=l&&(i=null!=e.timestampOffset?l+e.timestampOffset*d:l),0<=f&&(null==u||Math.abs(f-u)<=o)&&(a=f),null==i)if(0===c.length)i=s;else{var p=c[0].time;if(0<=p){var h=c[0].timescale,v=null!=h&&h!==d?p/h*d:p;i=null!=e.timestampOffset?v+e.timestampOffset*d:v}else i=s}if(null==a)if(c.length){var m=c.reduce(function(e,t){return e+(t.duration||0)},0);a=0<=m?m:u}else a=u;return{timescale:d,time:i||0,duration:a||0}},Re=n(91),ke=n(109),Ie=n(57);function Me(e){return"application/mp4"===e.mimeType}function Ne(e){var t=e.segment,n=e.representation,r=t.mediaURL,i=t.range,a=t.indexRange,o=Me(n)?"arraybuffer":"text";return null==r?Object(T.a)({type:"data",value:{responseData:null}}):null!=i&&null!=a?Object(Se.a)({url:r,responseType:o,headers:{Range:Object(Ie.a)([Math.min(i[0],a[0]),Math.max(i[1],a[1])])}}):Object(Se.a)({url:r,responseType:o,headers:i?{Range:Object(Ie.a)(i)}:null})}function De(e){var t,n,r,i,a=e.response,o=e.segment,u=e.adaptation,s=e.representation,c=e.init,l=u.language,f=o.isInit,d=o.indexRange;if(null==a.responseData)return Object(T.a)({segmentData:null,segmentInfos:0<o.timescale?{duration:o.isInit?0:o.duration,time:o.isInit?-1:o.time,timescale:o.timescale}:null,segmentOffset:o.timestampOffset||0});var p=Me(s);if(p){Object(R.b)(a.responseData instanceof ArrayBuffer),t=new Uint8Array(a.responseData);var h=Object(j.c)(t,d?d[0]:0);h&&(n=h),r=f?{time:-1,duration:0,timescale:o.timescale}:Ae(o,t,h,c)}else Object(R.b)("string"==typeof a.responseData),t=a.responseData,r=f?{time:-1,duration:0,timescale:o.timescale}:{time:o.time,duration:o.duration,timescale:o.timescale};if(f){if(p){var v=Object(j.b)(t);0<v&&(r={time:-1,duration:0,timescale:v})}i=null}else{Object(R.b)(null!=r);var m={start:r.time,end:r.time+(r.duration||0),language:l,timescale:r.timescale};if(p){var b,g=s.codec,y=void 0===g?"":g;switch(y.toLowerCase()){case"stpp":case"stpp.ttml.im1t":b="ttml";break;case"wvtt":b="vtt"}if(!b)throw new Error('The codec used for the subtitles, "'+y+'", is not managed yet.');i=F()({data:Object(Re.a)(Object(ke.a)(t)),type:b},{timescale:1},m)}else{var _,O=s.mimeType,E=void 0===O?"":O;switch(s.mimeType){case"application/ttml+xml":_="ttml";break;case"application/x-sami":case"application/smil":_="sami";break;case"text/vtt":_="vtt"}if(!_){var w=s.codec;if("srt"!==(void 0===w?"":w).toLowerCase())throw new Error("could not find a text-track parser for the type "+E);_="srt"}i=F()({data:t,type:_},{timescale:1},m)}}return n&&s.index._addSegments(n,r),Object(T.a)({segmentData:i,segmentInfos:r,segmentOffset:o.timestampOffset||0})}var Ce=n(5);function Pe(e){var t=e.url,n=e.segment,r=n.range,i=n.indexRange;return null!=r&&null!=i?Object(Se.a)({url:t,responseType:"arraybuffer",headers:{Range:Object(Ie.a)([Math.min(r[0],i[0]),Math.max(r[1],i[1])])}}):Object(Se.a)({url:t,responseType:"arraybuffer",headers:r?{Range:Object(Ie.a)(r)}:null})}var Be=function(s){return function(e){var t=e.adaptation,n=e.manifest,r=e.period,i=e.representation,a=e.segment,o=a.mediaURL;if(null==o)return Object(T.a)({type:"data",value:{responseData:null}});var u={adaptation:t,manifest:n,period:r,representation:i,segment:a,transport:"dash",url:o};return s?Ce.a.create(function(t){var n=!1,r=!1,e=s(u,{reject:function(e){void 0===e&&(e={}),r||(n=!0,t.error(e))},resolve:function(e){r||(n=!0,t.next({type:"response",value:{responseData:e.data,size:e.size,duration:e.duration}}),t.complete())},fallback:function(){r=!0,Pe(u).subscribe(t)}});return function(){n||r||"function"!=typeof e||e()}}):Pe(u)}};t.default=function(c){void 0===c&&(c={});var n=Object(xe.a)({customManifestLoader:c.manifestLoader}),o=Be(c.segmentLoader),e={loader:function(e){var t=e.adaptation,n=e.manifest,r=e.period,i=e.representation,a=e.segment;return o({adaptation:t,manifest:n,period:r,representation:i,segment:a})},parser:function(e){var t=e.segment,n=e.representation,r=e.response,i=e.init,a=r.responseData;if(null==a)return Object(T.a)({segmentData:null,segmentInfos:null,segmentOffset:0});var o=a instanceof Uint8Array?a:new Uint8Array(a),u=t.indexRange,s="video/webm"===n.mimeType||"audio/webm"===n.mimeType,c=s?function(e,t){var n=y(g,[],e,[t,e.length]);if(null==n)return null;var r=n[0],i=n[1],a=_(e,r);if(null==a)return null;var o=O(e,r);if(null==o)return null;var u=y(475249515,[],e,[r,i]);if(null==u)return null;for(var s=[],c=u[0];c<u[1];){var l=y(187,[],e,[c,u[1]]);if(null==l)break;var f=y(179,[],e,[l[0],l[1]]);if(null==f)return null;var d=E(e,f[0],f[1]-f[0]),p=y(241,[183],e,[l[0],l[1]]);if(null==p)return null;var h=E(e,p[0],p[1]-p[0])+r;s.push({time:d,rangeStart:h}),c=l[1]}for(var v=[],m=0;m<s.length;m++){var b=s[m];m===s.length-1?v.push({time:b.time,count:0,timescale:a,duration:0===m?o:o-b.time,range:[b.rangeStart,1/0]}):v.push({time:b.time,count:0,timescale:a,duration:s[m+1].time-b.time,range:[b.rangeStart,s[m+1].rangeStart-1]})}return v}(o,0):Object(j.c)(o,u?u[0]:0);if(!t.isInit){var l=s?{time:t.time,duration:t.duration,timescale:t.timescale}:Ae(t,o,c,i),f=t.timestampOffset||0;return Object(T.a)({segmentData:o,segmentInfos:l,segmentOffset:f})}c&&n.index._addSegments(c);var d=s?_(o,0):Object(j.b)(o);return Object(T.a)({segmentData:o,segmentInfos:d&&0<d?{time:-1,duration:0,timescale:d}:null,segmentOffset:t.timestampOffset||0})}};return{manifest:{loader:function(e){var t=e.url;return n(t)},parser:function(e){var t=e.response,n=e.url,u=e.scheduleRequest,s=null==t.url?n:t.url,r="string"==typeof t.responseData?(new DOMParser).parseFromString(t.responseData,"text/xml"):t.responseData;return function t(e){if("done"===e.type){var n=new h.a(e.value,c);return Object(T.a)({manifest:n,url:s})}var r=e.value,i=r.ressources,a=r.continue,o=i.map(function(t){return u(function(){return e=t,Object(Se.a)({url:e,responseType:"text",ignoreProgressEvents:!0}).pipe(Object(f.a)(function(e){return"response"===e.type}),Object(d.a)(function(e){return e.value.responseData}));var e})});return Object(l.a)(o).pipe(Object(p.a)(function(e){return t(a(e))}))}(je(r,s))}},audio:e,video:e,text:{loader:Ne,parser:De},image:{loader:function(e){var t=e.segment;if(t.isInit||null==t.mediaURL)return Object(T.a)({type:"data",value:{responseData:null}});var n=t.mediaURL;return Object(Se.a)({url:n,responseType:"arraybuffer"})},parser:function(e){var t=e.response,n=e.segment,r=t.responseData;if(null===r||null==u.a.imageParser)return Object(T.a)({segmentData:null,segmentInfos:0<n.timescale?{duration:n.isInit?0:n.duration,time:n.isInit?-1:n.time,timescale:n.timescale}:null,segmentOffset:n.timestampOffset||0});var i=u.a.imageParser(new Uint8Array(r)),a=i.thumbs;return Object(T.a)({segmentData:{data:a,start:0,end:Number.MAX_VALUE,timescale:1,type:"bif"},segmentInfos:{time:0,duration:Number.MAX_VALUE,timescale:i.timescale},segmentOffset:n.timestampOffset||0})}}}}},function(e,t,n){"use strict";n.r(t);var j=n(39),i=n(32),u=n(10),v=n(0),l=n(100),r=n(7),E=n.n(r),a=n(2),w=n(13),o=n(48),B=n(30),L=n(89);var T=n(1);function s(e){return[{systemId:"edef8ba9-79d6-4ace-a3c8-27dcd51d21ed",privateData:Object(T.h)([8,1,18,16],e)}]}function U(e,t){if(void 0===t&&(t=s),!e.firstElementChild||"ProtectionHeader"!==e.firstElementChild.nodeName)throw new Error("Protection should have ProtectionHeader child");var n=e.firstElementChild,r=Object(T.p)(atob(n.textContent||"")),i=function(e){var t=Object(T.n)(e,8),n=Object(T.g)(e.subarray(10,t+10)),r=(new DOMParser).parseFromString(n,"application/xml").querySelector("KID");if(!r)throw new Error("Cannot parse PlayReady private data: invalid XML");var i=r.textContent||"";return Object(T.i)(atob(i)).toLowerCase()}(r),a=Object(T.j)(i);return{keyId:i,keySystems:[{systemId:(n.getAttribute("SystemID")||"").toLowerCase().replace(/\{|\}/g,""),privateData:r}].concat(t(a))}}function S(e,t){return e.replace(/\{start time\}/g,String(t))}function c(e,t,n){var r,i=e.timeline,a=e.timescale,o=i.length,u=i[o-1],s=t.timescale===a?{time:t.time,duration:t.duration}:{time:t.time/t.timescale*a,duration:t.duration/t.timescale*a};if(n&&n.timescale&&(r=n.timescale===a?n.time:n.time/n.timescale*a),null==r||s.time!==r)return s.time>=m(u)&&(u.duration===s.duration?u.repeatCount++:e.timeline.push({duration:s.duration,start:s.time,repeatCount:0}),!0);var c=s.time+s.duration,l=c-(u.start+(u.duration||0)*u.repeatCount);if(l<=0)return!1;if(-1===u.duration){var f=i[o-2];f&&f.duration===l?(f.repeatCount++,i.pop()):u.duration=l}return e.timeline.push({duration:-1,start:c,repeatCount:0}),!0}function x(e,t,n){if(!n)return 0;var r=t-e;return 0<r?Math.floor(r/n):0}function m(e){var t=e.start,n=e.duration,r=e.repeatCount;return null==n||-1===n?t:t+(r+1)*n}function A(e,t){var n=e.repeatCount||0;if(null!=e.duration&&n<0){var r=t?t.start:1/0;n=Math.ceil((r-e.start)/e.duration)-1}return n}var R=function(){function e(e,t){if(this._index=e,this._indexValidityTime=e.manifestReceivedTime||performance.now(),this._bitsPerSample=t.bitsPerSample,this._channels=t.channels,this._codecPrivateData=t.codecPrivateData,this._packetSize=t.packetSize,this._samplingRate=t.samplingRate,this._protection=t.protection,e.timeline.length){var n=e.timeline[e.timeline.length-1],r=n.start,i=n.duration;this._initialLastPosition=(r+i)/e.timescale}}var t=e.prototype;return t.getInitSegment=function(){return{id:"init",isInit:!0,time:0,timescale:this._index.timescale,privateInfos:{smoothInit:{bitsPerSample:this._bitsPerSample,channels:this._channels,codecPrivateData:this._codecPrivateData,packetSize:this._packetSize,samplingRate:this._samplingRate,protection:this._protection}},mediaURL:null}},t.getSegments=function(e,t){for(var n,r,i,a,o=this._index,u=(n=e,r=t,i=o.timescale||1,{up:n*i,to:(n+r)*i}),s=u.up,c=u.to,l=o.timeline,f=o.timescale,d=o.media,p=[],h=l.length,v=l.length&&l[0].duration||0,m=0;m<h;m++){var b=l[m],g=b.duration,y=b.start;if(v=Math.max(v,g||0),null!=g&&g<0){if(y+v<c){var _={id:""+y,time:y,isInit:!1,timescale:f,number:null!=a?a:void 0,mediaURL:S(d,y)};p.push(_)}return p}for(var O=A(b,l[m+1]),E=x(y,s,g),w=y+E*(null==g?0:g);w<c&&E<=O;){var T={id:""+w,time:w,isInit:!1,duration:g,timescale:f,number:null!=a?a+E:void 0,mediaURL:S(d,w)};p.push(T),w=y+ ++E*g}if(c<=w)return p;null!=a&&(a+=O+1)}return p},t.shouldRefresh=function(e,t){if(!this._index.isLive)return!1;var n=this._index,r=n.timeline,i=n.timescale,a=r[r.length-1];if(!a)return!1;var o=a.repeatCount||0,u=a.start+(o+1)*a.duration;return!(t*i<u)&&(u<=e*i||a.start+o*a.duration<e*i)},t.getFirstPosition=function(){var e=this._index;if(e.timeline.length)return e.timeline[0].start/e.timescale},t.getLastPosition=function(){var e=this._index;if(e.timeline.length)return m(e.timeline[e.timeline.length-1])/e.timescale},t.checkDiscontinuity=function(e){var t=this._index,n=t.timeline,r=t.timescale,i=void 0===r?1:r,a=e*i;if(a<=0)return-1;var o=function(e,t){for(var n=e.timeline,r=0,i=n.length;r<i;){var a=r+i>>>1;n[a].start<t?r=a+1:i=a}return 0<r?r-1:r}(t,a);if(o<0||o>=n.length-1)return-1;var u=n[o];if(-1===u.duration)return-1;var s=u.start,c=m(u),l=n[o+1];return c!==l.start&&s<=a&&a<=c&&c-a<i?l.start/i:-1},t._update=function(e){var t=this._index.timeline,n=e._index.timeline,r=this._index.timescale,i=e._index.timescale;if(this._index=e._index,this._initialLastPosition=e._initialLastPosition,this._indexValidityTime=e._indexValidityTime,t.length&&n.length&&r===i){var a=t[t.length-1],o=n[n.length-1],u=m(o);if(!(m(a)<=u))for(var s=0;s<t.length;s++){var c=t[s],l=m(c);if(l===u)return void(this._index.timeline=this._index.timeline.concat(t.slice(s+1)));if(u<l){if(c.duration!==o.duration)return;var f=u-c.start;if(0===f)return v.a.warn("Smooth Parser: a discontinuity detected in the previous manifest has been resolved."),void(this._index.timeline=this._index.timeline.concat(t.slice(s)));if(f<0||f%c.duration!=0)return;var d=f/c.duration-1,p=c.repeatCount-d;if(p<0)return;o.repeatCount+=p;var h=t.slice(s+1);return void(this._index.timeline=this._index.timeline.concat(h))}}}},t._addSegments=function(e,t){for(var n=0;n<e.length;n++)c(this._index,e[n],t);if(null!=this._initialLastPosition){var r=this._index.timeShiftBufferDepth,i=(performance.now()-this._indexValidityTime)/1e3+this._initialLastPosition;if(null!=r)for(var a=(i-r)*this._index.timescale,o=0;o<this._index.timeline.length;o++){var u=this._index.timeline[o];if(u.start+u.duration>=a){this._index.timeline=this._index.timeline.slice(o,this._index.timeline.length);break}}}},e}();function F(e,t,n){for(var r=e.firstElementChild,i=n;r;)i=t(i,r.nodeName,r),r=r.nextElementSibling;return i}var $=Object(o.a)(),k={audio:"audio/mp4",video:"video/mp4",text:"application/ttml+xml"},I={audio:"mp4a.40.2",video:"avc1.4D401E"},M={AACL:"audio/mp4",AVC1:"video/mp4",H264:"video/mp4",TTML:"application/ttml+xml+mp4"};var f=function(N){void 0===N&&(N={});var D=null==N.suggestedPresentationDelay?a.a.DEFAULT_SUGGESTED_PRESENTATION_DELAY.SMOOTH:N.suggestedPresentationDelay,C=N.referenceDateTime||Date.UTC(1970,0,1,0,0,0,0)/1e3,f=N.minRepresentationBitrate||0;function P(e){var t=e.root,n=e.timescale,d=e.rootURL,p=e.protections,h=e.timeShiftBufferDepth,v=e.manifestReceivedTime,m=e.isLive,r=t.hasAttribute("Timescale")?+(t.getAttribute("Timescale")||0):n,b=t.getAttribute("Type");if(null==b)throw new Error("StreamIndex without type.");var g,i=t.getAttribute("Subtype"),a=t.getAttribute("Language"),y=t.getAttribute("Url")||"",o=F(t,function(e,t,n){switch(t){case"QualityLevel":var r=function(n,e){function t(e){var t=n.getAttribute(e);return null==t?void 0:t}switch(e){case"audio":var r=t("AudioTag"),i=t("Bitrate"),a=t("BitsPerSample"),o=t("Channels"),u=t("CodecPrivateData"),s=t("FourCC"),c=t("PacketSize"),l=t("SamplingRate");return{audiotag:void 0!==r?parseInt(r,10):r,bitrate:i&&parseInt(i,10)||0,bitsPerSample:void 0!==a?parseInt(a,10):a,channels:void 0!==o?parseInt(o,10):o,codecPrivateData:u||"",mimeType:void 0!==s?M[s]:s,packetSize:void 0!==c?parseInt(c,10):c,samplingRate:void 0!==l?parseInt(l,10):l};case"video":var f=t("Bitrate"),d=t("CodecPrivateData"),p=t("FourCC"),h=t("MaxWidth"),v=t("MaxHeight");return{bitrate:f&&parseInt(f,10)||0,mimeType:void 0!==p?M[p]:p,codecPrivateData:d||"",codecs:(y=d||"",_=(/00000001\d7([0-9a-fA-F]{6})/.exec(y)||[])[1],O=void 0===_?"":_,O&&"avc1."+O),width:void 0!==h?parseInt(h,10):void 0,height:void 0!==v?parseInt(v,10):void 0};case"text":var m=t("Bitrate"),b=t("CodecPrivateData"),g=t("FourCC");return{bitrate:m&&parseInt(m,10)||0,mimeType:void 0!==g?M[g]:g,codecPrivateData:b||""};default:throw new Error("Unrecognized StreamIndex type: "+e)}var y,_,O}(n,b);if("audio"===b){var i=n.getAttribute("FourCC")||"";r.codecs=(a=i,o=r.codecPrivateData,(u="AACH"===a?5:o?(248&parseInt(o.substring(0,2),16))>>3:2)?"mp4a.40."+u:"")}("video"!==b||r.bitrate>f)&&e.qualityLevels.push(r);break;case"c":e.cNodes.push(n)}var a,o,u;return e},{qualityLevels:[],cNodes:[]}),u=o.qualityLevels,s=o.cNodes,_={timeline:(g=s,g.reduce(function(e,t,n){var r=t.getAttribute("d"),i=t.getAttribute("t"),a=t.getAttribute("r"),o=a?+a-1:0,u=i?+i:void 0,s=r?+r:void 0;if(0===n)u=u||0;else{var c=e[n-1];if(null==u||isNaN(u)){if(null==c.duration||isNaN(c.duration))throw new Error("Smooth: Invalid CNodes. Missing timestamp.");u=c.start+c.duration*(c.repeatCount+1)}}if(null==s||isNaN(s)){var l=g[n+1];if(!l)return e;var f=l.getAttribute("t"),d=f?+f:null;if(null===d)throw new Error("Can't build index timeline from Smooth Manifest.");s=d-u}return e.push({duration:s,start:u,repeatCount:o}),e},[])),timescale:r};Object(w.b)(0!==u.length,"adaptation should have at least one representation");var O=b+(a?"_"+a:""),c=u.map(function(e){var t,n,r,i=Object(B.a)(d,y),a={timeline:_.timeline,timescale:_.timescale,media:(t=i,n=e.bitrate,t.replace(/\{bitrate\}/g,String(n))),isLive:m,timeShiftBufferDepth:h,manifestReceivedTime:v},o=e.mimeType||k[b],u=e.codecs||I[b],s=O+"_"+b+"-"+o+"-"+u+"-"+e.bitrate,c=[];p.length&&(r=p[0],p.forEach(function(e){var t=e.keyId;e.keySystems.forEach(function(e){c.push({keyId:t,systemId:e.systemId})})}));var l={bitsPerSample:e.bitsPerSample,channels:e.channels,codecPrivateData:e.codecPrivateData||"",packetSize:e.packetSize,samplingRate:e.samplingRate,protection:null!=r?{keyId:r.keyId,keySystems:r.keySystems}:void 0},f=E()({},e,{index:new R(a,l),mimeType:o,codecs:u,id:s});return c.length&&(f.contentProtections=c),f});if("ADVT"===i)return null;var l={id:O,type:b,representations:c,language:null==a?void 0:a};return"text"===b&&"DESC"===i&&(l.closedCaption=!0),l}return function(e,t,n){var r=Object(B.b)(t),i=e.documentElement;if(!i||"SmoothStreamingMedia"!==i.nodeName)throw new Error("document root should be SmoothStreamingMedia");if(!/^[2]-[0-2]$/.test(i.getAttribute("MajorVersion")+"-"+i.getAttribute("MinorVersion")))throw new Error("Version should be 2.0, 2.1 or 2.2");var a,o,u,s,c,l,f,d=+(i.getAttribute("Timescale")||1e7),p=F(i,function(e,t,n){switch(t){case"Protection":e.protections.push(U(n,N.keySystems));break;case"StreamIndex":e.adaptationNodes.push(n)}return e},{adaptationNodes:[],protections:[]}),h=p.protections,v=p.adaptationNodes,m="boolean"==typeof(a=i.getAttribute("IsLive"))?a:"string"==typeof a&&"TRUE"===a.toUpperCase(),b=m?+(i.getAttribute("DVRWindowLength")||0)/d:void 0,g=v.map(function(e){return P({root:e,rootURL:r,timescale:d,protections:h,isLive:m,timeShiftBufferDepth:b,manifestReceivedTime:n})}).filter(function(e){return null!=e}).reduce(function(e,t){var n=t.type;return void 0===e[n]?e[n]=[t]:(e[n]||[]).push(t),e},{}),y=g.video?g.video[0]:void 0,_=g.audio?g.audio[0]:void 0;if(y||_){var O=[],E=[];if(y){var w=y.representations[0];if(w){var T=w.index.getFirstPosition(),j=w.index.getLastPosition();null!=T&&O.push(T),null!=j&&E.push(j)}}if(_){var S=_.representations[0];if(S){var x=S.index.getFirstPosition(),A=S.index.getLastPosition();null!=x&&O.push(x),null!=A&&E.push(A)}}O.length&&(c=Math.max.apply(Math,O)),E.length&&(l=Math.max.apply(Math,E))}if(m){o=D,s=C,u=Date.now()/1e3-(null!=l?l+s:10);var R=i.getAttribute("Duration");f=null!=R&&0!=+R?+R/d:void 0}else{var k=i.getAttribute("Duration");f=null!=k&&0!=+k?null==l?+k/d+(c||0):l:void 0}var I=null!=c?c:void 0,M={id:"gen-smooth-manifest-"+$(),availabilityStartTime:s||0,duration:f,presentationLiveGap:u,suggestedPresentationDelay:o,timeShiftBufferDepth:b,transportType:"smooth",isLive:m,uris:[t],minimumTime:I,periods:[{id:"gen-smooth-period-0",duration:f,adaptations:g,start:0}]};return Object(L.a)(M),M}},d=n(22),N=n(91),p=n(36),h=n(90),b=n(178),D=n(124),g=n(109),C=[96e3,88200,64e3,48e3,44100,32e3,24e3,22050,16e3,12e3,11025,8e3,7350],y={};function P(e,t){var n=t.length+8;return Object(T.h)(Object(T.l)(n),function(e){if(y[e])return y[e];var t=Object(T.p)(e);return y[e]=t}(e),t)}function _(e,t,n,r,i){for(var a,o=e.length,u=0;u<o;){if(a=Object(T.c)(e,u),1970628964===Object(T.c)(e,u+4)&&Object(T.c)(e,u+8)===t&&Object(T.c)(e,u+12)===n&&Object(T.c)(e,u+16)===r&&Object(T.c)(e,u+20)===i)return e.subarray(u+24,u+a);u+=a}}var V={mult:function(e,t){return P(e,T.h.apply(null,t))},avc1encv:function(e,t,n,r,i,a,o,u,s,c){return P(e,Object(T.h)(6,Object(T.k)(t),16,Object(T.k)(n),Object(T.k)(r),Object(T.k)(i),2,Object(T.k)(a),6,[0,1,o.length],Object(T.p)(o),31-o.length,Object(T.k)(u),[255,255],s,"encv"===e&&c||[]))},avcc:function(e,t,n){var r=2===n?1:4===n?3:0,i=e[1],a=e[2],o=e[3];return P("avcC",Object(T.h)([1,i,a,o,252|r,225],Object(T.k)(e.length),e,[1],Object(T.k)(t.length),t))},dref:function(e){return P("dref",Object(T.h)(7,[1],e))},esds:function(e,t){return P("esds",Object(T.h)(4,[3,25],Object(T.k)(e),[0,4,17,64,21],11,[5,2],Object(T.j)(t),[6,1,2]))},frma:function(e){return P("frma",Object(T.p)(e))},free:function(e){return P("free",new Uint8Array(e-8))},ftyp:function(e,t){return P("ftyp",T.h.apply(null,[Object(T.p)(e),[0,0,0,1]].concat(t.map(T.p))))},hdlr:function(e){var t,n;switch(e){case"video":t="vide",n="VideoHandler";break;case"audio":t="soun",n="SoundHandler";break;default:t="hint",n=""}return P("hdlr",Object(T.h)(8,Object(T.p)(t),12,Object(T.p)(n),1))},mdhd:function(e){return P("mdhd",Object(T.h)(12,Object(T.l)(e),8))},moof:function(e,t){return V.mult("moof",[e,t])},mp4aenca:function(e,t,n,r,i,a,o,u){return P(e,Object(T.h)(6,Object(T.k)(t),8,Object(T.k)(n),Object(T.k)(r),2,Object(T.k)(i),Object(T.k)(a),2,o,"enca"===e&&u||[]))},mvhd:function(e,t){return P("mvhd",Object(T.h)(12,Object(T.l)(e),4,[0,1],2,[1,0],10,[0,1],14,[0,1],14,[64,0,0,0],26,Object(T.k)(t+1)))},pssh:function(e,t,n){void 0===t&&(t=new Uint8Array(0)),void 0===n&&(n=new Uint8Array(0));var r,i,a=e.replace(/-/g,"");Object(w.b)(32===a.length,"wrong system id length");var o=n.length;return i=0<o?(r=1,T.h.apply(void 0,[Object(T.l)(o)].concat(n))):(r=0,[]),P("pssh",Object(T.h)([r,0,0,0],Object(T.j)(a),i,Object(T.l)(t.length),t))},saio:function(e,t,n,r){return P("saio",Object(T.h)(4,[0,0,0,1],Object(T.l)(e.length+t.length+n.length+r.length+8+8+8+8)))},saiz:function(e){if(0===e.length)return P("saiz",new Uint8Array(0));var t=Object(T.c)(e,0),n=Object(T.c)(e,4),r=new Uint8Array(n+9);r.set(Object(T.l)(n),5);for(var i,a,o=9,u=8;u<e.length;)u+=8,2==(2&t)?(a=2,u+=6*(i=Object(T.a)(e,u))+2):a=i=0,r[o]=6*i+8+a,o++;return P("saiz",r)},schm:function(e,t){return P("schm",Object(T.h)(4,Object(T.p)(e),Object(T.l)(t)))},senc:function(e){return P("senc",e)},smhd:function(){return P("smhd",new Uint8Array(8))},stsd:function(e){var t=[7,[e.length]];return P("stsd",T.h.apply(void 0,t.concat(e)))},tkhd:function(e,t,n){return P("tkhd",Object(T.h)(Object(T.l)(7),8,Object(T.l)(n),20,[1,0,0,0],[0,1,0,0],12,[0,1,0,0],12,[64,0,0,0],Object(T.k)(e),2,Object(T.k)(t),2))},trex:function(e){return P("trex",Object(T.h)(4,Object(T.l)(e),[0,0,0,1],12))},tfdt:function(e){return P("tfdt",Object(T.h)([1,0,0,0],Object(T.m)(e)))},tenc:function(e,t,n){return P("tenc",Object(T.h)(6,[e,t],Object(T.j)(n)))},traf:function(e,t,n,r,i){var a=[e,t,n];return i&&a.push(V.senc(i),V.saiz(i),V.saio(r,e,t,n)),V.mult("traf",a)},trun:function(e){if(1&e[11])return e;var t=new Uint8Array(e.length+4);return t.set(Object(T.l)(e.length+4),0),t.set(e.subarray(4,16),4),t[11]=1|t[11],t.set([0,0,0,0],16),t.set(e.subarray(16,e.length),20),t},vmhd:function(){var e=new Uint8Array(12);return e[3]=1,P("vmhd",e)}},z=function(e){return _(e,2721664850,1520127764,2722393154,2086964724)},O=function(e){return _(e,1830656773,1121273062,2162299933,2952222642)},H=function(e){return _(e,3565190898,3392751253,2387879627,2655430559)};function K(e,t,n){e.set(Object(T.l)(n),t+16)}function G(e,t,n,r){var i=e.length,a=t.length,o=n.length,u=e.subarray(o,i),s=new Uint8Array(a+(i-o));return s.set(t,0),s.set(u,a),K(s,r,t.length+8),s}function W(e,t,n,r,i,a,o){var u,s=V.mult("stbl",[n,P("stts",new Uint8Array(8)),P("stsc",new Uint8Array(8)),P("stsz",new Uint8Array(12)),P("stco",new Uint8Array(8))]),c=P("url ",new Uint8Array([0,0,0,1])),l=V.dref(c),f=V.mult("dinf",[l]),d=V.mult("minf",[r,f,s]),p=V.hdlr(t),h=V.mdhd(e),v=V.mult("mdia",[h,p,d]),m=V.tkhd(i,a,1),b=V.mult("trak",[m,v]),g=V.trex(1),y=V.mult("mvex",[g]),_=V.mvhd(e,1),O=V.mult("moov",(u=[_,y,b],o.forEach(function(e){var t=V.pssh(e.systemId,e.privateData,e.keyIds);u.push(t)}),u)),E=V.ftyp("isom",["isom","iso2","iso6","avc1","dash"]);return Object(T.h)(E,O)}var q={getMdat:g.a,getTraf:g.c,parseTfrf:function(e){var t=H(e);if(!t)return[];for(var n=[],r=t[0],i=t[4],a=0;a<i;a++){var o=void 0,u=void 0;o=1===r?(u=Object(T.d)(t,16*a+5),Object(T.d)(t,16*a+5+8)):(u=Object(T.c)(t,8*a+5),Object(T.c)(t,8*a+5+4)),n.push({time:u,duration:o})}return n},parseTfxd:function(e){var t=O(e);if(t)return{duration:Object(T.d)(t,12),time:Object(T.d)(t,4)}},createVideoInitSegment:function(e,t,n,r,i,a,o,u,s){var c,l=s||[],f=o.split("00000001"),d=f[1],p=f[2],h=Object(T.j)(d),v=Object(T.j)(p),m=V.avcc(h,v,a);if(l.length&&null!=u){var b=V.tenc(1,8,u),g=V.mult("schi",[b]),y=V.schm("cenc",65536),_=V.frma("avc1"),O=V.mult("sinf",[_,y,g]),E=V.avc1encv("encv",1,t,n,r,i,"AVC Coding",24,m,O);c=V.stsd([E])}else{var w=V.avc1encv("avc1",1,t,n,r,i,"AVC Coding",24,m);c=V.stsd([w])}return W(e,"video",c,V.vmhd(),t,n,l)},createAudioInitSegment:function(e,t,n,r,i,a,o,u){var s,c,l,f,d=u||[],p=a||(s=i,c=t,l=((l=((l=(63&2)<<4)|31&C.indexOf(s))<<4)|31&c)<<3,Object(T.e)(Object(T.k)(l))),h=V.esds(1,p);if(d.length&&null!=o){var v=V.tenc(1,8,o),m=V.mult("schi",[v]),b=V.schm("cenc",65536),g=V.frma("mp4a"),y=V.mult("sinf",[g,b,m]),_=V.mp4aenca("enca",1,t,n,r,i,h,y);f=V.stsd([_])}else{var O=V.mp4aenca("mp4a",1,t,n,r,i,h);f=V.stsd([O])}return W(e,"audio",f,V.smhd(),0,0,d)},patchSegment:function(e,t){var n=e.subarray(0,Object(T.c)(e,0)),r=V.tfdt(t),i=r.length,a=Object(T.c)(n,8),o=Object(T.c)(n,a+8),u=Object(T.c)(n,a+8+8),s=Object(T.c)(n,a+8+8+u),c=n.subarray(8,a+8),l=n.subarray(a+8+8,a+8+8+o-8),f=l.subarray(0,u),d=l.subarray(u,u+s);f.set([0,0,0,1],12);var p,h,v,m,b=z(l),g=V.trun(d),y=V.traf(f,r,g,c,b),_=V.moof(c,y),O=a+8+8+u+i;return Object(D.a)()&&8<=n.length-_.length?(p=e,h=_,v=O,m=n.length-h.length,p.set(h,0),p.set(V.free(m),h.length),K(p,v,h.length+8+m),p):G(e,_,n,O)}},Y=q.getTraf,X=q.parseTfrf,Q=q.parseTfxd;function Z(e,t,n){var r,i,a,o=[];if(n){var u=Y(e);u?(a=X(u),i=Q(u)):v.a.warn("smooth: could not find traf atom")}if(i)r={time:i.time,duration:i.duration,timescale:t.timescale};else{var s=Math.min(.9*t.timescale,null!=t.duration?t.duration/4:.25),c=Object(b.a)(e);r=0<=c&&(null==t.duration||Math.abs(c-t.duration)<=s)?{time:t.time,duration:c,timescale:t.timescale}:{time:t.time,duration:t.duration,timescale:t.timescale}}if(a)for(var l=0;l<a.length;l++)o.push({time:a[l].time,duration:a[l].duration,timescale:t.timescale});return{nextSegments:o,segmentInfos:r}}var J=n(5),ee=n(57),te=q.createVideoInitSegment,ne=q.createAudioInitSegment;function re(e){var t,n=e.url,r=e.segment.range;return r&&(t={Range:Object(ee.a)(r)}),Object(d.a)({url:n,responseType:"arraybuffer",headers:t})}var ie=function(l){return function(e){var t=e.segment,n=e.representation,r=e.adaptation,i=e.period,a=e.manifest;if(t.isInit){if(!t.privateInfos||null==t.privateInfos.smoothInit)throw new Error("Smooth: Invalid segment format");var o,u=t.privateInfos.smoothInit,s=u.protection;switch(r.type){case"video":o=te(t.timescale,n.width||0,n.height||0,72,72,4,u.codecPrivateData||"",s&&s.keyId,s&&s.keySystems);break;case"audio":o=ne(t.timescale,u.channels||0,u.bitsPerSample||0,u.packetSize||0,u.samplingRate||0,u.codecPrivateData||"",s&&s.keyId,s&&s.keySystems);break;default:o=new Uint8Array(0)}return Object(j.a)({type:"data",value:{responseData:o}})}if(null==t.mediaURL)return Object(j.a)({type:"data",value:{responseData:null}});var c={adaptation:r,manifest:a,period:i,representation:n,segment:t,transport:"smooth",url:t.mediaURL};return l?J.a.create(function(t){var n=!1,r=!1,e=l(c,{reject:function(e){void 0===e&&(e={}),r||(n=!0,t.error(e))},resolve:function(e){r||(n=!0,t.next({type:"response",value:{responseData:e.data,size:e.size,duration:e.duration}}),t.complete())},fallback:function(){r=!0,re(c).subscribe(t)}});return function(){n||r||"function"!=typeof e||e()}}):re(c)}},ae=/(\.isml?)(\?token=\S+)?$/,oe=/\?token=(\S+)/;function ue(e,t){return t?e.replace(oe,"?token="+t):e.replace(oe,"")}var se=q.patchSegment,ce=q.getMdat,le=/\.wsx?(\?token=\S+)?/;function fe(e,t,n){v.a.debug("Smooth Parser: update segments informations.");for(var r=e.representations,i=0;i<r.length;i++){r[i].index._addSegments(t,n)}}t.default=function(s){void 0===s&&(s={});var c=f(s),o=ie(s.segmentLoader),e={customManifestLoader:s.manifestLoader,ignoreProgressEvents:!0},n=Object(h.a)(e),t={loader:function(e){var t=e.adaptation,n=e.manifest,r=e.period,i=e.representation,a=e.segment;return o({adaptation:t,manifest:n,period:r,representation:i,segment:a})},parser:function(e){var t=e.segment,n=e.response,r=e.adaptation,i=e.manifest,a=n.responseData;if(null==a)return Object(j.a)({segmentData:null,segmentInfos:null,segmentOffset:0});if(t.isInit){var o={timescale:t.timescale,time:-1,duration:0};return Object(j.a)({segmentData:a,segmentInfos:o,segmentOffset:0})}var u=a instanceof Uint8Array?a:new Uint8Array(a),s=Z(u,t,i.isLive),c=s.nextSegments,l=s.segmentInfos,f=se(u,l.time);return c&&fe(r,c,l),Object(j.a)({segmentData:f,segmentInfos:l,segmentOffset:0})}};return{manifest:{resolver:function(e){var t,n=e.url,r=(t=n.match(oe))&&t[1]||"";return(le.test(n)?(Object(p.a)("Giving WSX URL to loadVideo is deprecated. You should only give Manifest URLs."),Object(d.a)({url:ue(n,""),responseType:"document",ignoreProgressEvents:!0}).pipe(Object(i.a)(function(e){var t=e.value,n=t.responseData.getElementsByTagName("media")[0].getAttribute("src");if(!n)throw new Error("Invalid ISML");return n}))):Object(j.a)(n)).pipe(Object(i.a)(function(e){return{url:ue((t=e,ae.test(t)?(Object(p.a)("Giving a isml URL to loadVideo is deprecated. Please give the Manifest URL directly"),t.replace(ae,"$1/manifest$2")):t),r)};var t}))},loader:function(e){var t=e.url;return n(t)},parser:function(e){var t=e.response,n=e.url,r=null==t.url?n:t.url,i="string"==typeof t.responseData?(new DOMParser).parseFromString(t.responseData,"text/xml"):t.responseData,a=t.receivedTime,o=c(i,r,a),u=new l.a(o,{representationFilter:s.representationFilter,supplementaryImageTracks:s.supplementaryImageTracks,supplementaryTextTracks:s.supplementaryTextTracks});return Object(j.a)({manifest:u,url:r})}},audio:t,video:t,text:{loader:function(e){var t=e.segment,n=e.representation;if(t.isInit||null==t.mediaURL)return Object(j.a)({type:"data",value:{responseData:null}});var r,i=(r=n).mimeType&&0<=r.mimeType.indexOf("mp4")?"arraybuffer":"text";return Object(d.a)({url:t.mediaURL,responseType:i})},parser:function(e){var t,n,r=e.response,i=e.segment,a=e.representation,o=e.adaptation,u=e.manifest,s=o.language,c=a.mimeType,l=void 0===c?"":c,f=a.codec,d=void 0===f?"":f,p=r.responseData;if(null===p)return Object(j.a)({segmentData:null,segmentInfos:0<i.timescale?{duration:i.isInit?0:i.duration,time:i.isInit?-1:i.time,timescale:i.timescale}:null,segmentOffset:0});var h,v,m,b,g,y=null,_=0<=l.indexOf("mp4");if(_){var O=Z(t=new Uint8Array(p),i,u.isLive);n=O.nextSegments,h=(y=O.segmentInfos).time,v=null!=y.duration?y.time+y.duration:void 0,m=y.timescale}else{t=p;var E=i.time||0;h=E,v=null!=i.duration?E+i.duration:void 0,m=i.timescale}if(_){var w=d.toLowerCase();if("application/ttml+xml+mp4"===l||"stpp"===w||"stpp.ttml.im1t"===w)g="ttml";else{if("wvtt"!==w)throw new Error("could not find a text-track parser for the type "+l);g="vtt"}var T=ce(t);b=Object(N.a)(T)}else{switch(l){case"application/x-sami":case"application/smil":g="sami";break;case"application/ttml+xml":g="ttml";break;case"text/vtt":g="vtt"}if(!g){if("srt"!==d.toLowerCase())throw new Error("could not find a text-track parser for the type "+l);g="srt"}b=p}return null!=y&&n&&fe(o,n,y),Object(j.a)({segmentData:{type:g,data:b,language:s,timescale:m,start:h,end:v},segmentInfos:y,segmentOffset:h/m})}},image:{loader:function(e){var t=e.segment;return t.isInit||null==t.mediaURL?Object(j.a)({type:"data",value:{responseData:null}}):Object(d.a)({url:t.mediaURL,responseType:"arraybuffer"})},parser:function(e){var t=e.response,n=e.segment,r=t.responseData;if(null===r||null==u.a.imageParser)return Object(j.a)({segmentData:null,segmentInfos:0<n.timescale?{duration:n.isInit?0:n.duration,time:n.isInit?-1:n.time,timescale:n.timescale}:null,segmentOffset:0});var i=u.a.imageParser(new Uint8Array(r)),a=i.thumbs;return Object(j.a)({segmentData:{data:a,start:0,end:Number.MAX_VALUE,timescale:1,type:"bif"},segmentInfos:{time:0,duration:Number.MAX_VALUE,timescale:i.timescale},segmentOffset:0})}}}}},function(e,t,n){"use strict";n.r(t);var p=n(92),h=n(52);var v=n(101),g=n(12);function y(e,t,n){var r,i=["u","i","b"],a=e.nodeName.toLowerCase().split(".")[0];if(Object(g.a)(["u","i","b","c","#text"],a))if("#text"===a){var o=e.wholeText.split("\n");r=document.createElement("span");for(var u=0;u<o.length;u++)if(u&&r.appendChild(document.createElement("br")),0<o[u].length){var s=document.createTextNode(o[u]);r.appendChild(s)}}else{var c=e.nodeName.toLowerCase().split("."),l=[];if(c.forEach(function(e){-1!==n.indexOf(e)&&l.push(n.indexOf(e))}),0!==l.length){var f=document.createAttribute("style");l.forEach(function(e){t[e]&&(f.value+=t[e].styleContent)});var d=Object(g.a)(i,a)?a:"span";(r=document.createElement(d)).setAttributeNode(f)}else{var p=Object(g.a)(i,a)?a:"span";r=document.createElement(p)}for(var h=0;h<e.childNodes.length;h++){var v=y(e.childNodes[h],t,n);r.appendChild(v)}}else{r=document.createElement("span");for(var m=0;m<e.childNodes.length;m++){var b=y(e.childNodes[m],t,n);r.appendChild(b)}}return r}function m(e){var t=[],n=1,r=[];if(e.length<2)return[];if(e[1].match(/::cue {/))r.push({isGlobalStyle:!0}),n++;else for(var i;e[n]&&(i=e[n].match(/::cue\(\.?(.*?)\)(?:,| {)/));)r.push({className:i[1],isGlobalStyle:!1}),n++;for(var a="";e[n]&&!e[n].match(/}/)&&0!==e[n].length;)a+=e[n],n++;return r.forEach(function(e){t.push({className:e.className,isGlobalStyle:e.isGlobalStyle,styleContent:a.replace(/\s/g,"")})}),t}function b(e,t){var n=e.start,r=e.end,i=e.header,a=e.payload,o=document.createElement("div"),u=document.createAttribute("style");u.value="width:100%;height:100%;display:flex;flex-direction:column;justify-content:flex-end;align-items:center;",o.setAttributeNode(u);var s=document.createElement("p"),c=document.createAttribute("style");c.value="text-align:center",s.setAttributeNode(c);var l=document.createElement("span"),f=document.createAttribute("style");f.value="background-color:rgba(0,0,0,0.8);color:white;",l.setAttributeNode(f);var d=t.filter(function(e){return e.className===i&&!e.isGlobalStyle||e.isGlobalStyle}).map(function(e){return e.styleContent});return f.value+=d.join(),l.setAttributeNode(f),function(e,t){for(var n=t.map(function(e){return e.className}).filter(function(e){return null!=e}),r=e.replace(/<[0-9]{2}:[0-9]{2}.[0-9]{3}>/,"").replace(/<([u,i,b,c])(\..*?)?(?: .*?)?>(.*?)<\/\1>/g,"<$1$2>$3</$1$2>"),i=(new DOMParser).parseFromString(r,"text/html").body.childNodes,a=[],o=0;o<i.length;o++)a.push(y(i[o],t,n));return a}(a.join("\n"),t).forEach(function(e){l.appendChild(e)}),o.appendChild(s),s.appendChild(l),{start:n,end:r,element:o}}t.default=function(e,t){var n=e.split(/\r\n|\n|\r/g);if(!n.length)return[];var r=[],i=[];if(!n[0].match(/^WEBVTT( |\t|\n|\r|$)/))throw new Error("Can't parse WebVTT: Invalid File.");for(var a=Object(h.b)(n),o=function(e,t){for(var n=[],r=t;r<e.length;r++)if(Object(h.d)(e,r)){var i=r;for(r++;e[r];)r++;var a=e.slice(i,r);n.push(a)}else if(e[r])for(;e[r];)r++;return n}(n,a),u=Object(p.a)(n,a),s=0;s<o.length;s++){var c=m(o[s]);i.push.apply(i,c)}for(var l=0;l<u.length;l++){var f=Object(v.a)(u[l],t);if(null!=f){var d=b(f,i);d&&r.push(d)}}return r}},function(e,t,n){"use strict";n.r(t);var l=n(160),f=n(171),d=n(75),p=n(39),h=n(41),v=n(170),m=n(179),b=n(133),g=n(173),r=n(8),i=n(2),y=n(0),a=n(64),o=.2;function _(e,t){return Math.abs(e-t)<=o}function O(e,t){for(var n=0;n<e.length;n++){var r=e[n];if(t<r.end)return t>=r.start?e.slice(0,n):e.slice(0,n+1)}return e.slice()}function E(e,t){for(var n=0;n<e.length;n++){var r=e[n];if(t<r.end)return t>=r.start?e.slice(n+1,e.length):e.slice(n,e.length)}return[]}function w(e,t,n){var r=Math.max(e.start,t);return[{start:e.start,end:r,cues:O(e.cues,t)},{start:Math.min(n,e.end),end:e.end,cues:E(e.cues,n)}]}var T=function(){function e(){this._cuesBuffer=[]}var t=e.prototype;return t.get=function(e){for(var t=this._cuesBuffer,n=t.length-1;0<=n;n--)for(var r=t[n].cues,i=r.length-1;0<=i;i--){var a=r[i];if(e>=a.start)return e<a.end?a:void 0}},t.remove=function(e,t){for(var n=Math.max(e,t),r=this._cuesBuffer,i=r.length,a=0;a<i;a++)if(r[a].end>e){var o=r[a];if(o.start>=n)return;if(o.end>=n){var u=w(o,e,n),s=u[0],c=u[1];return this._cuesBuffer[a]=s,void r.splice(a+1,0,c)}o.cues=O(o.cues,e),o.end=Math.max(e,o.start);for(var l=a+1;l<i;l++){var f=r[a];if(n<=f.end)return r.splice(a+1,l-(a+1)),void(n>f.start&&(f.cues=E(f.cues,n),f.start=n))}return void r.splice(a+1,r.length-(a+1))}},t.insert=function(e,t,n){for(var r=this._cuesBuffer,i={start:t,end:n,cues:e},a=0;a<r.length;a++){var o=r[a];if(t<o.end){if(_(t,o.start)){if(_(n,o.end))return void(r[a]=i);if(n<o.end)return o.cues=E(o.cues,n),o.start=n,void r.splice(a,0,i);for(;r.splice(a,1),(o=r[a])&&n>o.end;);return!o||_(n,o.end)?void(r[a]=i):(o.cues=E(o.cues,n),o.start=n,void r.splice(a,0,i))}if(t<o.start)return n<o.start||(_(n,o.start)||(o.cues=E(o.cues,n)),o.start=n),void r.splice(a,0,i);if(n>o.end||_(n,o.end))return o.cues=O(o.cues,t),o.end=t,void r.splice(a+1,0,i);var u=w(o,t,n),s=u[0],c=u[1];return this._cuesBuffer[a]=s,r.splice(a+1,0,i),void r.splice(a+2,0,c)}}r.push(i)},e}(),j=n(10);var S=r.a.onEnded$,x=r.a.onSeeked$,A=r.a.onSeeking$,R=i.a.MAXIMUM_HTML_TEXT_TRACK_UPDATE_INTERVAL;function k(e,t){if(t)try{e.removeChild(t)}catch(e){y.a.warn("HTSB: Can't remove text track: not in the element.")}}var u=function(c){var e,t;function n(e,r){var i,t,n,a,o,u,s;return y.a.debug("HTSB: Creating html text track SourceBuffer"),(i=c.call(this)||this)._videoElement=e,i._textTrackElement=r,i._destroy$=new h.a,i._buffer=new T,i._currentElement=null,(t=i._videoElement,n=A(t),a=x(t),o=S(t),u=Object(l.a)(a,o),s=Object(f.a)(R).pipe(Object(v.a)(null)),u.pipe(Object(v.a)(null),Object(m.a)(Object(d.a)(s.pipe(Object(b.a)(!0),Object(g.a)(n)),Object(p.a)(!1))))).pipe(Object(g.a)(i._destroy$)).subscribe(function(e){if(!e)return k(r,i._currentElement),void(i._currentElement=null);var t=Math.max(i._videoElement.currentTime-R/2e3,0),n=i._buffer.get(t);if(!n)return k(r,i._currentElement),void(i._currentElement=null);i._currentElement!==n.element&&(k(r,i._currentElement),i._currentElement=n.element,r.appendChild(i._currentElement))}),i}t=c,(e=n).prototype=Object.create(t.prototype),(e.prototype.constructor=e).__proto__=t;var r=n.prototype;return r._append=function(e){y.a.debug("HTSB: Appending new html text tracks",e);var t=e.timescale,n=e.start,r=e.end,i=e.data,a=e.type,o=e.language;if(r&&r-n<=0)y.a.warn("HTSB: Invalid text track appended: the start time is inferior or equal to the end time.");else{var u=n/t,s=null!=r?r/t:void 0,c=function(e,t,n,r){y.a.debug("HTSB: Finding parser for html text tracks:",e);var i=j.a.htmlTextTracksParsers[e];if(!i)throw new Error("no parser found for the given text track");y.a.debug("HTSB: Parser found, parsing...");var a=i(t,n,r);return y.a.debug("HTTB: Parsed successfully!",a),a}(a,i,this.timestampOffset,o),l=u,f=null!=s?s:c[c.length-1].end;this._buffer.insert(c,l,f),this.buffered.insert(l,f)}},r._remove=function(e,t){y.a.debug("HTSB: Removing html text track data",e,t),this._buffer.remove(e,t),this.buffered.remove(e,t)},r._abort=function(){y.a.debug("HTSB: Aborting html text track SourceBuffer"),this._destroy$.next(),this._destroy$.complete(),k(this._textTrackElement,this._currentElement)},n}(a.a);t.default=u},function(e,t,n){"use strict";n.r(t);var r=n(7),S=n.n(r),x=n(11),A=n(93),R=n(63),k=n(28),I=n(50),c=n(106),h=n(18),b=["color","direction","display","fontFamily","fontSize","fontStyle","fontWeight","textDecoration","textOutline","unicodeBidi","visibility","wrapOption"];function T(e){var t;return null!=(t=h.b.exec(e))?"rgba("+parseInt(t[1],16)+","+parseInt(t[2],16)+","+parseInt(t[3],16)+","+parseInt(t[4],16)/255+")":null!=(t=h.a.exec(e))?"rgba("+parseInt(t[1]+t[1],16)+","+parseInt(t[2]+t[2],16)+","+parseInt(t[3]+t[3],16)+","+parseInt(t[4]+t[4],16)/255+")":e}function j(e,t){return"-1px -1px "+t+" "+e+",1px -1px "+t+" "+e+",-1px 1px "+t+" "+e+",1px 1px "+t+" "+e}function g(e,t,n){var r=document.createElement("span"),i=e.textContent||"";if(n){var a=i.trim();i=a=a.replace(/\s+/g," ")}return r.innerHTML=i,r.className="rxp-texttrack-span",function(e,t,n){var r=t.color;r&&(e.style.color=T(r));var i=t.backgroundColor;i&&(e.style.backgroundColor=T(i));var a=t.textOutline;if(a){var o=a.trim().replace(/\s+/g," ").split(" "),u=o.length;if(3===u){var s=T(o[0]),c=o[1];e.style.textShadow=j(s,c)}else if(r&&1===u){var l=o[0];e.style.textShadow=j(r,l)}else if(2===u){var f=/^[#A-Z]/i.test(o[0]);if(f!==/^[0-9]/.test(o[0]))if(f){var d=T(o[0]),p=o[1];e.style.textShadow=j(d,p)}else if(r){var h=o[0];e.style.textShadow=j(r,h)}}}var v=t.textDecoration;if(v)switch(v){case"noUnderline":case"noLineThrough":case"noOverline":e.style.textDecoration="none";break;case"lineThrough":e.style.textDecoration="line-through";break;default:e.style.textDecoration=v}var m=t.fontFamily;if(m)switch(m){case"proportionalSansSerif":e.style.fontFamily="Arial, Helvetica, Liberation Sans, sans-serif";break;case"monospaceSansSerif":case"sansSerif":e.style.fontFamily="sans-serif";break;case"monospaceSerif":case"default":e.style.fontFamily="Courier New, Liberation Mono, monospace";break;case"proportionalSerif":e.style.fontFamily="serif";break;default:e.style.fontFamily=m}var b=t.fontStyle;b&&(e.style.fontStyle=b);var g=t.fontWeight;g&&(e.style.fontWeight=g);var y=t.fontSize;y&&(e.style.fontSize=y);var _=t.direction;_&&(e.style.direction=_);var O=t.unicodeBidi;if(O)switch(O){case"bidiOverride":e.style.unicodeBidi="bidi-override";break;case"embed":e.style.unicodeBidi="embed";break;default:e.style.unicodeBidi="normal"}var E=t.visibility;E&&(e.style.visibility=E),"none"===t.display&&(e.style.display="none");var w=t.wrapOption;e.style.whiteSpace="noWrap"===w?n?"nowrap":"pre":n?"normal":"pre-wrap"}(r,t,n),r}function l(e,t,n,r,i,a){var o=Object(R.a)(e,"div"),u=document.createElement("DIV");if(u.className="rxp-texttrack-region",function(e,t){var n=t.extent;if(n){var r=h.c.exec(n);null!=r&&(e.style.width=r[1]+"%",e.style.height=r[2]+"%")}t.writingMode;var i=t.overflow;e.style.overflow=i||"hidden";var a=t.padding;a&&(e.style.padding=a);var o=t.origin;if(o){var u=h.c.exec(o);null!=u&&(e.style.position="relative",e.style.left=u[1]+"%",e.style.top=u[2]+"%")}var s=t.displayAlign;if(e.style.display="flex",e.style.flexDirection="column",s)switch(s){case"before":e.style.justifyContent="flex-start";break;case"center":e.style.justifyContent="center";break;case"after":e.style.justifyContent="flex-end"}var c=t.opacity;c&&(e.style.opacity=c);var l=t.visibility;l&&(e.style.visibility=l),"none"===t.display&&(e.style.display="none")}(u,i),t){var s=Object(k.a)(["backgroundColor"],[].concat(o,[t]),r,n).bodyBackgroundColor;s&&(u.style.backgroundColor=T(s))}var c=document.createElement("p");c.className="rxp-texttrack-p",function(e,t){var n=t.backgroundColor;n&&(e.style.backgroundColor=T(n));var r=t.lineHeight;r&&(e.style.lineHeight=r);var i=t.textAlign;if(i)switch(i){case"center":e.style.textAlign="center";break;case"left":case"start":e.style.textAlign="left";break;case"right":case"end":e.style.textAlign="right"}}(c,i);for(var v,m,l,f,d=(v=n,m=r,l=i,f=a,function e(t,n,r,i){for(var a=t.childNodes,o=[],u=0;u<a.length;u++){var s=a[u];if("#text"===s.nodeName){var c=Object(k.a)(["backgroundColor"],r,m,v).backgroundColor;c?n.backgroundColor=c:delete n.backgroundColor;var l=g(s,n,i);o.push(l)}else if("br"===s.nodeName){var f=document.createElement("BR");o.push(f)}else if("span"===s.nodeName&&s.nodeType===Node.ELEMENT_NODE&&0<s.childNodes.length){var d=s.getAttribute("xml:space"),p=d?"default"===d:i,h=S()({},n,Object(k.a)(b,[s],m,v));o.push.apply(o,e(s,h,[s].concat(r),p))}}return o}(e,S()({},l),[],f)),p=0;p<d.length;p++)c.appendChild(d[p]);return u.appendChild(c),u}function M(e,t,n,r,i,a,o,u){if(!e.hasAttribute("begin")&&!e.hasAttribute("end")&&/^\s*$/.test(e.textContent||""))return null;var s=Object(c.a)(e,o);return{start:s.start+t,end:s.end+t,element:l(e,i,r,n,a,u)}}var N=["backgroundColor","color","direction","display","displayAlign","extent","fontFamily","fontSize","fontStyle","fontWeight","lineHeight","opacity","origin","overflow","padding","textAlign","textDecoration","textOutline","unicodeBidi","visibility","wrapOption","writingMode"];t.default=function(e,t){var n=[],r=(new DOMParser).parseFromString(e,"text/xml");if(r){var i=r.getElementsByTagName("tt")[0];if(!i)throw new Error("invalid XML");for(var a=Object(I.a)(i),o=Object(I.c)(i),u=Object(I.b)(i),s=Object(I.d)(i),c=Object(A.a)(i),l=[],f=0;f<=o.length-1;f++){var d=o[f];if(d instanceof Element){var p=d.getAttribute("xml:id");null!==p&&l.push({id:p,style:Object(k.b)(d)})}}for(var h=[],v=0;v<=u.length-1;v++){var m=u[v];if(m instanceof Element){var b=m.getAttribute("xml:id");null!==b&&function(){var e=Object(k.b)(m),t=m.getAttribute("style");if(t){var n=Object(x.a)(l,function(e){return e.id===t});n&&(e=S()({},n.style,e))}h.push({id:b,style:e})}()}}for(var g=null!==a?Object(k.a)(N,[a],l,h):Object(k.a)(N,[],l,h),y="default"===(a?a.getAttribute("xml:space"):void 0)||"default"===c.spaceStyle,_=0;_<s.length;_++){var O=s[_];if(O instanceof Element){var E=Object(R.a)(O,"div"),w=S()({},g,Object(k.a)(N,[O].concat(E),l,h)),T=O.getAttribute("xml:space"),j=M(O,t,l,h,a,w,c,T?"default"===T:y);j&&n.push(j)}}}return n}},function(e,t,n){"use strict";n.r(t);var u=n(126),p=n(0),r=n(64),h=n(10);var i=function(o){var e,t;function n(e,t){var n;p.a.debug("NTSB: Creating native text track SourceBuffer"),n=o.call(this)||this;var r=Object(u.a)(e,t),i=r.track,a=r.trackElement;return n._videoElement=e,n._track=i,n._trackElement=a,n}t=o,(e=n).prototype=Object.create(t.prototype),(e.prototype.constructor=e).__proto__=t;var r=n.prototype;return r._append=function(e){p.a.debug("NTSB: Appending new native text tracks",e);var t=e.timescale,n=e.start,r=e.end,i=e.data,a=e.type,o=e.language;if(null!=r&&r-n<=0)p.a.warn("NTSB: Invalid subtitles appended");else{var u=n/t,s=null!=r?r/t:void 0,c=function(e,t,n,r){p.a.debug("NTSB: Finding parser for native text tracks:",e);var i=h.a.nativeTextTracksParsers[e];if(!i)throw new Error("no parser found for the given text track");p.a.debug("NTSB: Parser found, parsing...");var a=i(t,n,r);return p.a.debug("NTSB: Parsed successfully!",a),a}(a,i,this.timestampOffset,o);if(0<c.length){var l=c[0],f=this._track.cues;0<f.length&&l.startTime<f[f.length-1].startTime&&this._remove(l.startTime,1/0);for(var d=0;d<c.length;d++)this._track.addCue(c[d]);this.buffered.insert(u,null!=s?s:c[c.length-1].endTime)}else null!=s&&this.buffered.insert(u,s)}},r._remove=function(e,t){p.a.debug("NTSB: Removing native text track data",e,t);for(var n=this._track,r=n.cues,i=r.length-1;0<=i;i--){var a=r[i],o=a.startTime,u=a.endTime;e<=o&&o<=t&&u<=t&&n.removeCue(a)}this.buffered.remove(e,t)},r._abort=function(){p.a.debug("NTSB: Aborting native text track SourceBuffer");var e=this._trackElement,t=this._videoElement;if(e&&t&&t.hasChildNodes())try{t.removeChild(e)}catch(e){p.a.warn("NTSB: Can't remove track element from the video")}this._track&&(this._track.mode="disabled"),this._trackElement&&(this._trackElement.innerHTML="")},n}(r.a);t.default=i},function(e,t,n){"use strict";n.r(t);var a=n(0);var r=function(e){var t,n;function r(){return e.apply(this,arguments)||this}n=e,(t=r).prototype=Object.create(n.prototype),(t.prototype.constructor=t).__proto__=n;var i=r.prototype;return i._append=function(e){a.a.debug("ImageSourceBuffer: appending new data.");var t=e.start,n=e.end,r=e.timescale;this.buffered.insert(t/r,null==n?Number.MAX_VALUE:n/r)},i._remove=function(e,t){a.a.info("ImageSourceBuffer: ignored image data remove order",e,t)},i._abort=function(){a.a.debug("ImageSourceBuffer: aborting image SourceBuffer")},r}(n(64).a);t.default=r},function(e,t,n){"use strict";n.r(t);var r=n(7),S=n.n(r),d=n(74),p=n(112),x=n(11),A=n(93),R=n(63),k=n(28),h=n(106),I=n(50),v=n(18),M=["extent","writingMode","origin","align"],m={left:"start",center:"center",right:"end",start:"start",end:"end"},b={left:"line-left",center:"center",right:"line-right"};function N(e,t,n,r,i,a,o){if(!e.hasAttribute("begin")&&!e.hasAttribute("end")&&/^\s*$/.test(e.textContent||""))return null;var u=Object(h.a)(e,a),s=u.start,c=u.end,l=function e(t,n){for(var r=t.childNodes,i="",a=0;a<r.length;a++){var o=r[a];if("#text"===o.nodeName){var u=o.textContent||"";if(n){var s=u.trim();s=s.replace(/\s+/g," "),u=s}var c=u.replace(/&|\u0026/g,"&amp;").replace(/<|\u003C/g,"&lt;").replace(/>|\u2265/g,"&gt;").replace(/\u200E/g,"&lrm;").replace(/\u200F/g,"&rlm;").replace(/\u00A0/g,"&nbsp;");i+=c}else if("br"===o.nodeName)i+="\n";else if("span"===o.nodeName&&o.nodeType===Node.ELEMENT_NODE&&0<o.childNodes.length){var l=o.getAttribute("xml:space"),f=l?"default"===l:n;i+=e(o,f)}}return i}(e,o),f=Object(d.a)(s+t,c+t,l);return f?(Object(p.a)(f)&&function(e,t){var n=t.extent;if(n){var r=v.c.exec(n);null!=r&&(e.size=Number(r[1]))}switch(t.writingMode){case"tb":case"tblr":e.vertical="lr";break;case"tbrl":e.vertical="rl"}var i=t.origin;if(i)v.c.exec(i);var a=t.align;a&&("center"===(e.align=a)&&("center"!==e.align&&(e.align="middle"),e.position="auto"),e.positionAlign=b[a]||"",e.lineAlign=m[a]||"")}(f,i),f):null}var i=function(e,t){var n=[],r=(new DOMParser).parseFromString(e,"text/xml");if(r){var i=r.getElementsByTagName("tt")[0];if(!i)throw new Error("invalid XML");for(var a=Object(I.a)(i),o=Object(I.c)(i),u=Object(I.b)(i),s=Object(I.d)(i),c=Object(A.a)(i),l=[],f=0;f<=o.length-1;f++){var d=o[f];if(d instanceof Element){var p=d.getAttribute("xml:id");null!=p&&l.push({id:p,style:Object(k.b)(d)})}}for(var h=[],v=0;v<=u.length-1;v++){var m=u[v];if(m instanceof Element){var b=m.getAttribute("xml:id");null!=b&&function(){var e=Object(k.b)(m),t=m.getAttribute("style");if(t){var n=Object(x.a)(l,function(e){return e.id===t});n&&(e=S()({},n.style,e))}h.push({id:b,style:e})}()}}for(var g=a?Object(k.a)(M,[a],l,h):Object(k.a)(M,[],l,h),y="default"===(a?a.getAttribute("xml:space"):void 0)||"default"===c.spaceStyle,_=0;_<s.length;_++){var O=s[_];if(O instanceof Element){var E=Object(R.a)(O,"div"),w=S()({},g,Object(k.a)(M,[O].concat(E),l,h)),T=O.getAttribute("xml:space"),j=N(O,t,0,0,w,c,T?"default"===T:y);j&&n.push(j)}}}return n};t.default=i},function(e,t,n){"use strict";n.d(t,"a",function(){return s});var i=n(5),a=n(45),o=n(51),u=n(32);Object.prototype.toString;function s(e,n,r,t){return Object(o.a)(r)&&(t=r,r=void 0),t?s(e,n,r).pipe(Object(u.a)(function(e){return Object(a.a)(e)?t.apply(void 0,e):t(e)})):new i.a(function(t){!function e(t,n,r,i,a){var o;if(h=t,h&&"function"==typeof h.addEventListener&&"function"==typeof h.removeEventListener){var u=t;t.addEventListener(n,r,a),o=function(){return u.removeEventListener(n,r,a)}}else if(p=t,p&&"function"==typeof p.on&&"function"==typeof p.off){var s=t;t.on(n,r),o=function(){return s.off(n,r)}}else if(d=t,d&&"function"==typeof d.addListener&&"function"==typeof d.removeListener){var c=t;t.addListener(n,r),o=function(){return c.removeListener(n,r)}}else{if(!t||!t.length)throw new TypeError("Invalid event target");for(var l=0,f=t.length;l<f;l++)e(t[l],n,r,i,a)}var d;var p;var h;i.add(o)}(e,n,function(e){1<arguments.length?t.next(Array.prototype.slice.call(arguments)):t.next(e)},t,r)})}},function(e,t,n){"use strict";n.d(t,"a",function(){return r});var a=n(5),o=n(34),u=n(105),s=n(35);function r(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var n=Number.POSITIVE_INFINITY,r=null,i=e[e.length-1];return Object(o.a)(i)?(r=e.pop(),1<e.length&&"number"==typeof e[e.length-1]&&(n=e.pop())):"number"==typeof i&&(n=e.pop()),null===r&&1===e.length&&e[0]instanceof a.a?e[0]:Object(u.a)(n)(Object(s.a)(e,r))}},function(e,t,n){"use strict";n.d(t,"a",function(){return a});var r=n(3),i=n(9);function a(t,n){return function(e){return e.lift(new o(t,n))}}var o=function(){function e(e,t){this.predicate=e,this.thisArg=t}return e.prototype.call=function(e,t){return t.subscribe(new u(e,this.predicate,this.thisArg))},e}(),u=function(i){function e(e,t,n){var r=i.call(this,e)||this;return r.predicate=t,r.thisArg=n,r.count=0,r}return r.a(e,i),e.prototype._next=function(e){var t;try{t=this.predicate.call(this.thisArg,e,this.count++)}catch(e){return void this.destination.error(e)}t&&this.destination.next(e)},e}(i.a)},function(e,t,n){"use strict";n.d(t,"a",function(){return u});var r=n(3),i=n(9),a=n(66),o=n(29);function u(t,n){return function(e){return e.lift(new s(t,n))}}var s=function(){function e(e,t){this.compare=e,this.keySelector=t}return e.prototype.call=function(e,t){return t.subscribe(new c(e,this.compare,this.keySelector))},e}(),c=function(i){function e(e,t,n){var r=i.call(this,e)||this;return r.keySelector=n,r.hasKey=!1,"function"==typeof t&&(r.compare=t),r}return r.a(e,i),e.prototype.compare=function(e,t){return e===t},e.prototype._next=function(e){var t=e;if(this.keySelector&&(t=Object(a.a)(this.keySelector)(e))===o.a)return this.destination.error(o.a.e);var n=!1;if(this.hasKey){if((n=Object(a.a)(this.compare)(this.key,t))===o.a)return this.destination.error(o.a.e)}else this.hasKey=!0;!1===Boolean(n)&&(this.key=t,this.destination.next(e))},e}(i.a)},function(e,t,n){"use strict";n.d(t,"a",function(){return o});var r=n(5),i=n(43),a=n(38);function o(n){return new r.a(function(t){var e;try{e=n()}catch(e){return void t.error(e)}return(e?Object(i.a)(e):Object(a.b)()).subscribe(t)})}},function(e,t,n){"use strict";n.d(t,"a",function(){return u});var r=n(3),i=n(24),a=n(47),o=n(23);function u(r){return function(e){var t=new s(r),n=e.lift(t);return t.caught=n}}var s=function(){function e(e){this.selector=e}return e.prototype.call=function(e,t){return t.subscribe(new c(e,this.selector,this.caught))},e}(),c=function(i){function e(e,t,n){var r=i.call(this,e)||this;return r.selector=t,r.caught=n,r}return r.a(e,i),e.prototype.error=function(e){if(!this.isStopped){var t=void 0;try{t=this.selector(e,this.caught)}catch(e){return void i.prototype.error.call(this,e)}this._unsubscribeAndRecycle();var n=new a.a(this,void 0,void 0);this.add(n),Object(o.a)(this,t,void 0,void 0,n)}},e}(i.a)},function(e,t,n){"use strict";n.d(t,"a",function(){return u});var i=n(3),r=n(9),a=n(96),o=n(38);function u(t){return function(e){return 0===t?Object(o.b)():e.lift(new s(t))}}var s=function(){function e(e){if(this.total=e,this.total<0)throw new a.a}return e.prototype.call=function(e,t){return t.subscribe(new c(e,this.total))},e}(),c=function(r){function e(e,t){var n=r.call(this,e)||this;return n.total=t,n.count=0,n}return i.a(e,r),e.prototype._next=function(e){var t=this.total,n=++this.count;n<=t&&(this.destination.next(e),n===t&&(this.destination.complete(),this.unsubscribe()))},e}(r.a)},function(e,t,n){"use strict";n.d(t,"a",function(){return u});var r=n(62),i=n(67),a=n(41);function o(){return new a.a}function u(){return function(e){return Object(i.a)()(Object(r.a)(o)(e))}}},,,,function(e,t,n){"use strict";n.d(t,"a",function(){return r});var i=n(35),a=n(86),o=n(38),u=n(75),s=n(34);function r(){for(var r=[],e=0;e<arguments.length;e++)r[e]=arguments[e];return function(e){var t=r[r.length-1];Object(s.a)(t)?r.pop():t=null;var n=r.length;return 1!==n||t?0<n?Object(u.a)(Object(i.a)(r,t),e):Object(u.a)(Object(o.b)(t),e):Object(u.a)(Object(a.a)(r[0]),e)}}},function(e,t,n){"use strict";n.d(t,"a",function(){return o});var r=n(5),i=n(40),a=n(72);function o(t,n){return void 0===t&&(t=0),void 0===n&&(n=i.a),(!Object(a.a)(t)||t<0)&&(t=0),n&&"function"==typeof n.schedule||(n=i.a),new r.a(function(e){return e.add(n.schedule(u,t,{subscriber:e,counter:0,period:t})),e})}function u(e){var t=e.subscriber,n=e.counter,r=e.period;t.next(n),this.schedule({subscriber:t,counter:n+1,period:r},r)}},function(e,t,n){"use strict";n.d(t,"a",function(){return i});var r=n(44);function i(e,t,n){return void 0===n&&(n=Number.POSITIVE_INFINITY),"function"==typeof t?Object(r.a)(function(){return e},t,n):("number"==typeof t&&(n=t),Object(r.a)(function(){return e},n))}},function(e,t,n){"use strict";n.d(t,"a",function(){return o});var r=n(3),i=n(24),a=n(23);function o(t){return function(e){return e.lift(new u(t))}}var u=function(){function e(e){this.notifier=e}return e.prototype.call=function(e,t){var n=new s(e),r=Object(a.a)(n,this.notifier);return r&&!n.seenValue?(n.add(r),t.subscribe(n)):n},e}(),s=function(n){function e(e){var t=n.call(this,e)||this;return t.seenValue=!1,t}return r.a(e,n),e.prototype.notifyNext=function(e,t,n,r,i){this.seenValue=!0,this.complete()},e.prototype.notifyComplete=function(){},e}(i.a)},function(e,t,n){"use strict";n.d(t,"a",function(){return l});var i=n(3),a=n(34),o=n(45),r=n(24),u=n(23),s=n(35),c={};function l(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var n=null,r=null;return Object(a.a)(e[e.length-1])&&(r=e.pop()),"function"==typeof e[e.length-1]&&(n=e.pop()),1===e.length&&Object(o.a)(e[0])&&(e=e[0]),Object(s.a)(e,r).lift(new f(n))}var f=function(){function e(e){this.resultSelector=e}return e.prototype.call=function(e,t){return t.subscribe(new d(e,this.resultSelector))},e}(),d=function(r){function e(e,t){var n=r.call(this,e)||this;return n.resultSelector=t,n.active=0,n.values=[],n.observables=[],n}return i.a(e,r),e.prototype._next=function(e){this.values.push(c),this.observables.push(e)},e.prototype._complete=function(){var e=this.observables,t=e.length;if(0===t)this.destination.complete();else{this.active=t,this.toRespond=t;for(var n=0;n<t;n++){var r=e[n];this.add(Object(u.a)(this,r,r,n))}}},e.prototype.notifyComplete=function(e){0==(this.active-=1)&&this.destination.complete()},e.prototype.notifyNext=function(e,t,n,r,i){var a=this.values,o=a[n],u=this.toRespond?o===c?--this.toRespond:this.toRespond:0;a[n]=t,0===u&&(this.resultSelector?this._tryResultSelector(a):this.destination.next(a.slice()))},e.prototype._tryResultSelector=function(e){var t;try{t=this.resultSelector.apply(this,e)}catch(e){return void this.destination.error(e)}this.destination.next(t)},e}(r.a)},function(e,t,n){"use strict";n.d(t,"a",function(){return i});var r=n(20);function i(e){return!!e&&!!e.type&&0<=Object.keys(r.b).indexOf(e.type)}},function(e,t,n){"use strict";n.d(t,"a",function(){return r});var a=n(5),o=n(40),u=n(72),s=n(34);function r(n,e,r){void 0===n&&(n=0);var i=-1;return Object(u.a)(e)?i=Number(e)<1?1:Number(e):Object(s.a)(e)&&(r=e),Object(s.a)(r)||(r=o.a),new a.a(function(e){var t=Object(u.a)(n)?n:+n-r.now();return r.schedule(c,t,{index:0,period:i,subscriber:e})})}function c(e){var t=e.index,n=e.period,r=e.subscriber;if(r.next(t),!r.closed){if(-1===n)return r.complete();e.index=t+1,this.schedule(e,n)}}},function(e,t,n){"use strict";function o(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function i(e){var r="function"==typeof Map?new Map:void 0;return(i=function(e){if(null===e||(t=e,-1===Function.toString.call(t).indexOf("[native code]")))return e;var t;if("function"!=typeof e)throw new TypeError("Super expression must either be null or a function");if(void 0!==r){if(r.has(e))return r.get(e);r.set(e,n)}function n(){return a(e,arguments,s(this).constructor)}return n.prototype=Object.create(e.prototype,{constructor:{value:n,enumerable:!1,writable:!0,configurable:!0}}),u(n,e)})(e)}function a(e,t,n){return(a=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(e){return!1}}()?Reflect.construct:function(e,t,n){var r=[null];r.push.apply(r,t);var i=new(Function.bind.apply(e,r));return n&&u(i,n.prototype),i}).apply(null,arguments)}function u(e,t){return(u=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function s(e){return(s=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}n.d(t,"a",function(){return r});var r=function(i){var e,t;function a(e,t,n){var r;return r=i.call(this)||this,Object.setPrototypeOf(o(o(r)),a.prototype),r.name="RequestError",r.url=t,r.xhr=e,r.status=e.status,r.type=n,r.message=n,r}return t=i,(e=a).prototype=Object.create(t.prototype),(e.prototype.constructor=e).__proto__=t,a}(i(Error))},function(e,t,n){"use strict";n.d(t,"b",function(){return u}),n.d(t,"d",function(){return i}),n.d(t,"a",function(){return o}),n.d(t,"c",function(){return r});var a=n(0),m=(n(13),n(1)),b=n(109);function g(e,t){for(var n=e.length,r=0;r+8<n;){var i=Object(m.c)(e,r);if(i<=0)return a.a.error("ISOBMFF: size out of range"),-1;if(Object(m.c)(e,r+4)===t)return r+i<=n?r:(a.a.error("ISOBMFF: box out of range"),-1);r+=i}return-1}function r(e,t){var n=g(e,1936286840);if(-1===n)return null;var r=t,i=Object(m.c)(e,n),a=n+4+4,o=e[a];a+=8;var u,s=Object(m.c)(e,a);if(a+=4,0===o)u=Object(m.c)(e,a),a+=4,r+=Object(m.c)(e,a)+i,a+=4;else{if(1!==o)return null;u=Object(m.d)(e,a),a+=8,r+=Object(m.d)(e,a)+i,a+=8}var c=[];a+=2;var l=Object(m.a)(e,a);for(a+=2;0<=--l;){var f=Object(m.c)(e,a);a+=4;var d=2147483647&f;if(1===(2147483648&f)>>>31)throw new Error("not implemented");var p=Object(m.c)(e,a);a+=4,a+=4,c.push({time:u,duration:p,count:0,timescale:s,range:[r,r+d-1]}),u+=p,r+=d}return c}function i(e){var t=Object(b.c)(e);if(!t)return-1;var n=g(t,1952867444);if(-1===n)return-1;var r=n+4+4,i=t[r];return r+=4,1<i?-1:i?Object(m.d)(t,r):Object(m.c)(t,r)}function o(e){var t=Object(b.c)(e);if(!t)return-1;var n=g(t,1953658222);if(-1===n)return-1;var r=n+4+4,i=t[r];if(r+=1,1<i)return-1;var a=Object(m.b)(t,r);r+=3;var o=256&a,u=0;if(!o)return 0<=(u=function(e){var t=g(e,1952868452);if(-1===t)return-1;var n=t+4+4+1,r=Object(m.b)(e,n);return 8&r?(n+=4,1&r&&(n+=8),2&r&&(n+=4),Object(m.c)(e,n)):-1}(t))?u:-1;var s=1&a,c=4&a,l=512&a,f=1024&a,d=2048&a,p=Object(m.c)(t,r);r+=4,s&&(r+=4),c&&(r+=4);for(var h=p,v=0;h--;)o?(v+=Object(m.c)(t,r),r+=4):v+=u,l&&(r+=4),f&&(r+=4),d&&(r+=4);return v}function u(e){var t=Object(b.b)(e);if(!t)return-1;var n=g(t,1835296868);if(-1===n)return-1;var r=n+4+4,i=t[r];return r+=4,1===i?(r+=16,Object(m.c)(t,r)):0===i?(r+=8,Object(m.c)(t,r)):-1}},function(e,t,n){"use strict";n.d(t,"a",function(){return i});var r=n(117);function i(e,t){return t?Object(r.a)(function(){return e},t):Object(r.a)(function(){return e})}}])});